time:
2014-01-27T16:10:38Z
class:
comments:
[DOCS] unified index settings info and added warmers section in create index docs

time:
2014-01-27T15:37:09Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Percolator response now always returns the `matches` key.

Closes #4881

time:
2014-01-27T14:42:56Z
class:
comments:
Add note regarding groups value

Instances are filtered on group name, not group id

time:
2014-01-27T14:18:32Z
class:
src/main/java/org/elasticsearch/index/query/SimpleQueryStringFlag.java
comments:
Add missing PHRASE flag for simple_query_string

Closes #4911

time:
2014-01-27T14:17:22Z
class:
comments:
Correct version number in README.md

Correct the version number when automatic instance-level security support became available.

time:
2014-01-27T13:50:04Z
class:
comments:
[TEST] Added REST tests for create index api

time:
2014-01-27T13:50:04Z
class:
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
comments:
Improved CreateIndexRequest and CreateIndexRequestBuilder javadocs

time:
2014-01-27T13:50:04Z
class:
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
comments:
[TEST] Improved IndexAliasesTests

more assertAcked, removed TODO and needless sleep

time:
2014-01-27T12:22:49Z
class:
src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
comments:
move msearch to use atomic array instead of synchronize

time:
2014-01-27T11:04:57Z
class:
src/main/java/org/elasticsearch/cluster/ClusterState.java
comments:
Cluster state toXContent serialization only returns needed data

In order to make sure, that only the requested data is returned to the client,
a couple of fixes have been applied in the ClusterState.toXContent() method.
Also some tests were added to the yaml test suite

Closes #4885

time:
2014-01-27T10:33:41Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
src/main/java/org/elasticsearch/action/index/IndexRequest.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Bulk: Failed preparsing does not fail whole bulk request

If a preparsing of the source is needed (due to mapping configuration,
which extracts the routing/id value from the source) and the source is not
valid JSON, then the whole bulk request is failed instead of a single
BulkRequest.

This commit ensures, that a broken JSON request is not forwarded to the
destination shard and creates an appropriate BulkItemResponse, which
includes a failure.

This also implied changing the BulkItemResponse serialization, because one
cannot be sure anymore, if a response includes an ID, in case it was not
specified and could not be extracted from the JSON.

Closes #4745

time:
2014-01-27T10:28:32Z
class:
comments:
Revert mget yaml test changes

Relative to #4892

time:
2014-01-27T10:25:39Z
class:
comments:
Revert mget yaml test changes

Relative to #4892

time:
2014-01-27T10:05:50Z
class:
src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
comments:
mget REST API should support source parameter

As stated in documentation, we should support `?source=` parameter in mget REST operations.

This is how to reproduce it:

```sh
curl -XDELETE "http://localhost:9200/test"

curl -XPOST "http://localhost:9200/test/type/1?refresh" -d'{
    "foo": "bar"
}'

curl -XPOST "http://localhost:9200/test/type/_mget" -d'{
    "ids": ["1"]
}'

curl -XGET "http://localhost:9200/test/type/_mget?source=%7B%22ids%22%3A%20%5B%221%22%5D%7D"
```

Closes #4892.

time:
2014-01-27T09:42:07Z
class:
src/test/java/org/elasticsearch/index/mapper/copyto/CopyToMapperIntegrationTests.java
comments:
Fix test to use at least one document

time:
2014-01-27T08:46:30Z
class:
comments:
Update README (chmod pk / certificate)

time:
2014-01-25T16:27:14Z
class:
comments:
update link to Hadoop Snapshot/Restore plugin

time:
2014-01-25T14:47:58Z
class:
src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java
comments:
Don't throttle the translog stage of recovery
After copying the index files (which are throttled), we currently throttle the translog as well. The translog phase3 part is performed under a lock, so its better not to throttle it at all, and move it as fast as possible.

time:
2014-01-25T11:34:15Z
class:
comments:
[DOCS] Updated the breaking changes for the fields param

Closes #4888

time:
2014-01-24T23:59:48Z
class:
comments:
fix if hook failure when running under jenkins

Local mode modification done previously faulty.  env[‘WORKSPACE’ is not
the sufficient discriminator to see if script is running under Jenkins.
  This fails on the Jenkins parent jobs since those type of jobs don’t
have WORKSPACE set.

time:
2014-01-24T22:24:45Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
comments:
_cat/allocation: disk.avail can be zero, if so, want to show 100%

Closes #4835

time:
2014-01-24T22:24:45Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
comments:
_cat/allocation: Guaranteed to have at least zero shards

time:
2014-01-24T21:18:05Z
class:
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
Install SecurityManager inside ElasticsearchTestCase for easier randomization

We currently run always with SecurityManager installed. To make sure we
work also without we should randomly swap it out ie. run without the
security manager.

time:
2014-01-24T17:16:11Z
class:
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Add tera and peta to RestTable.renderValue()

Closes #4871

time:
2014-01-24T16:27:03Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Normalize cat headers, add aliases

Closes #4852.

time:
2014-01-24T16:27:02Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Remove duplicate cache columns

time:
2014-01-24T15:12:52Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingResponse.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedResponse.java
src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
comments:
Removed redundant version checks in transport serialization (#4731 leftover)

time:
2014-01-24T15:05:02Z
class:
src/test/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestTests.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java
comments:
Removed put/delete warmer tests that were meant to test that the serialization was bw compatible after adding support for acks

time:
2014-01-24T14:59:07Z
class:
src/main/java/org/elasticsearch/search/warmer/IndexWarmersMetaData.java
comments:
Removed duplicated registration of warmers as custom metadata type

Already done in a static block within IndexMetaData

time:
2014-01-24T14:44:40Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/ShardOptimizeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ShardValidateQueryRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java
src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
src/main/java/org/elasticsearch/action/count/ShardCountRequest.java
src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/action/update/UpdateRequest.java
src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeMappingRefreshAction.java
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/index/engine/Segment.java
src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
src/main/java/org/elasticsearch/search/suggest/Suggest.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestion.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestTests.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java
comments:
Removed old serialization logic (<= 1.0-RC1) in readFrom and writeTo methods.

time:
2014-01-24T13:32:50Z
class:
comments:
Re-Sort config/names

time:
2014-01-24T12:48:43Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
comments:
Use different field names based on the data type in aggregations tests.

Tests fail once in a while because of a ClassCastException at the mvel level.
We suspect that this happens because a script that is JIT-ed on a specific
data type cannot later be used with another one, but we didn't manage to
reproduce in our development environments, so let's try to change the field
names to see if this error keeps occurring.

time:
2014-01-24T11:11:29Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Throw exception if `cluster.name` is specified in TestCluster node settings

We rely on the `cluster.name` setting to be the same across all nodes
and transport clients etc. If a node setting contains `cluster.name`
the test might not work if a random transport client is swapped
in. Passing such a configuration should result in an exception since
it's clearly an illegal state.

time:
2014-01-24T11:03:00Z
class:
src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterCachingTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
comments:
Added more unit like test that verifies that has_child is never cached even if wrapped by another filter.

time:
2014-01-23T20:09:19Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
comments:
fixed the reduce of InternalGeoHashGrid when executing on a single shard

time:
2014-01-23T19:40:16Z
class:
src/main/java/org/elasticsearch/http/HttpServer.java
src/test/java/org/elasticsearch/plugin/SitePluginTests.java
comments:
Serving _site plugins do not pick up on index.html for sub directories

If one asks for `http://es:9200/_plugin/PLUGIN_NAME/` and the the plugin's _site directory contains an index.html file, it will be correctly served.

This is not the case for sub directories: a _site/folder/index.html is not served when requesting  `http://es:9200/_plugin/PLUGIN_NAME/folder/` but one gets a 403 Forbidden response as if trying to browse the folder.

Closes #4845.

time:
2014-01-23T19:35:44Z
class:
comments:
[DOCS] More assertive statement about requiring `query` in _count, etc

time:
2014-01-23T18:37:08Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/ShardReduceTests.java
comments:
fixed license header indentation

time:
2014-01-23T18:19:55Z
class:
src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
src/main/java/org/elasticsearch/search/aggregations/bucket/SingleBucketAggregation.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoHashGridTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/ShardReduceTests.java
comments:
Fixed an issue where there are sug aggregations executing on a single shard, the reduce call was not propagated properly down the agg hierarchy.

Closes #4843

time:
2014-01-23T15:29:07Z
class:
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
src/main/java/org/elasticsearch/search/dfs/DfsPhase.java
src/main/java/org/elasticsearch/search/fetch/explain/ExplainFetchSubPhase.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/main/java/org/elasticsearch/search/query/QueryPhase.java
src/main/java/org/elasticsearch/search/rescore/QueryRescorer.java
src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java
src/main/java/org/elasticsearch/search/rescore/RescoreParseElement.java
src/main/java/org/elasticsearch/search/rescore/RescorePhase.java
src/main/java/org/elasticsearch/search/rescore/Rescorer.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
comments:
Support multiple rescores

Detects if rescores arrive as an array instead of a plain object.  If so
then parse each element of the array as a separate rescore to be executed
one after another.  It looks like this:
   "rescore" : [ {
      "window_size" : 100,
      "query" : {
         "rescore_query" : {
            "match" : {
               "field1" : {
                  "query" : "the quick brown",
                  "type" : "phrase",
                  "slop" : 2
               }
            }
         },
         "query_weight" : 0.7,
         "rescore_query_weight" : 1.2
      }
   }, {
      "window_size" : 10,
      "query" : {
         "score_mode": "multiply",
         "rescore_query" : {
            "function_score" : {
               "script_score": {
                  "script": "log10(doc['numeric'].value + 2)"
               }
            }
         }
      }
   } ]

Rescores as a single object are still supported.

Closes #4748

time:
2014-01-23T15:24:48Z
class:
comments:
Documentation for score_mode

Closes #4742

time:
2014-01-23T15:10:57Z
class:
comments:
Move provided lucene-expression jar below the test-framework

Having a dep that refrences lucene-core before the test framework
confuses some runners.

time:
2014-01-23T14:57:49Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
comments:
Make shard balancing deterministic if weights are identical

It happens to be the case that the iteration order of a HashMaps
keyset might be different across runs. This can cause undeterministic
results in shard balancing if weights are identical and multiple shards
of the same index are eligable for relocation. This commit adds
a tie-breaker based on the shard ID to prioritise the lowest shard
ID. This also makes `AddIncrementallyTests#testAddNodesAndIndices`
reproducible.

Closes #4867

time:
2014-01-23T14:39:48Z
class:
src/test/java/org/elasticsearch/river/RiverTests.java
comments:
Parallelized rivers creation in RiverTests#testMultipleRiversStart

Rivers are now registered concurrently from separate threads, one per river.

time:
2014-01-23T14:01:28Z
class:
src/main/java/org/elasticsearch/river/RiversService.java
comments:
Made sure rivers _meta documents are retrieved via get with preference _primary

Closes #4864

time:
2014-01-23T13:49:16Z
class:
src/test/java/org/elasticsearch/test/rest/junit/RestTestSuiteRunner.java
comments:
Remove listeners after suite completes in RestTestSuiteRunner

We need to remove the reproduce info printer after the suite
returns otherwise it might print a bogus line if a subsequent
non-rest test fails. The `RunNotifier` is used across suites in
the same JVM and the listener sticks to it.

time:
2014-01-23T13:23:41Z
class:
comments:
Mark 'lucene-expression' as 'provided' in pom.xml

We currently pull in the lucene-expression module that is referenced
by lucene-suggest. Yet, we don't make use of this dependency at all
and it pulls in a bunch of unshaded libs like `antlr` and `asm` which
are pretty common in other projects. We should exclude this
dependency since we don't use it at all and it causes problems
when Elasticsearch is used as a node client. (see #4858)

If we mark the dependency as provided it won't be included in the
distribution.

Closes #4859
Closes #4858

time:
2014-01-23T09:52:13Z
class:
comments:
[DOCS] various docs fixes

Removed unused misc.asciidoc file
Added plugins directory to directory layout
Fixed transport.tcp.connect_timeout value to match the code found in NetworkService.TcpSettings
Clarified that phrase query does not preserve order of terms
Clarified merge page
Added instructions on how to build documentation to docs/README

time:
2014-01-23T09:49:23Z
class:
src/main/java/org/elasticsearch/action/search/ClearScrollRequest.java
comments:
ClearScrollRequest should set a type parameter

Since ActionRequest requires a bounded type parameter.

time:
2014-01-23T03:08:54Z
class:
comments:
[DOCS] Add an example of creating S3 repository

time:
2014-01-22T22:26:16Z
class:
src/main/java/org/elasticsearch/river/routing/RiversRouter.java
comments:
Added log line to better debug where rivers will get allocated

time:
2014-01-22T13:56:40Z
class:
src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterCachingTests.java
comments:
Add unit tests for NoCache filter infrastructure

If a filter implements `NoCacheFilter` itself and it's
parents should never be cached even if `_cache` is set
to `true` on the parents explicitly.

time:
2014-01-22T13:40:31Z
class:
comments:
[SPEC] Updated docs URLs to point to master

time:
2014-01-22T13:26:28Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramBuilder.java
src/test/java/org/elasticsearch/search/aggregations/bucket/MinDocCountTests.java
comments:
Added missing support for min_doc_count in DateHistogramBuilder

Closes: #4848

time:
2014-01-22T13:10:26Z
class:
comments:
[DOCS] Moved termvector and mtermvectors from search to docs

time:
2014-01-22T12:35:52Z
class:
src/main/java/org/elasticsearch/index/query/HasChildFilterBuilder.java
src/main/java/org/elasticsearch/index/query/HasParentFilterBuilder.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Added test that verifies that p/c filters never cache.
Made the has_parent & has_child filterbuilder's cache options a noop as well, like it is in the related parsers.

Relates to #4757

time:
2014-01-22T12:30:09Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeTests.java
comments:
Add a basic test for date math in date ranges.

time:
2014-01-22T12:28:08Z
class:
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Never cache a range filter that uses the `now` date expression.

Closes #4846

time:
2014-01-22T11:08:13Z
class:
comments:
[DOCS]: Fix added version termvectors.asciidoc

time:
2014-01-22T11:02:37Z
class:
comments:
[DOCS]: fixed added / coming tags in docs

time:
2014-01-22T11:02:37Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Replace Version checks against 1.0 with 1.0RC2
Nice catch, thanks @s1monw !


time:
2014-01-22T10:29:29Z
class:
src/test/java/org/elasticsearch/VersionTests.java
comments:
Added tests that ensures all version are in the Version#fromId(int) switch statement

time:
2014-01-22T10:29:28Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Add 1.0.0RC2 to the version table

time:
2014-01-22T10:26:22Z
class:
comments:
[DOCS] `coming` instead of `added` for copy_to feature.

time:
2014-01-22T10:16:41Z
class:
comments:
[DOCS] annotated the multi fields and copy_to feature with the right version.

time:
2014-01-22T10:05:55Z
class:
src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorFactories.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
comments:
Make all aggregators reader-context-aware.

This removes the overhead of polling a Bytes/Double/Long-Values instance in
every call to collect.

Additionally, the AggregationsCollector has been changed to wrap a simple array
instead of an ArrayList.

Close #4841

time:
2014-01-22T10:05:10Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
comments:
Terms aggregations: make size=0 return all terms.

Terms aggregations return up to `size` terms, so up to now, the way to get all
matching terms back was to set `size` to an arbitrary high number that would be
larger than the number of unique terms.

Terms aggregators already made sure to not allocate memory based on the `size`
parameter so this commit mostly consists in making `0` an alias for the
maximum integer value in the TermsParser.

Close #4837

time:
2014-01-22T09:05:58Z
class:
comments:
[DOCS] Moved multi fields documentation into the core-types page
Removed docs about setting inheriting (was never added)
Made mapping samples formatting similar as other ones.

time:
2014-01-21T22:51:06Z
class:
src/main/java/org/elasticsearch/index/query/SimpleQueryStringParser.java
comments:
Accept `defaultOperator` in addition to `default_operator` for simple_query_string

time:
2014-01-21T16:39:01Z
class:
src/main/java/org/elasticsearch/common/rounding/Rounding.java
src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
comments:
HistogramAggregator: Finer-grained rounding.

The way `HistogramAggregator` works is that for every value, it is going to
compute a rounded value, that basically looks like
`(value / interval) * interval` and use it as a key in a hash table to
aggregate counts.

However, the exact rounded value is not needed yet at that stage, all we need
is a value that uniquely identifies the bucket, such as `(value / interval)`.
We could only multiply with `interval` again when building the bucket: this way
the second step is only performed once per bucket instead of once per value.

Although this looks like a micro optimization for the case that was just
decribed, it makes more sense with the date rounding implementations that we
have that are more CPU-intensive.

Close #4800

time:
2014-01-21T16:31:12Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
comments:
Throw an ElasticsearchIllegalArgumentException when allocating on a non-data node.

Today, it would fail with a NullPointerException.

Close #4833

time:
2014-01-21T16:24:56Z
class:
src/main/java/org/elasticsearch/search/fetch/fielddata/FieldDataFieldsContext.java
src/main/java/org/elasticsearch/search/fetch/fielddata/FieldDataFieldsFetchSubPhase.java
src/main/java/org/elasticsearch/search/fetch/fielddata/FieldDataFieldsParseElement.java
comments:
Fix formatting of license header

time:
2014-01-21T16:13:32Z
class:
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/index/get/ShardGetService.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/search/SearchModule.java
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
src/main/java/org/elasticsearch/search/fetch/FieldsParseElement.java
src/main/java/org/elasticsearch/search/fetch/fielddata/FieldDataFieldsContext.java
src/main/java/org/elasticsearch/search/fetch/fielddata/FieldDataFieldsFetchSubPhase.java
src/main/java/org/elasticsearch/search/fetch/fielddata/FieldDataFieldsParseElement.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
comments:
Add the ability to retrieve fields from field data

Adds a new FetchSubPhase, FieldDataFieldsFetchSubPhase, which loads the
field data cache for a field and returns an array of values for the
field.

Also removes `doc['<field>']` and `_source.<field>` workaround no longer
needed in field name resolving.

Closes #4492

time:
2014-01-21T16:07:39Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Move to [2.0] snap

time:
2014-01-21T15:31:51Z
class:
comments:
[SPEC] Specify bulk format for body in bulk, msearch, mpercolate
Thank you!


time:
2014-01-21T15:31:50Z
class:
comments:
[TEST] Added newline at end of percolate tests

time:
2014-01-21T15:31:50Z
class:
comments:
[SPEC] Renamed termvectors.* to termvector and mtermvectors
and fixed the YAML syntax errors

time:
2014-01-21T14:55:59Z
class:
comments:
Document `index.shard.check_on_startup`.

time:
2014-01-21T14:26:03Z
class:
comments:
upgrade to guava 16.0
also fixes #4830

time:
2014-01-21T13:31:14Z
class:
src/test/java/org/elasticsearch/indices/fielddata/breaker/CircuitBreakerServiceTests.java
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/client/RandomizingClient.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
SearchType randomization in integration tests.

Issue #4754 showed that using DFS_QUERY_THEN_FETCH instead of QUERY_THEN_FETCH
might expose interesting bugs.

Close #4793

time:
2014-01-21T12:55:58Z
class:
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
src/main/java/org/elasticsearch/cluster/settings/Validator.java
src/main/java/org/elasticsearch/common/unit/MemorySizeValue.java
src/main/java/org/elasticsearch/indices/fielddata/breaker/InternalCircuitBreakerService.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/CircuitBreakerServiceTests.java
comments:
Allow to configure indices.fielddata.breaker.limit with a ratio of the heap size.

Close #4616

time:
2014-01-21T10:05:11Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
src/main/java/org/elasticsearch/common/xcontent/ToXContent.java
src/main/java/org/elasticsearch/rest/RestRequest.java
src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
src/main/java/org/elasticsearch/rest/action/get/RestGetAction.java
src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestPercolateAction.java
src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
comments:
Deprecated ToXContent.Params#paramAsBooleanOptional in favour of paramAsBoolean

Closes #4817

time:
2014-01-21T09:52:32Z
class:
comments:
[DOCS] Added multi fields link to mapping page.

time:
2014-01-21T09:35:52Z
class:
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
comments:
Deprecated use of partial fields in Java API, was already deprecated in the docs for the search API

Closes #4118

time:
2014-01-21T09:03:25Z
class:
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequest.java
src/main/java/org/elasticsearch/rest/action/termvector/RestMultiTermVectorsAction.java
comments:
[SPEC,TEST,FIX] add spec and tests for termvector api and fix inconsistencies

- index and type were not read from the uri with the _mtermvectors api
- ids were not read from the uri parameters with the _mtermvectors api

time:
2014-01-21T08:31:45Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
comments:
Only refresh id_cache if the parent field is active.

time:
2014-01-20T21:40:26Z
class:
src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeReadOperationAction.java
src/main/java/org/elasticsearch/tribe/TribeService.java
src/test/java/org/elasticsearch/tribe/TribeTests.java
comments:
add internal force local flag, used by tribe node
tribe node to set it to true so all master read operations will automatically execute on the local tribe node

time:
2014-01-20T21:32:36Z
class:
src/main/java/org/elasticsearch/rest/action/percolate/RestPercolateAction.java
comments:
Removed redundant statements.

time:
2014-01-20T18:32:50Z
class:
comments:
Fixed typo

time:
2014-01-20T17:56:32Z
class:
comments:
[SPEC] Fix cardinality of the repository parameter in get snapshot action

time:
2014-01-20T17:18:27Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/test/java/org/elasticsearch/indices/IndicesOptionsTests.java
comments:
[TESTS] Added percolator rest tests.

time:
2014-01-20T17:18:27Z
class:
comments:
[SPECS] Updated percolator specs.

time:
2014-01-20T17:05:05Z
class:
src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
comments:
Ignore empty config paths

time:
2014-01-20T16:56:39Z
class:
src/main/java/org/elasticsearch/river/routing/RiversRouter.java
src/test/java/org/elasticsearch/river/RiverTests.java
comments:
River does not start when using config/templates files

From elasticsearch 0.90.6, when you have templates files defined in `config/templates` dir, rivers don't start anymore.

Steps to reproduce:

Create `config/templates/default.json`:

```javascript
{
  default:
  {
    "template" : "*",
    "mappings" : {
      "_default_" : {
      }
    }
  }
}
```

Start a dummy river:

```sh
curl -XPUT 'localhost:9200/_river/my_river/_meta' -d '{ "type" : "dummy" }'
```

It gives:

```
[2014-01-01 22:08:38,151][INFO ][cluster.metadata         ] [Forge] [_river] creating index, cause [auto(index api)], shards [1]/[1], mappings [_default_]
[2014-01-01 22:08:38,239][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:38,245][INFO ][cluster.metadata         ] [Forge] [_river] update_mapping [my_river] (dynamic)
[2014-01-01 22:08:38,250][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:39,244][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:39,252][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:40,246][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:40,254][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:41,246][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:41,255][INFO ][river.routing            ] [Forge] no river _meta document found, retrying in 1000 ms
[2014-01-01 22:08:42,249][WARN ][river.routing            ] [Forge] no river _meta document found after 5 attempts
[2014-01-01 22:08:42,257][WARN ][river.routing            ] [Forge] no river _meta document found after 5 attempts
```

With elasticsearch 0.90.2 or with no template file in `config/templates` dir, it gives:

```
[2014-01-01 22:22:32,096][INFO ][cluster.metadata         ] [Forge] [_river] creating index, cause [auto(index api)], shards [1]/[1], mappings []
[2014-01-01 22:22:32,221][INFO ][cluster.metadata         ] [Forge] [_river] update_mapping [my_river] (dynamic)
[2014-01-01 22:22:32,228][INFO ][river.dummy              ] [Forge] [dummy][my_river] create
[2014-01-01 22:22:32,228][INFO ][river.dummy              ] [Forge] [dummy][my_river] start
[2014-01-01 22:22:32,234][INFO ][cluster.metadata         ] [Forge] [_river] update_mapping [my_river] (dynamic)
```

Closes #4577.
Closes #4656.

time:
2014-01-20T16:52:25Z
class:
comments:
Added setup task that clears the test template before running exists_* tests
@spenceralger This breaks my tests, currently. In other places, we use `ignore: 404`, not `[404]`. I'm wondering if this notation is intentional, or a typo?

//cc @clintongormley @HonzaKral @polyfractal 

I was under the impression that the ignore param was supposed to be an array or single status code. In my implementation the entire hash is sent as params to the API method, and therefore this still works.

According to what we agreed, `ignore` is supposed to accept a single value or an array of values, so this line should be fine.

Allright, thanks!


time:
2014-01-20T15:44:33Z
class:
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ParseContext.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/test/java/org/elasticsearch/index/mapper/copyto/CopyToMapperIntegrationTests.java
src/test/java/org/elasticsearch/index/mapper/copyto/CopyToMapperTests.java
src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Initial implementation of custom _all field

Closes #4520

time:
2014-01-20T15:23:37Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/BytesRefHash.java
src/test/java/org/elasticsearch/cache/recycler/MockPageCacheRecycler.java
src/test/java/org/elasticsearch/search/aggregations/bucket/BytesRefHashTests.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
comments:
Add page tracking to MockPageCacheRecycler.

This found an issue in BytesRefHash that forgot to release the start offsets.

Close #4814

time:
2014-01-20T15:15:30Z
class:
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
comments:
Make StringFieldMapper.toXContent aware of defaults for not_analyzed fields.

StringFieldMapper.toXContent uses the defaults for analyzed fields in order to
know which options to add to the builder. This means that if the field is not
analyzed and has norms enabled, it will omit to emit `norms.enabled: true`.
Parsing the mapping again will result in a StringFieldMapper that has norms
disabled.

The same fix applies to index options.

Close #4760

time:
2014-01-20T15:13:58Z
class:
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
Return a conflict when trying to enable/disable norms.

Close #4761

time:
2014-01-20T15:08:57Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Return `MatchNoDocsQuery` if query string is emtpy

Closes #3952

time:
2014-01-20T14:40:40Z
class:
src/main/java/org/elasticsearch/common/xcontent/ToXContent.java
comments:
Follow-up of #4808, same fix applied to ToXContent.MapParams

time:
2014-01-20T14:31:54Z
class:
src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
comments:
Fix logging on immediate exit on start

If elasticsearch was started in the foreground an immediate exit on startup
led to logging in the logfile, where as when starting in the background,
an immediate exit logged to stdout.

Closes #4805

time:
2014-01-20T13:27:35Z
class:
src/main/java/org/elasticsearch/rest/RestRequest.java
comments:
Accept the same boolean values in RestRequest

Added `no` as a possible value to `paramBooleanAsOptional`, also reused existing code from `Booleans.parseBoolean`

Closes #4808

time:
2014-01-20T12:25:16Z
class:
comments:
[TEST] Added missing \n at end of YAML files, quoted * and fixed indentation

time:
2014-01-20T12:16:04Z
class:
comments:
[TEST] Added missing newline at end of YAML test file

time:
2014-01-20T11:53:55Z
class:
src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
comments:
master_timeout parameter is now taken into account when calling cluster pending tasks api through the REST layer

Closes #4806

time:
2014-01-20T11:35:48Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/TransportGetRepositoriesAction.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/BaseAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/TransportGetSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplatesAction.java
src/main/java/org/elasticsearch/action/support/master/MasterNodeReadOperationRequest.java
src/main/java/org/elasticsearch/action/support/master/MasterNodeReadOperationRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeReadOperationAction.java
src/main/java/org/elasticsearch/action/support/master/info/ClusterInfoRequest.java
src/main/java/org/elasticsearch/action/support/master/info/ClusterInfoRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/info/TransportClusterInfoAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/get/RestGetRepositoriesAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/indices/RestIndicesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/head/RestHeadIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
comments:
Added base Request class for read operations that usually happen on the master but can be executed locally.
Added base TransportAction class for master read operations that execute locally or not depending on the request class (local flag).

Added support for local flag where missing, in a backwards compatible manner:
     - IndicesExistsRequest
     - GetAliasesRequest (get alias api, aliases exist api)
     - TypesExistsRequest
     - GetIndexTemplatesRequest (get template, template exists)
     - GetSettingsRequest
     - GetRepositoriesRequest
     - PendingClusterTasks

 Added parsing of the local flag where missing in Rest*Action.

 Updated SPEC adding local flag param where missing and added REST tests that contain use of the local flag where it was just added.

Closes #3345

time:
2014-01-20T11:14:17Z
class:
comments:
Reference docs fixes

* Make it clearer that `aggs` is an allowed synomym
  for the `aggregations` key
* Fix broken example in for datehistogram, `1.5M` is
  not an allowed interval
* Make use of colon before examples consistent
* Fix typos

time:
2014-01-20T11:10:43Z
class:
src/test/java/org/elasticsearch/test/rest/client/RestClient.java
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
comments:
[TEST] Better fix for missing create spec

create is a shortcut to index with op_type=create that the clients support

time:
2014-01-20T10:56:27Z
class:
src/test/java/org/elasticsearch/index/search/child/ParentConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentQueryTests.java
comments:
Fix test bug: test expects at least one child document.

time:
2014-01-20T10:51:23Z
class:
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
comments:
[TEST] Added create api (hardcoded) to REST tests suite as it has no spec but it's just a variation of the index api

time:
2014-01-20T10:51:08Z
class:
comments:
Documentation typo.

time:
2014-01-20T10:49:52Z
class:
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldsIntegrationTests.java
comments:
[TESTS] Mapping update might get applied before the first document is indexed on replica, so it is better not to check if the new field isn't available before re-indexing first document.

time:
2014-01-20T10:27:58Z
class:
src/main/java/org/elasticsearch/common/lucene/all/AllEntries.java
src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
fix IndexOutOfBoundsException on _all field without tokens and keyword analyzer

fix AllEntries to only compute boost when there are actually some Entries available for the _all field

Closes #4771

time:
2014-01-20T10:14:11Z
class:
comments:
[SPEC] Various API fixes
Including:
* change some string params to list
* make some params or bodies required
* removed incorrect URLs
* removed incorrect params
* Fixed name of pending_tasks

time:
2014-01-20T10:14:11Z
class:
comments:
[SPEC] Removed create.json
Create is a special API that is most simply and safely
implemented by calling the index() api with op_type
set to true.

time:
2014-01-20T10:08:29Z
class:
src/main/java/org/elasticsearch/index/search/child/CustomQueryWrappingFilter.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Consume the entire weight and pre compute the DocIdSets for all segments instead of keeping the weight around and build a DocIdSet when a segment is being processed. This fixes issues where the has_child / has_parent filter produce no results or errors on subsequent scan requests.

Also made CustomQueryWrappingFilter implement Releasable in order to cleanup the pre-computed DocIdSets.

Closes #4703

time:
2014-01-20T09:54:09Z
class:
src/main/java/org/elasticsearch/index/search/child/CustomQueryWrappingFilter.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Made sure that any filter that wraps a p/c filter (has_child & has_parent) either directly or indirectly will never be cached by making CustomQueryWrappingFilter extend from NoCacheFilter.

Closes #4757

time:
2014-01-20T09:45:13Z
class:
src/main/java/org/elasticsearch/common/lucene/search/NoCacheFilter.java
src/main/java/org/elasticsearch/index/query/QueryParseContext.java
comments:
Added no-cache infrastucture the the filter cache.

During query parsing if a filter is encountered that extends from NoCacheFilter then the filter will not be given to the filter cache (also not wrapped in FilterCacheFilterWrapper).
Also if a filter directly or indirectly wraps a NoCacheFilter then that filter will also not be cached.

Relates to #4757

time:
2014-01-20T08:23:00Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
comments:
[DOCS] Added documentation for CAT Aliases API

Added asciidoc. Added new lines in java class.

time:
2014-01-20T00:34:12Z
class:
comments:
[DOCS] Fixed file:/// URL for installing plugins

time:
2014-01-18T19:06:55Z
class:
src/test/java/org/elasticsearch/action/admin/HotThreadsTest.java
comments:
Remove unnecessary optimize call that destabelizes test

time:
2014-01-18T09:40:46Z
class:
comments:
[SPEC] Removed empty paths from close and delete index apis

Although the empty paths are still registered in the java RestActions, that is only to return a meaningful error in case the index is not provided.
Index/indices are now mandatory.

time:
2014-01-17T21:54:07Z
class:
comments:
[SPEC] path without {index} is not allowed for indices.open api

time:
2014-01-17T21:29:27Z
class:
src/test/java/org/elasticsearch/benchmark/search/aggregations/HistogramAggregationSearchBenchmark.java
comments:
Fix HistogramAggregationSearchBenchmark.

time:
2014-01-17T21:06:22Z
class:
comments:
Add documentation for transport.publish_port

time:
2014-01-17T21:06:22Z
class:
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
comments:
Add transport.publish_port setting

Add transport.publish_port setting to allow users to specify the port
other cluster members should use when connecting to an instance. This
is needed for systems such as OpenShift, where cluster communication
needs to use a publicly accessibly proxy port, because the normal port
(9300) is bound to a private loopback IP address.

time:
2014-01-17T20:54:20Z
class:
comments:
Merge pull request #4792 from mrsolo/master

build randomization, modify how local mode is run

time:
2014-01-17T20:52:22Z
class:
comments:
modify how local mode is run

1) create dummy directory structure with JDK6 and JDK7 when running
local mode
2) move prop.txt from ‘/var/tmp’ to ENV[‘PWD’] when running local mode

time:
2014-01-17T18:03:31Z
class:
src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
comments:
apply line ending fix only on Windows
fix for #4785

time:
2014-01-17T17:05:07Z
class:
src/test/java/org/elasticsearch/test/rest/spec/RestApi.java
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
comments:
[SPEC] Removed _source endpoint from get api spec, as the get_source is a different api already

Also removed custom code that was required in the REST tests due to this.

time:
2014-01-17T16:14:19Z
class:
src/main/java/org/elasticsearch/monitor/jvm/HotThreads.java
src/test/java/org/elasticsearch/action/admin/HotThreadsTest.java
comments:
Check ThreadInfo[] for null element if thread are not alive.

If a thread is not alive getting ThreadMXBean#getThreadInfo(long[], int)
places null elemnents in the returned array which are not repected
in the HotTheards API.

Closes #4775

time:
2014-01-17T15:41:19Z
class:
src/test/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
comments:
[TEST] fixed error message in REST tests runner

time:
2014-01-17T14:39:42Z
class:
src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
comments:
Removed double masterNodeTimeout set in RestPutRepositoryAction

time:
2014-01-17T14:38:25Z
class:
comments:
[SPEC] removing deprecated include/exclude for get_source

_source_include/_source_exclude should be used instead

time:
2014-01-17T14:37:23Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
comments:
Use millis for joda DateTimeFormatter.print()

Fixes #4782.

time:
2014-01-17T14:34:42Z
class:
comments:
[SPEC] Added missing body object in snapshot apis

time:
2014-01-17T14:15:10Z
class:
src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java
comments:
Add SecurityManger / policy when running tests.

This commit adds a security manager to the test JVMs
that prevents mainly writing files outside of the JVMs
current test directory.

time:
2014-01-17T13:46:48Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/main/java/org/elasticsearch/index/mapper/Mapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/index/mapper/MapperTestUtils.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Remove `omit_term_freq_and_positions` for new indices

`omit_term_freq_and_positions` was deprecated in `0.20` and
is not documented anymore. We should reject indices that are
created with this option in the future.

Closes #4722

time:
2014-01-17T13:13:26Z
class:
src/test/java/org/apache/lucene/search/postingshighlight/XPostingsHighlighterTests.java
src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
src/test/java/org/elasticsearch/action/termvector/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/action/termvector/GetTermVectorTests.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/benchmark/scripts/score/BasicScriptBenchmark.java
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/UpdateSettingsValidationTests.java
src/test/java/org/elasticsearch/cluster/ack/AckClusterUpdateSettingsTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/metadata/MappingMetaDataParserTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/shards/ClusterSearchShardsTests.java
src/test/java/org/elasticsearch/common/geo/ShapeBuilderTests.java
src/test/java/org/elasticsearch/common/util/SlicedDoubleListTests.java
src/test/java/org/elasticsearch/common/util/SlicedLongListTests.java
src/test/java/org/elasticsearch/common/util/SlicedObjectListTests.java
src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java
src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
src/test/java/org/elasticsearch/consistencylevel/WriteConsistencyLevelTests.java
src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/LocalGatewayIndexStateTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/engine/internal/InternalEngineTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractStringFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamic/DynamicMappingTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
src/test/java/org/elasticsearch/index/search/child/ParentQueryTests.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/CircuitBreakerServiceTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
src/test/java/org/elasticsearch/indices/state/CloseIndexDisableCloseAllTests.java
src/test/java/org/elasticsearch/indices/state/SimpleIndexStateTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/recovery/RelocationTests.java
src/test/java/org/elasticsearch/routing/AliasResolveRoutingTests.java
src/test/java/org/elasticsearch/routing/AliasRoutingTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/script/IndexLookupTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/NestedTests.java
src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresTests.java
src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/indicesboost/SimpleIndicesBoostSearchTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchGeoAssertions.java
src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
src/test/java/org/elasticsearch/transport/netty/SimpleNettyTransportTests.java
src/test/java/org/elasticsearch/tribe/TribeTests.java
src/test/java/org/elasticsearch/update/UpdateTests.java
comments:
Cleanup tests - using assert method instead of assert keyword

time:
2014-01-17T10:58:44Z
class:
comments:
[SPEC] Created snapshot.* and nodes.* namespaces

Moved node_info, node_stats, shutdown and hot_threads into nodes.*
Moved snapshot and repository APIs into snapshot.*

time:
2014-01-17T10:44:30Z
class:
comments:
Remove the "-f" script argument from the documentation

Closes #4778.

time:
2014-01-16T21:09:48Z
class:
comments:
[SPEC] Added missing cat endpoints. count and recovery
And added missing qs params to health and indices.

time:
2014-01-16T20:59:37Z
class:
src/test/java/org/elasticsearch/test/rest/junit/RestTestSuiteRunner.java
comments:
[TEST] Wipe templates is now done in a single call using wildcards (compared to cluster state + delete each template)

time:
2014-01-16T20:17:29Z
class:
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
comments:
[TEST] Removed TODO and custom code now that ping and info are two different apis in the REST spec

time:
2014-01-16T20:09:56Z
class:
src/test/java/org/elasticsearch/test/rest/client/RestClient.java
src/test/java/org/elasticsearch/test/rest/junit/RestTestSuiteRunner.java
src/test/java/org/elasticsearch/test/rest/spec/RestApi.java
src/test/java/org/elasticsearch/test/rest/spec/RestApiParser.java
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
src/test/java/org/elasticsearch/test/rest/test/RestApiParserTests.java
comments:
[TEST] Added params validation according to REST spec and check whether body is supported or required

time:
2014-01-16T20:09:56Z
class:
src/test/java/org/elasticsearch/test/rest/section/RestTestSuite.java
comments:
[TEST] Replaced File.separator with '/' as REST test suites can be loaded from classpath, where '/' is needed

time:
2014-01-16T20:09:55Z
class:
src/test/java/org/elasticsearch/test/rest/junit/RestTestSuiteRunner.java
src/test/java/org/elasticsearch/test/rest/parser/RestTestSuiteParser.java
src/test/java/org/elasticsearch/test/rest/section/RestTestSuite.java
src/test/java/org/elasticsearch/test/rest/section/TestSection.java
src/test/java/org/elasticsearch/test/rest/test/RestTestParserTests.java
comments:
[TEST] Added check: test section names must be unique in the same REST test suite

Fixed also three duplicates found

time:
2014-01-16T20:09:55Z
class:
src/test/java/org/elasticsearch/test/rest/junit/DescriptionHelper.java
src/test/java/org/elasticsearch/test/rest/section/RestTestSuite.java
src/test/java/org/elasticsearch/test/rest/support/FileUtils.java
src/test/java/org/elasticsearch/test/rest/test/FileUtilsTests.java
comments:
[TEST] Left '.' as it is in REST suites and sections titles (was previously replaced with '_')

With JUnit up to 4.10 there's no way to distinguish between what's shown in IDEs and test ids that need to be unique. A test Description is identified by just a string, that needs to be unique and is shown by IDEs. IDEs have slightly different behaviours when it comes to showing tests and suites titles. Some IDE (e.g. IntelliJ) strips the description on '.', which is why the '.' was replaced in the first place, in order to obtain the same behaviour on all IDEs. On the other hand the information printed out by RestReproduceInfoPrinter was wrong as the file path contained a '_' instead of a '.', which made the string to reproduce a failure useless in some cases. At the end of the day it seems better to just keep the dots and accept slightly different behaviours that are IDE dependent.

time:
2014-01-16T18:54:25Z
class:
comments:
[SPEC] Fixed bad name in ping.json

time:
2014-01-16T18:43:58Z
class:
comments:
[SPEC] Fixed cluster.get_repository spec
Badly named endpoint

time:
2014-01-16T18:43:58Z
class:
comments:
[SPEC] Fixed cat.* spec files - were missing the endpoints

time:
2014-01-16T18:43:58Z
class:
comments:
[TEST] Fixed mget test which used deprecated refresh flag

time:
2014-01-16T17:38:38Z
class:
comments:
Merge pull request #4714 from mrsolo/features/thirdparty

third party library license information extractor for logstash

time:
2014-01-16T17:35:51Z
class:
comments:
Merge pull request #4747 from mrsolo/features/test_randomization

Add randomization logic for assert.  Tests will have 10% chance running with assertion disabled.

time:
2014-01-16T16:12:39Z
class:
comments:
[SPEC] Fixed file name, missing .json

time:
2014-01-16T16:07:47Z
class:
comments:
[SPEC] Separated info.json into info and ping.json (GET vs HEAD)
+1! was among my TODOs :)


time:
2014-01-16T16:06:03Z
class:
comments:
[SPEC] Moved the cat API into its own namespace and added missing qs params

time:
2014-01-16T15:32:39Z
class:
comments:
[SPEC] Renamed snapshot/restore apis

time:
2014-01-16T15:14:25Z
class:
comments:
RPMs: Add timeout to shutdown with KILL signal

If the thread pools of an elasticsearch node cannot be shutdown
immediately, a wait of 10 seconds is added. This clashes with the
RPM scripts, as by default the init functions wait for 3 seconds
for a service to shutdown before a KILL signal is sent, resulting
in an unclean shutdown - not from an elasticsearch point of view,
but from init system point of view, as some lock files are left
around.

In order to prevent this the init script as well as the systemd
configuration now feature the same timeout than the debian package,
which is 20 seconds.

The await statement, which causes the 10 second delay can be found in
InternalNode.close()

time:
2014-01-16T14:33:09Z
class:
comments:
[SPEC] Fixed bad JSON in indices.open

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Added indices.exists_template.json

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Added local to indices.get_mapping and indices.get_field_mapping

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Added force to indices.refresh

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Removed refresh from indices.flush and indices.optimize

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Added empty path to indices.open and indices.close

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Removed percolate from update

time:
2014-01-16T14:29:50Z
class:
comments:
[SPEC] Added timeout, master_timeout to cluster.get_settings and cluster.reroute

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Removed percolate from index.json

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added _source, _source_include, _source_exclude to get_source

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added version, version_type to get and get_source

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added cluster.pending_tasks.json

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added cluster.stats.json

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added cluster.repositories.* and cluster.snapshots.*

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added cat.json

time:
2014-01-16T14:29:49Z
class:
comments:
[SPEC] Added the routing and timeout params to bulk

time:
2014-01-16T12:19:51Z
class:
comments:
[DOCS] Fixed typo in frontends.asciidoc

time:
2014-01-16T11:42:02Z
class:
comments:
[SPEC] Added human flag to:
* cluster.node_info
* cluster.node_stats
* indices.segments
* indices.stats
* indices.status

time:
2014-01-16T11:22:05Z
class:
comments:
[DOCS] Tidied up asciidoc for migration page

time:
2014-01-16T11:01:39Z
class:
comments:
[DOCS] updated json responses after #4310 and #4480

 - Removed "ok": true from response examples
 - Added "created" flag to index response examples
 - Replaced exists flag with found in delete response examples

time:
2014-01-16T10:44:46Z
class:
comments:
[DOCS] made it clearer that the _version is incremented by all write operations (deletes included)

time:
2014-01-16T09:28:38Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
move to [1.0.0] SNAP

time:
2014-01-16T09:26:48Z
class:
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Fixed test bug, was using value that wasn't generated.

time:
2014-01-16T08:43:56Z
class:
comments:
Added note to release script to announce on ML
cool thx alex


time:
2014-01-16T00:27:46Z
class:
comments:
assert randomization

add randomization to disable assert, 10% chance that test will run with
tests.assertion.disabled=org.elasticsearch

time:
2014-01-15T23:55:48Z
class:
src/main/java/org/elasticsearch/Version.java
src/main/java/org/elasticsearch/action/ActionFuture.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/TransportGetSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/cluster/metadata/SnapshotMetaData.java
src/main/java/org/elasticsearch/common/Strings.java
src/main/java/org/elasticsearch/common/util/CollectionUtils.java
src/main/java/org/elasticsearch/common/util/concurrent/EsAbortPolicy.java
src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/indices/TypeMissingException.java
src/main/java/org/elasticsearch/rest/RestRequest.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/delete/RestDeleteMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
src/main/java/org/elasticsearch/rest/action/support/RestXContentBuilder.java
src/main/java/org/elasticsearch/search/warmer/IndexWarmerMissingException.java
src/main/java/org/elasticsearch/snapshots/RestoreService.java
src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
src/main/java/org/elasticsearch/transport/PlainTransportFuture.java
src/main/java/org/elasticsearch/tribe/TribeService.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestTests.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
src/test/java/org/elasticsearch/common/breaker/MemoryCircuitBreakerTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentMapValuesTests.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
src/test/java/org/elasticsearch/indices/IndicesOptionsTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/operateAllIndices/DestructiveOperationsIntegrationTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Merge pull request #1 from elasticsearch/master

sync with es/es

time:
2014-01-15T22:46:26Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T22:37:44Z
class:
comments:
prepare release elasticsearch-mapper-attachments-2.0.0.RC1

time:
2014-01-15T22:37:43Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
comments:
Update to elasticsearch 1.0.0.RC1

Related to #48.

time:
2014-01-15T18:54:57Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:54:45Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:54:34Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:53:42Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:52:47Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:52:35Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:52:23Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:52:10Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:51:46Z
class:
comments:
prepare for next development iteration

time:
2014-01-15T18:13:16Z
class:
comments:
[DOCS] Add documentation for URL repository

time:
2014-01-15T18:07:03Z
class:
comments:
prepare release elasticsearch-cloud-gce-2.0.0.RC1

time:
2014-01-15T17:47:41Z
class:
comments:
prepare release elasticsearch-lang-python-2.0.0.RC1

time:
2014-01-15T17:45:46Z
class:
comments:
prepare release elasticsearch-lang-javascript-2.0.0.RC1

time:
2014-01-15T17:43:52Z
class:
comments:
prepare release elasticsearch-analysis-stempel-2.0.0.RC1

time:
2014-01-15T17:38:03Z
class:
comments:
prepare release elasticsearch-cloud-aws-2.0.0.RC1

time:
2014-01-15T17:25:36Z
class:
comments:
prepare release elasticsearch-analysis-smartcn-2.0.0.RC1

time:
2014-01-15T17:24:22Z
class:
comments:
prepare release elasticsearch-analysis-phonetic-2.0.0.RC1

time:
2014-01-15T17:23:03Z
class:
comments:
[DOCS] Minor changes to the breaking changes doc

time:
2014-01-15T17:22:36Z
class:
comments:
prepare release elasticsearch-analysis-icu-2.0.0.RC1

time:
2014-01-15T17:20:26Z
class:
comments:
prepare release elasticsearch-analysis-kuromoji-2.0.0.RC1

time:
2014-01-15T17:02:22Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
release [1.0.0.RC1]

time:
2014-01-15T17:00:13Z
class:
comments:
[DOCS] Fixed asciidoc issue

time:
2014-01-15T16:50:24Z
class:
comments:
[DOCS] Added breaking changes in 1.0

time:
2014-01-15T16:10:11Z
class:
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
Don't fail plugin manager test when downloading an actual plugin

time:
2014-01-15T16:07:05Z
class:
src/main/java/org/elasticsearch/cloud/aws/blobstore/AbstractS3BlobContainer.java
src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStore.java
src/main/java/org/elasticsearch/plugin/cloud/aws/CloudAwsPlugin.java
src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
src/main/java/org/elasticsearch/repositories/s3/S3RepositoryModule.java
src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTest.java
src/test/java/org/elasticsearch/repositories/s3/S3SnapshotRestoreTest.java
comments:
Initial implementation of S3 snapshot/restore repository

time:
2014-01-15T16:03:30Z
class:
comments:
Added waiting for yellow cluster state in rest test

In order to prevent rare timing issue, where the creation
of an index happens in the cluster state too late and thus
results in empty mappings.

time:
2014-01-15T15:50:57Z
class:
comments:
setting path.data to /mnt/resource/... is highly recommended

time:
2014-01-15T15:30:42Z
class:
src/main/java/org/elasticsearch/cloud/azure/AzureComputeServiceImpl.java
src/main/java/org/elasticsearch/discovery/azure/AzureUnicastHostsProvider.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceAbstractMock.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #4.

time:
2014-01-15T15:30:42Z
class:
comments:
prepare 1.x branch

time:
2014-01-15T15:30:10Z
class:
comments:
Move tests to elasticsearch test framework

Related to #3.

time:
2014-01-15T15:13:38Z
class:
comments:
[DOCS] Tidied up the multi-indices docs

time:
2014-01-15T15:04:02Z
class:
src/main/java/org/elasticsearch/cloud/azure/AzureComputeService.java
src/main/java/org/elasticsearch/cloud/azure/AzureComputeServiceImpl.java
src/main/java/org/elasticsearch/cloud/azure/AzureModule.java
src/main/java/org/elasticsearch/cloud/azure/AzureSettingsFilter.java
src/main/java/org/elasticsearch/cloud/azure/Instance.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscovery.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscoveryModule.java
src/main/java/org/elasticsearch/discovery/azure/AzureUnicastHostsProvider.java
src/main/java/org/elasticsearch/plugin/cloud/azure/CloudAzurePlugin.java
src/test/java/org/elasticsearch/azure/itest/AzureSimpleITest.java
src/test/java/org/elasticsearch/cloud/azure/AbstractAzureTest.java
src/test/java/org/elasticsearch/discovery/azure/AbstractAzureComputeServiceTest.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceAbstractMock.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceSimpleMock.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceTwoNodesMock.java
src/test/java/org/elasticsearch/discovery/azure/AzureInstanceXmlParserTest.java
src/test/java/org/elasticsearch/discovery/azure/AzureSimpleTest.java
src/test/java/org/elasticsearch/discovery/azure/AzureTwoStartedNodesTest.java
comments:
update headers

time:
2014-01-15T14:58:50Z
class:
comments:
Update README after review by Microsoft Azure team

time:
2014-01-15T14:48:00Z
class:
comments:
Move tests to elasticsearch test framework

Related to #3.

time:
2014-01-15T14:38:39Z
class:
comments:
Move tests to elasticsearch test framework

Related to #49.

time:
2014-01-15T14:33:48Z
class:
comments:
Update to elasticsearch 1.0.0.RC1

Closes #9.

time:
2014-01-15T14:32:21Z
class:
comments:
prepare branch 1.x

time:
2014-01-15T14:09:34Z
class:
comments:
[DOCS] Tidied up layout of setup docs

time:
2014-01-15T14:05:05Z
class:
comments:
[DOCS] Fix default setting in circuit breaker documentation

time:
2014-01-15T13:57:00Z
class:
comments:
Increased max map pages for systemd to align with init.d settings in packages

time:
2014-01-15T13:51:18Z
class:
comments:
[DOCS] Tidied up cluster settings docs

time:
2014-01-15T13:48:50Z
class:
comments:
Move tests to elasticsearch test framework

Relative to #10.

time:
2014-01-15T13:00:08Z
class:
comments:
[DOCS] Moved fielddata circuit breaker higher up the page

time:
2014-01-15T11:46:37Z
class:
src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineTests.java
src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptMultiThreadedTest.java
src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptSearchTests.java
comments:
Move tests to elasticsearch test framework

Closes #10.

time:
2014-01-15T11:28:20Z
class:
src/main/java/org/elasticsearch/plugin/javascript/JavaScriptPlugin.java
src/main/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineService.java
src/main/java/org/elasticsearch/script/javascript/support/NativeList.java
src/main/java/org/elasticsearch/script/javascript/support/NativeMap.java
src/main/java/org/elasticsearch/script/javascript/support/ScriptValueConverter.java
src/main/java/org/elasticsearch/script/javascript/support/ScriptableLinkedHashMap.java
src/main/java/org/elasticsearch/script/javascript/support/ScriptableMap.java
src/main/java/org/elasticsearch/script/javascript/support/ScriptableWrappedMap.java
src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineTests.java
src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptMultiThreadedTest.java
src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptSearchTests.java
src/test/java/org/elasticsearch/script/javascript/SimpleBench.java
comments:
update headers

time:
2014-01-14T23:56:52Z
class:
comments:
update rest spec to be consistent with recent changes

see issue #4071

time:
2014-01-14T22:46:22Z
class:
comments:
add url, email

time:
2014-01-14T22:06:11Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
comments:
Use most recent cluster state to find types in delete mapping

Previously, the cluster state before flushing was used to check which
types map the given types pattern. However, this state might not be
up to date. Instead use the more recent cluster state from clusterState.state()
This fixes a test failure of PercolatorTests.testDeletePercolatorType

Other changes:

- use BoolFilter instead of OrFilter, because it is faster
- throw exception immediately when no type matching the given patterns
  was found in cluster state

time:
2014-01-14T21:42:27Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsResponse.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
comments:
Consistent APIs: Get field mapping API includes 'mappings'

The get field mapping API now includes a mappings element after the index in its JSON

Added more consistent endpoint /{index}/_mapping/{type}/field/{fields}
and added endpoint /_mapping/{type}/field/{fields}
which are also used in tests

Added rest spec tests for wildcards and _all

Relates #4071

NOTE: This is not yet complete for 1.0. We need to return an empty JSON document instead
of a 404 if the field of an existing index and type is not found. However this is not
possible with the current data structure being returned. Needs to be finished for 1.0.

time:
2014-01-14T21:33:52Z
class:
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/TransportGetSettingsAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/common/Strings.java
src/main/java/org/elasticsearch/rest/RestRequest.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
src/main/java/org/elasticsearch/rest/action/support/RestXContentBuilder.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Consistent REST API changes for GETting data

* Made GET mappings consistent, supporting
  * /{index}/_mappings/{type}
  * /{index}/_mapping/{type}
  * /_mapping/{type}
  * Added "mappings" in the JSON response to align it with other responses
* Made GET warmers consistent, support /{index}/_warmers/{type} and /_warmer, /_warner/{name}
  as well as wildcards and _all notation
* Made GET aliases consistent, support /{index}/_aliases/{name} and /_alias, /_aliases/{name}
  as well as wildcards and _all notation
* Made GET settings consistent, added /{index}/_setting/{name}, /_settings/{name}
  as well as supportings wildcards in settings name
* Returning empty JSON instead of a 404, if a specific warmer/
  setting/alias/type is missing
* Added a ton of spec tests for all of the above
* Added a couple of more integration tests for several features

Relates #4071

time:
2014-01-14T21:23:19Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
comments:
Fix disk percent used calc in cat/allocation

Closes #4670.

time:
2014-01-14T21:23:19Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
comments:
Shorten epoch to second precision.

Closes #4696.
can we use `TimeUnit,SECOND.convert(System.currentTimeMillis(), TimeUnit.MILLISECONDS);`

That does seem like a cleaner way. Should I simply push fix or create issue for 1.0.0.GA?


time:
2014-01-14T21:20:46Z
class:
comments:
Add documentation for index.routing.allocation.*._name and index.routing.allocation.*._id options

time:
2014-01-14T19:38:03Z
class:
src/test/java/org/elasticsearch/common/breaker/MemoryCircuitBreakerTests.java
comments:
Use assertThat instead of plain asserts in MemoryCircuitBreakerTests

time:
2014-01-14T19:02:43Z
class:
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/common/util/CollectionUtils.java
src/main/java/org/elasticsearch/indices/TypeMissingException.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/delete/RestDeleteMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
src/main/java/org/elasticsearch/search/warmer/IndexWarmerMissingException.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestTests.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
src/test/java/org/elasticsearch/indices/IndicesOptionsTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/operateAllIndices/DestructiveOperationsIntegrationTests.java
comments:
Make PUT and DELETE consistent for _mapping, _alias and _warmer

See issue #4071

PUT options for _mapping:

Single type can now be added with

`[PUT|POST] {index|_all|*|regex|blank}/[_mapping|_mappings]/type`

and

`[PUT|POST] {index|_all|*|regex|blank}/type/[_mapping|_mappings]`

PUT options for _warmer:

PUT with a single warmer can now be done with

`[PUT|POST] {index|_all|*|prefix*|blank}/{type|_all|*|prefix*|blank}/[_warmer|_warmers]/warmer_name`

PUT options for _alias:

Single alias can now be PUT with

`[PUT|POST] {index|_all|*|prefix*|blank}/[_alias|_aliases]/alias`

DELETE options _mapping:

Several mappings can be deleted at once by defining several indices and types with

`[DELETE] /{index}/{type}`

`[DELETE] /{index}/{type}/_mapping`

`[DELETE] /{index}/_mapping/{type}`

where

`index= * | _all | glob pattern | name1, name2, …`

`type= * | _all | glob pattern | name1, name2, …`

Alternatively, the keyword `_mapings` can be used.

DELETE options for  _warmer:

Several warmers can be deleted at once by defining several indices and names with

`[DELETE] /{index}/_warmer/{type}`

where

`index= * | _all | glob pattern | name1, name2, …`

`type= * | _all | glob pattern | name1, name2, …`

Alternatively, the keyword `_warmers` can be used.

DELETE options for _alias:

Several aliases can be deleted at once by defining several indices and names with

`[DELETE] /{index}/_alias/{type}`

where

`index= * | _all | glob pattern | name1, name2, …`

`type= * | _all | glob pattern | name1, name2, …`

Alternatively, the keyword `_aliases` can be used.

time:
2014-01-14T18:38:39Z
class:
src/test/java/org/elasticsearch/operateAllIndices/DestructiveOperationsIntegrationTests.java
comments:
Fix DestructiveOperationsIntegrationTests to wait for index to be allocated before closing

time:
2014-01-14T18:16:19Z
class:
comments:
Update to elasticsearch 1.0.0.RC1

Closes #5.

time:
2014-01-14T18:11:23Z
class:
comments:
prepare branch 1.x

time:
2014-01-14T18:09:10Z
class:
src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
src/test/java/org/elasticsearch/script/python/PythonScriptSearchTests.java
comments:
Update request that uses python script with no parameters fails with NullPointerException

Closes #4.

time:
2014-01-14T17:54:51Z
class:
src/test/java/org/elasticsearch/script/python/PythonScriptEngineTests.java
src/test/java/org/elasticsearch/script/python/PythonScriptMultiThreadedTest.java
src/test/java/org/elasticsearch/script/python/PythonScriptSearchTests.java
comments:
Move tests to elasticsearch test framework

Closes #6.

time:
2014-01-14T16:05:02Z
class:
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
comments:
Fix possible race condition in the restoreIndexWithMissingShards test

Due to a race condition the index creation operation might still try to create an index on the closing node.

time:
2014-01-14T16:04:09Z
class:
src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentMapValuesTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
comments:
excluding all fields of an object should not remove parent.

When excluding '*.f1' from `{ "obj": { "f1": 1, "f2": 2 } }` XContentMapValues.filter returns `{ "obj": { "f2": 2}}`. When run on `{ "obj": { "f1" : 1 }}` we should return `{ "obj": { }}` to maintain object structure. People currently need to always check whether `obj` is there or not.

Closes #4715
Closes #4047
Related to #4491

time:
2014-01-14T16:00:50Z
class:
comments:
run mvn clean before smoketesting

time:
2014-01-14T15:57:08Z
class:
comments:
Update to jython 2.5.3

Closes #7.

time:
2014-01-14T15:53:50Z
class:
src/main/java/org/elasticsearch/plugin/python/PythonPlugin.java
src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
src/test/java/org/elasticsearch/script/python/PythonScriptEngineTests.java
src/test/java/org/elasticsearch/script/python/PythonScriptMultiThreadedTest.java
src/test/java/org/elasticsearch/script/python/PythonScriptSearchTests.java
src/test/java/org/elasticsearch/script/python/SimpleBench.java
comments:
update headers

time:
2014-01-14T15:31:25Z
class:
comments:
Fix Release tool to run smoke tests off tags

this commit allows to run the release tool for smoke
testing without being on the actually released branch.
This commit also added a list of plugins that will be installed
for smoke testing to see if the plugin startup mechanism works
correctly.

time:
2014-01-14T13:51:32Z
class:
src/test/java/org/elasticsearch/index/mapper/xcontent/DateAttachmentMapperTests.java
src/test/java/org/elasticsearch/index/mapper/xcontent/EncryptedDocMapperTest.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MetadataMapperTest.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MultifieldAttachmentMapperTests.java
src/test/java/org/elasticsearch/index/mapper/xcontent/SimpleAttachmentMapperTests.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/MultipleAttachmentIntegrationTests.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/SimpleAttachmentIntegrationTests.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #48.

time:
2014-01-14T10:53:30Z
class:
comments:
Referring to stop analyzer for stopword docs #329

time:
2014-01-14T10:53:29Z
class:
comments:
Added stopwords: _none_ to the docs #329

time:
2014-01-14T00:04:31Z
class:
comments:
license extractor

extract dependency license information

time:
2014-01-13T22:18:04Z
class:
src/test/java/org/elasticsearch/index/mapper/xcontent/DateAttachmentMapperTests.java
src/test/java/org/elasticsearch/index/mapper/xcontent/EncryptedDocMapperTest.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MetadataMapperTest.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MultifieldAttachmentMapperTests.java
src/test/java/org/elasticsearch/index/mapper/xcontent/SimpleAttachmentMapperTests.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/MultipleAttachmentIntegrationTests.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/SimpleAttachmentIntegrationTests.java
comments:
Move tests to elasticsearch test framework

Closes #49.

time:
2014-01-13T21:59:21Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
src/main/java/org/elasticsearch/cluster/metadata/SnapshotMetaData.java
src/main/java/org/elasticsearch/snapshots/RestoreService.java
src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Improve support for partial snapshots

Fixes #4701. Changes behavior of the snapshot operation. The operation now fails if not all primary shards are available at the beginning of the snapshot operation. The restore operation no longer tries to restore indices with shards that failed or were missing during snapshot operation.

time:
2014-01-13T21:37:00Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Default to not accepting type wrapper in indexing requests

Currently it is possible to index a document as:

```
POST /myindex/mytype/1
{ "foo"...}
```

or as:

```
POST /myindex/mytype/1
{
    "mytype": {
        "foo"...
    }
}
```

This makes indexing non-deterministic and fields can be misinterpreted
as type names.

This changes makes Elasticsearch accept only the first form by default,
ie without the type wrapper. This can be changed by setting
`index.mapping.allow_type_wrapper` to `true`` when creating the index.

Closes #4484

time:
2014-01-13T21:31:14Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
src/main/java/org/elasticsearch/index/mapper/attachment/RegisterAttachmentType.java
src/main/java/org/elasticsearch/plugin/mapper/attachments/AttachmentsIndexModule.java
src/main/java/org/elasticsearch/plugin/mapper/attachments/MapperAttachmentsPlugin.java
src/main/java/org/elasticsearch/plugin/mapper/attachments/tika/TikaInstance.java
src/test/java/org/elasticsearch/index/mapper/xcontent/DateAttachmentMapperTests.java
src/test/java/org/elasticsearch/index/mapper/xcontent/EncryptedDocMapperTest.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MetadataMapperTest.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MultifieldAttachmentMapperTests.java
src/test/java/org/elasticsearch/index/mapper/xcontent/SimpleAttachmentMapperTests.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/MultipleAttachmentIntegrationTests.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/SimpleAttachmentIntegrationTests.java
comments:
update headers

time:
2014-01-13T21:17:11Z
class:
src/main/java/org/elasticsearch/ElasticsearchInterruptedException.java
src/main/java/org/elasticsearch/action/ActionFuture.java
src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
src/main/java/org/elasticsearch/common/util/concurrent/EsAbortPolicy.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/transport/PlainTransportFuture.java
src/main/java/org/elasticsearch/tribe/TribeService.java
comments:
Remove `ElasticsearchInterruptedException` and handle interrupt state
correctly.

InterruptedExceptions should be handled by either rethrowing or
restoring the interrupt state (i.e. calling
`Thread.currentThread().interrupt()`). This is important since the
caller of the is method or subequent method calls might also be
interested in this exception. If we ignore the interrupt state the
caller might be left unaware of the exception and blocks again on
a subsequent method.

Closes #4712

time:
2014-01-13T21:01:12Z
class:
comments:
[DOCS] Fixed link to tribe.asciidoc

time:
2014-01-13T20:53:53Z
class:
comments:
[DOCS] Added docs for tribe node

Related #4708

time:
2014-01-13T20:28:44Z
class:
src/test/java/org/elasticsearch/common/path/PathTrieTests.java
comments:
clean the params before running the next test

time:
2014-01-13T20:27:46Z
class:
src/test/java/org/elasticsearch/common/path/PathTrieTests.java
comments:
add similar concrete path trie tests resolution

time:
2014-01-13T20:26:59Z
class:
src/main/java/org/elasticsearch/cluster/ClusterService.java
src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/tribe/TribeService.java
comments:
apply comments on tribe code

time:
2014-01-13T20:18:27Z
class:
comments:
[DOCS] Update cat/indices to reflect ?pri flag

time:
2014-01-13T19:08:18Z
class:
src/main/java/org/elasticsearch/cluster/ClusterService.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java
src/main/java/org/elasticsearch/common/settings/Settings.java
src/main/java/org/elasticsearch/discovery/DiscoveryService.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/tribe/TribeModule.java
src/main/java/org/elasticsearch/tribe/TribeService.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/tribe/TribeTests.java
comments:
Tribe Node
The tribes feature allowed to create a tribe node that can act as a federated client across multiple clusters.

The tribe node configuration looks something like this:

```
tribe.t1.cluster.name: cluster1
tribe.t2.cluster.name: cluster2
```

The configuration above configure connections to 2 clusters, named `t1`, `t2`. It creates a "node" client to each (so by default, above, multicast discovery is used). The settings for each node client is extracted from the `tribe.[tribe_name]` prefix.

The way the tribe node works is by merging the cluster state from each cluster, and creating a merged view of all clusters. This means all operations work the same, distributed search, suggest, percolation, indexing, ... .

The merged view drops conflicted indices and picks one of them if there are 2 indices with the same name across multiple clusters.

By default, read and write operations are allowed. Master level read operations (cluster state for example), require setting the local flag to true (since there is no elected master). Master level write operations are not allowed (create index, ...).

The tribe node can be configured to block write operations `tribe.blocks.write` to `true`, and metadata operations by setting `tribe.blocks.metadata` to `true`.
closes #4708
this needs java docs as all of the methods in this class have docs

this might fail if the prefix is the empty string?

we are missing a `Thread.currentThread().interrupted()` here 

can we have a comment here why this needs a private environment and why this is different from the one in the tuple?

please reset the interrupted status here

we should do this in a safe mode and catch exceptions such taht all nodes are stopped.

see above

this seems messed up?

you should be able to skip the afterTest() here I guess you can just close it in taht case

close doesn't wipe the directories and such...

true


time:
2014-01-13T17:58:18Z
class:
src/main/java/org/elasticsearch/common/Explicit.java
src/main/java/org/elasticsearch/common/xcontent/XContentParser.java
src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
comments:
Adds a new coerce flag for numeric field mappings which is defaulted to true.
When set to false a new strict mode of parsing is employed which
a) does not permit numbers to be passed as JSON strings in quotes
b) rejects numbers with fractions that are passed to integer, short or long fields.

Closes #4117

time:
2014-01-13T17:07:12Z
class:
comments:
Revert "[SPEC] Added level param to cluster.state"

This reverts commit 06e5f3dd6ff3db5c30b67e1d4eb80ff759533f93.

time:
2014-01-13T17:05:38Z
class:
comments:
[SPEC] Added level param to cluster.state

time:
2014-01-13T17:02:15Z
class:
comments:
[SPEC] Updated cluster.state spec

time:
2014-01-13T16:40:27Z
class:
comments:
[SPEC] Added level param to cluster.node_stats and indices.stats

time:
2014-01-13T16:26:09Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
Make type wrapping optional for PUT Mapping API request

Put mapping now supports either of these formats:

POST foo/doc/_mapping
{
  "doc": {
    "_routing": {"required": true},
    "properties": {
      "body": {"type": "string"}
    }
  }
}

or

POST foo/doc/_mapping
{
  "_routing": {"required": true},
  "properties": {
    "body": {"type": "string"}
  }
}

Closes #4483

time:
2014-01-13T16:19:13Z
class:
comments:
Add missing closing '}' to indices.stats.json

time:
2014-01-13T16:19:13Z
class:
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
comments:
Add better error reporting if a json spec can not be parsed

time:
2014-01-13T16:19:13Z
class:
src/test/java/org/elasticsearch/indices/fielddata/breaker/RandomExceptionCircuitBreakerTests.java
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/test/engine/ThrowingAtomicReaderWrapper.java
comments:
Fix RandomExceptionCircuitBreakerTests

RandomExceptionCircuitBreakerTests never actually installed
the FilteredAtomicReader that should throw random exceptions
when field data is loaded.

time:
2014-01-13T16:19:13Z
class:
src/main/java/org/elasticsearch/common/lucene/SegmentReaderUtils.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java
src/main/java/org/elasticsearch/index/shard/ShardUtils.java
src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
comments:
Encapsulate Operations on SegmentReader in a utils class

This commit adds support to extract SegmentReader instances from
FilteredAtomicReader instances to support reader wrapping in
caches as well.

time:
2014-01-13T16:19:13Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequestBuilder.java
comments:
Add missing #setBreaker setter to NodesStatsRequestBuilder

time:
2014-01-13T16:06:29Z
class:
comments:
[TEST] Updated cluster.node_stats test

time:
2014-01-13T15:59:15Z
class:
src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java
src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequestBuilder.java
src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java
src/main/java/org/elasticsearch/common/ParseField.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisFieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisFieldQueryParser.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryParser.java
src/main/java/org/elasticsearch/rest/action/mlt/RestMoreLikeThisAction.java
src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
src/main/java/org/elasticsearch/search/suggest/term/TermSuggestionBuilder.java
src/test/java/org/elasticsearch/index/mapper/completion/CompletionFieldMapperTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Standardized use of “*_length” for parameter names rather than “*_len”.
Java Builder apis drop old “len” methods in favour of new “length”
Rest APIs support both old “len: and new “length” forms using new ParseField class to a) provide compiler-checked consistency between Builder and Parser classes and
b) a common means of handling deprecated syntax in the DSL.
Documentation and rest specs only document the new “*length” forms
Closes #4083

time:
2014-01-13T15:54:51Z
class:
comments:
[SPEC] Updated cluster.node_stats and indices.stats

time:
2014-01-13T15:53:57Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
comments:
remove System.out.println

time:
2014-01-13T15:47:35Z
class:
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
comments:
Check if entry value can be cast to a Map, if not fail with a better error.

time:
2014-01-13T15:47:35Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
comments:
CompletionFieldMapper.Builder should make a copy of the default FieldType and set the builder field.

time:
2014-01-13T15:45:26Z
class:
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Support sibling columns, with _cat/indices?pri as first go.

% curl localhost:9200/_cat/indices\?h=health,index,rep,docs.count,ss,cs,fm\&v\&pri
health index   rep docs.count      ss  pri.ss cs pri.cs     fm pri.fm
green  wiki      1       6401 302.9mb 151.4mb 0b     0b 25.1mb     0b
green  twitter   1      11434    64mb    32mb 0b     0b     0b     0b

Closes #4689.

time:
2014-01-13T15:30:15Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
Remove ancient `engine.robin.refresh_interval`

Closes #4706

time:
2014-01-13T15:29:13Z
class:
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Added test with awaits annotation that exposes a merge mapping issue.

 If the path_type is set to `just_name` in a multi_field typed field and that field is updated (for example another multi field is added) then if the path isn't specified again the path_type isn't taken into account and full path names are generated.

time:
2014-01-13T15:12:52Z
class:
src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceComputeServiceAbstractMock.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #7.

time:
2014-01-13T15:07:27Z
class:
src/test/java/org/elasticsearch/cloud/gce/tests/GceAbstractTest.java
comments:
Move tests to elasticsearch test framework

Closes #8.

time:
2014-01-13T14:49:10Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshRequest.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshRequestBuilder.java
src/main/java/org/elasticsearch/index/deletionpolicy/SnapshotDeletionPolicy.java
src/main/java/org/elasticsearch/index/engine/IndexEngineModule.java
src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java
src/main/java/org/elasticsearch/index/engine/internal/InternalEngineModule.java
src/main/java/org/elasticsearch/index/engine/internal/InternalIndexEngine.java
src/main/java/org/elasticsearch/index/engine/internal/InternalIndexEngineModule.java
src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardRepository.java
src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
src/test/java/org/elasticsearch/benchmark/search/aggregations/HistogramAggregationSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchAndIndexingBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchShortCircuitBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/nested/NestedSearchBenchMark.java
src/test/java/org/elasticsearch/benchmark/stress/NodesStressTest.java
src/test/java/org/elasticsearch/index/engine/internal/InternalEngineIntegrationTest.java
src/test/java/org/elasticsearch/index/engine/internal/InternalEngineTests.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/RandomExceptionCircuitBreakerTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/engine/MockEngineModule.java
src/test/java/org/elasticsearch/test/engine/MockInternalEngine.java
comments:
Rename RobinEngine and friends to InternalEngine

Closes #4633

time:
2014-01-13T14:26:53Z
class:
comments:
Fixing up code block delimeters for asciidoctor

You can now successfully run the docs through asciidoctor

time:
2014-01-13T13:57:16Z
class:
src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java
src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
src/main/java/org/elasticsearch/cloud/gce/GceModule.java
src/main/java/org/elasticsearch/cloud/gce/GceSettingsFilter.java
src/main/java/org/elasticsearch/discovery/gce/GceDiscovery.java
src/main/java/org/elasticsearch/discovery/gce/GceDiscoveryModule.java
src/main/java/org/elasticsearch/discovery/gce/GceUnicastHostsProvider.java
src/main/java/org/elasticsearch/plugin/cloud/gce/CloudGcePlugin.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceAbstractTest.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceComputeServiceAbstractMock.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceComputeServiceTwoNodesDifferentTagsMock.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceComputeServiceTwoNodesSameTagsMock.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceDifferentTagsTest.java
src/test/java/org/elasticsearch/cloud/gce/tests/GceSameTagsTest.java
comments:
update headers

time:
2014-01-13T13:48:36Z
class:
src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java
src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
src/main/java/org/elasticsearch/gateway/s3/S3Gateway.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #45.

time:
2014-01-13T13:44:56Z
class:
src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTest.java
src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryITest.java
comments:
Move tests to elasticsearch test framework

Closes #46.

time:
2014-01-13T13:44:10Z
class:
src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java
src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzer.java
src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
src/test/java/org/elasticsearch/index/analysis/AnalyzerBackwardsCompatTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTest.java
src/test/java/org/elasticsearch/test/ElasticsearchTokenStreamTestCase.java
comments:
Default stopwords list should be `_none_` for all but language-specific analyzers

`standard_html_strip` and `pattern` analyzer support stopwords which are
set to the default `english` stopwords by default. Those analyzers
should not use stopwords by default since they are language neutral

Closes #4699

time:
2014-01-13T13:30:20Z
class:
src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java
src/main/java/org/elasticsearch/cloud/aws/AwsModule.java
src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
src/main/java/org/elasticsearch/cloud/aws/AwsSettingsFilter.java
src/main/java/org/elasticsearch/cloud/aws/blobstore/AbstractS3BlobContainer.java
src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStore.java
src/main/java/org/elasticsearch/cloud/aws/blobstore/S3ImmutableBlobContainer.java
src/main/java/org/elasticsearch/cloud/aws/network/Ec2NameResolver.java
src/main/java/org/elasticsearch/cloud/aws/node/Ec2CustomNodeAttributes.java
src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java
src/main/java/org/elasticsearch/discovery/ec2/Ec2Discovery.java
src/main/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryModule.java
src/main/java/org/elasticsearch/gateway/s3/S3Gateway.java
src/main/java/org/elasticsearch/gateway/s3/S3GatewayModule.java
src/main/java/org/elasticsearch/index/gateway/s3/S3IndexGateway.java
src/main/java/org/elasticsearch/index/gateway/s3/S3IndexGatewayModule.java
src/main/java/org/elasticsearch/index/gateway/s3/S3IndexShardGateway.java
src/main/java/org/elasticsearch/plugin/cloud/aws/CloudAwsPlugin.java
src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryITest.java
comments:
update headers

time:
2014-01-13T12:17:30Z
class:
comments:
Fix YAML in test/indices.open/20_multiple_indices.yaml

time:
2014-01-13T09:09:38Z
class:
src/main/java/org/elasticsearch/common/collect/Iterators2.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTermsAggregator.java
src/test/java/org/elasticsearch/common/collect/Iterators2Tests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/FilterTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/MinDocCountTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/NestedTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/AvgTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/MaxTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/MinTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/SumTests.java
comments:
Add new option `min_doc_count` to terms and histogram aggregations.

`min_doc_count` is the minimum number of hits that a term or histogram key
should match in order to appear in the response.

`min_doc_count=0` replaces `compute_empty_buckets` for histograms and will
behave exactly like facets' `all_terms=true` for terms aggregations.

Close #4662

time:
2014-01-13T08:21:53Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/main/java/org/elasticsearch/index/mapper/FieldMapperListener.java
src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/multifield/MultiFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldsIntegrationTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Replaced the multi-field type in favour for the multi fields option that can be set on any core field.

When upgrading to ES 1.0 the existing mappings with a multi-field type automatically get replaced to a core field with the new `fields` option.

If a `multi_field` type-ed field doesn't have a main / default field, a default field will be chosen for the multi fields syntax. The new main field type
will be equal to the first `multi_field` fields' field or type string if no fields have been configured for the `multi_field` field and in both cases
the default index will not be indexed (`index=no` is set on the default field).

If a `multi_field` typed field has a default field, that field will replace the `multi_field` typed field.

Closes to #4521
@martijnvg
Custom field mapper that were not updated to use the other constructor would not be compatible with the new format, like they transparently were with the old multi-field mapping syntax.
This leads to the multi-fields to be silently ignored on a ES 1.x migration. This is very problematic, and is not documented in the breaking changes.
The fact that the old syntax gets automatically translated to the new syntax, breaks such custom field mappers when used in a multi-field context.

I argue that you should not have left the constructor as is, with the default value for MultiFields, but rather break the API to force the plugins to update to truly be multi-field compliant in ES 1.x.


time:
2014-01-13T08:06:59Z
class:
comments:
add MockPageCacheRecycler in test jar

MockPageCacheRecycler is missing in test jar which makes failing tests when using
test jar in plugins:

```
1> [2014-01-11 10:51:30,531][ERROR][test                     ] FAILURE  : testWikipediaRiver(org.elasticsearch.river.wikipedia.WikipediaRiverTest)
  1> REPRODUCE WITH  : mvn test -Dtests.seed=5DAFD4FBAE587363 -Dtests.class=org.elasticsearch.river.wikipedia.WikipediaRiverTest -Dtests.method=testWikipediaRiver -Dtests.prefix=tests -Dtests.network=true -Dfile.encoding=MacRoman -Duser.timezone=Europe/Paris -Des.logger.level=INFO -Des.node.local=true -Dtests.cluster_seed=134842C2D806FFC0
  1> Throwable:
  1> java.lang.NoClassDefFoundError: org/elasticsearch/cache/recycler/MockPageCacheRecycler
  1>     org.elasticsearch.test.cache.recycler.MockPageCacheRecyclerModule.configure(MockPageCacheRecyclerModule.java:30)
  1>     org.elasticsearch.common.inject.AbstractModule.configure(AbstractModule.java:60)
```

Closes #4694.

time:
2014-01-12T11:44:39Z
class:
src/test/java/org/elasticsearch/test/rest/section/DoSection.java
comments:
[REST tests] Improved DoSection behaviour

No error wa previously thrown when a catch section was specified and a the rest call returned no error
Also, moved the catch:request on top to avoid even sending requests in that case

time:
2014-01-11T23:26:34Z
class:
comments:
no need for the mvn repository anymore

time:
2014-01-11T12:30:29Z
class:
src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
src/main/java/org/elasticsearch/common/geo/GeoPoint.java
src/main/java/org/elasticsearch/common/geo/GeoUtils.java
src/main/java/org/elasticsearch/common/geo/builders/CircleBuilder.java
src/main/java/org/elasticsearch/common/geo/builders/EnvelopeBuilder.java
src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
src/main/java/org/elasticsearch/common/unit/DistanceUnit.java
src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointCompressedIndexFieldData.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/query/GeoBoundingBoxFilterBuilder.java
src/main/java/org/elasticsearch/index/query/GeoBoundingBoxFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoDistanceFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoDistanceRangeFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoPolygonFilterBuilder.java
src/main/java/org/elasticsearch/index/query/GeoPolygonFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java
src/main/java/org/elasticsearch/index/query/GeohashCellFilter.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/index/search/geo/GeoDistanceFilter.java
src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeFilter.java
src/main/java/org/elasticsearch/index/search/geo/GeoPolygonFilter.java
src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxFilter.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
src/main/java/org/elasticsearch/search/facet/geodistance/GeoDistanceFacetParser.java
src/main/java/org/elasticsearch/search/sort/GeoDistanceSortParser.java
src/test/java/org/elasticsearch/common/unit/DistanceUnitTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeoMappingTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Geo clean Up
============
The default unit for measuring distances is *MILES* in most cases. This commit moves ES
over to the *International System of Units* and make it work on a default which relates
to *METERS* . Also the current structures of the `GeoBoundingBox Filter` changed in
order to define the *Bounding* by setting abitrary corners.

Distances
---------
Since the default unit for measuring distances has changed to a default unit
`DistanceUnit.DEFAULT` relating to *meters*, the **REST API** has changed at the
following places:

  * `ScriptDocValues.factorDistance()` returns *meters* instead of *miles*
  * `ScriptDocValues.factorDistanceWithDefault()` returns *meters* instead of *miles*
  * `ScriptDocValues.arcDistance()` returns *meters* instead of *miles*
        one might use `ScriptDocValues.arcDistanceInMiles()`
  * `ScriptDocValues.arcDistanceWithDefault()` returns *meters* instead of *miles*
  * `ScriptDocValues.distance()` returns *meters* instead of *miles*
        one might use `ScriptDocValues.distanceInMiles()`
  * `ScriptDocValues.distanceWithDefault()` returns *meters* instead of *miles*
        one might use `ScriptDocValues.distanceInMilesWithDefault()`
  * `GeoDistanceFilter` default unit changes from *kilometers* to *meters*
  * `GeoDistanceRangeFilter` default unit changes from *miles* to *meters*
  * `GeoDistanceFacet` default unit changes from *miles* to *meters*

Geo Bounding Box Filter
-----------------------
The naming of the GeoBoundingBoxFilter properties allows to set arbitrary corners
(see #4084) namely `top_right`, `top_left`, `bottom_right` and `bottom_left`. This
change also includes the fields `topRight` and `bottomLeft` Also it is be possible to
set the single values by using just `top`, `bottom`, `left` and `right` parameters.

Closes #4515, #4084

time:
2014-01-11T01:05:28Z
class:
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
comments:
REST Update Settings API should not take timeout and master_timeout as index parameters
closes #4692

time:
2014-01-10T22:52:10Z
class:
comments:
Update to elasticsearch 1.0.0.RC1

Closes #8.

time:
2014-01-10T22:50:47Z
class:
comments:
Prepare branch 1.x

time:
2014-01-10T22:49:11Z
class:
src/main/java/org/elasticsearch/index/analysis/SmartChineseAnalysisBinderProcessor.java
src/main/java/org/elasticsearch/index/analysis/SmartChineseAnalyzerProvider.java
src/main/java/org/elasticsearch/index/analysis/SmartChineseSentenceTokenizerFactory.java
src/main/java/org/elasticsearch/index/analysis/SmartChineseWordTokenFilterFactory.java
src/main/java/org/elasticsearch/plugin/analysis/smartcn/AnalysisSmartChinesePlugin.java
src/test/java/org/elasticsearch/index/analysis/SimpleSmartChineseAnalysisTests.java
comments:
update headers

time:
2014-01-10T22:42:48Z
class:
src/main/java/org/elasticsearch/index/analysis/PhoneticTokenFilterFactory.java
src/test/java/org/elasticsearch/index/analysis/SimplePhoneticAnalysisTests.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #17.

time:
2014-01-10T22:39:55Z
class:
comments:
Prepare 1.x branch

time:
2014-01-10T22:33:52Z
class:
src/main/java/org/elasticsearch/index/analysis/PhoneticAnalysisBinderProcessor.java
src/main/java/org/elasticsearch/index/analysis/PhoneticTokenFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/phonetic/HaasePhonetik.java
src/main/java/org/elasticsearch/index/analysis/phonetic/KoelnerPhonetik.java
src/main/java/org/elasticsearch/index/analysis/phonetic/Nysiis.java
src/main/java/org/elasticsearch/plugin/analysis/AnalysisPhoneticPlugin.java
src/test/java/org/elasticsearch/index/analysis/SimplePhoneticAnalysisTests.java
comments:
update headers

time:
2014-01-10T22:30:05Z
class:
comments:
Fix doc

time:
2014-01-10T22:23:07Z
class:
src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #16.

time:
2014-01-10T22:21:00Z
class:
comments:
Preparing branch 1.x

time:
2014-01-10T22:18:52Z
class:
src/main/java/org/elasticsearch/index/analysis/IcuAnalysisBinderProcessor.java
src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/IcuFoldingTokenFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/IcuNormalizerTokenFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/IcuTokenizerFactory.java
src/main/java/org/elasticsearch/index/analysis/IcuTransformTokenFilterFactory.java
src/main/java/org/elasticsearch/indices/analysis/IcuIndicesAnalysis.java
src/main/java/org/elasticsearch/indices/analysis/IcuIndicesAnalysisModule.java
src/main/java/org/elasticsearch/plugin/analysis/icu/AnalysisICUPlugin.java
src/test/java/org/elasticsearch/index/analysis/SimpleIcuAnalysisTests.java
src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java
comments:
Update headers

time:
2014-01-10T22:11:53Z
class:
comments:
Update version 2.0.0.RC1

time:
2014-01-10T22:08:23Z
class:
src/main/java/org/elasticsearch/index/analysis/KuromojiTokenizerFactory.java
comments:
Update to elasticsearch 1.0.0.RC1

Closes #16.

time:
2014-01-10T22:03:21Z
class:
comments:
Preparing branch 1.x

time:
2014-01-10T22:00:25Z
class:
src/main/java/org/elasticsearch/index/analysis/KuromojiAnalyzerProvider.java
src/main/java/org/elasticsearch/index/analysis/KuromojiBaseFormFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/KuromojiIterationMarkCharFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/KuromojiKatakanaStemmerFactory.java
src/main/java/org/elasticsearch/index/analysis/KuromojiPartOfSpeechFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/KuromojiReadingFormFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/KuromojiTokenizerFactory.java
src/main/java/org/elasticsearch/indices/analysis/KuromojiIndicesAnalysis.java
src/main/java/org/elasticsearch/indices/analysis/KuromojiIndicesAnalysisModule.java
src/main/java/org/elasticsearch/plugin/analysis/kuromoji/AnalysisKuromojiPlugin.java
src/test/java/org/elasticsearch/index/analysis/KuromojiAnalysisTests.java
comments:
Update headers

time:
2014-01-10T21:56:16Z
class:
comments:
Fix typo

time:
2014-01-10T21:55:00Z
class:
comments:
Update doc for 1.9.0

time:
2014-01-10T21:52:12Z
class:
comments:
Update to elasticsearch 1.0.0.RC1

Closes #14.

time:
2014-01-10T21:52:10Z
class:
src/main/java/org/elasticsearch/common/lucene/search/XBooleanFilter.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
comments:
Fixes NPE in bool filter, when an empty should filter clause returns a DocIdSet, but null as iterator.

Closes #4685

time:
2014-01-10T21:48:59Z
class:
comments:
create branch 1.x for maintenance version regarding elasticsearch 0.90.x

time:
2014-01-10T21:39:01Z
class:
src/main/java/org/elasticsearch/index/analysis/pl/PolishAnalysisBinderProcessor.java
src/main/java/org/elasticsearch/index/analysis/pl/PolishAnalyzerProvider.java
src/main/java/org/elasticsearch/index/analysis/pl/PolishStemTokenFilterFactory.java
src/main/java/org/elasticsearch/indices/analysis/pl/PolishIndicesAnalysis.java
src/main/java/org/elasticsearch/indices/analysis/pl/PolishIndicesAnalysisModule.java
src/main/java/org/elasticsearch/plugin/analysis/stempel/AnalysisStempelPlugin.java
src/test/java/org/elasticsearch/index/analysis/PolishAnalysisTests.java
src/test/java/org/elasticsearch/index/analysis/SimplePolishTokenFilterTests.java
comments:
Update licence header

time:
2014-01-10T21:04:48Z
class:
comments:
Added licene-maven-plugin to build

The plugin adds basic checks for license headers. At
this stage we only enable checks for java source files.
Other files are omitted at this point.

time:
2014-01-10T20:41:45Z
class:
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeResponse.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateResponse.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateResponse.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateAction.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/action/support/IndicesOptions.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedResponse.java
src/main/java/org/elasticsearch/action/support/master/info/ClusterInfoRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/info/TransportClusterInfoAction.java
src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequest.java
src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequestBuilder.java
src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
src/main/java/org/elasticsearch/cluster/LocalNodeMasterListener.java
src/main/java/org/elasticsearch/cluster/ack/IndicesClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
src/main/java/org/elasticsearch/cluster/routing/PlainShardsIterator.java
src/main/java/org/elasticsearch/cluster/routing/ShardsIterator.java
src/main/java/org/elasticsearch/common/Base64.java
src/main/java/org/elasticsearch/common/Priority.java
src/main/java/org/elasticsearch/common/breaker/CircuitBreakingException.java
src/main/java/org/elasticsearch/common/breaker/MemoryCircuitBreaker.java
src/main/java/org/elasticsearch/common/bytes/BytesReference.java
src/main/java/org/elasticsearch/common/bytes/ChannelBufferBytesReference.java
src/main/java/org/elasticsearch/common/bytes/HashedBytesArray.java
src/main/java/org/elasticsearch/common/lucene/ReaderContextAware.java
src/main/java/org/elasticsearch/common/lucene/ScorerAware.java
src/main/java/org/elasticsearch/common/lucene/search/EmptyScorer.java
src/main/java/org/elasticsearch/common/lucene/search/FilteredCollector.java
src/main/java/org/elasticsearch/common/lucene/search/RegexpFilter.java
src/main/java/org/elasticsearch/common/lucene/search/XCollector.java
src/main/java/org/elasticsearch/common/lucene/search/function/RandomScoreFunction.java
src/main/java/org/elasticsearch/common/rounding/DateTimeUnit.java
src/main/java/org/elasticsearch/common/rounding/Rounding.java
src/main/java/org/elasticsearch/common/text/BytesText.java
src/main/java/org/elasticsearch/common/text/StringAndBytesText.java
src/main/java/org/elasticsearch/common/text/StringText.java
src/main/java/org/elasticsearch/common/text/Text.java
src/main/java/org/elasticsearch/common/util/BloomFilter.java
src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedCallable.java
src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java
src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedRunnable.java
src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
src/main/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandler.java
src/main/java/org/elasticsearch/discovery/ClusterStatePublishResponseHandler.java
src/main/java/org/elasticsearch/index/analysis/AnalysisSettingsRequired.java
src/main/java/org/elasticsearch/index/analysis/CzechStemTokenFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/HunspellTokenFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzerProvider.java
src/main/java/org/elasticsearch/index/analysis/SnowballTokenFilterFactory.java
src/main/java/org/elasticsearch/index/cache/id/IdCache.java
src/main/java/org/elasticsearch/index/cache/id/IdCacheModule.java
src/main/java/org/elasticsearch/index/cache/id/IdReaderCache.java
src/main/java/org/elasticsearch/index/cache/id/IdReaderTypeCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdReaderCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdReaderTypeCache.java
src/main/java/org/elasticsearch/index/engine/DocumentAlreadyExistsException.java
src/main/java/org/elasticsearch/index/engine/DocumentMissingException.java
src/main/java/org/elasticsearch/index/engine/DocumentSourceMissingException.java
src/main/java/org/elasticsearch/index/engine/VersionConflictEngineException.java
src/main/java/org/elasticsearch/index/fielddata/AtomicGeoPointFieldData.java
src/main/java/org/elasticsearch/index/fielddata/GeoPointValues.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataModule.java
src/main/java/org/elasticsearch/index/fielddata/RamAccountingTermsEnum.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/FloatValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/FloatValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/NumberComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointCompressedAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointCompressedIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/NonEstimatingEstimator.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fieldvisitor/AllFieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/CustomFieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/FieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/JustSourceFieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/JustUidFieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/SingleFieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/UidAndRoutingFieldsVisitor.java
src/main/java/org/elasticsearch/index/fieldvisitor/UidAndSourceFieldsVisitor.java
src/main/java/org/elasticsearch/index/indexing/IndexingOperationListener.java
src/main/java/org/elasticsearch/index/mapper/StrictDynamicMappingException.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/percolator/PercolatorException.java
src/main/java/org/elasticsearch/index/percolator/PercolatorShardModule.java
src/main/java/org/elasticsearch/index/query/HasChildFilterBuilder.java
src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
src/main/java/org/elasticsearch/index/query/HasParentFilterBuilder.java
src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java
src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
src/main/java/org/elasticsearch/index/query/RegexpFlag.java
src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
src/main/java/org/elasticsearch/index/query/TermsQueryParser.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryBuilder.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryParser.java
src/main/java/org/elasticsearch/index/query/functionscore/random/RandomScoreFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/random/RandomScoreFunctionParser.java
src/main/java/org/elasticsearch/index/search/FieldDataTermsFilter.java
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/ConstantScorer.java
src/main/java/org/elasticsearch/index/search/child/CustomQueryWrappingFilter.java
src/main/java/org/elasticsearch/index/search/child/DeleteByQueryWrappingFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentIdsFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/main/java/org/elasticsearch/index/search/child/ScoreType.java
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
src/main/java/org/elasticsearch/index/search/nested/NestedFieldComparatorSource.java
src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorModule.java
src/main/java/org/elasticsearch/indices/IndexTemplateAlreadyExistsException.java
src/main/java/org/elasticsearch/indices/IndexTemplateMissingException.java
src/main/java/org/elasticsearch/indices/InvalidIndexTemplateException.java
src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
src/main/java/org/elasticsearch/indices/fielddata/breaker/InternalCircuitBreakerService.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorModule.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestMultiPercolateAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestPercolateAction.java
src/main/java/org/elasticsearch/script/SearchScript.java
src/main/java/org/elasticsearch/search/TransportSearchModule.java
src/main/java/org/elasticsearch/search/aggregations/Aggregation.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBinaryParseElement.java
src/main/java/org/elasticsearch/search/aggregations/AggregationExecutionException.java
src/main/java/org/elasticsearch/search/aggregations/AggregationInitializationException.java
src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
src/main/java/org/elasticsearch/search/aggregations/AggregationParseElement.java
src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
src/main/java/org/elasticsearch/search/aggregations/Aggregations.java
src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorFactories.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java
src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
src/main/java/org/elasticsearch/search/aggregations/SearchContextAggregations.java
src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/SingleBucketAggregation.java
src/main/java/org/elasticsearch/search/aggregations/bucket/SingleBucketAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/Filter.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGrid.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/Global.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/InternalMissing.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/Missing.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/Nested.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/Range.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRange.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistance.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4Range.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/InternalIPv4Range.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IpRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/BucketPriorityQueue.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/IncludeExclude.java
src/main/java/org/elasticsearch/search/aggregations/metrics/MetricsAggregation.java
src/main/java/org/elasticsearch/search/aggregations/metrics/MetricsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregatorParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/Avg.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/InternalAvg.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/InternalMax.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/Max.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/InternalMin.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/Min.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/Stats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/InternalSum.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/Sum.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/InternalValueCount.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCount.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountParser.java
src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldContext.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
src/main/java/org/elasticsearch/search/aggregations/support/ScriptValues.java
src/main/java/org/elasticsearch/search/aggregations/support/ValueSourceAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java
comments:
Reformat license header for consistency

time:
2014-01-10T17:04:08Z
class:
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
comments:
ClusterStatsTests.testValuesSmokeScreen: replace greaterThan with greaterOrEqualThan

time:
2014-01-10T16:52:43Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
comments:
ClusterStats tests should allow for open file descriptors to be -1 (which they are on windows)

Also made some other small tweaks for that case.

time:
2014-01-10T11:34:29Z
class:
src/main/java/org/elasticsearch/common/util/CollectionUtils.java
src/main/java/org/elasticsearch/common/util/Comparators.java
src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
comments:
Cutover to Guava's Longs.compare.

time:
2014-01-10T11:15:56Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
comments:
Expose min/max open file descriptors in Cluster Stats API

Also changes the response format of that section to:

```
 "open_file_descriptors": {
      "min": 200,
      "max": 346,
       "avg": 273
 }
```

Closes #4681

Note: this is an aggregate of 3 commits in the 0.90 branch

time:
2014-01-10T10:39:13Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Add 0.90.10 to master

time:
2014-01-10T09:37:55Z
class:
src/test/java/org/elasticsearch/river/RiverTests.java
src/test/java/org/elasticsearch/river/TestRiver.java
src/test/java/org/elasticsearch/river/TestRiverModule.java
comments:
Removed needless TestRiver used in RiverTests

DummyRiver can be used instead, no need for TestRiver

time:
2014-01-10T09:14:08Z
class:
comments:
Open files with encoding='utf-8' in release script

time:
2014-01-09T22:04:29Z
class:
src/main/java/org/elasticsearch/index/store/Store.java
comments:
Multi data path config can cause a shard to be perceived as corrupted
Multi data path config support writes a file to a data location based on the available size (by default). There is a Lucene file called segments.gen that has the same name, and only in that case, we need to make sure we alway write it to the same data location, otherwise, the index will have multiple segments.gen files, and the shard can seem to be corrupted.

The message if this case happens is that segments_xxx file was not found, in which case, a find for segments.gen can yield multiple files. Deleting the segments.gen files will cause the shard to recover properly (as its an extra protection layer to resolve the segments header by Lucene)

Make sure the segments.gen file is writtne to the same directory every time
fixes #4674

time:
2014-01-09T21:46:05Z
class:
comments:
Merge pull request #4675 from spenceralger/update_spec_doc_urls

Updated the documentation urls in the rest api spec.

time:
2014-01-09T21:44:14Z
class:
comments:
Updated the documentation urls in the rest api spec.

time:
2014-01-09T20:08:45Z
class:
comments:
remove bloom from clear cache API, add id_cache

time:
2014-01-09T17:26:02Z
class:
src/main/java/org/elasticsearch/common/util/CollectionUtils.java
src/main/java/org/elasticsearch/common/util/Comparators.java
src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
comments:
Aggregations: clean-up comparisons.

time:
2014-01-09T16:58:12Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Handle node id shorter than the usual randomBase64UUID.

Fixes #4572 (half of it...)

time:
2014-01-09T16:58:12Z
class:
src/main/java/org/elasticsearch/common/Strings.java
comments:
Add Strings.substring() that handles short strings.

time:
2014-01-09T16:16:41Z
class:
comments:
Disabling allow_explicit_index breaks bulk
grr, formatted by mistake...

time:
2014-01-09T16:10:55Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
comments:
Disabling allow_explicit_index breaks bulk
fixes #4668

time:
2014-01-09T15:54:22Z
class:
src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/MetricsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/ShardSizeTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
comments:
- fixed terms aggs ordering by sub metric agg - introduced MetricsAggregator to enable access to metrics values without creating buckets

fixes: #4643

time:
2014-01-09T15:42:03Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeFilters.java
src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
src/main/java/org/elasticsearch/common/network/NetworkUtils.java
src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
src/main/java/org/elasticsearch/common/transport/InetSocketTransportAddress.java
src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
src/main/java/org/elasticsearch/common/transport/TransportAddress.java
src/main/java/org/elasticsearch/node/service/NodeService.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
comments:
add host name and host address to DiscoveryNode
this will allow to easily access them regardless of the transport address used, and allow to remove reverse lookup of host names from ip address extracted from inet transport address where needed
I wonder if we should add a Stream version check (and in the readFrom)

its only in master, so we can break stream comp. in master at this stage.

Does it mean that we can remove all existing version check in master for all writeTo and readFrom? 


time:
2014-01-09T15:28:37Z
class:
src/main/java/org/elasticsearch/cache/recycler/CacheRecycler.java
src/main/java/org/elasticsearch/cache/recycler/PageCacheRecycler.java
src/main/java/org/elasticsearch/common/recycler/AbstractRecycler.java
src/main/java/org/elasticsearch/common/recycler/ConcurrentDequeRecycler.java
src/main/java/org/elasticsearch/common/recycler/DequeRecycler.java
src/main/java/org/elasticsearch/common/recycler/FilterRecycler.java
src/main/java/org/elasticsearch/common/recycler/NoneRecycler.java
src/main/java/org/elasticsearch/common/recycler/Recycler.java
src/main/java/org/elasticsearch/common/recycler/Recyclers.java
src/main/java/org/elasticsearch/common/recycler/SoftThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/recycler/ThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/util/concurrent/ConcurrentCollections.java
src/test/java/org/elasticsearch/benchmark/common/recycler/RecyclerBenchmark.java
src/test/java/org/elasticsearch/common/recycler/ConcurrentRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/LockedRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/NoneRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/QueueRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/SoftConcurrentRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/SoftThreadLocalRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/ThreadLocalRecyclerTests.java
comments:
Change the default recycler type.

Recycling is not thread-local anymore by default but instead there are several
pools of objects to recycle that threads may use depending on their id.
Each pool is protected by its own lock so up to ${number of pools} threads may
recycler objects concurrently.

Recyclers have also been refactored for better composability, for example there
is a soft recycler that creates a recycler that wraps data around a
SoftReference and a thread-local recycler that can take any factory or recyclers
and instantiates a dedicated instance per thread.

RecyclerBenchmark has been added to try to figure out the overhead of object
recycling depending on the recycler type and the number of threads trying to
recycle objects concurrently.

Close #4647

time:
2014-01-09T15:04:01Z
class:
comments:
Deprecate document _boost

Fixes #4664

time:
2014-01-09T14:42:09Z
class:
src/test/java/org/elasticsearch/test/rest/client/RestClient.java
src/test/java/org/elasticsearch/test/rest/spec/RestApi.java
comments:
[REST tests] Randomized REST path chosen if more than one is available with current parameters

Previously we would always take the same path if more than one was available

time:
2014-01-09T14:14:51Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/main/java/org/elasticsearch/common/ParseField.java
src/main/java/org/elasticsearch/common/unit/Fuzziness.java
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisFieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisFieldQueryParser.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisQueryParser.java
src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
src/main/java/org/elasticsearch/index/query/QueryParseContext.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
src/main/java/org/elasticsearch/index/search/MatchQuery.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestParser.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionFuzzyBuilder.java
src/test/java/org/elasticsearch/common/ParseFieldTests.java
src/test/java/org/elasticsearch/common/unit/FuzzinessTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Rename edit_distance/min_similarity to fuzziness

A lot of different API's currently use different names for the
same logical parameter. Since lucene moved away from the notion
of a `similarity` and now uses an `fuzziness` we should generalize
this and encapsulate the generation, parsing and creation of these
settings across all queries.

This commit adds a new `Fuzziness` class that handles the renaming
and generalization in a backwards compatible manner.

This commit also added a ParseField class to better support deprecated
Query DSL parameters

The ParseField class allows specifying parameger that have been deprecated.
Those parameters can be more easily tracked and removed in future version.
This also allows to run queries in `strict` mode per index to throw
exceptions if a query is executed with deprected keys.

Closes #4082

time:
2014-01-09T11:46:07Z
class:
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
comments:
Improve nodes/metric detection in RestNodesInfo

Because one URI parameter can contain either nodeIds or a list of metrics,
the check to detect if this parameter is either a nodeId or a metric needs
to be more accurate.

time:
2014-01-09T11:33:50Z
class:
src/main/java/org/apache/lucene/store/BufferedChecksumIndexOutput.java
src/main/java/org/apache/lucene/store/RateLimitedFSDirectory.java
src/main/java/org/elasticsearch/index/store/Store.java
comments:
improve buffered output
- use the same buffer size if wrapping a buffered output
- directly call flush on the checksum wrapper

time:
2014-01-09T10:36:50Z
class:
src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
src/main/java/org/elasticsearch/action/deletebyquery/TransportDeleteByQueryAction.java
src/main/java/org/elasticsearch/action/support/DestructiveOperations.java
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
src/test/java/org/elasticsearch/indices/state/CloseIndexDisableCloseAllTests.java
src/test/java/org/elasticsearch/operateAllIndices/DestructiveOperationsIntegrationTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Added `action.destructive_requires_name` that controls whether wildcard expressions and `_all` is allowed to be used for destructive operat Also the delete index api requires always an index to be specified (either concrete index, alias or wildcard expression)

Closes #4549 #4481

time:
2014-01-09T10:30:28Z
class:
comments:
[DOCS] Fix HTTP endpoints after stats API changes

time:
2014-01-09T10:25:59Z
class:
comments:
give the compiler more memory, otherwise it fails sometimes

time:
2014-01-09T10:24:12Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
comments:
[DOCS] Added documentation for SameShardAllocationDecider

Closes #4615

time:
2014-01-09T09:17:42Z
class:
src/test/java/org/elasticsearch/test/rest/spec/RestApi.java
comments:
remove default `_all` for `type` and `index` if these are missing in REST tests

If a type or path is missing in the REST test yaml file, it is
automatically replaced with _all. This makes it hard to test changes
in the api, for example adding the possibility to leave the index
blank in addition to _all and * in the uri.

closes #4657

time:
2014-01-09T09:01:46Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecidersModule.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DisableAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationDecider.java
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
comments:
Deprecated disable allocation decider which has the following options:
`allocation.disable_new_allocation`, `allocation.disable_allocation`, `allocation.disable_replica_allocation`,
in favour for the enable allocation decider which has a single option `allocation.enable` wich can be set to the following values:
`none`, `new_primaries`, `primaries` and `all` (default).

Closes #4488

time:
2014-01-09T08:58:34Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/search/sort/SortParseElement.java
src/test/java/org/elasticsearch/percolator/PercolatorFacetsAndAggregationsTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Change the `sort` boolean option in percolate api to the sort dsl available in search api.

Closes #4625

time:
2014-01-09T08:44:40Z
class:
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
comments:
Added extra rest endpoint for get settings api.
Added rest test to also test the get settings' prefix option.

time:
2014-01-09T08:27:44Z
class:
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
Add more traces in case of failure when testing with actual plugins
(cherry picked from commit 0b2ff1e)

time:
2014-01-08T23:37:18Z
class:
comments:
[DOCS] Fixed duplicate ID in highlighting

time:
2014-01-08T23:05:03Z
class:
src/main/java/org/elasticsearch/http/HttpRequest.java
src/main/java/org/elasticsearch/http/netty/HttpRequestHandler.java
src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
src/main/java/org/elasticsearch/rest/RestRequest.java
src/main/java/org/elasticsearch/rest/support/AbstractRestRequest.java
comments:
move RestRequest to be an abstract class, and expose local/remote address
Working on elasticsearch-transport-memcached plugin, this change breaks some plugins which were extending `AbstractRestRequest`. I did not find a related issue with a breaking label. Should we open one?

yea, make sense opening one....

Just a note that this also affects existing compiled code -- changing from an interface to a class is backwards incompatible. One needs to recompile from sources to make it work again (not a problem for me, but a note nonetheless).


time:
2014-01-08T22:13:58Z
class:
src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
src/main/java/org/elasticsearch/rest/RestRequest.java
comments:
Expose headers list in RestRequest

Closes #4609

time:
2014-01-08T22:06:41Z
class:
comments:
Add warning phrase suggester's max_errors

large number can badly impact performance.

time:
2014-01-08T21:14:44Z
class:
comments:
add joda-convert so missing annotations in joda-time will not cause failures when used as dependency
fixes #4660

time:
2014-01-08T20:24:23Z
class:
comments:
[SPEC] added nmissing comma in cluster.node_stats api spec

time:
2014-01-08T20:17:49Z
class:
src/main/java/org/elasticsearch/monitor/jvm/JvmMonitorService.java
comments:
use proper logging

time:
2014-01-08T20:16:10Z
class:
src/main/java/org/elasticsearch/monitor/jvm/GcNames.java
src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
src/main/java/org/elasticsearch/monitor/jvm/JvmMonitorService.java
src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
comments:
Create standard gc and memory_pool names for Jvm stats
fixes #4661

time:
2014-01-08T20:03:06Z
class:
comments:
[SPEC] Clarify cluster.node_stats api
missing ',' here?


time:
2014-01-08T19:19:29Z
class:
comments:
[SPEC] refactor cluster.node_info json spec to reflect clients' apis

time:
2014-01-08T18:23:24Z
class:
src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
comments:
Cleaning up nodenames

Common changes:
Lastname, Firstname -> Firstname Lastname
Name I -> Name
Title-style capitalization
Removed L-to-R characters ( <e200> )
Removed duplicates
Alphabetical order

time:
2014-01-08T17:28:58Z
class:
src/main/java/org/elasticsearch/search/query/QueryPhase.java
comments:
when specifying size 0, just use the total hits collector in query phase
no need the (old) hack of setting the size to 1 anymore really...

time:
2014-01-08T16:13:49Z
class:
src/main/java/org/elasticsearch/common/unit/ByteSizeUnit.java
src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
src/main/java/org/elasticsearch/common/unit/SizeUnit.java
src/main/java/org/elasticsearch/common/unit/SizeValue.java
src/test/java/org/elasticsearch/common/unit/ByteSizeUnitTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
comments:
add support for tera and peta units

time:
2014-01-08T15:36:36Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java
src/main/java/org/elasticsearch/common/settings/Settings.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/test/java/org/elasticsearch/common/settings/ImmutableSettingsTests.java
comments:
Add support for flat_settings flag to all REST APIs that output settings

Closes #4140

time:
2014-01-08T14:01:49Z
class:
src/main/java/org/elasticsearch/common/path/PathTrie.java
src/test/java/org/elasticsearch/common/path/PathTrieTests.java
comments:
Fixed open/close index api when using wildcard only

Named wildcards were not always properly replaced with proper values by PathTrie.
Delete index (curl -XDELETE localhost:9200/*) worked anyway as the named wildcard is the last path element (and even if {index} didn't get replaced with '*', the empty string would have mapped to all indices anyway). When the named wildcard wasn't the last path element (e.g. curl -XPOST localhost:29200/*/_close), the variable didn't get replaced with the current '*' value, but with the empty string, which leads to an error as empty index is not allowed by open/close index.

Closes #4564

time:
2014-01-08T13:39:43Z
class:
src/test/java/org/elasticsearch/cluster/ack/AckClusterUpdateSettingsTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
move ack tests for cluster update settings to its own test with scope test, and all other ack tests to scope suite for faster execution

time:
2014-01-08T12:18:57Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/GetSettingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/settings/get/TransportGetSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/put/UpdateSettingsResponse.java
src/main/java/org/elasticsearch/client/IndicesAdminClient.java
src/main/java/org/elasticsearch/client/Requests.java
src/main/java/org/elasticsearch/client/support/AbstractIndicesAdminClient.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/cluster/BlockClusterStatsTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/indices/IndicesOptionsTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
comments:
Changed get index settings api to use new internal get index settings api instead of relying on the cluster state api.

The new internal get index settings api is more efficient when it comes to sending the index settings from the master to the client via the
Also the get index settings support now all the indices options.

Closes #4620

time:
2014-01-08T11:17:55Z
class:
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Fix compilation under javac 1.6.

time:
2014-01-08T10:51:48Z
class:
src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Stop FVH from throwing away some query boosts

The FVH was throwing away some boosts on queries stopping a number of
ways to boost phrase matches to the top of the list of fragments from
working.

The plain highlighter also doesn't work for this but that is because it
doesn't support the concept of the same term having a different score at
different positions.

Also update documentation claiming that FHV is nicer for weighing terms
found by query combinations.

Closes #4351

time:
2014-01-08T10:27:58Z
class:
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
src/main/java/org/elasticsearch/search/highlight/HighlighterParseElement.java
src/main/java/org/elasticsearch/search/highlight/SearchContextHighlight.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Use FHV's phraseLimit

This prevents poisoning the FVH with documents that contain TONS of matches
which take tons of memory and time to highlight.

Closes #4645

time:
2014-01-08T10:18:50Z
class:
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
src/main/java/org/elasticsearch/rest/action/percolate/RestMultiPercolateAction.java
comments:
Multi-percolate respects the `rest.action.multi.allow_explicit_index` setting

Closes #4284

time:
2014-01-08T08:46:04Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoTests.java
comments:
Simplify usage of nodes info API

Important: This breaks backwards compatibility with 0.90

* Removed endpoints: /_cluster/nodes, /_cluster/nodes/nodeId1,nodeId2
* Disallow usage of parameters, but make required metrics part of URI
* Changed NodesInfoRequest to return everything by default
* Fixed NPE in NodesInfoResponse

Closes #4055

time:
2014-01-08T08:25:20Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/state/RestClusterStateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
src/test/java/org/elasticsearch/cluster/BlockClusterStatsTests.java
src/test/java/org/elasticsearch/cluster/SimpleClusterStateTests.java
src/test/java/org/elasticsearch/gateway/local/LocalGatewayIndexStateTests.java
src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Cluster state API: Improved consistency

Instead of specifying what kind of data should be filtered, this commit
streamlines the API to actually specify, what kind of data should be displayed.
This makes its behaviour similar to the other requests, like NodeIndicesStats.

A small feature has been added as well: If you specify an index to select on, not
only the metadata, but also the routing tables are filtered by index in order
to prevent too big cluster states to be returned.

Also the CAT apis have been changed to only return the wanted data in order to keep
network traffic as small as needed.

Tests for the cluster state API filtering have been added as well.

Note: This change breaks backwards compatibility with 0.90!

Closes #4065

time:
2014-01-07T20:18:19Z
class:
comments:
change url to latest snapshops

time:
2014-01-07T19:28:09Z
class:
src/main/java/org/apache/lucene/index/memory/ExtendedMemoryIndex.java
src/main/java/org/apache/lucene/queries/ExtendedCommonTermsQuery.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequest.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequestBuilder.java
src/main/java/org/elasticsearch/action/update/UpdateHelper.java
src/main/java/org/elasticsearch/common/collect/HppcMaps.java
src/main/java/org/elasticsearch/common/joda/DateMathParser.java
src/main/java/org/elasticsearch/index/analysis/CJKBigramFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/CJKWidthFilterFactory.java
src/main/java/org/elasticsearch/index/analysis/KeepWordFilterFactory.java
src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorBase.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/query/SimpleQueryStringFlag.java
src/main/java/org/elasticsearch/percolator/PercolateException.java
src/main/java/org/elasticsearch/search/rescore/QueryRescorer.java
src/main/java/org/elasticsearch/search/rescore/Rescorer.java
src/main/java/org/elasticsearch/search/scan/ScanContext.java
src/main/java/org/elasticsearch/search/suggest/completion/PayloadProcessor.java
src/main/java/org/elasticsearch/snapshots/SnapshotShardFailure.java
src/main/java/org/elasticsearch/snapshots/SnapshotState.java
src/main/java/org/joda/time/base/BaseDateTime.java
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
src/test/java/org/elasticsearch/action/termvector/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/action/termvector/MultiTermVectorsTests.java
src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
src/test/java/org/elasticsearch/cluster/allocation/ShardsAllocatorModuleTests.java
src/test/java/org/elasticsearch/common/BooleansTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentHelperTests.java
src/test/java/org/elasticsearch/index/VersionTypeTests.java
src/test/java/org/elasticsearch/search/source/SourceFetchingTests.java
src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
comments:
Add missing license headers, move package names after  license headers

time:
2014-01-07T19:24:02Z
class:
src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
comments:
Fix mixed up duration and duration_in_millis fields in snapshot information output

time:
2014-01-07T19:03:12Z
class:
comments:
Fix typo in snapshot/restore documentation

time:
2014-01-07T18:58:28Z
class:
src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
src/main/java/org/elasticsearch/index/translog/TranslogService.java
comments:
randomize flush interval so multiple shards won't flush at the sam time
- also, allow to update interval using update settings on an index

time:
2014-01-07T18:03:33Z
class:
src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java
src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGrid.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
src/test/java/org/elasticsearch/common/geo/GeoHashTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoHashGridTests.java
comments:
A GeoHashGrid aggregation that buckets GeoPoints into cells whose dimensions are determined by a choice of GeoHash resolution.
Added a long-based representation of GeoHashes to GeoHashUtils for fast evaluation in aggregations.
The new BucketUtils provides a common heuristic for determining the number of results to obtain from each shard in "top N" type requests.
cool stuff mark!


time:
2014-01-07T17:53:58Z
class:
src/main/java/org/elasticsearch/index/translog/TranslogService.java
comments:
don't schedule a flush if there are no operations in the translog
this can happen with the 30m time base setting expires

time:
2014-01-07T16:47:07Z
class:
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/delete/DeleteResponse.java
src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
src/main/java/org/elasticsearch/action/delete/index/ShardDeleteResponse.java
src/main/java/org/elasticsearch/action/delete/index/TransportShardDeleteAction.java
src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/get/GetResult.java
src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
src/test/java/org/elasticsearch/action/termvector/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
src/test/java/org/elasticsearch/versioning/SimpleVersioningTests.java
comments:
Rename "exists" to "found" in TermVector and Get responses

- Adds the "created" field to the index action response
- Reverses Delete class' notFound to Found to avoid double negative
Should this be changed to reflect notFound > found change?

Yes, it should, I'll fix this.


time:
2014-01-07T16:27:07Z
class:
src/main/java/org/elasticsearch/rest/AcknowledgedRestResponseActionListener.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/shards/RestClusterSearchShardsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/gateway/snapshot/RestGatewaySnapshotAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/optimize/RestOptimizeAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/segments/RestIndicesSegmentsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/status/RestIndicesStatusAction.java
src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
src/main/java/org/elasticsearch/rest/action/deletebyquery/RestDeleteByQueryAction.java
src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
src/main/java/org/elasticsearch/river/RiversService.java
src/test/java/org/elasticsearch/test/rest/test/TestSectionParserTests.java
comments:
Remove hard-coded "ok": true from REST responses

time:
2014-01-07T15:21:33Z
class:
src/test/java/org/elasticsearch/test/rest/section/MatchAssertion.java
comments:
Fixed match assertion that didn't run any assert with object of different types that don't extend Number

time:
2014-01-07T15:19:06Z
class:
comments:
[TEST] remove old tests from yaml test suite

time:
2014-01-07T15:06:25Z
class:
comments:
[TEST] Fix yaml tests after #4542

time:
2014-01-07T13:44:24Z
class:
src/main/java/org/elasticsearch/common/recycler/RecyclerUtils.java
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
comments:
Replace RecyclerUtils with Releasables.
nice!


time:
2014-01-07T11:15:19Z
class:
comments:
Update Eclipse template to use the new license header.

time:
2014-01-07T11:09:40Z
class:
src/test/java/org/elasticsearch/benchmark/common/util/BytesRefComparisonsBenchmark.java
comments:
Fix license header og BytesRefComparisonsBenchmark.

time:
2014-01-07T11:03:24Z
class:
src/test/java/org/elasticsearch/benchmark/common/util/BytesRefComparisonsBenchmark.java
comments:
Add a benchmark for BytesRef comparisons.

time:
2014-01-07T10:41:01Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
src/main/java/org/elasticsearch/action/percolate/PercolateShardRequest.java
src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
src/main/java/org/elasticsearch/bootstrap/ElasticsearchF.java
src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
src/main/java/org/elasticsearch/common/blobstore/BlobStore.java
src/main/java/org/elasticsearch/common/geo/SpatialStrategy.java
src/main/java/org/elasticsearch/common/io/stream/AdapterStreamInput.java
src/main/java/org/elasticsearch/common/io/stream/ByteBufferStreamInput.java
src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
src/main/java/org/elasticsearch/common/netty/NettyStaticSetup.java
src/main/java/org/elasticsearch/common/settings/SettingsFilter.java
src/main/java/org/elasticsearch/common/text/UTF8SortedAsUnicodeComparator.java
src/main/java/org/elasticsearch/index/analysis/AnalysisSettingsRequired.java
src/main/java/org/elasticsearch/index/analysis/CzechStemTokenFilterFactory.java
src/main/java/org/elasticsearch/index/percolator/QueriesLoaderCollector.java
src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
src/main/java/org/elasticsearch/index/query/BoostableQueryBuilder.java
src/main/java/org/elasticsearch/index/query/ParsedFilter.java
src/main/java/org/elasticsearch/index/search/nested/IncludeNestedDocsQuery.java
src/main/java/org/elasticsearch/index/translog/fs/BufferingFsTranslogFile.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/search/aggregations/AbstractAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java
src/main/java/org/elasticsearch/search/aggregations/ValuesSourceAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/MetricsAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountBuilder.java
src/main/java/org/elasticsearch/search/aggregations/support/ScriptValueType.java
src/main/java/org/elasticsearch/search/suggest/Suggester.java
src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInputFactory.java
src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
src/test/java/org/elasticsearch/benchmark/bloom/BloomBench.java
src/test/java/org/elasticsearch/benchmark/scripts/score/plugin/NativeScriptExamplesPlugin.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeConstantForLoopScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeConstantScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeNaiveTFIDFScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativePayloadSumNoRecordScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativePayloadSumScoreScript.java
src/test/java/org/elasticsearch/benchmark/search/nested/NestedSearchBenchMark.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
src/test/java/org/elasticsearch/common/joda/DateMathParserTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterLuceneTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
src/test/java/org/elasticsearch/count/simple/SimpleCountTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/index/mapper/lucene/DoubleIndexingDocTest.java
src/test/java/org/elasticsearch/index/mapper/lucene/StoredNumericValuesTest.java
src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTestsMultiShardMultiNodeTests.java
src/test/java/org/elasticsearch/search/msearch/SimpleMultiSearchTests.java
src/test/java/org/elasticsearch/stresstest/search1/ConcurrentSearchSerializationTests.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/threadpool/SimpleThreadPoolTests.java
src/test/java/org/elasticsearch/versioning/ConcurrentDocumentOperationTests.java
comments:
Add missing license headers

time:
2014-01-07T10:22:01Z
class:
src/main/java/org/apache/lucene/analysis/CustomAnalyzerWrapper.java
src/main/java/org/apache/lucene/analysis/miscellaneous/TruncateTokenFilter.java
src/main/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilter.java
src/main/java/org/apache/lucene/index/TrackingConcurrentMergeScheduler.java
src/main/java/org/apache/lucene/index/TrackingSerialMergeScheduler.java
src/main/java/org/apache/lucene/index/memory/ExtendedMemoryIndex.java
src/main/java/org/apache/lucene/queries/ExtendedCommonTermsQuery.java
src/main/java/org/apache/lucene/queryparser/classic/ExistsFieldQueryExtension.java
src/main/java/org/apache/lucene/queryparser/classic/FieldQueryExtension.java
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/main/java/org/apache/lucene/queryparser/classic/MissingFieldQueryExtension.java
src/main/java/org/apache/lucene/queryparser/classic/QueryParserSettings.java
src/main/java/org/apache/lucene/search/postingshighlight/CustomPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/CustomPostingsHighlighter.java
src/main/java/org/apache/lucene/search/postingshighlight/Snippet.java
src/main/java/org/apache/lucene/search/postingshighlight/XPostingsHighlighter.java
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/apache/lucene/search/suggest/analyzing/XFuzzySuggester.java
src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
src/main/java/org/apache/lucene/store/RateLimitedFSDirectory.java
src/main/java/org/apache/lucene/store/StoreRateLimiting.java
src/main/java/org/apache/lucene/store/StoreUtils.java
src/main/java/org/elasticsearch/Build.java
src/main/java/org/elasticsearch/ElasticsearchException.java
src/main/java/org/elasticsearch/ElasticsearchGenerationException.java
src/main/java/org/elasticsearch/ElasticsearchIllegalArgumentException.java
src/main/java/org/elasticsearch/ElasticsearchIllegalStateException.java
src/main/java/org/elasticsearch/ElasticsearchInterruptedException.java
src/main/java/org/elasticsearch/ElasticsearchNullPointerException.java
src/main/java/org/elasticsearch/ElasticsearchParseException.java
src/main/java/org/elasticsearch/ElasticsearchTimeoutException.java
src/main/java/org/elasticsearch/ElasticsearchWrapperException.java
src/main/java/org/elasticsearch/ExceptionsHelper.java
src/main/java/org/elasticsearch/Version.java
src/main/java/org/elasticsearch/action/Action.java
src/main/java/org/elasticsearch/action/ActionFuture.java
src/main/java/org/elasticsearch/action/ActionListener.java
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/ActionRequest.java
src/main/java/org/elasticsearch/action/ActionRequestBuilder.java
src/main/java/org/elasticsearch/action/ActionRequestValidationException.java
src/main/java/org/elasticsearch/action/ActionResponse.java
src/main/java/org/elasticsearch/action/FailedNodeException.java
src/main/java/org/elasticsearch/action/GenericAction.java
src/main/java/org/elasticsearch/action/ListenableActionFuture.java
src/main/java/org/elasticsearch/action/NoShardAvailableActionException.java
src/main/java/org/elasticsearch/action/NoSuchNodeException.java
src/main/java/org/elasticsearch/action/PrimaryMissingActionException.java
src/main/java/org/elasticsearch/action/RoutingMissingException.java
src/main/java/org/elasticsearch/action/ShardOperationFailedException.java
src/main/java/org/elasticsearch/action/ThreadingModel.java
src/main/java/org/elasticsearch/action/TimestampParsingException.java
src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
src/main/java/org/elasticsearch/action/UnavailableShardsException.java
src/main/java/org/elasticsearch/action/ValidateActions.java
src/main/java/org/elasticsearch/action/WriteConsistencyLevel.java
src/main/java/org/elasticsearch/action/admin/cluster/ClusterAction.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthAction.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthStatus.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterShardHealth.java
src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodeHotThreads.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/restart/NodesRestartAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/restart/NodesRestartRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/restart/NodesRestartRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/node/restart/NodesRestartResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/restart/TransportNodesRestartAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/NodesShutdownAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/NodesShutdownRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/NodesShutdownRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/NodesShutdownResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/TransportNodesShutdownAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/TransportGetRepositoriesAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteAction.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateAction.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodeResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksAction.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java
src/main/java/org/elasticsearch/action/admin/indices/IndicesAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesResponse.java
src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/AliasesExistAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/AliasesExistRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/AliasesExistResponse.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/BaseAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeAction.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeResponse.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/ClearIndicesCacheAction.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/ClearIndicesCacheRequest.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/ClearIndicesCacheRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/ClearIndicesCacheResponse.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/ShardClearIndicesCacheRequest.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/ShardClearIndicesCacheResponse.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/create/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/delete/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushAction.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushResponse.java
src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushResponse.java
src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
src/main/java/org/elasticsearch/action/admin/indices/flush/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/ShardGatewaySnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/ShardGatewaySnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/TransportGatewaySnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetMappingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetMappingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetMappingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeAction.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeResponse.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/ShardOptimizeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/ShardOptimizeResponse.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshAction.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshRequest.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshResponse.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/ShardRefreshRequest.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/ShardRefreshResponse.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/package-info.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndexSegments.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndexShardSegments.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsAction.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java
src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/TransportUpdateSettingsAction.java
comments:
Fix ASL Header in source files to reflect s/ElasticSearch/Elasticsearch

This commit also removes the license to Shay Banon in favor of soley
Elasticsearch. Thanks Shay for this awesome product you took it far!

Closes #4636

time:
2014-01-07T10:21:51Z
class:
src/main/java/org/apache/lucene/store/StoreRateLimiting.java
src/main/java/org/elasticsearch/ElasticsearchException.java
src/main/java/org/elasticsearch/ElasticsearchGenerationException.java
src/main/java/org/elasticsearch/ElasticsearchIllegalArgumentException.java
src/main/java/org/elasticsearch/ElasticsearchIllegalStateException.java
src/main/java/org/elasticsearch/ElasticsearchInterruptedException.java
src/main/java/org/elasticsearch/ElasticsearchNullPointerException.java
src/main/java/org/elasticsearch/ElasticsearchParseException.java
src/main/java/org/elasticsearch/ElasticsearchTimeoutException.java
src/main/java/org/elasticsearch/ElasticsearchWrapperException.java
src/main/java/org/elasticsearch/ExceptionsHelper.java
src/main/java/org/elasticsearch/action/ActionFuture.java
src/main/java/org/elasticsearch/action/ActionRequestBuilder.java
src/main/java/org/elasticsearch/action/ActionRequestValidationException.java
src/main/java/org/elasticsearch/action/FailedNodeException.java
src/main/java/org/elasticsearch/action/PrimaryMissingActionException.java
src/main/java/org/elasticsearch/action/RoutingMissingException.java
src/main/java/org/elasticsearch/action/ThreadingModel.java
src/main/java/org/elasticsearch/action/TimestampParsingException.java
src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
src/main/java/org/elasticsearch/action/UnavailableShardsException.java
src/main/java/org/elasticsearch/action/WriteConsistencyLevel.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthStatus.java
src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/restart/TransportNodesRestartAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/TransportNodesShutdownAction.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/TransportGetRepositoriesAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java
src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/TransportGatewaySnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/TransportUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
src/main/java/org/elasticsearch/action/admin/indices/status/GatewayRecoveryStatus.java
src/main/java/org/elasticsearch/action/admin/indices/status/GatewaySnapshotStatus.java
src/main/java/org/elasticsearch/action/admin/indices/status/PeerRecoveryStatus.java
src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplatesAction.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/get/TransportGetWarmersAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/count/CountRequest.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/main/java/org/elasticsearch/action/delete/index/TransportShardDeleteAction.java
src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/deletebyquery/TransportDeleteByQueryAction.java
src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/main/java/org/elasticsearch/action/get/GetResponse.java
src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
src/main/java/org/elasticsearch/action/get/TransportGetAction.java
src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
src/main/java/org/elasticsearch/action/index/IndexRequest.java
src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java
src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequestBuilder.java
src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
src/main/java/org/elasticsearch/action/search/SearchOperationThreading.java
src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
src/main/java/org/elasticsearch/action/search/SearchRequest.java
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/action/search/SearchType.java
src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchHelper.java
src/main/java/org/elasticsearch/action/suggest/SuggestRequestBuilder.java
src/main/java/org/elasticsearch/action/suggest/TransportSuggestAction.java
src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
src/main/java/org/elasticsearch/action/support/IndicesOptions.java
src/main/java/org/elasticsearch/action/support/TransportAction.java
src/main/java/org/elasticsearch/action/support/broadcast/BroadcastOperationThreading.java
src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardOperationFailedException.java
src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java
src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeOperationAction.java
src/main/java/org/elasticsearch/action/support/master/info/TransportClusterInfoAction.java
src/main/java/org/elasticsearch/action/support/nodes/TransportNodesOperationAction.java
src/main/java/org/elasticsearch/action/support/replication/ReplicationShardOperationFailedException.java
src/main/java/org/elasticsearch/action/support/replication/ReplicationType.java
src/main/java/org/elasticsearch/action/support/replication/TransportIndexReplicationOperationAction.java
src/main/java/org/elasticsearch/action/support/replication/TransportIndicesReplicationOperationAction.java
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
src/main/java/org/elasticsearch/action/support/single/shard/TransportShardSingleOperationAction.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequest.java
src/main/java/org/elasticsearch/action/termvector/TermVectorRequest.java
src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java
src/main/java/org/elasticsearch/action/termvector/TransportSingleShardMultiTermsVectorAction.java
src/main/java/org/elasticsearch/action/termvector/TransportSingleShardTermVectorAction.java
src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
src/main/java/org/elasticsearch/action/update/UpdateHelper.java
src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
src/main/java/org/elasticsearch/bootstrap/ElasticsearchF.java
src/main/java/org/elasticsearch/bulk/udp/BulkUdpService.java
src/main/java/org/elasticsearch/cache/recycler/CacheRecycler.java
src/main/java/org/elasticsearch/cache/recycler/PageCacheRecycler.java
src/main/java/org/elasticsearch/client/transport/NoNodeAvailableException.java
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/main/java/org/elasticsearch/client/transport/support/InternalTransportClient.java
src/main/java/org/elasticsearch/client/transport/support/InternalTransportClusterAdminClient.java
src/main/java/org/elasticsearch/client/transport/support/InternalTransportIndicesAdminClient.java
src/main/java/org/elasticsearch/cluster/ClusterService.java
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeIndexDeletedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeMappingRefreshAction.java
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
src/main/java/org/elasticsearch/cluster/block/ClusterBlockException.java
src/main/java/org/elasticsearch/cluster/block/ClusterBlockLevel.java
src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java
src/main/java/org/elasticsearch/cluster/metadata/AliasMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
src/main/java/org/elasticsearch/cluster/metadata/ProcessClusterEventTimeoutException.java
src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/RestoreMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/SnapshotMetaData.java
src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
src/main/java/org/elasticsearch/cluster/routing/RoutingException.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
src/main/java/org/elasticsearch/cluster/routing/ShardRoutingState.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocationCommands.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/cluster/settings/Validator.java
src/main/java/org/elasticsearch/common/Preconditions.java
src/main/java/org/elasticsearch/common/Priority.java
src/main/java/org/elasticsearch/common/Strings.java
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/common/blobstore/BlobStoreException.java
src/main/java/org/elasticsearch/common/blobstore/fs/FsImmutableBlobContainer.java
src/main/java/org/elasticsearch/common/breaker/CircuitBreakingException.java
src/main/java/org/elasticsearch/common/bytes/BytesArray.java
src/main/java/org/elasticsearch/common/bytes/HashedBytesArray.java
src/main/java/org/elasticsearch/common/collect/HppcMaps.java
src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
src/main/java/org/elasticsearch/common/component/CloseableComponent.java
src/main/java/org/elasticsearch/common/component/Lifecycle.java
src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
src/main/java/org/elasticsearch/common/geo/GeoDistance.java
src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
src/main/java/org/elasticsearch/common/geo/GeoPoint.java
src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
src/main/java/org/elasticsearch/common/http/client/HttpDownloadHelper.java
src/main/java/org/elasticsearch/common/inject/Modules.java
src/main/java/org/elasticsearch/common/joda/DateMathParser.java
src/main/java/org/elasticsearch/common/lease/Releasable.java
src/main/java/org/elasticsearch/common/logging/log4j/ConsoleAppender.java
src/main/java/org/elasticsearch/common/lucene/all/AllEntries.java
src/main/java/org/elasticsearch/common/lucene/all/AllField.java
src/main/java/org/elasticsearch/common/network/NetworkUtils.java
src/main/java/org/elasticsearch/common/recycler/NoneRecycler.java
src/main/java/org/elasticsearch/common/recycler/QueueRecycler.java
src/main/java/org/elasticsearch/common/recycler/ThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/regex/Regex.java
src/main/java/org/elasticsearch/common/rounding/DateTimeUnit.java
src/main/java/org/elasticsearch/common/rounding/Rounding.java
src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java
src/main/java/org/elasticsearch/common/settings/SettingsException.java
src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
src/main/java/org/elasticsearch/common/unit/DistanceUnit.java
src/main/java/org/elasticsearch/common/unit/SizeValue.java
src/main/java/org/elasticsearch/common/unit/TimeValue.java
src/main/java/org/elasticsearch/common/util/concurrent/AtomicArray.java
src/main/java/org/elasticsearch/common/util/concurrent/CountDown.java
src/main/java/org/elasticsearch/common/util/concurrent/EsAbortPolicy.java
src/main/java/org/elasticsearch/common/util/concurrent/EsRejectedExecutionException.java
src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java
src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
src/main/java/org/elasticsearch/common/util/concurrent/SizeBlockingQueue.java
src/main/java/org/elasticsearch/common/util/concurrent/UncategorizedExecutionException.java
src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
src/main/java/org/elasticsearch/common/xcontent/XContentFactory.java
src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java
src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentParser.java
src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java
src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
src/main/java/org/elasticsearch/discovery/DiscoveryException.java
src/main/java/org/elasticsearch/discovery/DiscoveryService.java
src/main/java/org/elasticsearch/discovery/MasterNotDiscoveredException.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
comments:
Cleanup comments and class names s/ElasticSearch/Elasticsearch

 * Clean up s/ElasticSearch/Elasticsearch on docs/*
 * Clean up s/ElasticSearch/Elasticsearch on src/* bin/* & pom.xml
 * Clean up s/ElasticSearch/Elasticsearch on NOTICE.txt and README.textile

Closes #4634

time:
2014-01-07T09:52:06Z
class:
comments:
Start elasticsearch as deamon when running smoketests

In previous version daemonized was default now we need to set it explicitly.

time:
2014-01-07T00:51:08Z
class:
src/main/java/org/elasticsearch/common/joda/FormatDateTimeFormatter.java
src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
comments:
Make partial dates without year to be 1970 based instead of 2000

Fixes #4451

Date fields without date (HH:mm:ss, for example) are parsed as time on Jan 1, 1970 UTC. However, before this change partial dates without year (MMM dd HH:mm:ss, for example) were parsed as as days of they year 2000. This change makes all partial dates to be treated based on year 1970. This is breaking change - before this change "Dec 15, 10:00:00" in most cases was parsed (and indexed) as "2000-12-15T10:00:00Z". After this change, it will be consistently parsed and indexed as  "1970-12-15T10:00:00Z"

time:
2014-01-07T00:50:03Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
cat stats: remove "total" prefix and shorten "primaries" to "pri"

total is the normal case and primaries just shows up in _cat/indices.

time:
2014-01-06T23:24:33Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Update primaryOrReplica column.

time:
2014-01-06T23:24:31Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Add rest of index stats to cat/nodes and cat/shards.

Closes #4607.

time:
2014-01-06T23:03:44Z
class:
src/main/java/org/elasticsearch/cloud/azure/AzureModule.java
src/main/java/org/elasticsearch/cloud/azure/AzureSettingsFilter.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscovery.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscoveryModule.java
src/test/java/org/elasticsearch/azure/itest/AzureSimpleITest.java
src/test/java/org/elasticsearch/azure/test/AzureAbstractTest.java
src/test/java/org/elasticsearch/cloud/azure/AbstractAzureTest.java
src/test/java/org/elasticsearch/discovery/azure/AbstractAzureComputeServiceTest.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceAbstractMock.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceSimpleMock.java
src/test/java/org/elasticsearch/discovery/azure/AzureComputeServiceTwoNodesMock.java
src/test/java/org/elasticsearch/discovery/azure/AzureInstanceXmlParserTest.java
src/test/java/org/elasticsearch/discovery/azure/AzureSimpleTest.java
src/test/java/org/elasticsearch/discovery/azure/AzureTwoStartedNodesTest.java
comments:
Move tests to elasticsearch test framework

Move tests to elasticsearch test framework.
In addition to this, we want to refactor some package names to prepare next snapshot/restore feature (see #2).

Closes #3.

time:
2014-01-06T22:08:53Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
comments:
Add total stats to cat/indices.

time:
2014-01-06T22:08:48Z
class:
comments:
Document h/headers switcheroo.

time:
2014-01-06T22:08:08Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
comments:
Add remaining aliases to cat/indices.

time:
2014-01-06T22:08:08Z
class:
src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Swap help and headers params.

time:
2014-01-06T22:08:08Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
comments:
Add alias sample.

time:
2014-01-06T22:08:08Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
comments:
Add rest of indices primaries stats.

time:
2014-01-06T22:08:08Z
class:
src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
comments:
Add ByteSizeValue to SegmentStats.

time:
2014-01-06T22:08:08Z
class:
src/main/java/org/elasticsearch/common/Table.java
comments:
Add more info to table row size errors.

time:
2014-01-06T20:45:35Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
comments:
*a*wait...
sneaky! Thanks!


time:
2014-01-06T20:45:21Z
class:
src/main/java/org/elasticsearch/cache/recycler/PageCacheRecycler.java
comments:
simplify by directly getting the search TP info

time:
2014-01-06T20:39:20Z
class:
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
generic thread pool should always be cached
when using generic thread pool, some elements in the code base rely on the fact that it will always be able to fork it

time:
2014-01-06T18:02:00Z
class:
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/main/java/org/elasticsearch/cache/recycler/CacheRecycler.java
src/main/java/org/elasticsearch/cache/recycler/DefaultPageCacheRecyclerModule.java
src/main/java/org/elasticsearch/cache/recycler/PageCacheRecycler.java
src/main/java/org/elasticsearch/cache/recycler/PageCacheRecyclerModule.java
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/common/lease/Releasables.java
src/main/java/org/elasticsearch/common/recycler/NoneRecycler.java
src/main/java/org/elasticsearch/common/recycler/QueueRecycler.java
src/main/java/org/elasticsearch/common/recycler/Recycler.java
src/main/java/org/elasticsearch/common/recycler/SoftThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/recycler/ThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java
src/main/java/org/elasticsearch/common/settings/Settings.java
src/main/java/org/elasticsearch/common/unit/MemorySizeValue.java
src/main/java/org/elasticsearch/common/util/AbstractArray.java
src/main/java/org/elasticsearch/common/util/AbstractBigArray.java
src/main/java/org/elasticsearch/common/util/BigArray.java
src/main/java/org/elasticsearch/common/util/BigArrays.java
src/main/java/org/elasticsearch/common/util/BigByteArray.java
src/main/java/org/elasticsearch/common/util/BigDoubleArray.java
src/main/java/org/elasticsearch/common/util/BigDoubleArrayList.java
src/main/java/org/elasticsearch/common/util/BigFloatArrayList.java
src/main/java/org/elasticsearch/common/util/BigIntArray.java
src/main/java/org/elasticsearch/common/util/BigLongArray.java
src/main/java/org/elasticsearch/common/util/BigObjectArray.java
src/main/java/org/elasticsearch/common/util/ByteArray.java
src/main/java/org/elasticsearch/common/util/UnsafeUtils.java
src/main/java/org/elasticsearch/indices/cache/filter/IndicesFilterCache.java
src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/search/SearchService.java
src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorFactories.java
src/main/java/org/elasticsearch/search/aggregations/bucket/AbstractHash.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BytesRefHash.java
src/main/java/org/elasticsearch/search/aggregations/bucket/LongHash.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/test/java/org/elasticsearch/cache/recycler/MockPageCacheRecycler.java
src/test/java/org/elasticsearch/common/recycler/AbstractRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/QueueRecyclerTests.java
src/test/java/org/elasticsearch/common/util/BigArraysTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
src/test/java/org/elasticsearch/search/aggregations/bucket/BytesRefHashTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongHashTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/cache/recycler/MockPageCacheRecyclerModule.java
comments:
Page-based cache recycling.

Refactor cache recycling so that it only caches large arrays (pages) that can
later be used to build more complex data-structures such as hash tables.

 - QueueRecycler now takes a limit like other non-trivial recyclers.
 - New PageCacheRecycler (inspired of CacheRecycler) has the ability to cache
   byte[], int[], long[], double[] or Object[] arrays using a fixed amount of
   memory (either globally or per-thread depending on the Recycler impl, eg.
   queue is global while thread_local is per-thread).
 - Paged arrays in o.e.common.util can now optionally take a PageCacheRecycler
   to reuse existing pages.
 - All aggregators' data-structures now use PageCacheRecycler:
   - for all arrays (counts, mins, maxes, ...)
   - LongHash can now take a PageCacheRecycler
   - there is a new BytesRefHash (inspired from Lucene but quite different,
     still; for instance it cheats on BytesRef comparisons by using Unsafe)
     that also takes a PageCacheRecycler

Close #4557

time:
2014-01-06T17:36:09Z
class:
comments:
Add a message about import style

We don't have a consistent style and we don't want new contributors to
get hung up on trying to figure out the style.

time:
2014-01-06T16:47:51Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
comments:
Use a tolerance to decide if a value is less than the threshold

Adding a small value to the threshold prevents weight deltas that are
very very close to the threshold to not trigger relocations. These
deltas can be rounding errors that lead to unnecessary relocations. In
practice this might only happen under very rare circumstances.
In general it's a good idea for the shard allocator to be a bit
more conversavtive in terms of rebalancing since in general relocation
costs are pretty high.

Closes #4630

time:
2014-01-06T16:44:56Z
class:
comments:
Clarify options for flush request

time:
2014-01-06T16:44:56Z
class:
src/main/java/org/elasticsearch/common/logging/support/LoggerMessageFormat.java
comments:
s/StringBuffer/StringBuilder

time:
2014-01-06T16:25:15Z
class:
comments:
[SPEC] Bringing back the specs for _aliases

time:
2014-01-06T13:57:39Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
comments:
Rename `score` to `track_scores` in percolate api.

Closes #4624

time:
2014-01-06T10:01:52Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetIndicesAliasesAction.java
comments:
Brought back the deprecated _aliases api.

time:
2014-01-06T08:53:42Z
class:
src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java
src/main/java/org/elasticsearch/index/fielddata/FieldDataType.java
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/indices/warmer/IndicesWarmer.java
src/main/java/org/elasticsearch/indices/warmer/InternalIndicesWarmer.java
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Eager norms loading options.

Norms can be eagerly loaded on a per-field basis by setting norms.loading to
`eager` instead of the default `lazy`:

```
"my_string_field" : {
  "type": "string",
  "norms": {
    "loading": "eager"
  }
}
```

In case this behavior should be applied to all fields, it is possible to change
the default value by setting `index.norms.loading` to `eager`.

Close #4079

time:
2014-01-06T08:04:57Z
class:
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
src/main/java/org/elasticsearch/cluster/ClusterModule.java
src/main/java/org/elasticsearch/cluster/action/index/NodeIndexCreatedAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Refactored create index api to make use of the new recently introduced generic ack mechanism

Closes #4421

time:
2014-01-06T07:33:32Z
class:
src/main/java/org/elasticsearch/action/admin/indices/stats/IndexShardStats.java
src/main/java/org/elasticsearch/indices/InternalIndicesService.java
src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
comments:
Simplify nodes stats API

First, this breaks backwards compatibility!

* Removed /_cluster/nodes/stats endpoint
* Excpect the stats types not as parameters, but as part of the URL
* Returning all indices stats by default, returning all nodes stats by default
* Supporting groups & types in nodes stats now as well
* Updated documentation & tests accordingly
* Allow level parameter for "shards" and "indices" (cluster does not make sense here)

Closes #4057

time:
2014-01-06T06:27:03Z
class:
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/index/translog/Translog.java
src/main/java/org/elasticsearch/index/translog/TranslogStats.java
src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
comments:
Simplify indices stats API

Note: This breaks backward compatibility

* Removed clear/all parameters, now all stats are returned by default
* Made the metrics part of the URL
* Removed a lot of handlers
* Added shards/indices/cluster level paremeter to change response serialization
* Returning translog statistics in IndicesStats
* Added TranslogStats class
* Added IndexShard.translogStats() method to get the stats from concrete implementation
* Updated documentation

Closes #4054

time:
2014-01-05T22:32:44Z
class:
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
comments:
Added missing indices options to rest spec and rest actions.

time:
2014-01-05T22:11:34Z
class:
src/main/java/org/elasticsearch/action/admin/indices/alias/get/BaseAliasesRequestBuilder.java
src/test/java/org/elasticsearch/indices/IndicesOptionsTests.java
comments:
Renamed old setIgnoreIndices to setIndicesOptions.

time:
2014-01-04T22:18:21Z
class:
src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
comments:
use trace logging to print RoutingNodes in test

time:
2014-01-03T23:21:55Z
class:
src/main/java/org/elasticsearch/indices/fielddata/breaker/InternalCircuitBreakerService.java
comments:
Default the circuit breaker limit to 80% of the maximum JVM heap

time:
2014-01-03T23:14:19Z
class:
src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
src/main/java/org/elasticsearch/index/query/SimpleQueryStringFlag.java
src/main/java/org/elasticsearch/index/query/SimpleQueryStringParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Expose `simple_query_string` flags in `flags` parameter

time:
2014-01-03T20:48:43Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
pass on node seed to the node level settings in TestCluster

time:
2014-01-03T17:44:44Z
class:
src/main/java/org/elasticsearch/common/regex/Regex.java
src/test/java/org/elasticsearch/common/regex/RegexTests.java
comments:
Fix potential infinite loop in double wildcard processing

Fixes #4610

time:
2014-01-03T16:55:53Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/NodeVersionAllocationDecider.java
comments:
Fix typo in JavaDoc -- s/note/not

time:
2014-01-03T16:40:27Z
class:
comments:
Do not start packages on installation

The reason to not start packages on installation is to allow to configure
them before starting up (setting heap, cluster.name etc)

Also the documentation was updated in order to show, which statements need
to be executed.
In addition, these statements are also printed out when the package is
installed, depending on whether chkconfig, system or update-rc.d is used.

Closes #3722

time:
2014-01-03T16:29:12Z
class:
src/main/java/org/elasticsearch/index/get/GetField.java
src/main/java/org/elasticsearch/index/get/GetResult.java
src/main/java/org/elasticsearch/index/get/ShardGetService.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/search/SearchHitField.java
src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
src/main/java/org/elasticsearch/search/internal/InternalSearchHitField.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
comments:
The `fields` option should always return an array for json document fields and single valued field for metadata fields.
Also the `fields` option can only be used to fetch leaf fields, trying to do fetch object fields will return in a client error.

Closes #4542

time:
2014-01-03T16:22:00Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Add cache stats to cat/nodes.

Closes #4543.

time:
2014-01-03T15:48:18Z
class:
src/main/java/org/elasticsearch/common/http/client/HttpDownloadHelper.java
src/main/java/org/elasticsearch/plugins/PluginManager.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
plugin manager: new `timeout` option

When testing plugin manager with real downloads, it could happen that the test run forever. Fortunately, test suite will be interrupted after 20 minutes, but it could be useful not to fail the whole test suite but only warn in that case.

By default, plugin manager still wait indefinitely but it can be modified using new `--timeout` option:

```sh
bin/plugin --install elasticsearch/kibana --timeout 30s

bin/plugin --install elasticsearch/kibana --timeout 1h
```

Closes #4603.
Closes #4600.

time:
2014-01-03T15:37:29Z
class:
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
comments:
Fixed issue where the parentTypes set would be updated when a new parent type is being added or removed during a refresh, which would have lead to concurrency issues.

time:
2014-01-03T14:51:33Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Pass correct number of expected shards to assertion

time:
2014-01-03T14:51:33Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecidersModule.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/NodeVersionAllocationDecider.java
src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
comments:
Add NodeVersionAllocationDecider that prevent allocations that require forward compatibility.

Today during restart scenarios it is possible that we recover from a node that
has already been upgraded to version N+1. The node that we relocate to is
on version N and might not be able to read the index format from the node
we relocate from. This causes `IndexFormatToNewException` during
recovery but only after recovery has finished which can cause large
load spikes during the upgrade period.

Closes #4588
s/note/not/

heh thanks I will fix!


time:
2014-01-03T14:24:27Z
class:
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
comments:
Fixed SimpleIdCache#clear() to not invoke onRemoval twice, which can happen in rare cases.

time:
2014-01-03T14:24:27Z
class:
src/main/java/org/elasticsearch/index/cache/id/IdCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
comments:
IdCache shouldn't implement Iterable

time:
2014-01-03T14:24:27Z
class:
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/mapper/DocumentTypeListener.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Already loaded SimpleIdReaderCache should be reloaded when a new `_parent` has been introduced.

Closes #4595
Relates #4568

time:
2014-01-03T14:06:03Z
class:
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/CircuitBreakerServiceTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Fix transient settings assertions in ElasticsearchIntegrationTest

We missed to fail if transient settings were modifed in the test since we
compared against persistent settings.

time:
2014-01-03T13:15:15Z
class:
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
src/main/java/org/elasticsearch/action/count/CountRequest.java
comments:
Raise visibilty of `#types()` to public in request classes

`CountRequest` and `ValidateQueryRequest` have package
private accessors for `#types()` which is inconsitent with
other getters.

time:
2014-01-03T13:03:24Z
class:
src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
comments:
Check if node is still present when collecting attribute shard routings

The node we need to lookup for attribute colelction might not be part
of the `DiscoveryNodes` anymore due to node failure or shutdown. This
commit adds a check and removes the shard from the iteration.

Closes #4589

time:
2014-01-03T13:00:23Z
class:
src/main/java/org/elasticsearch/script/AbstractSearchScript.java
src/main/java/org/elasticsearch/search/lookup/CachedPositionIterator.java
src/main/java/org/elasticsearch/search/lookup/IndexField.java
src/main/java/org/elasticsearch/search/lookup/IndexFieldTerm.java
src/main/java/org/elasticsearch/search/lookup/IndexLookup.java
src/main/java/org/elasticsearch/search/lookup/PositionIterator.java
src/main/java/org/elasticsearch/search/lookup/SearchLookup.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeNaiveTFIDFScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativePayloadSumNoRecordScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativePayloadSumScoreScript.java
src/test/java/org/elasticsearch/script/IndexLookupTests.java
comments:
rename _shard -> _index and also rename classes and variables

closes #4584

time:
2014-01-03T08:41:36Z
class:
src/main/java/org/elasticsearch/common/geo/GeoDistance.java
comments:
Setup an accurate version of Haversine closes #4596

time:
2014-01-02T23:41:26Z
class:
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
support aliases for columns in cat API
use it as an example in nodes for now for some columns, though we need to go over all the columns and properly name them and alias them

time:
2014-01-02T22:04:47Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
src/main/java/org/elasticsearch/common/breaker/CircuitBreakingException.java
src/main/java/org/elasticsearch/common/breaker/MemoryCircuitBreaker.java
src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
src/main/java/org/elasticsearch/index/fielddata/RamAccountingTermsEnum.java
src/main/java/org/elasticsearch/index/fielddata/ShardFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DisabledIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointBinaryDVIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointCompressedIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/NonEstimatingEstimator.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesIndexFieldData.java
src/main/java/org/elasticsearch/indices/IndicesModule.java
src/main/java/org/elasticsearch/indices/fielddata/breaker/CircuitBreakerService.java
src/main/java/org/elasticsearch/indices/fielddata/breaker/FieldDataBreakerStats.java
src/main/java/org/elasticsearch/indices/fielddata/breaker/InternalCircuitBreakerService.java
src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
src/main/java/org/elasticsearch/node/service/NodeService.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
src/main/java/org/elasticsearch/search/SearchModule.java
src/test/java/org/elasticsearch/benchmark/fielddata/LongFieldDataBenchmark.java
src/test/java/org/elasticsearch/common/breaker/MemoryCircuitBreakerTests.java
src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
src/test/java/org/elasticsearch/index/codec/CodecTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
src/test/java/org/elasticsearch/index/mapper/MapperTestUtils.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/index/query/guice/IndexQueryParserModuleTests.java
src/test/java/org/elasticsearch/index/query/plugin/IndexQueryParserPlugin2Tests.java
src/test/java/org/elasticsearch/index/query/plugin/IndexQueryParserPluginTests.java
src/test/java/org/elasticsearch/index/search/FieldDataTermsFilterTests.java
src/test/java/org/elasticsearch/index/similarity/SimilarityTests.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/CircuitBreakerServiceTests.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/DummyCircuitBreakerService.java
src/test/java/org/elasticsearch/indices/fielddata/breaker/RandomExceptionCircuitBreakerTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Add field data memory circuit breaker.

This adds the field data circuit breaker, which is used to estimate
the amount of memory required to load field data before loading it. It
then raises a CircuitBreakingException if the limit is exceeded.

It is configured with two parameters:

`indices.fielddata.cache.breaker.limit` - the maximum number of bytes
of field data to be loaded before circuit breaking. Defaults to
`indices.fielddata.cache.size` if set, unbounded otherwise.

`indices.fielddata.cache.breaker.overhead` - a contast for all field
data estimations to be multiplied with before aggregation. Defaults to
1.03.

Both settings can be configured dynamically using the cluster update
settings API.

time:
2014-01-02T21:07:53Z
class:
comments:
In the spirit of the soon-to-be New Year 2014?

time:
2014-01-02T19:04:24Z
class:
comments:
[TEST] add name parameter to get_alias in update_alias tests

to avoid failure on older es versions since get_alias without name has been
only introduced in #4539

time:
2014-01-02T19:04:24Z
class:
comments:
[TEST] split tests with parent to pre/post 1.0 in the yaml test suite

See #4506 for details

time:
2014-01-02T19:04:24Z
class:
comments:
[TEST] Split delete by query tests pre-1.0 and post-1.0

See #4074 for details

time:
2014-01-02T16:53:43Z
class:
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
comments:
s/similariry/similarity in AllFieldMapper

time:
2014-01-02T16:15:51Z
class:
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
comments:
Simulate the entire toXContent instead of special caseing

Today we try to detect if we need to generate the mapping or not in
the all mapper. This is error prone since it misses conditions if not
explicitly added. We should rather similate the generation instead.

This commit also adds a random test to check if the settings
of the all field mapper are correctly applied.

Closes #4579
Closes #4581

time:
2014-01-02T16:15:51Z
class:
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
comments:
Term Vector settings should be treated like flags without propergation

today if a specific feature is disabled for term vectors with something
like 'store_term_vector_positions = false' term vectors might be disabeled
alltogether even if 'store_term_vectors=true' in the mapping. This depends on the
order of the values in the mapping since the more specific one might override
the less specific on.

Closes #4582

time:
2014-01-02T16:03:24Z
class:
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
comments:
remove double check for null in value source

time:
2014-01-02T12:56:11Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
comments:
Remove GET `_aliases` api in favour for GET `_alias` api

Currently there are two get aliases apis that both have the same functionality, but have a different response structure. The reason for having 2 apis is historic.

The GET _alias api was added in 0.90.x and is more efficient since it only sends the needed alias data from the cluster state between the master node and the node that received the request. In the GET _aliases api the complete cluster state is send to the node that received the request and then the right information is filtered out and send back to the client.

The GET _aliases api should be removed in favour for the alias api

Closes to #4539

time:
2014-01-02T12:00:41Z
class:
src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
comments:
Made parsing of ByteSizeValue case independent

This allows to parse '12GB' as well as '12gb'

Closes #4442

time:
2014-01-02T11:19:45Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/BaseAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/IndicesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TypesExistsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/TransportUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
src/main/java/org/elasticsearch/action/search/MultiSearchRequestBuilder.java
src/main/java/org/elasticsearch/action/search/SearchRequest.java
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/main/java/org/elasticsearch/action/support/IgnoreIndices.java
src/main/java/org/elasticsearch/action/support/IndicesOptions.java
src/main/java/org/elasticsearch/action/support/broadcast/BroadcastOperationRequest.java
src/main/java/org/elasticsearch/action/support/broadcast/BroadcastOperationRequestBuilder.java
src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java
src/main/java/org/elasticsearch/action/support/master/info/ClusterInfoRequest.java
src/main/java/org/elasticsearch/action/support/master/info/ClusterInfoRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/info/TransportClusterInfoAction.java
src/main/java/org/elasticsearch/action/support/replication/IndicesReplicationOperationRequest.java
src/main/java/org/elasticsearch/action/support/replication/IndicesReplicationOperationRequestBuilder.java
src/main/java/org/elasticsearch/action/support/replication/TransportIndicesReplicationOperationAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/index/query/IndicesFilterParser.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/shards/RestClusterSearchShardsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/indices/RestIndicesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/gateway/snapshot/RestGatewaySnapshotAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/delete/RestDeleteMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/optimize/RestOptimizeAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/segments/RestIndicesSegmentsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/status/RestIndicesStatusAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/deletebyquery/RestDeleteByQueryAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestMultiPercolateAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestPercolateAction.java
src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java
src/main/java/org/elasticsearch/snapshots/RestoreService.java
src/main/java/org/elasticsearch/snapshots/SnapshotUtils.java
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
src/test/java/org/elasticsearch/action/percolate/MultiPercolatorRequestTests.java
src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/IndicesOptionsTests.java
src/test/java/org/elasticsearch/indices/exists/types/TypesExistsTests.java
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/search/aggregations/RandomTests.java
src/test/java/org/elasticsearch/snapshots/SnapshotUtilsTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Replaced `ignore_indices` with `ignore_unavailable`, `expand_wildcards` and `allow_no_indices`.

* `ignore_unavailable` - Controls whether to ignore if any specified indices are unavailable, this includes indices that don't exist or closed indices. Either `true` or `false` can be specified.
* `allow_no_indices` - Controls whether to fail if a wildcard indices expressions results into no concrete indices. Either `true` or `false` can be specified. For example if the wildcard expression `foo*` is specified and no indices are available that start with `foo` then depending on this setting the request will fail. This setting is also applicable when `_all`, `*` or no index has been specified.
* `expand_wildcards` - Controls to what kind of concrete indices wildcard indices expression expand to. If `open` is specified then the wildcard expression if expanded to only open indices and if `closed` is specified then the wildcard expression if expanded only to closed indices. Also both values (`open,closed`) can be specified to expand to all indices.

Closes to #4436

time:
2014-01-02T11:06:29Z
class:
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesRequest.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/test/hamcrest/CollectionAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/CollectionMatchers.java
comments:
Allow GetAliasRequest to retrieve all aliases

Results in less data being sent over the wire, as the Cat API does not
need to have the whole cluster state.

Also added matchers for hasKey() for immutable open map (I think we should
add more of those to have map style assertions).

Closes #4455

time:
2014-01-02T10:17:33Z
class:
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java
src/main/java/org/elasticsearch/common/util/MinimalMap.java
src/main/java/org/elasticsearch/script/AbstractSearchScript.java
src/main/java/org/elasticsearch/search/lookup/CachedPositionIterator.java
src/main/java/org/elasticsearch/search/lookup/PositionIterator.java
src/main/java/org/elasticsearch/search/lookup/ScriptTerm.java
src/main/java/org/elasticsearch/search/lookup/ScriptTerms.java
src/main/java/org/elasticsearch/search/lookup/SearchLookup.java
src/main/java/org/elasticsearch/search/lookup/ShardTermsLookup.java
src/main/java/org/elasticsearch/search/lookup/TermPosition.java
src/test/java/org/elasticsearch/benchmark/scripts/score/BasicScriptBenchmark.java
src/test/java/org/elasticsearch/benchmark/scripts/score/ScriptsConstantScoreBenchmark.java
src/test/java/org/elasticsearch/benchmark/scripts/score/ScriptsScoreBenchmark.java
src/test/java/org/elasticsearch/benchmark/scripts/score/ScriptsScorePayloadSumBenchmark.java
src/test/java/org/elasticsearch/benchmark/scripts/score/plugin/NativeScriptExamplesPlugin.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeConstantForLoopScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeConstantScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativeNaiveTFIDFScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativePayloadSumNoRecordScoreScript.java
src/test/java/org/elasticsearch/benchmark/scripts/score/script/NativePayloadSumScoreScript.java
src/test/java/org/elasticsearch/script/ShardLookupInScriptTests.java
comments:
make term statistics accessible in scripts

term statistics can be accessed via the _shard variable.

Below is a minimal example. See documentation on details.

```

DELETE paytest

PUT paytest
{
    "mappings": {
        "test": {
            "_all": {
                "auto_boost": true,
                "enabled": true
            },
            "properties": {
                "text": {
                    "index_analyzer": "fulltext_analyzer",
                    "store": "yes",
                    "type": "string"
                }
            }
        }
    },
    "settings": {
        "analysis": {
            "analyzer": {
                "fulltext_analyzer": {
                    "filter": [
                        "my_delimited_payload_filter"
                    ],
                    "tokenizer": "whitespace",
                    "type": "custom"
                }
            },
            "filter": {
                "my_delimited_payload_filter": {
                    "delimiter": "+",
                    "encoding": "float",
                    "type": "delimited_payload_filter"
                }
            }
        },
        "index": {
            "number_of_replicas": 0,
            "number_of_shards": 1
        }
    }
}

POST paytest/test/1
{
    "text": "the+1 quick+2 brown+3 fox+4 is quick+10"
}

POST paytest/test/2
{
    "text": "the+1 quick+2 red+3 fox+4"
}

POST paytest/_refresh

POST paytest/_search
{
    "script_fields": {
       "ttf": {
          "script": "_shard[\"text\"][\"quick\"].ttf()"
       }
    }
}

POST paytest/_search
{
    "script_fields": {
       "freq": {
          "script": "_shard[\"text\"][\"quick\"].freq()"
       }
    }
}
POST paytest/test/2/_termvector
POST paytest/_search
{
    "script_fields": {
       "payloads": {
          "script": "term = _shard[\"text\"].get(\"red\",_PAYLOADS);payloads = []; for(pos : term){payloads.add(pos.payloadAsFloat(-1));} return payloads;"
       }
    }
}

POST paytest/_search
{
   "script_fields": {
      "tv": {
         "script": "_shard[\"text\"][\"quick\"].freq()"
      }
   },
   "query": {
      "function_score": {
         "functions": [
            {
               "script_score": {
                  "script": "_shard[\"text\"][\"quick\"].freq()"
               }
            }
         ]
      }
   }
}

```

closes #3772

time:
2014-01-02T10:16:55Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java
comments:
do not call score() twice

time:
2014-01-02T09:47:53Z
class:
src/main/java/org/elasticsearch/action/RoutingMissingException.java
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/main/java/org/elasticsearch/action/get/TransportGetAction.java
src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
src/main/java/org/elasticsearch/action/termvector/TermVectorRequest.java
src/main/java/org/elasticsearch/action/termvector/TransportMultiTermVectorsAction.java
src/main/java/org/elasticsearch/action/termvector/TransportSingleShardTermVectorAction.java
src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/test/java/org/elasticsearch/mget/SimpleMgetTests.java
src/test/java/org/elasticsearch/routing/AliasRoutingTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
comments:
Made single shards APIs fail if routing is configured to be required in the mapping.

 This change make single shard requests fail when no routing is specified and routing has been configured to be required in the mapping. Thi

 Closes #4506
HI @martijnvg 

This should be a `request` error, not a `param` error, which is used for client-side validation instead.

If `_parent` field has been configured then routing automatically becomes required in the mapping. (this was changed so time ago) 
So if routing is specified to be required in the mapping, but no routing has been specified then it should be a client error, right? A server error seems wrong to me.

I misunderstood the difference between `request` and `param` in the yaml test suite, I thought `request` translated to internal sever error... 


time:
2014-01-02T09:27:53Z
class:
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Allow 'omit_norms'  on the '_all' field

The '_all' field doesn't allow to omit norms. In certain scenarios
omitting the norm values makes a lot of sense to get senseable scoring.

Closes #3734

time:
2014-01-02T09:06:01Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ShardValidateQueryRequest.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequestBuilder.java
src/main/java/org/elasticsearch/action/count/CountRequest.java
src/main/java/org/elasticsearch/action/count/CountRequestBuilder.java
src/main/java/org/elasticsearch/action/count/ShardCountRequest.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequestBuilder.java
src/main/java/org/elasticsearch/action/deletebyquery/IndexDeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/deletebyquery/ShardDeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java
src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
src/main/java/org/elasticsearch/action/explain/ExplainRequestBuilder.java
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/main/java/org/elasticsearch/action/support/QuerySourceBuilder.java
src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/deletebyquery/RestDeleteByQueryAction.java
src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
src/main/java/org/elasticsearch/rest/action/support/RestActions.java
src/test/java/org/elasticsearch/ElasticSearchExceptionTests.java
src/test/java/org/elasticsearch/broadcast/BroadcastActionsTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Made APIs consistently accept a query in the request body's `query` field.

The following APIs now accept the query in a top level `query` field like:
* delete_by_query
* validate_query
* count

These APIs used to accept the query directly in the request body which was inconsistent with the search and explain APIs. For this reason t

Closes #4074
Could we also make all APIs take it as form encoded post  parameter. GET parameter may have size issue when a large query needs to be passed.

The reason is that some client side frameworks (ex. ExtJs) do not work with post body wery well relying on form encoded parameters instead

Hey @roytmana this is unrelated to this commit, which is about consistently supporting `query` json field in request body. If you think that supporting form encoded post parameters is needed then I suggest you open a dedicated issue for it.


time:
2014-01-02T08:10:46Z
class:
comments:
Packaging: Increasing default for max mapped pages to 262144

time:
2013-12-30T18:36:02Z
class:
src/test/java/org/elasticsearch/common/hppc/HppcMapsTests.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
Add ability to run certain packages with assertions disabled

Test can be run with `-Dtests.assertion.disabled=org.elasticsearch`
to run the tests without assertions to make sure assertions
don't hide any assignements etc. that introduce bugs in production.

time:
2013-12-30T15:12:15Z
class:
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/common/table/TimestampedTable.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
more cleanup of cat API, fix index lookup failure count/health

time:
2013-12-30T14:40:52Z
class:
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
We run PluginManagerTests using only node client.

We also add some debug logs and fix `tests.network` (setting it to true was not working from jenkins)

time:
2013-12-30T14:27:50Z
class:
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
comments:
Expose filtered nodes on TransportClient
Expose the list of nodes that were filtered out with the TransportClient, for example, due to different cluster name. Relates to #4569
closes #4571

time:
2013-12-30T13:40:01Z
class:
src/test/java/org/elasticsearch/test/rest/test/AbstractParserTests.java
comments:
mark abstract class as abstract
Nice catch, thanks for fixing it @kimchy !


time:
2013-12-30T13:23:34Z
class:
src/test/java/org/elasticsearch/benchmark/cluster/ClusterAllocationRerouteBenchmark.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
comments:
move helper class for allocation tests to base class

time:
2013-12-30T12:59:56Z
class:
src/main/java/org/elasticsearch/Build.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
src/main/java/org/elasticsearch/node/service/NodeService.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Add build hash to nodes info API
also, add it to the cat nodes api

time:
2013-12-30T12:46:19Z
class:
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
comments:
Honor `includeDefaults` in GeoPointFieldMapper.

Close #4563

time:
2013-12-30T10:10:52Z
class:
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
comments:
Explicit doc_values setting.

Once doc values are enabled on a field, they can't be disabled.

Close #4560

time:
2013-12-30T08:56:47Z
class:
comments:
Increase MaxPermSize to 128m for tests

time:
2013-12-28T23:50:10Z
class:
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
Start Test nodes sometimes without mock modules

We are mocking out some functionality to add assertions etc. or
randomize store types. We should randomly run with our defaults to make
sure we don't hide any potential problems.

time:
2013-12-28T23:03:14Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
comments:
Add @Slow annotation to bad apples

time:
2013-12-28T22:58:02Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
src/test/java/org/elasticsearch/test/engine/ThrowingAtomicReaderWrapper.java
comments:
Add test that throws exceptions during search execution

Currently we only test if readers are correctly released when exceptions
occur during reopen or flush. This commit adds a test that
randomly throws exceptions during the search execution ie. when Terms
are pulled or if a docs enum is created.

time:
2013-12-27T19:43:16Z
class:
src/test/java/org/elasticsearch/test/rest/ElasticsearchRestTests.java
src/test/java/org/elasticsearch/test/rest/test/FileUtilsTests.java
comments:
re-enabled FileUtilsTests and REST tests as rest-api-spec has been added back

fixed rest-api-spec paths in TESTING docs

Relates to #4540 & #4376

time:
2013-12-27T19:38:51Z
class:
comments:
merged rest-api-spec repo into es core

Closes #4540
Relates to #4376

time:
2013-12-27T19:36:12Z
class:
src/test/java/org/elasticsearch/test/rest/ElasticsearchRestTests.java
src/test/java/org/elasticsearch/test/rest/junit/RestTestSuiteRunner.java
src/test/java/org/elasticsearch/test/rest/support/FileUtils.java
src/test/java/org/elasticsearch/test/rest/test/FileUtilsTests.java
comments:
removed rest-spec submodule and prepared project for same files added directly to the codebase (no submodule) within rest-api-spec

(temporarily disabled FileUtilsTests & REST tests as there's temporarily no rest-spec dir)

Relates to #4540 #4376

time:
2013-12-27T14:48:24Z
class:
src/test/java/org/elasticsearch/benchmark/search/geo/GeoDistanceSearchBenchmark.java
comments:
Add SLOPPY_ARC to GeoDistanceSearchBenchmark.

time:
2013-12-27T13:07:04Z
class:
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
comments:
Fix SuggestSearchTests to expect any order in the error message

time:
2013-12-27T11:48:55Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
comments:
Fix NPE in RangeAggregator

time:
2013-12-27T11:45:18Z
class:
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointBinaryDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointBinaryDVIndexFieldData.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
comments:
Doc values for geo points.

This commits add doc values support to geo point using the exact same approach
as for numeric data: geo points for a given document are stored uncompressed
and sequentially in a single binary doc values field.

Close #4207

time:
2013-12-27T11:43:25Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
src/test/java/org/elasticsearch/search/aggregations/bucket/RangeTests.java
comments:
Make RangeAggregator a MULTI_BUCKETS aggregator.

Until now, RangeAggregator was a PER_BUCKET aggregator, expecting to be always
collected with owningBUcketOrdinal == 0. However, since the number of buckets
it creates is known in advance, it can be changed to a MULTI_BUCKETS aggregator
by just multiplying the bucket ordinal by the number of ranges.

This makes aggregations that have ranges as sub aggregations of PER_BUCKET
aggregators more efficient.

Close #4550

time:
2013-12-27T11:35:57Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Use RandomPicks to select a random array element

time:
2013-12-27T11:21:41Z
class:
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Randomize node level setting per node not per cluster

time:
2013-12-27T11:21:25Z
class:
src/main/java/org/elasticsearch/cache/recycler/CacheRecycler.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Randomize CacheRecycler instance in TestCluster
FYI there is the nice randomFrom that helps pick an element from an array/list more elegant


time:
2013-12-27T10:15:19Z
class:
src/main/java/org/elasticsearch/common/geo/GeoDistance.java
src/main/java/org/elasticsearch/index/query/GeoDistanceFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoDistanceRangeFilterParser.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
src/main/java/org/elasticsearch/search/facet/geodistance/GeoDistanceFacetParser.java
src/main/java/org/elasticsearch/search/sort/GeoDistanceSortParser.java
src/test/java/org/apache/lucene/util/SloppyMathTests.java
comments:
* setup accurate GeoDistance Function
* adapt tests
* introduced default GeoDistance function
* Updated docs

closes #4498

time:
2013-12-26T16:22:30Z
class:
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
cleanup cat nodes

time:
2013-12-26T10:38:14Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
comments:
Fix Aggregator.buildAggregation on MULTI_BUCKETS aggregators.

time:
2013-12-26T09:49:58Z
class:
src/main/java/org/elasticsearch/common/recycler/QueueRecycler.java
src/test/java/org/elasticsearch/common/recycler/AbstractRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/NoneRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/QueueRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/SoftThreadLocalRecyclerTests.java
src/test/java/org/elasticsearch/common/recycler/ThreadLocalRecyclerTests.java
comments:
Fix QueueRecycler.

Double-release protection added in 1c758b0b made QueueRecycler throw NPEs when
trying to recycle existing instances.

time:
2013-12-26T08:58:00Z
class:
src/main/java/org/elasticsearch/common/util/ByteUtils.java
src/main/java/org/elasticsearch/common/util/CollectionUtils.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/fielddata/AbstractAtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/DoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/LongValues.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVNumericAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVNumericIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericIndexFieldData.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/ParseContext.java
src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java
src/main/java/org/elasticsearch/index/mapper/RootMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
src/test/java/org/elasticsearch/common/util/ByteUtilsTests.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
comments:
Use BINARY doc values instead of SORTED_SET doc values to store numeric data.

Although SORTED_SET doc values make things like terms aggregations very fast
thanks to the use of ordinals, ordinals are usually not that useful on numeric
data. We are more interested in the values themselves in order to be able to
compute sums, averages, etc. on these values. However, SORTED_SET is quite slow
at accessing values, so BINARY doc values are better suited at storing numeric
data.

floats and doubles are encoded without compression with little-endian byte order
(so that it may be optimizable through sun.misc.Unsafe in the future given that
most computers nowadays use the little-endian byte order) and byte, short, int,
and long are encoded using vLong encoding: they first encode the minimum value
using zig-zag encoding (so that negative values become positive) and then deltas
between successive values.

Close #3993

time:
2013-12-24T19:23:31Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
comments:
Start the task timeout checking *after* adding it to the execution queue.

This prevents missing very short timeouts which fire before the calling thread had the chance to add the task to the queue and are therefore ignored. This is mostly of importance for testing where we explicitly want tasks to timeout and set it to a very low value.

time:
2013-12-24T19:16:49Z
class:
comments:
update travis config

time:
2013-12-24T17:21:26Z
class:
comments:
use the correct d option in getopt instead of the removed f

time:
2013-12-24T17:01:01Z
class:
src/main/java/org/elasticsearch/common/Table.java
comments:
Need to make sure we always end up with a Cell, even if it's null.

Fixes #4544.

time:
2013-12-24T12:35:59Z
class:
comments:
Removed bashism in bin/elasticsearch

Using == in an if-statement works in bash but not in dash (used in ubuntu)
Replacing == with = results in strictl POSIX compliance.

time:
2013-12-24T09:06:35Z
class:
src/main/java/org/elasticsearch/common/recycler/NoneRecycler.java
src/main/java/org/elasticsearch/common/recycler/QueueRecycler.java
src/main/java/org/elasticsearch/common/recycler/ThreadLocalRecycler.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
comments:
clear the list of releases once released
also double check that once a recycler is released, it can't be released again or used
+1!


time:
2013-12-24T04:26:28Z
class:
comments:
[DOCS] Add headers and help parameters.

time:
2013-12-24T04:26:28Z
class:
src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
comments:
Add column separator for help output.

time:
2013-12-24T04:26:28Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Round load avg in _cat/nodes.

time:
2013-12-24T04:26:28Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Turn off some columns by default in cat/nodes.

time:
2013-12-24T04:26:27Z
class:
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Add associative lookup of columns for arbitrary (and more intuitive) ordering.

  % curl 'localhost:9200/_cat/nodes?v&headers=jdk,ip,name'
  jdk      ip        name
  1.7.0_40 127.0.0.1 Mordo, Karl

Closes #4433.

time:
2013-12-24T04:26:27Z
class:
src/main/java/org/elasticsearch/common/Table.java
comments:
Add table concatenation.

time:
2013-12-23T23:40:20Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/bytes/BytesValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/geopoints/GeoPointValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/NumericValuesSource.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceTests.java
comments:
- currently we make a few assumptions in the field data based aggregations base on which we decide on execution paths, e.g. initial buffer sizes we use for ordinal arrays.

- also, in geo distance, because it's based on range agg and that by default the order of the geo point per doc is unknown, always wrap it in a dedicated field data source which sorts the values if needed. But most of the times, a doc will be associated with a single point and therefore most of this wrapping is redundant and adds perf. cost for nothing.

- the idea here is for every request that "hits" a field data agg, we'll first iterate over the searchable segments and load their field data and compute the cross-segment info out of them. This info will be placed in the field context with which the value sources are created.

- we currently have some of this info on the IndexFieldData, but problem with getting it from there is that we may easily end up getting wrong info that originate in unsearchable segments.

time:
2013-12-23T19:06:45Z
class:
comments:
update to netty 3.9.0

time:
2013-12-23T17:35:54Z
class:
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
src/main/java/org/elasticsearch/search/fetch/matchedqueries/MatchedQueriesFetchSubPhase.java
comments:
Release SearchContext releaseables also post match filters / queries.

time:
2013-12-23T12:53:20Z
class:
src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java
src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryParser.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Fixed named filter and query support for the top_children, has_child and has_parent queries and filters.

Closes #4534

time:
2013-12-23T12:12:50Z
class:
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
comments:
Release parentDocs in TopChildrenQuery.

time:
2013-12-23T11:13:09Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Added v0.90.9

time:
2013-12-23T11:07:05Z
class:
comments:
Allow for version >= 0.90.10

time:
2013-12-23T10:27:06Z
class:
comments:
[DOCS] Changed `shape_field_name` to `path` in geo_shape filter documentation.

Relates to #4486

time:
2013-12-23T10:20:43Z
class:
src/main/java/org/elasticsearch/index/query/GeoShapeFilterBuilder.java
src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java
src/main/java/org/elasticsearch/index/search/shape/ShapeFetchService.java
src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationTests.java
comments:
Make doc lookup in geo_shape filter and query consistent with terms lookup.

The `geo_shape filter and query` option in geo_shape filter and query has been replaced with the `path` option, which allows these filter and query to fetch shapes from within objects as well.

Closes #4486

time:
2013-12-23T10:01:11Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
comments:
Disable SegmentReader ram usage by default even if -ea is provided

time:
2013-12-23T09:34:48Z
class:
comments:
Add smoketest support for published packages

the build_release.py tool now also downloads and verfyfies the
released packages from S3. It checks integrity based on the sha1
checksums and runs the smoketest against the specs in the current branch.

time:
2013-12-22T20:37:50Z
class:
src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java
src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java
comments:
Fix loading templates in config/ directory

The fixes introduced in #4235 and #4411 do not take into account, that a
template JSON in the config/ directory includes a template name, as opposed
when calling the Put Template API.

This PR allows to put both formats (either specifying a template name or not)
into files. However you template name/id may not be one of the template
element names like "template", "settings", "order" or "mapping".

Closes #4511

time:
2013-12-22T09:21:07Z
class:
src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
comments:
Added asserts to test validation failures presence in ClusterHealthResponse response

time:
2013-12-22T03:12:12Z
class:
src/main/java/org/elasticsearch/cluster/routing/ImmutableShardRouting.java
comments:
Optimize restore source JSON serialization

Don't print "restore_source":  null if restore source is null, omit entire line instead

time:
2013-12-21T23:14:06Z
class:
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
comments:
fix forbidden API on lower case...

time:
2013-12-21T23:08:14Z
class:
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
comments:
fix lower case for windows tests

time:
2013-12-21T22:26:32Z
class:
src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsTests.java
src/test/java/org/elasticsearch/node/InternalNodeTests.java
comments:
make sure all integration tests use ElasticsearchIntegrationTest
- move ClusterSettingsTests to ElasticsearchIntegrationTest
- remove InternalNodeTests, we already have separate plugin tests that verify it

time:
2013-12-21T22:02:30Z
class:
comments:
remove unused test env var from TESTING doc

time:
2013-12-21T22:01:22Z
class:
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
add randomized multi data path nodes tests

time:
2013-12-20T21:00:24Z
class:
src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
comments:
Added unit tests for ClusterIndexHealth and ClusterHealthResponse

Relates to #4528

time:
2013-12-20T13:58:46Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java
comments:
Reverting back to 0.90.7 config/templates loading behaviour

Closes #4511

time:
2013-12-20T12:17:18Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
comments:
Counting shards was wrong if one of the indices was in the RED status

Closes #4528

time:
2013-12-20T11:16:58Z
class:
comments:
[DOCS] Fixed community links to official clients

time:
2013-12-20T10:20:54Z
class:
comments:
[DOCS] Corrected bloom loading docs

time:
2013-12-20T09:51:17Z
class:
comments:
[DOCS] Documented index.codec.bloom.load for #4525

time:
2013-12-20T09:51:17Z
class:
comments:
[DOCS] Added the official PHP client to the community page.

time:
2013-12-20T08:51:25Z
class:
src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IpRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregatorParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountParser.java
src/test/java/org/elasticsearch/search/aggregations/ParsingTests.java
comments:
Stricter parsing of aggregations.

 - Only one aggregation type is allowed per aggregation definition.
 - Return an error in the parsers when an unknown field is encountered.

Close #4464

time:
2013-12-20T07:13:46Z
class:
comments:
prepare for next development iteration

time:
2013-12-20T07:10:04Z
class:
comments:
prepare release elasticsearch-analysis-kuromoji-1.7.0

time:
2013-12-20T07:03:29Z
class:
src/main/java/org/elasticsearch/index/analysis/KuromojiIterationMarkCharFilterFactory.java
src/main/java/org/elasticsearch/indices/analysis/KuromojiIndicesAnalysis.java
src/main/java/org/elasticsearch/plugin/analysis/kuromoji/AnalysisKuromojiPlugin.java
src/test/java/org/elasticsearch/index/analysis/KuromojiAnalysisTests.java
comments:
Add JapaneseIterationMarkCharFilter support

Currently, Kuromoji have JapaneseIterationMarkCharFilter.
Add IterationMarkCharFilter to analysis-kuromoji.

Closes #7.

time:
2013-12-19T22:33:40Z
class:
comments:
prepare for next development iteration

time:
2013-12-19T22:32:01Z
class:
comments:
prepare release elasticsearch-analysis-stempel-1.9.0

time:
2013-12-19T22:29:44Z
class:
comments:
Ignore test log file
Related to #11.

time:
2013-12-19T22:27:02Z
class:
src/test/java/org/elasticsearch/index/analysis/PolishAnalysisTests.java
src/test/java/org/elasticsearch/index/analysis/SimplePolishTokenFilterTests.java
comments:
Add some tokenizer and analyzer tests

Related to #9.

time:
2013-12-19T21:19:20Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationTests.java
comments:
Failed search on a shard tries a local replica on a network thread
When a search on a shard to a remove node fails, and then replica exists on the local node, then the execution of the search is done on the network thread. This is problematic since we need to execute it on the actual search thread pool, but can also explain #4519, where the get happens on the network thread and it waits to send the get request till the network thread we use is freed (deadlock...)
fixes #4526

note, re-enable the geo shape fetch test, this fix should solve it as well

time:
2013-12-19T21:16:20Z
class:
src/main/java/org/elasticsearch/indices/analysis/pl/PolishIndicesAnalysis.java
comments:
Stempel sets itself as the default analyzer

Closes #12.

time:
2013-12-19T20:32:14Z
class:
src/main/java/org/elasticsearch/index/codec/CodecService.java
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormat.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
src/main/java/org/elasticsearch/index/store/Store.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/index/merge/policy/MergePolicySettingsTest.java
comments:
Allow to enable / disable bloom filter loading on an index
Allow to have a new index level setting index.codec.bloom.load (default to true), that can control if the boom filters will be loaded or not. This is an updateable setting, that can be updated on a live index using the update settings API.

Note though, when this setting is updated, a fresh Lucene index will be reopened, causing associate caches to be dropped potentially.

closes #4525

Note, this change also disables the returning lucene ram usage stats, due to a bug in Lucene, relates to #4512

time:
2013-12-19T18:55:29Z
class:
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
comments:
Use a List of shards per shard ID rather than a set.

The shards in the set are mutated after they are added to the
set such that the hashcode doesn't fit anymore. For this reason
this used an identity hashset before but the downside of this is
that the iteration order is not deterministic. We can just use a list
since shard removal is a very rare action and the size of the list is
very small such that iteration is fast.

time:
2013-12-19T16:24:46Z
class:
comments:
Move tests to JUnit

That said, we don't have any test yet :-)

Closes #11.

time:
2013-12-19T16:19:21Z
class:
comments:
Update to Elasticsearch 0.90.8 / Lucene 4.6.0

Closes #13.

time:
2013-12-19T16:11:30Z
class:
comments:
prepare for next development iteration

time:
2013-12-19T16:09:55Z
class:
comments:
prepare release elasticsearch-analysis-phonetic-1.8.0

time:
2013-12-19T16:08:34Z
class:
src/test/java/org/elasticsearch/index/analysis/SimplePhoneticAnalysisTests.java
comments:
Move tests to JUnit

Closes #14.

time:
2013-12-19T16:04:54Z
class:
comments:
Update to Elasticsearch 0.90.8 / Lucene 4.6.0

Closes #15.

time:
2013-12-19T14:58:08Z
class:
comments:
Add repository information to docs

This adds the apt and yum repo information to the setup docs.

time:
2013-12-19T13:35:38Z
class:
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormatProvider.java
comments:
fix bloom filter posting format to get the fpp from the correct settings

time:
2013-12-19T13:21:27Z
class:
src/main/java/org/elasticsearch/index/shard/ShardUtils.java
src/main/java/org/elasticsearch/index/store/DirectoryUtils.java
comments:
try and extract store directory also if its wrapped in a compound dir

time:
2013-12-19T11:15:19Z
class:
comments:
prepare for next development iteration

time:
2013-12-19T10:32:42Z
class:
comments:
prepare release elasticsearch-analysis-smartcn-1.8.0

time:
2013-12-19T09:56:36Z
class:
src/test/java/org/elasticsearch/index/analysis/SimpleSmartChineseAnalysisTests.java
comments:
Move tests to JUnit

Closes #7.

time:
2013-12-19T09:50:28Z
class:
comments:
Move tests to JUnit

Related to #13.

time:
2013-12-19T09:46:35Z
class:
comments:
Update to Elasticsearch 0.90.8 / Lucene 4.6.0

Closes #6.

time:
2013-12-19T09:36:16Z
class:
src/test/java/org/elasticsearch/index/analysis/KuromojiAnalysisTests.java
comments:
Update to Elasticsearch 0.90.8 / Lucene 4.6.0
Move tests to JUnit

Closes #11.
Closes #14.

time:
2013-12-19T09:04:19Z
class:
comments:
prepare for next development iteration

time:
2013-12-19T09:00:26Z
class:
comments:
prepare release elasticsearch-analysis-icu-1.13.0

time:
2013-12-19T08:56:19Z
class:
src/test/java/org/elasticsearch/index/analysis/SimpleIcuAnalysisTests.java
src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java
comments:
Move tests to JUnit
Closes #13.

time:
2013-12-19T08:46:47Z
class:
src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java
comments:
Update to Elasticsearch 0.90.8 / Lucene 4.6.0
Closes #15.

time:
2013-12-19T01:34:05Z
class:
src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Update snapshot list when snapshot is deleted

time:
2013-12-19T01:34:05Z
class:
src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
comments:
Add ability to specify base directory on the repository level

This change is needed to support multiple repositories per S3 bucket

time:
2013-12-18T21:21:53Z
class:
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java
src/main/java/org/elasticsearch/index/engine/Segment.java
src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
comments:
Add the memory used on segment/segments stats
The memory used for the Lucene index (term dict, bloom filter, ...) can now be reported per segment using the segments API, and on the segments flag on node/indices stats
closes #4512

time:
2013-12-18T21:01:59Z
class:
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormat.java
comments:
fix computation of ram bytes used in bloom filter posting format

time:
2013-12-18T20:46:43Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
comments:
s/he/it

time:
2013-12-18T18:05:47Z
class:
comments:
reverted file

time:
2013-12-18T16:56:38Z
class:
src/main/java/org/elasticsearch/index/query/CommonTermsQueryParser.java
src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java
comments:
Make parsing strict for `geo_shape` query & filter and stricter for `common` query.

Closes #4508

time:
2013-12-18T16:52:19Z
class:
src/main/java/jsr166e/ConcurrentHashMapV8.java
src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
comments:
Fix compilation on Java 8 + tests that rely on ordering
Note, we still have tests failing because of mvel compilation bugs, see more here: http://jira.codehaus.org/browse/MVEL-299
closes #4510

time:
2013-12-18T16:30:28Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Add [0.90.8] release

time:
2013-12-18T15:10:28Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
comments:
Make BalancedAllocationDecider assignments deterministic

a previous change introduces an identity hashset that has non-deterministic
iteration order which kill the reproducibility of our unittests if they fail.
This patch adds back deterministic allocations.

time:
2013-12-18T15:05:35Z
class:
comments:
More documentation improvements for fielddata loading.

time:
2013-12-18T14:44:57Z
class:
comments:
Improve documentation of the new `disabled` field data format.
> Request that will try to load field (...)

I'd add the caveat about faceting + sorting here, to prevent useless errors, something like:

“When disabled, all requests that will try to load field data, e.g. when they include aggregations and/or sorting, will return an error.”


time:
2013-12-18T14:24:01Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
comments:
Move XContent Rendering and Cluster Health Status calculations to ClusterHealthResponse

time:
2013-12-18T13:29:41Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
src/test/java/org/elasticsearch/benchmark/cluster/ClusterAllocationRerouteBenchmark.java
comments:
use the computed data structure to optimize the awareness allocation decider

time:
2013-12-18T13:08:59Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
comments:
use the computed data structure to optimize the same shard allocation decider

time:
2013-12-18T11:21:59Z
class:
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
comments:
On node join, evict existing node(s) with the same transport address
Make sure to evict an existing node with the same transport address as a new node that joins. This can happen for example when there is a bug in a cluster state event handler, which causes the "old" node to not be evicted, or a load on the master node that will take time for the "old" node leaving to be processed.
closes #4503

time:
2013-12-18T11:14:08Z
class:
comments:
Run REST test-suite against release packages during release process

time:
2013-12-18T11:04:03Z
class:
comments:
Removed a leftover line in TESTING.asciidoc

time:
2013-12-18T11:03:49Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodeResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
comments:
Added cluster health status to the Cluster Stats API

Relates to #4460

time:
2013-12-18T10:48:21Z
class:
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
comments:
Use existing datastructures from RoutingNodes to elect unassigned primaries

Currently we trying to find a replica for a primary that is allocated by
running through all shards in the cluster while RoutingNodes already has
a datastructure keyed by shard ID for this. We should lookup this
directly rather than using linear probing. This improves shard allocation performance
by 5x.

time:
2013-12-18T10:44:22Z
class:
comments:
Switched rest-api-spec url to https

time:
2013-12-18T10:37:00Z
class:
src/main/java/org/elasticsearch/indices/store/IndicesStore.java
comments:
Don't delete local shard data when its allocated on a node that doesn't exists
This is an extreme case, exposed by a bug we had in our allocation in local gateway, causing a cluster state that doesn't include a node in the nodes list, but still has the shard in the routing table pointing at the non existent node. Then, when a node on the same box comes back, it will cause the local shard data to be deleted because it thinks its fully allocated on other nodes.
fixes #4502

time:
2013-12-18T10:21:21Z
class:
comments:
[Docs] Fix Typo

Fixes small typo in the geo_distance aggregation docs.

time:
2013-12-18T10:10:35Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
Removed exception handling in InternalIndexShard.docStats() & storeStats()

This is already caught at another level, see #4203

time:
2013-12-18T10:05:30Z
class:
src/test/java/org/elasticsearch/test/rest/support/FileUtils.java
comments:
Fixed FileUtilsTests, used wrong path separator (worked only on *nix)

time:
2013-12-18T10:00:52Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
comments:
Move XContent rendering of ClusterIndexHealth to the class itself

time:
2013-12-18T10:00:52Z
class:
comments:
Extended TESTING.asciidoc with an example of running just the REST tests from maven
Thanks @bleskes ! Is the below part needed? I think it's a leftover?

Yes. Removed. Thx!


time:
2013-12-18T09:52:23Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
Removed exception handling in InternalIndexShard.completionStats()

This is already caught at another level, see #4203

time:
2013-12-17T22:41:57Z
class:
comments:
Merge pull request #4494 from spenceralger/add_js_docs

JavaScript client docs

time:
2013-12-17T22:26:29Z
class:
comments:
added doc page for the JavaScipt client, and listed it in the clients list.

time:
2013-12-17T21:45:05Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
Removed unnecessary get call

time:
2013-12-17T15:29:02Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
comments:
removed a left over debug log

time:
2013-12-17T15:06:52Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
comments:
Added a time stamp to the cluster stats response

Making it consistent with NodeStats

time:
2013-12-17T14:36:16Z
class:
src/test/java/com/carrotsearch/randomizedtesting/StandaloneRandomizedContext.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/test/rest/ElasticsearchRestTests.java
src/test/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
src/test/java/org/elasticsearch/test/rest/client/RestClient.java
src/test/java/org/elasticsearch/test/rest/client/RestException.java
src/test/java/org/elasticsearch/test/rest/client/RestResponse.java
src/test/java/org/elasticsearch/test/rest/client/http/HttpDeleteWithEntity.java
src/test/java/org/elasticsearch/test/rest/client/http/HttpGetWithEntity.java
src/test/java/org/elasticsearch/test/rest/client/http/HttpRequestBuilder.java
src/test/java/org/elasticsearch/test/rest/client/http/HttpResponse.java
src/test/java/org/elasticsearch/test/rest/json/JsonPath.java
src/test/java/org/elasticsearch/test/rest/junit/DescriptionHelper.java
src/test/java/org/elasticsearch/test/rest/junit/RestReproduceInfoPrinter.java
src/test/java/org/elasticsearch/test/rest/junit/RestTestCandidate.java
src/test/java/org/elasticsearch/test/rest/junit/RestTestSuiteRunner.java
src/test/java/org/elasticsearch/test/rest/junit/RunAfter.java
src/test/java/org/elasticsearch/test/rest/parser/DoSectionParser.java
src/test/java/org/elasticsearch/test/rest/parser/GreaterThanParser.java
src/test/java/org/elasticsearch/test/rest/parser/IsFalseParser.java
src/test/java/org/elasticsearch/test/rest/parser/IsTrueParser.java
src/test/java/org/elasticsearch/test/rest/parser/LengthParser.java
src/test/java/org/elasticsearch/test/rest/parser/LessThanParser.java
src/test/java/org/elasticsearch/test/rest/parser/MatchParser.java
src/test/java/org/elasticsearch/test/rest/parser/RestTestFragmentParser.java
src/test/java/org/elasticsearch/test/rest/parser/RestTestParseException.java
src/test/java/org/elasticsearch/test/rest/parser/RestTestSectionParser.java
src/test/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
src/test/java/org/elasticsearch/test/rest/parser/RestTestSuiteParser.java
src/test/java/org/elasticsearch/test/rest/parser/SetSectionParser.java
src/test/java/org/elasticsearch/test/rest/parser/SetupSectionParser.java
src/test/java/org/elasticsearch/test/rest/parser/SkipSectionParser.java
src/test/java/org/elasticsearch/test/rest/section/ApiCallSection.java
src/test/java/org/elasticsearch/test/rest/section/Assertion.java
src/test/java/org/elasticsearch/test/rest/section/DoSection.java
src/test/java/org/elasticsearch/test/rest/section/ExecutableSection.java
src/test/java/org/elasticsearch/test/rest/section/GreaterThanAssertion.java
src/test/java/org/elasticsearch/test/rest/section/IsFalseAssertion.java
src/test/java/org/elasticsearch/test/rest/section/IsTrueAssertion.java
src/test/java/org/elasticsearch/test/rest/section/LengthAssertion.java
src/test/java/org/elasticsearch/test/rest/section/LessThanAssertion.java
src/test/java/org/elasticsearch/test/rest/section/MatchAssertion.java
src/test/java/org/elasticsearch/test/rest/section/RestTestSuite.java
src/test/java/org/elasticsearch/test/rest/section/SetSection.java
src/test/java/org/elasticsearch/test/rest/section/SetupSection.java
src/test/java/org/elasticsearch/test/rest/section/SkipSection.java
src/test/java/org/elasticsearch/test/rest/section/TestSection.java
src/test/java/org/elasticsearch/test/rest/spec/RestApi.java
src/test/java/org/elasticsearch/test/rest/spec/RestApiParser.java
src/test/java/org/elasticsearch/test/rest/spec/RestSpec.java
src/test/java/org/elasticsearch/test/rest/support/FileUtils.java
src/test/java/org/elasticsearch/test/rest/support/VersionUtils.java
src/test/java/org/elasticsearch/test/rest/test/AbstractParserTests.java
src/test/java/org/elasticsearch/test/rest/test/AssertionParsersTests.java
src/test/java/org/elasticsearch/test/rest/test/DoSectionParserTests.java
src/test/java/org/elasticsearch/test/rest/test/FileUtilsTests.java
src/test/java/org/elasticsearch/test/rest/test/JsonPathTests.java
src/test/java/org/elasticsearch/test/rest/test/RestApiParserTests.java
src/test/java/org/elasticsearch/test/rest/test/RestTestParserTests.java
src/test/java/org/elasticsearch/test/rest/test/SetSectionParserTests.java
src/test/java/org/elasticsearch/test/rest/test/SetupSectionParserTests.java
src/test/java/org/elasticsearch/test/rest/test/SkipSectionParserTests.java
src/test/java/org/elasticsearch/test/rest/test/TestSectionParserTests.java
src/test/java/org/elasticsearch/test/rest/test/VersionUtilsTests.java
comments:
added REST test suites runner

The REST layer can now be tested through tests that are shared between all the elasticsearch official clients.
The tests are based on REST specification that can be found on the elasticsearch-rest-api-spec project and consist of YAML files that describe the operations to be executed and the obtained results that need to be tested.

REST tests can be executed through the ElasticsearchRestTests class, which relies on the rest-spec git submodule that contains the rest spec and tests pulled from the elasticsearch-rest-spec-api project. The rest-spec submodule gets automatically initialized and updated through maven (generate-test-resources phase).

The REST runner and the needed classes are distributed within the test artifact.

The following are the options supported by the REST tests runner:

- tests.rest[true|false|host:port]: determines whether the REST tests need to be run and if so whether to rely on an external cluster (providing host and port) or fire a test cluster (default)
- tests.rest.suite: comma separated paths of the test suites to be run (by default loaded from /rest-spec/test classpath). it is possible to run only a subset of the tests providing a sub-folder or even a single yaml file (the default /rest-spec/test prefix is optional when files are loaded from classpath) e.g. -Dtests.rest.suite=index,get,create/10_with_id
- tests.rest.spec: REST spec path (default /rest-spec/api from classpath)
- tests.iters: runs multiple iterations
- tests.seed: seed to base the random behaviours on
- tests.appendseed[true|false]: enables adding the seed to each test section's description (default false)
- tests.cluster_seed: seed used to create the test cluster (if enabled)

Closes #4469

time:
2013-12-17T14:35:01Z
class:
src/main/java/org/elasticsearch/cluster/routing/ImmutableShardRouting.java
comments:
reuse shard identifier if possible

time:
2013-12-17T13:34:56Z
class:
src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java
src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java
comments:
Fix parsing of file based template loading

We support three different settings in templates

* "settings" : { "index" : { "number_of_shards" : 12 } }
* "settings" : { "index.number_of_shards" : 12 }
* "settings" : { "number_of_shards" : 12 }

The latter one was not supported by the fix in #4235

This commit fixes this issue and uses randomized testing to test any of the three cases above when running integration tests.

Closes #4411

time:
2013-12-17T13:34:20Z
class:
src/main/java/org/elasticsearch/index/query/SimpleQueryStringParser.java
comments:
take into account field mapped analyzers in simple_query_string
need to use the correct analyzer here, that will automatically choose the correct analyzer per field

time:
2013-12-17T12:55:43Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecidersModule.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
src/test/java/org/elasticsearch/benchmark/cluster/ClusterAllocationRerouteBenchmark.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
comments:
Randomize AllocationDecider order in tests

time:
2013-12-17T12:55:43Z
class:
src/main/java/org/elasticsearch/cluster/routing/MutableShardRouting.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ReplicaAfterPrimaryActiveAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
src/test/java/org/elasticsearch/benchmark/cluster/ClusterAllocationRerouteBenchmark.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
comments:
Improve allocation of unassigned shards with early termination

When we allocate unassigned shards we can terminate early for some
shards like if we already tried to allocate a replica we don't need
to try the same replica if the first one got rejected. We also
can check if certain nodes can't allocate any primaries or shrads
at all and take those nodes out of the picture for the current round
since it will not change in the current round.

time:
2013-12-17T12:14:46Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodeResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
src/main/java/org/elasticsearch/client/ClusterAdminClient.java
src/main/java/org/elasticsearch/client/Requests.java
src/main/java/org/elasticsearch/client/support/AbstractClusterAdminClient.java
src/main/java/org/elasticsearch/client/transport/support/InternalTransportClusterAdminClient.java
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
src/main/java/org/elasticsearch/monitor/os/OsInfo.java
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/stats/RestClusterStatsAction.java
src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
comments:
Added Cluster Stats API

Closes #4460

time:
2013-12-17T11:26:14Z
class:
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
comments:
Fail test with timeout and stack dump after 20 min rather than 1h

time:
2013-12-17T10:39:02Z
class:
comments:
Fixing typo and grammar

time:
2013-12-17T10:31:22Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
comments:
Move index health calculations to ClusterIndexHealth so it can be reused.

time:
2013-12-17T10:29:48Z
class:
src/main/java/org/elasticsearch/common/unit/DistanceUnit.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
src/main/java/org/elasticsearch/index/fielddata/plain/AbstractGeoPointIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DisabledIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointCompressedAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointCompressedIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/query/GeoBoundingBoxFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoDistanceFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoDistanceRangeFilterParser.java
src/main/java/org/elasticsearch/index/query/GeoPolygonFilterParser.java
src/main/java/org/elasticsearch/index/query/GeohashCellFilter.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeoEncodingTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeoMappingTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
comments:
Compressed geo-point field data.

This commit allows to trade precision for memory when storing geo points.
This new field data impl accepts a `precision` parameter that controls the
maximum expected error for storing coordinates. This option can be updated on
a live index with the PUT mapping API.

Default precision is 1cm, which requires 8 bytes per geo-point (50% memory
saving compared to using 2 doubles).

Close #4386

time:
2013-12-17T10:28:19Z
class:
comments:
[DOCS] Removed unused file

time:
2013-12-17T09:59:27Z
class:
src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
comments:
fix usage of deprecated netty header method

time:
2013-12-17T09:43:27Z
class:
comments:
Allow to provide parameters not only through -D but as long parameters

All getopt long style parameters are now set as es. properties,

elasticsearch --path.data=/some/path

results in -Des.path.data=/some/path

Closes #4393

time:
2013-12-17T09:39:22Z
class:
comments:
Start elasticsearch in the foreground by default

Instead of using the '-f' parameter to start elasticsearch in the
foreground, this is now the default modus.

In order to start elasticsearch in the background, the '-d' parameter
can be used.

Closes #4392

time:
2013-12-16T19:33:38Z
class:
src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
src/main/java/org/elasticsearch/common/collect/ImmutableOpenLongMap.java
comments:
introduce a native int/long open immutable map, and use it in in routing table

time:
2013-12-16T18:52:00Z
class:
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
comments:
Wait until index is in the clusterstate after restart

time:
2013-12-16T17:07:33Z
class:
comments:
[DOCS] Fixed some bad link refs

time:
2013-12-16T16:10:14Z
class:
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
src/main/java/org/elasticsearch/search/fetch/matchedqueries/MatchedQueriesFetchSubPhase.java
src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/main/java/org/elasticsearch/search/query/FilterBinaryParseElement.java
src/main/java/org/elasticsearch/search/query/PostFilterParseElement.java
src/main/java/org/elasticsearch/search/query/QueryPhase.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
src/test/java/org/elasticsearch/indices/cache/CacheTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/stresstest/refresh/RefreshStressTest1.java
comments:
Renamed top level `filter` to `post_filter`.

Closes #4119

time:
2013-12-16T15:59:36Z
class:
src/main/java/org/elasticsearch/index/query/FieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FieldQueryParser.java
src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
src/main/java/org/elasticsearch/index/query/QueryBuilders.java
src/main/java/org/elasticsearch/indices/query/IndicesQueriesModule.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Remove the `field` and `text` queries.

The `text` query was replaced by the `match` query and has been
deprecated for quite a while.

The `field` query should be replaced by a `query_string` query with
the `default_field` specified.

Fixes #4033

time:
2013-12-16T14:31:44Z
class:
src/main/java/org/elasticsearch/search/suggest/Suggest.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
comments:
Throw IAE if suggest results return differently sized results.

If the term suggester is used the results are merged depending on
the number of terms produced by the tokenizer / tokenfilter. If a
term suggester is executed across multiple indices that share the
same field but with different analysis chains we can't merge the
result anymore sicne tokens are our of order or have a different size.

This commit throws ESIllegalArgumentException if the number of entries
are not the same across all results.

Closes #3196

time:
2013-12-16T14:29:50Z
class:
src/test/java/org/elasticsearch/benchmark/cluster/ClusterAllocationRerouteBenchmark.java
src/test/java/org/elasticsearch/benchmark/cluster/MassiveClusterRebalanceBenchmark.java
comments:
better cluster reroute allocation benchmark

time:
2013-12-16T14:00:15Z
class:
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/indices/IndicesLifecycle.java
src/main/java/org/elasticsearch/indices/InternalIndicesLifecycle.java
src/test/java/org/elasticsearch/indices/IndicesLifecycleListenerTests.java
comments:
Added new IndicesLifecycle.Listener method that allows to listen for any IndexShardState internal change.

Closes #4413

time:
2013-12-16T13:34:33Z
class:
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
src/main/java/org/elasticsearch/index/fielddata/plain/DisabledIndexFieldData.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/test/java/org/elasticsearch/index/fielddata/DisabledFieldDataFormatTests.java
src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
src/test/java/org/elasticsearch/index/mapper/MapperTestUtils.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
comments:
Make field data changes immediately taken into account and add the ability to disallow field data loading.

This commit changes field data configuration updates so that they are
immediately taken into account for loading new segments. The way it works
is that field data configuration is now cached separately from the field
data cache, meaning that it is now possible to clear the field data
configuration from IndexFieldDataService while the cache will stay around. On
the next time that Elasticsearch will reload field data configuration, it will
check if there is already a cache entry, and reuse it if it exists.

To disable field data loading, all that is required is to change the field
data format to "none" (supported by all field data types) using the update
mapping API. Elasticsearch will then refuse to load field data on any new
segment, but field data which has been loaded on the previous segments will
remain available. So you need to clear the field data cache in order to
reclaim memory (otherwise memory will be reclaimed slower, as segments get
merged).

Close #4430
Close #4431

time:
2013-12-16T10:52:16Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
comments:
Reset source shards to `started` if canceling relocation.

Currently we miss to reset the source shards status to ACTIVE if we cancel
a relocation. If the shard is RELOCATING we need to reset to state ACTIVE.

Closes #4457

time:
2013-12-16T10:50:45Z
class:
src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/EvenShardsCountAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/ShardsAllocators.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ConcurrentRebalanceAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/RebalanceOnlyWhenActiveAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ReplicaAfterPrimaryActiveAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ShardsLimitAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingGatewayAllocator.java
src/main/java/org/elasticsearch/gateway/local/LocalGatewayAllocator.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/cluster/allocation/SimpleAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesUtils.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionTests.java
comments:
Improve RoutingNodes API

Currently the RoutingNodes API allows modification of it's internal state outside of the class.
This commit improves the APIs of `RoutingNode` and `RoutingNode` to change internal state
only within the classes itself.

Closes #4458

time:
2013-12-16T10:35:45Z
class:
src/main/java/org/elasticsearch/cluster/routing/MutableShardRouting.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/EvenShardsCountAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ClusterRebalanceAllocationDecider.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ConcurrentRebalanceAllocationDecider.java
src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingGatewayAllocator.java
src/main/java/org/elasticsearch/gateway/local/LocalGatewayAllocator.java
src/test/java/org/elasticsearch/benchmark/cluster/MassiveClusterRebalanceBenchmark.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
comments:
Optimizes performance of AllocationDecider execution. Instead of using loops over all ShardRoutings, do accounting in RoutingNodes.
Speeds up recalculating cluster state on large clusters.

time:
2013-12-16T09:37:06Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
comments:
Cat API: Add endpoint to show aliases

This endpoint allows to check aliases, their indices, if a filter is
configured along with routing values for searching and indexing.

Closes #4414

time:
2013-12-16T09:02:24Z
class:
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
comments:
Increased timeout in ClusterServiceTests.testTimeoutUpdateTask to 100ms

The previous 2ms timeout was too small and caused a racing condition in timeout handling. This will be fixed but requires more work.

time:
2013-12-15T21:26:11Z
class:
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
comments:
wait until cluster-state is ready after startup

time:
2013-12-15T19:06:22Z
class:
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
comments:
Fix QuorumLocalGatewayTests#testChangeInitialShardsRecovery to start only one shard to not fulfill the quorum

time:
2013-12-15T10:25:36Z
class:
comments:
Update minimum_master_nodes comment to match documentation

Someone on the mailing list wrongly interpreted it to mean the current node is not included in the calculation.

time:
2013-12-15T02:45:03Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java
comments:
Resolve potential deadlock state during EsThreadPoolExecutor shutdown

Fixes #4334

The deadlock occurs between monitor object of EsThreadPoolExecutor and mainLock of ThreadPoolExecutor. The shutdown method of EsThreadPoolExecutor obtains the lock on monitor first and waits for mainLock of ThreadPoolExecutor in ThreadPoolExecutor#shutdown for part of the processing, while EsThreadPoolExecutor#terminated is executed under mainLock and tries to obtain monitor to notify listeners.

time:
2013-12-14T20:56:01Z
class:
comments:
Enable incremental compilation using a workaround for the maven-compiler-plugin 3.1 bug

time:
2013-12-14T00:27:18Z
class:
src/main/java/jsr166e/CompletableFuture.java
src/main/java/jsr166e/ConcurrentHashMapV8.java
src/main/java/jsr166e/CountedCompleter.java
src/main/java/jsr166e/ForkJoinPool.java
src/main/java/jsr166e/ForkJoinTask.java
src/main/java/jsr166e/RecursiveTask.java
src/main/java/jsr166e/StampedLock.java
src/main/java/jsr166e/extra/AtomicDouble.java
src/main/java/jsr166e/extra/AtomicDoubleArray.java
src/main/java/jsr166e/extra/SequenceLock.java
src/main/java/jsr166y/CountedCompleter.java
src/main/java/jsr166y/ForkJoinPool.java
src/main/java/jsr166y/ForkJoinTask.java
src/main/java/jsr166y/RecursiveTask.java
src/main/java/jsr166y/ThreadLocalRandom.java
src/main/java/jsr166y/package-info.java
comments:
upgrade to latest jsr166

time:
2013-12-13T23:53:52Z
class:
comments:
upgrade to Jackson 2.3.0

time:
2013-12-13T18:39:46Z
class:
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateResponse.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateResponse.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java
comments:
More common AcknowledgedRestResponseActionListener

Introduced use of AcknowledgedRestResponseActionListener in put/delete index template

time:
2013-12-13T16:44:10Z
class:
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
comments:
Don't try to run check-index in MockDirectoryWrapper

if the MockDirWrapper checks the index on close it closes all
closeables that is has to crash the index if something is not flushed yet.
For us this is a problem since the input is still used. We need to fix this in
lucene first.

time:
2013-12-13T14:42:39Z
class:
src/test/java/org/apache/lucene/util/SloppyMathTests.java
comments:
Relax a bit the accuracy tests on SloppyMaths.

Tests now ensure that the computed distance is correct within 1‰ instead of 1‱.

time:
2013-12-13T14:34:02Z
class:
src/main/java/org/elasticsearch/common/util/BigArrays.java
src/main/java/org/elasticsearch/common/util/BigLongArray.java
src/main/java/org/elasticsearch/common/util/LongArray.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
src/main/java/org/elasticsearch/search/aggregations/support/bytes/BytesValuesSource.java
src/test/java/org/elasticsearch/benchmark/search/aggregations/TermsAggregationSearchBenchmark.java
src/test/java/org/elasticsearch/common/util/BigArraysTests.java
src/test/java/org/elasticsearch/search/aggregations/RandomTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
comments:
Aggregations: Ordinals-based string bucketing support.

When the ValuesSource has ordinals, terms ordinals are used as a cache key to
bucket ordinals. This can make terms aggregations on String terms significantly
faster.

Close #4350

time:
2013-12-13T13:54:21Z
class:
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Fixed test bug

time:
2013-12-13T12:39:53Z
class:
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
src/main/java/org/elasticsearch/search/highlight/HighlightUtils.java
src/main/java/org/elasticsearch/search/highlight/HighlighterParseElement.java
src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/main/java/org/elasticsearch/search/highlight/SearchContextHighlight.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Added the `force_source` option to highlighting that enforces to use of the _source even if there are stored fields.
The percolator uses this option to deal with the fact that the MemoryIndex doesn't support stored fields,
this is possible b/c the _source of the document being percolated is always present.

Closes #4348

time:
2013-12-13T11:08:26Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
comments:
Add trace logging to AllocationDeciders if decision is NO()

time:
2013-12-13T10:52:48Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
comments:
Skipping execution of remaining Deciders if one of them returns a Decision.NO.

Reordering execution of the different AllocationDeciders, so the cheapest get executed first.

time:
2013-12-13T10:36:51Z
class:
src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
comments:
Add `queries` to XContent output of PercolateStats

The queries stats tracked but not exposed to the Rest API

Closes #4440

time:
2013-12-13T09:36:39Z
class:
src/main/java/org/elasticsearch/action/support/nodes/TransportNodesOperationAction.java
comments:
A failure during the response construction could cause a Node Operation never to return

time:
2013-12-13T09:30:42Z
class:
comments:
Print nice error in bin/elasticsearch if user needs to run maven

Before, people that cloned the repo and expected to be able to run
bin/elasticsearch would be met with an awful shell error: the shell
interprets Maven variables like ${project.build.finalName} as shell
variables yet can't handle names of the form ${x.y}. This commit
explicitly checks to make sure that Maven has done its substitutions
before continuing; if Maven hasn't been run, it gives a helpful error
message.

Fixes #2954.

time:
2013-12-12T22:19:59Z
class:
src/main/java/org/elasticsearch/transport/Transport.java
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
randomize transport tcp compression on nodes

time:
2013-12-12T21:29:54Z
class:
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
comments:
properly support global transport compression with new bytes transport request optimization

time:
2013-12-12T19:58:11Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/FailedToGenerateSourceMapperException.java
comments:
refresh the mapping source directly into a compressed buffer
instead of building the mapping source, and then compressing it, we can generate it directly into a compressed buffer

time:
2013-12-12T19:09:32Z
class:
src/main/java/org/apache/lucene/queryparser/XSimpleQueryParser.java
src/main/java/org/elasticsearch/index/query/QueryBuilders.java
src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
src/main/java/org/elasticsearch/index/query/SimpleQueryStringParser.java
src/main/java/org/elasticsearch/indices/query/IndicesQueriesModule.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Add new `simple_query_string` query type

This adds support for Lucene's SimpleQueryParser by adding a new type
of query called the `simple_query_string`. The `simple_query_string`
query is designed to be able to parse human-entered queries without
throwing any exceptions.

Resolves #4159

time:
2013-12-12T16:57:34Z
class:
comments:
Fixing debian init script to work on ubuntu LTS

sysctl parameters must be separated like `-q -w` instead of `-qw`

time:
2013-12-12T14:44:05Z
class:
src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
src/test/java/org/elasticsearch/index/fielddata/NoOrdinalsStringFieldDataTests.java
comments:
Remove IndexFieldData.getHighestNumberOfSeenUniqueValues().

Closes #4426

time:
2013-12-12T14:06:37Z
class:
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
try and wait better for all mapping updates to be processes in test

time:
2013-12-12T11:14:47Z
class:
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
comments:
Also wrap IndexInput if CFS is used

time:
2013-12-12T09:44:01Z
class:
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
comments:
Add more information to IndexInput failures related to abusing closed input

time:
2013-12-12T08:44:55Z
class:
src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
comments:
Add missing mappers to MapperBuilders.

 - completion
 - geo_point
 - geo_shape
 - parent
 - size
 - ttl

Close #4423

time:
2013-12-11T22:43:18Z
class:
comments:
[TEST] Added skip clause to analyze API with text format.
No longer supported in 1.0.0.RC1

time:
2013-12-11T21:54:35Z
class:
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Replaced the synchronization method for enabling the realtime percolator from synchronized methods to use AtomicBoolean#compareAndSet instead.
Remove @TestLogging from percolator tests.

time:
2013-12-11T21:26:46Z
class:
src/main/java/org/elasticsearch/index/query/IndicesFilterParser.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Made sure that we never throw IndexMissingException in indices query and filter

It could happen although we internally use IgnoreIndices.MISSING, due to MetaData#concreteIndices contract, which throws IndexMissingException anyway if all requested indices are missing.
In case all the indices specified in the query/filter are missing, we just execute the no_match query/filter, no need to throw any error.

Closes #3428

time:
2013-12-11T20:28:54Z
class:
src/main/java/org/elasticsearch/rest/AcknowledgedRestResponseActionListener.java
comments:
Introduced ok & acknowledged constant in AcknowledgedRestResponseActionListener

time:
2013-12-11T20:28:15Z
class:
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexResponse.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
comments:
More common AcknowledgedRestResponseActionListener

Introduced use of AcknowledgedRestResponseActionListener in put/delete alias & delete index

time:
2013-12-11T19:54:27Z
class:
src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/delete/DeleteIndexTemplateRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/discovery/Discovery.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java
comments:
Unified default ack timeout to 30 seconds

Increased also default publish state timeout to 30 seconds (from 5 seconds) and introduced constant for it.
Introduced AcknowledgedRequest.DEFAULT_ACK_TIMEOUT constant.
Removed misleading default values coming from the REST layer.
Removed (in a bw compatible manner) the timeout support in put/delete index template as the timeout parameter was ignored.

Closes #4395

time:
2013-12-11T18:33:45Z
class:
comments:
Update README with full command to generate spec

time:
2013-12-11T16:51:09Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentTypeListener.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
comments:
Renamed the methods in DocumentListenerType to actually reflect when these are invoked.

time:
2013-12-11T16:41:10Z
class:
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
comments:
Invoke the DocumentType listeners *before* the mappers are updated. This fixes an issue where if two or more concurrent percolate index requests are processed, the first request would the `.percolator` type mapping, but the real time percolator listener wouldn't be active, this would result in that the subsequent concurrent requests wouldn't be parsed and kept in memory and would never be included in any percolate api result. This issue any occurred when `.percolator` type is created on the fly.

Also made the call to PercolatorQueriesRegistry#enableRealTimePercolator and #disableRealTimePercolator synchronized, so that for the same shard the RealTimePercolatorOperationListener can't registered twice.

time:
2013-12-11T15:04:41Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
comments:
bulk response has errors indication + status per item
closes #4002

time:
2013-12-11T14:00:33Z
class:
comments:
Added field mapping API tests which use wild cards

See: https://github.com/elasticsearch/elasticsearch/issues/4367

time:
2013-12-11T13:34:59Z
class:
src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
Batch processing mapping updates can cause missed merged mappings when batching multiple types
when we bulk changes, we need to use the same index metadata builder across the tasks, otherwise we might remove mappings erroneously
 also, when we check if we can use a higher order mapping, we need to verify that its for the same mapping type

time:
2013-12-11T11:22:45Z
class:
src/main/java/org/elasticsearch/index/indexing/ShardIndexingService.java
comments:
Make listeners a final field in ShardIndexingService, which fixed possible visibility issue.

time:
2013-12-11T09:49:36Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/gateway/GatewayService.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
comments:
introduce an internal metadata uuid

time:
2013-12-11T08:51:32Z
class:
src/main/java/org/elasticsearch/common/geo/GeoDistance.java
src/main/java/org/elasticsearch/common/geo/GeoUtils.java
src/test/java/org/apache/lucene/util/SloppyMathTests.java
comments:
SloppyMath

Added copy of SloppyMath.java from lucene 4.6+
and setup GeoDistance for new haversin method

closes #3862

time:
2013-12-11T08:19:22Z
class:
comments:
Packaging: Ensure setting of sysctl vm.max_map_count

In order to be sure that memory mapped lucene directories are working
one can configure the kernel about how many memory mapped areas
a process may have. This setting ensure for the debian and redhat initscripts
as well as the systemd startup, that this setting is set high enough.

Closes #4397

time:
2013-12-10T22:46:37Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
comments:
Add wildcard support to field resolving in the Get Field Mapping API

Closes #4367

time:
2013-12-10T21:49:31Z
class:
src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
src/main/java/org/elasticsearch/transport/BytesTransportRequest.java
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
comments:
Introduce BytesTransportRequest, allowing for downstream network optimization in buffers usage
When sending a request, mainly to multiple nodes, if we already have the "body" of the request in bytes, we can share it instead of copying it over to a new buffer. Also, it helps a lot when sending a relatively large body to multiple nodes, since it will use the same body buffer across all nodes

time:
2013-12-10T19:15:14Z
class:
src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
comments:
Preference only_node with unknown nodeId returns useful exception

When the search preference is set to only node, but this node is not a
data (or does not exist), we return a search exception, which indicates,
that this is actually a server problem.

However specifying a non-existing node id is a client problem
and should return a more useful error message than
{"error":"SearchPhaseExecutionException[Failed to execute phase [query_fetch], all shards failed]","status":503}

time:
2013-12-10T18:54:27Z
class:
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
comments:
moved log statements

time:
2013-12-10T16:59:00Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
comments:
Fix bug in explain for function_score queries.

The explain output for function_score queries with score_mode=max or
score_mode=min was incorrect, returning instead the value of the last
function.  This change fixes this.

time:
2013-12-10T15:54:08Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
comments:
Remove 'term_index_interval' and 'term_index_divisor'

These settings are no longer relevant since they are codec /
postingsformat level settings since Lucene 4.0

Closes #3912

time:
2013-12-10T14:45:04Z
class:
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Added more logging for percolator.
Lowered log level in percolator tests.

time:
2013-12-10T13:42:14Z
class:
src/test/java/org/elasticsearch/benchmark/search/geo/GeoDistanceSearchBenchmark.java
comments:
Use a dedicated cluster name for GeoDistanceSearchBenchmark (like we do for other benchmarks).

time:
2013-12-10T13:09:37Z
class:
comments:
Added aggs option to percolate api documentation.

time:
2013-12-10T10:15:46Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
comments:
Made sure the new cluster state is not held by AckCountDownListener

(also made AckCountDownListener class static)

time:
2013-12-10T09:41:50Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
comments:
Do not override thetas if sum is less or equals to `0`

Closes #4390

time:
2013-12-09T20:50:24Z
class:
src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
move to ensureGreen in aggs tests to stabelize tests

time:
2013-12-09T16:31:58Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/FilterTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GlobalTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/NestedTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/ShardSizeTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractNumericTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/AvgTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/MaxTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/MinTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/SumTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Added ElasticsearchIntegrationTest#ensureSearchable() to prepare indices to be searchable

Currently we sometimes see test failures that fail because not all replicase are
`searchable` which means they are not started yet or still recovering. Yet, the usual
situation is where two nodes have the same clusterstate but the one that acts as
the search target has not yet processed that clusterstate. The requester sees the
shard as started but it's not mark as such on the target node. For now the #ensureSearchable()
just delegates to #ensureYellow() to make sure the cluster is not red. In the future if we have
the possibilty to recover from situations like this in the search logic we can easily test
this by making the impl a no-op. Note: this problem only occurs if you have low number of docs
and the indexing is really quick such that first request are exectued but shards are not
fully `started`

time:
2013-12-09T16:27:58Z
class:
src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
comments:
Fix test failure.

time:
2013-12-09T15:56:09Z
class:
src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Support postings highlighter in percolate api.

The postings hl now uses a searcher that only encapsulate the view of segment the document being highlighted is in,
this should be better than using the top level engine searcher.

Closes #4385

time:
2013-12-09T13:39:22Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Allow to get a specific transport client inside of tests

Adding functionality to call cluster().transportClient() in tests in order
to get an arbitrary TransportClient object back, independently if the
transport client ratio in returning the normal clients is configured.

Also made sure, that if the normal client is already a transport client
(or a node client) we do not generate another one.

time:
2013-12-09T10:55:13Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
comments:
Trace log all shard failures if an exception is attached.

time:
2013-12-09T10:04:33Z
class:
src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractNumericTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
comments:
remove ensureGreen for debugging

time:
2013-12-09T10:03:36Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/package-info.java
src/test/java/org/elasticsearch/search/aggregations/metrics/package-info.java
src/test/java/org/elasticsearch/search/aggregations/package-info.java
comments:
Enable Trace Logging for org.elasticsearch.action.search.type on aggregations

time:
2013-12-09T10:02:13Z
class:
src/test/java/org/elasticsearch/test/junit/annotations/TestLogging.java
src/test/java/org/elasticsearch/test/junit/listeners/LoggingListener.java
comments:
Add Class and Package Level support for TestLogging

time:
2013-12-09T08:01:51Z
class:
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
comments:
Use random number of iteration for tests
Thanks @simonw for the review.
Related to #4361 and #4371.

time:
2013-12-09T07:41:45Z
class:
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
comments:
Use random number of iteration for tests
Thanks @simonw for the review.
Related to #4361 and #4371.

time:
2013-12-08T22:08:00Z
class:
src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeResponse.java
comments:
Support 'yaml' as a format for the Analyze API

Fixes #4311

time:
2013-12-08T21:31:17Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
Enable Trace Logging for SearchWhileRelocatingTests

time:
2013-12-08T19:56:24Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
Beef up test to use more threads and iterations randomly

time:
2013-12-08T19:55:57Z
class:
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
Added refCount assertion due to LUCENE-5362

time:
2013-12-08T19:55:08Z
class:
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
comments:
Move Thread.sleep test to awaitBusy

time:
2013-12-08T18:34:17Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/FilterTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GlobalTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/NestedTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Add generic assertion to all aggs.bucket tests to check if all shards were successful

time:
2013-12-08T02:32:10Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
comments:
add node and order to the source of update mapping

time:
2013-12-07T21:57:18Z
class:
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
- fixing update mapping tests for index operations so the number of request will be based on the index thread pool size
- added update mapping tests for bulk operations

time:
2013-12-07T21:52:16Z
class:
src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
comments:
Query String caching could cause matched_filters not working

When searching with a query containing query_strings inside a bool query, the specified _name is randomly missing from the results due to caching.

Closes #4361.
Closes #4371.

time:
2013-12-07T21:40:49Z
class:
comments:
Update percolator highlighting docs.

time:
2013-12-07T20:26:22Z
class:
src/main/java/org/elasticsearch/monitor/os/OsStats.java
comments:
Add an `usage` key to the CPU section of OsStats.toXContent.

 This is just the sum of existing `sys` and `user`

Closes #4374

time:
2013-12-07T19:52:47Z
class:
comments:
Fixed local option explanation in TESTING readme

time:
2013-12-07T18:31:33Z
class:
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
update the test to use the same API as 0.90
so backports will be simpler for now

time:
2013-12-07T18:20:16Z
class:
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
comments:
Optimize dynamic mapping updates on master by processing latest one per index/node
Instead of processing all the bulk of update mappings we have per index/node, we can only update the last ordered one out of those (cause they are incremented on the node/index level). This will improve the processing time of an index that have large updates of mappings.
closes #4373

time:
2013-12-06T22:02:09Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Apply slop correctly if phrase query is wrapped in a filtered query.

If a phrase query is wrapped in a filtered query due to type filtering
slop was not applied correctly. Also if the default field required a
type filter the filter was not applied.

Closes #4356

time:
2013-12-06T21:39:08Z
class:
comments:
[Docs] Document which encoding should be used in order to make sense of the offsets returned by the term vectors API.

Close #4363

time:
2013-12-06T19:05:43Z
class:
comments:
[DOCS] Fix outdated link to wonderdog in community integration

time:
2013-12-05T17:40:25Z
class:
src/main/java/org/elasticsearch/common/lucene/all/AllEntries.java
src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java
comments:
Fix _all boosting.

_all boosting used to rely on the fact that the TokenStream doesn't eagerly
consume the input java.io.Reader. This fixes the issue by using binary search
in order to find the right boost given a token's start offset.

Close #4315

time:
2013-12-05T16:44:26Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Cat: Add descs for rest of actions.

time:
2013-12-05T16:36:54Z
class:
comments:
[UTIL] Fixed an error for the `--output` parameter in `thor api:spec:generate`

time:
2013-12-05T14:44:00Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Cat: Add nodes column descriptions.

time:
2013-12-05T13:36:27Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestCatAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHelpAction.java
comments:
remove help command, list all cat commands in /_cat?h endpoint
"eightH"


time:
2013-12-05T11:18:22Z
class:
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
comments:
Added a FsStats.total section that sums up all stats for the different path.dirs. Added `disk_io_size` and `disk_io_op` to the toXContent output, summing up `disk_read_size+disk_write_size` and `disk_writes+disk_reads` respectively.

Closes #4344 , Closes #4343

time:
2013-12-05T10:10:56Z
class:
comments:
[DOCS] Completion suggest: Clarify de-duplication, optimize/merge

This contribution is based on the feedback given in issue #4254 and
issue #4255, and should clear things up, when suggestions are being
removed and not displayed anymore after deletion of data.

time:
2013-12-05T02:17:56Z
class:
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
test fix

time:
2013-12-05T01:21:18Z
class:
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
test fix

time:
2013-12-05T00:18:39Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
Allow to disable sending a refresh-mapping to master node
When a node processed an index request, which caused it to update its own mapping, then it sends that mapping to the master. While the master process it, that node receives a state that includes an older version of the mapping. Now, there is a conflict, its not bad (i.e. the cluster state will eventually have the correct mapping), but we send for a refresh just in case form that node to the master.

With a system that has extreme cases of updates and frequent mapping changes, it might make sense to disable this feature. The indices.cluster.send_refresh_mapping setting can be introduced to support that (note, this setting need to be set on the data nodes)

Note, sending refresh mapping is more important when the reverse happens, and for some reason, the mapping in the master is ahead, or in conflict, with the actual parsing of it in the actual node the index exists on. In this case, the refresh mapping will result in warning being logged on the master node.

closes #4342

time:
2013-12-04T23:58:35Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
comments:
better error handling when processing refresh/update mapping
don't fail the whole bulk of updates, just the specific ones, and warn log it

time:
2013-12-04T23:57:10Z
class:
src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentIdsFilter.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenQueryTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Fixed incorrect results with `has_child` query with score mode if the parent type has nested object types. The inner objects (Separate Lucene docs) are also emitted as hits, which incorrectly decreased the count down short circuit mechanism in the `has_child` query.

Closes #4341

time:
2013-12-04T14:18:52Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/EsAbortPolicy.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
comments:
Override DefaultExceptionHandler to filter out certain exceptions

We have the situation that some tests fail since they don't handle
EsRejectedExecutionException which gets thrown when a node shuts
down. That is ok to ignore this exception and not fail.
We also suffer from OOMs that can't create native threads but don't
get threaddumps for those failures. This patch prints the thread
stacks once we catch a OOM which can' create native threads.

time:
2013-12-04T12:16:55Z
class:
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/query/FilterBuilders.java
src/main/java/org/elasticsearch/index/query/GeohashCellFilter.java
src/main/java/org/elasticsearch/indices/query/IndicesQueriesModule.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
comments:
Fail geohash_cell filter if geohash prefix is not enabled
closes #4335

time:
2013-12-04T00:11:24Z
class:
src/main/java/org/elasticsearch/percolator/PercolatorService.java
comments:
Fixed parsing bug in percolator, where everything after the `doc` object was skipped.

Closes #4325

time:
2013-12-03T23:42:24Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
comments:
Fix implementation of currentValueHash in FieldDataSource.Bytes.SortedAndUnique.

Close #4330

time:
2013-12-03T23:32:12Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHelpAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Introduce abstract superclass, group cat module bindings, and short-circuit helps.

time:
2013-12-03T21:43:25Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
comments:
MetaData to use new iterator in ImmutableOpenMap

time:
2013-12-03T21:29:54Z
class:
src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/common/inject/internal/UnmodifiableIterator.java
comments:
expose key and value iterators in ImmutableOpenMap

time:
2013-12-03T17:18:23Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
comments:
- removed the getKeyAsString method from StringTerms (redundant method)

time:
2013-12-03T14:10:36Z
class:
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/indices/IndicesLifecycle.java
src/main/java/org/elasticsearch/indices/InternalIndicesLifecycle.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
comments:
The registered queries were loaded after shard went to started phase, this resulted in the situation that the percolate api could be used while the registered queries still needed to be loaded from disk.
The newly added afterIndexShardPostRecovery method to InternalIndicesLifecycle, that the percolator now uses to trigger the loading of the registered queries will make sure that a shard doesn't go to started state before the queries have been loaded.
The percolate api (like other apis) will retry the execution on a different shard copy if a shard isn't in a started state preventing empty results if there registered queries to be loaded. Percolator tests fail sometimes for this reason.

time:
2013-12-03T10:27:27Z
class:
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
comments:
Added test logging

time:
2013-12-03T10:10:01Z
class:
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
src/main/java/org/elasticsearch/search/highlight/HighlighterParseElement.java
src/main/java/org/elasticsearch/search/highlight/SearchContextHighlight.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Add support for combining fields to the FVH

The Fast Vector Highlighter can combine matches on multiple fields to
highlight a single field using `matched_fields`.  This is most
intuitive for multifields that analyze the same string in different
ways.  Example:
{
    "query": {
        "query_string": {
            "query": "content.plain:running scissors",
            "fields": ["content"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "content": {
                "matched_fields": ["content", "content.plain"],
                "type" : "fvh"
            }
        }
    }
}

Closes #3750

time:
2013-12-03T09:57:11Z
class:
src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperTests.java
comments:
Fix broken test.

time:
2013-12-03T09:39:13Z
class:
comments:
Wrong link to Token Filter

time:
2013-12-03T09:23:40Z
class:
comments:
Remove bash specific calls

Make sure that every call in a shell script is supported by /bin/sh and not a bashism, like $()

Closes #4314

time:
2013-12-03T08:39:32Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationTests.java
src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperTests.java
comments:
Allow string fields to store token counts

To use this one you send a string to a field of type 'token_count'.  This
makes the most sense with a multi-field.

time:
2013-12-02T19:44:51Z
class:
comments:
removing test.jvm.argline declaration

<properties> declaration was overwriting environment setting.

time:
2013-12-02T17:28:27Z
class:
src/main/java/org/elasticsearch/common/lucene/docset/MatchDocIdSet.java
comments:
Removed shortCircuit in MatchDocIdSet since it is no longer used.

time:
2013-12-02T17:01:45Z
class:
comments:
[DOCS] Test framework documentation

The java test framework using randomized testing is explained with a couple of examples.

time:
2013-12-02T16:10:07Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Moving to 1.0.0RC1 snap

time:
2013-12-02T15:45:30Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
release [1.0.0.Beta2]

time:
2013-12-02T15:16:38Z
class:
comments:
Allow setting release log file via env

time:
2013-12-02T14:30:49Z
class:
comments:
[DOCS] Another cat?v change

time:
2013-12-02T14:29:47Z
class:
comments:
[DOCS] Linked cat-pending to cluster-pending

time:
2013-12-02T14:27:41Z
class:
comments:
[DOCS] Changed the _cat docs to use ?v instead of ?v=true

time:
2013-12-02T14:14:25Z
class:
comments:
[DOCS] Typos in aggregations

time:
2013-12-02T13:50:00Z
class:
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Use EA#assertMatchCount() over just checking the match count.

time:
2013-12-02T12:04:13Z
class:
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionTests.java
comments:
User minimum_master_nodes in tests that shutdown nodes some of those time out on Windows

time:
2013-12-02T11:12:04Z
class:
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Use EA#assertMatchCount() over just checking the match count.

time:
2013-12-02T10:42:51Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
comments:
added more wait for green status on aggs tests

time:
2013-12-02T10:31:31Z
class:
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchAndIndexingBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchShortCircuitBenchmark.java
comments:
fix mapping error in p/c benchmarks

time:
2013-12-02T10:05:55Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
only wrap the parentFilter in ApplyAcceptedDocsFilter, not the other short circuit filters.

time:
2013-12-02T09:08:26Z
class:
comments:
[DOCS] Fixed typos and corrected grammar

time:
2013-12-02T01:01:03Z
class:
src/main/java/org/elasticsearch/search/aggregations/ValuesSourceAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IpRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregatorParser.java
comments:
Changed the "script_lang" parameter to "lang" in all value source based aggs - to be consistent with all other script based APIs.

time:
2013-12-01T23:18:59Z
class:
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/test/java/org/elasticsearch/index/search/child/ParentConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentQueryTests.java
comments:
Added random filtered query logic the to random parent query tests.
Fixed bug in ParentQuery.ChildScorer#advance(), the parent value was checked for the _uid field while the _parent should have been checked.

time:
2013-12-01T23:18:59Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenQueryTests.java
comments:
The short circuit mechanism always needs to be wrapped with the live docs. In certain scenarios the live docs isn't passed down with acceptedDocs.
For example when a has_child is wrapped in a filtered query as query and the wrapped filter is cached.
The short circuit mechanism in that case counts down based on deleted docs, which then yields lower results than is expected.

Relates to #4306

time:
2013-12-01T18:44:56Z
class:
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
Log intermediate pending searchers as trace instead of debug

time:
2013-12-01T17:58:39Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/FilterTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
comments:
add more ensureGreen to aggs tests

time:
2013-12-01T16:22:58Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
comments:
Make the ChildrenQuery and ParentQuery not rely on the fact that score of 0 means that there isn't a match.

time:
2013-12-01T15:44:19Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
Also short circuit within segment when score mode is avg

time:
2013-11-30T19:05:55Z
class:
src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java
src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ConstantScorer.java
src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentQueryTests.java
comments:
Fixes related to accepted docs not taken into account:
* Removed the applyAcceptedDocs in ChildrenConstantScoreQuery, they need to be applied at all times. (because of short circuit mechanism)
* Moved ParentDocSet to FilteredDocIdSetIterator, because it fits better than MatchDocIdSet.
* Made similar changes to ParentConstantScoreQuery for consistency between the two queries. The bug accepted docs bug didn't occur in the ParentConstantScoreQuery.
* Updated random p/c tests to randomly update parent or child docs during the test run.

Closes #4306

time:
2013-11-30T18:41:49Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractNumericTests.java
comments:
wait for green in tests for now

time:
2013-11-30T15:22:30Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestHelpAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Cat API: Improve help and execute help before sending server requests

* Force the cat API classes to have simple help available by extending from a AbstractCatAction
* Use a set binder on guice creation to create the help on node start up
* Make sure that the help/field info is returned without querying any data

time:
2013-11-30T04:44:04Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
comments:
added more assertions to aggs tests

time:
2013-11-30T02:58:11Z
class:
src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
comments:
added assertions for shard failures in stats agg tests

time:
2013-11-29T23:30:32Z
class:
src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java
comments:
NullPointerException in FsTranslog when reverting transient log
This happens when reverting the trans transaction log on failure, and when that happens, actually we might have failed on the transient translog creation to being with....
fixes #4223

time:
2013-11-29T20:15:28Z
class:
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchMatchers.java
comments:
trimmed down SimpleQueryTests + more assertAcked

time:
2013-11-29T19:35:40Z
class:
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Added simple test for minScore

time:
2013-11-29T19:29:20Z
class:
src/main/java/org/elasticsearch/common/lucene/MinimumScoreCollector.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Changed the minScore comparator from > to >=

Closes #4303

time:
2013-11-29T18:24:56Z
class:
src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java
comments:
Fix computation of explanations for AllTermQuery.

The use of freq() instead of sloppyFreq() and the fact that `numMatches` was
not updated in `setFreqCurrentDoc` could lead to an inaccurate score in the
explanation.

Close #4298

time:
2013-11-29T15:42:50Z
class:
src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
comments:
Add line feed for prettified main REST action

time:
2013-11-29T15:22:20Z
class:
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
test classes cleanup (fixed warnings and typos)

time:
2013-11-29T13:55:24Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
fixed typo in TestCluster

time:
2013-11-29T12:46:48Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/BucketPriorityQueue.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/IncludeExclude.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
comments:
- Added support for term filtering based on include/exclude regex on the terms agg
- Added javadoc to the TermsBuilder

Closes #4267

time:
2013-11-29T11:35:42Z
class:
comments:
- Added docs for the value_count aggregation
- Fixed typos in the terms facets docs
- Fixed aggregation docs layout
- Added docs for shard_size in term aggregation

time:
2013-11-29T10:39:23Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
src/main/java/org/elasticsearch/cluster/ClusterModule.java
src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeMappingCreatedAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Refactored put mapping api to make use of the new recently introduced generic ack mechanism

Note: we were previously waiting for ack only from all nodes that contain shards for the indices that the mapping updatewas applied to. This change introduces a wait for ack from all nodes, consitent with other api as the ack is meant more on the cluster state itself, which is held by all nodes and needs to be updated on all nodes anyway.

Closes #4228

time:
2013-11-29T09:40:33Z
class:
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
comments:
Completion postings format: Write hole character

Another issue found by randomized testing.

time:
2013-11-29T08:35:45Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Display placeholder for non-master-eligible nodes.

time:
2013-11-29T08:32:54Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Check for load avg before attempting to display.

time:
2013-11-29T08:19:56Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
comments:
Convert _cat/count to TimestampedTable.

time:
2013-11-29T08:19:15Z
class:
src/main/java/org/elasticsearch/common/table/TimestampedTable.java
comments:
Supply field descriptions for TimestampedTable.

time:
2013-11-29T07:21:26Z
class:
comments:
[DOCS] Doc'ed cluster pending tasks

time:
2013-11-29T07:09:06Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestHelpAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
comments:
Add _cat/pending_tasks.

Closes #4251.

time:
2013-11-29T05:14:47Z
class:
comments:
[DOCS] Fix porter stem filter name in other stemming docs

time:
2013-11-29T05:01:19Z
class:
comments:
[DOCS] Fix name of porter stemming token filter

time:
2013-11-29T03:13:32Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
comments:
Should be limiting health request to concreteIndices.

Closes #4296.

time:
2013-11-29T00:20:18Z
class:
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
comments:
Increase priority of shard started task to URGENT

time:
2013-11-28T17:22:29Z
class:
comments:
OOM when building with java6

The maven-compiler-plugin upgrade from 2.3.2 to 3.1 (see #4279) could cause out of memory issue when building the project with Maven and JDK6 and default memory settings (no `MAVEN_OPTS`).

This issue does not appear with JDK7.
w00t this is awesome I was looking for a fix here too! BTW. this only happened on my mac but never on my linux


time:
2013-11-28T16:26:07Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
src/test/java/org/elasticsearch/percolator/PercolatorFacetsAndAggregationsTests.java
comments:
Added aggregation support to the percolate api.
Closes #4245

time:
2013-11-28T16:22:51Z
class:
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenQueryTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
comments:
Randomly use a cached filter.
Wrap the ChildrenQuery in a XFilteredQuery to also execute other code paths (scorer#advance)

time:
2013-11-28T16:21:29Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
Fixed positive infinity bug that can occur in specific scenarios when score mode average is used.

Closes #4291

time:
2013-11-28T13:56:51Z
class:
comments:
Upgrade Maven Surefire Plugin to 2.16

Closes #4275.

time:
2013-11-28T13:56:34Z
class:
comments:
Upgrade Maven Source Plugin to 2.2.1

Closes #4276.

time:
2013-11-28T13:56:20Z
class:
comments:
Upgrade RPM Maven Plugin to 2.1-alpha-3

Closes #4282.

time:
2013-11-28T13:56:07Z
class:
comments:
Upgrade Maven Resources Plugin to 2.6

Closes #4280.

time:
2013-11-28T13:55:53Z
class:
comments:
Upgrade Maven Jar Plugin to 2.4

Closes #4281.

time:
2013-11-28T13:55:40Z
class:
comments:
Upgrade Maven Eclipse Plugin to 2.9

Closes #4277.

time:
2013-11-28T13:52:58Z
class:
comments:
Upgrade Maven Dependency Plugin to 2.8

Closes #4274.

time:
2013-11-28T13:52:32Z
class:
comments:
Upgrade Maven Compiler Plugin to 3.1

Closes #4279.

time:
2013-11-28T13:49:51Z
class:
comments:
Upgrade Maven Assembly Plugin to 2.4

Closes #4278.

time:
2013-11-28T13:37:48Z
class:
src/main/java/org/apache/lucene/store/FilterDirectory.java
src/main/java/org/apache/lucene/store/RateLimitedFSDirectory.java
src/main/java/org/elasticsearch/index/store/DirectoryUtils.java
src/main/java/org/elasticsearch/index/store/distributor/AbstractDistributor.java
src/main/java/org/elasticsearch/index/store/fs/FsDirectoryService.java
src/main/java/org/elasticsearch/index/store/memory/ByteBufferDirectoryService.java
src/main/java/org/elasticsearch/index/store/ram/RamDirectoryService.java
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
comments:
Use FilterDirectory from lucene instead of maintaining a copy

FilterDirectory has been ported to Lucene in LUCENE-5204 which makes
the class in elasticsearch obsolet. This commit removes the class and
moves the static utils that are not in lucene to `DirectoryUtils`

time:
2013-11-28T13:22:10Z
class:
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/apache/lucene/search/suggest/analyzing/XFuzzySuggester.java
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/test/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProviderV1.java
src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Made hole character in XAnalyzingSuggester part of Postingsformat

* Hole charactor now can change with new releases
* Fixed bug where the SEP_LABEL constant was used instead of the sepLabel instance variable
* Replaced if- with switch-statement

time:
2013-11-28T12:22:39Z
class:
src/test/java/org/elasticsearch/search/aggregations/metrics/AvgTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
comments:
Add more logging to recent aggregations failures.

time:
2013-11-28T11:07:21Z
class:
comments:
Remove randomizedtesting-runner explicit dependency
Was added by mistake with #4266

time:
2013-11-28T09:54:48Z
class:
comments:
Update to shade plugin 2.2 to shade test artifact as well

When we want to use test artifact in other projects, dependencies
are not shaded as for core artifact.

Issue opened in maven shade project: [MSHADE-158](http://jira.codehaus.org/browse/MSHADE-158)

When using it in other projects, you basically need to change your `pom.xml` file:

```xml
<dependency>
    <groupId>org.elasticsearch</groupId>
    <artifactId>elasticsearch</artifactId>
    <version>${elasticsearch.version}</version>
    <type>test-jar</type>
    <scope>test</scope>
</dependency>
```

You can also define some properties:

```xml
<properties>
    <tests.jvms>1</tests.jvms>
    <tests.shuffle>true</tests.shuffle>
    <tests.output>onerror</tests.output>
    <tests.client.ratio></tests.client.ratio>
    <es.logger.level>INFO</es.logger.level>
</properties>
```

Closes #4266

time:
2013-11-28T08:40:52Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/NestedTests.java
comments:
Fix test bug: we need at least one parent to have 1 child or more.

time:
2013-11-27T16:54:25Z
class:
comments:
[DOCS] Fixed a bad link

time:
2013-11-27T16:33:09Z
class:
comments:
[DOCS] Documented rest.action.multi.allow_explicit_index

time:
2013-11-27T14:55:30Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
Catch AlreadClosedException in RobinSearcher#release()

When we relocate a shard we might still have pending SearchContext
instances hanging around that will be used in "in-flight" searches
on the already relocated shard. This is a valid operation but if
we have already closed the underlying directory which happens during
cleanup concurrently the close call on the IndexReader can trigger
an AlreadyClosedException when the NRT reader tries to cleanup files
via the IndexWriter.

Closes #4273

time:
2013-11-27T14:21:09Z
class:
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
comments:
Fix assertions in testEquivalence and beef up the test

time:
2013-11-27T13:56:09Z
class:
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/percolator/QueriesLoaderCollector.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/test/java/org/elasticsearch/benchmark/fielddata/LongFieldDataBenchmark.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTest.java
comments:
Cleanup of IndexFieldDataService.getForField.

This method has 2 signatures and one of them is dangerous since it allows to
discard fielddata configuration of the field mapper. This commit changes the
percolator so that it uses fielddata configuration of the _id field mapper
instead of forcing the paged_bytes format.

Closes #4270

time:
2013-11-27T13:16:58Z
class:
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/facet/terms/TermsFacetParser.java
src/test/java/org/elasticsearch/search/aggregations/bucket/ShardSizeTermsTests.java
comments:
Added support for shard_size in terms agg

Closes #4242

time:
2013-11-27T10:55:29Z
class:
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
comments:
Cleanup Rescorer Tests & add random indexing

time:
2013-11-27T08:49:15Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java
comments:
Fixed file-based template loading via config/templates

When parsing the json file, the first field is ignored as
parser.nextToken() seems to be called too often.

Closes #4235

time:
2013-11-26T21:46:43Z
class:
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
comments:
Add hole character to the reverved characters for completion suggester

time:
2013-11-26T21:14:18Z
class:
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Cat API: Add h parameter to apis, allowing to return columns and descriptions for them
closes #4262

time:
2013-11-26T19:42:37Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
comments:
Fixing CompletionFieldMapper.isReservedChar() to take all relevant chars in account

time:
2013-11-26T18:16:24Z
class:
comments:
[Docs] Added _source filtering to documentation

Relates to #3301

time:
2013-11-26T18:01:43Z
class:
src/main/java/org/elasticsearch/index/mapper/MapperService.java
comments:
Only print the warning about '.' in type, when it is not a percolator type.

time:
2013-11-26T17:59:21Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
comments:
Include facets in the rest response.

time:
2013-11-26T16:51:27Z
class:
comments:
prepare for next development iteration

time:
2013-11-26T16:46:25Z
class:
comments:
prepare release elasticsearch-cloud-aws-1.16.0

time:
2013-11-26T16:04:18Z
class:
src/main/java/org/elasticsearch/action/termvector/TransportMultiTermVectorsAction.java
src/test/java/org/elasticsearch/action/termvector/MultiTermVectorsTests.java
comments:
Fix issue 3989

Multi term vector request never returned if shards for all requested documents
were non existent.

closes #3989

time:
2013-11-26T16:03:14Z
class:
comments:
[DOC] add doc for multi term vector api

closes #3998

time:
2013-11-26T16:02:56Z
class:
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequest.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequestBuilder.java
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/action/termvector/TermVectorRequest.java
src/main/java/org/elasticsearch/action/termvector/TermVectorRequestBuilder.java
src/main/java/org/elasticsearch/rest/action/termvector/RestMultiTermVectorsAction.java
src/main/java/org/elasticsearch/rest/action/termvector/RestTermVectorAction.java
src/test/java/org/elasticsearch/action/termvector/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/action/termvector/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/action/termvector/GetTermVectorTests.java
src/test/java/org/elasticsearch/action/termvector/MultiTermVectorsTests.java
src/test/java/org/elasticsearch/action/termvector/TermVectorUnitTests.java
comments:
Make parsing of uri and body parameters consistent with single term vector api

uri parameters were not all parsed for the multi term vector request. This commit
makes sure that all parameters are parsed and used when creating the requests for the
multi term vector request.

In order to simplify both code and json request, the request structure now allows
two ways to use multi term vectors:

1. Give all parameters for each document requested in the docs array like this:

```
{
   "docs": [
      {
         "_index": "testidx",
         "_type": "test",
         "_id": "2",
         "terms": [
            "fox"
         ],
         "term_statistics": true
      },
      {
         "_index": "testidx",
         "_type": "test",
         "_id": "1",
         "terms": [
            "quick",
            "brown"
         ],
         "term_statistics": false
      }
   ]
}
```

2. Define a list of ids and give parameters in a separate parameters object like this:

```
{
   "ids": [
      "1",
      "2"
   ],
   "parameters": {
      "_index": "testidx",
      "_type": "test",
      "terms": [
         "brown"
      ]
   }
}
```

uri parameters are global parameters that are set for both cases. They are overwritten
by parameter definitions in the body.

Also, this commit adds the missing setParent(..) and setPreference(..) to TermVectorRequestBuilder.

time:
2013-11-26T16:00:18Z
class:
src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java
comments:
Filter instances using EC2 API instead of locally

This change will allow EC2 API to filter by tags, AZ, and instance state.  In the situation where you have a large number of instances/reservations, this can be a performance boost.

Note that we still do the security group filter locally due to the different strategies (all or some must match).

Closes #39.

time:
2013-11-26T11:52:07Z
class:
src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Added unit test for current completion postingsformat

time:
2013-11-26T11:52:07Z
class:
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Randomized CompletionSuggestSearchTests

time:
2013-11-26T11:52:06Z
class:
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/apache/lucene/search/suggest/analyzing/XFuzzySuggester.java
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/main/java/org/elasticsearch/search/suggest/completion/Completion090PostingsFormat.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestParser.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionFuzzyBuilder.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProviderV1.java
src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Updated Analyzing/Fuzzysuggester from lucene trunk

* Minor alignments (like setter to ctor)
* FuzzySuggester has a unicode aware flag, which is not exposed in the fuzzy completion request parameters
* Made XAnalyzingSuggester flags (PAYLOAD_SEP, END_BYTE, SEP_LABEL) to be written into the postings format, so we can retain backwards compatibility
* The above change also implies, that these flags can be set per instantiated XAnalyzingSuggester
* CompletionPostingsFormatTest now uses a randomProvider for writing data to check for bwc

time:
2013-11-26T10:57:15Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/shutdown/TransportNodesShutdownAction.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingGatewayAllocator.java
src/main/java/org/elasticsearch/gateway/local/LocalGateway.java
src/main/java/org/elasticsearch/gateway/local/LocalGatewayAllocator.java
src/main/java/org/elasticsearch/gateway/local/state/meta/TransportNodesListGatewayMetaState.java
src/main/java/org/elasticsearch/gateway/local/state/shards/TransportNodesListGatewayStartedShards.java
src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
comments:
Cut DiscoveryNodes over to ImmutableOpenMap.

time:
2013-11-26T10:29:44Z
class:
src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java
comments:
Minor Typo Correction

Reading the logic, saw a few typos. Feel free to just fix them and not bother with a PR.

Closed #38.

time:
2013-11-26T10:16:02Z
class:
comments:
Run tests with reduced stack size as we run in production

time:
2013-11-26T10:11:19Z
class:
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
Only use -Dtests.jvm.argline instead of numbered options

time:
2013-11-26T09:54:37Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
Add more reporting to asserting index searcher

time:
2013-11-26T08:48:33Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
comments:
allow to parse directly the compressed mapping

time:
2013-11-26T01:48:31Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
comments:
use the proper abstraction of ImmutableOpenMap
we already use the open map / clone trick, might as well use the ImmutableOpenMap here

time:
2013-11-25T22:43:40Z
class:
src/main/java/org/elasticsearch/index/query/FilterBuilders.java
src/main/java/org/elasticsearch/index/query/NumericRangeFilterBuilder.java
src/main/java/org/elasticsearch/index/query/NumericRangeFilterParser.java
src/main/java/org/elasticsearch/index/query/RangeFilterBuilder.java
src/main/java/org/elasticsearch/index/query/RangeFilterParser.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Added execution option to `range` filter, with the `index` and `fielddata` as values.
Deprecated `numeric_range` filter in favor for the `range` filter with `fielddata` as execution.

Closes #4034

time:
2013-11-25T22:18:36Z
class:
src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java
src/main/java/org/elasticsearch/gateway/none/NoneGateway.java
comments:
Small cleanup

time:
2013-11-25T20:59:06Z
class:
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java
src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetMappingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplatesAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/get/GetWarmersResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/get/TransportGetWarmersAction.java
src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/common/collect/HppcMaps.java
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/common/collect/MapBuilder.java
src/main/java/org/elasticsearch/common/collect/XMaps.java
src/main/java/org/elasticsearch/gateway/GatewayService.java
src/main/java/org/elasticsearch/gateway/local/LocalGateway.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java
src/main/java/org/elasticsearch/gateway/none/NoneGateway.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
src/main/java/org/elasticsearch/river/routing/RiversRouter.java
src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
src/main/java/org/elasticsearch/search/dfs/AggregatedDfs.java
src/main/java/org/elasticsearch/search/dfs/DfsPhase.java
src/main/java/org/elasticsearch/search/dfs/DfsSearchResult.java
src/main/java/org/elasticsearch/snapshots/RestoreService.java
src/test/java/org/elasticsearch/benchmark/aliases/AliasesBenchmark.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/common/hppc/HppcMapsTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleGetMappingsTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Cut the following classes over to ImmutableOpenMap:
* MetaData
* IndexMetaData
* ClusterState
* IndexTemplateMetaData
Not sure the value behind making the API have Maps that do not implement the expected interface anymore.  

@jaysonminard this was actually part of: https://github.com/elasticsearch/elasticsearch/issues/3858

thanks, but it is an odd interface (compared to typical) for a client-facing library rather than internal only use.  I know some client code is also used internally, but these classes now invade calling code in new ways.

the other data that we expose, like data strutters in cluster state, metadata, and such, all use the new ImmutableOpenMap, intentionally. So even if we return Map on those specific APIs like warmers, then someone can say that ClusterState should include Map and not ImmutableOpenMap...


time:
2013-11-25T13:35:34Z
class:
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
Include JVM Arg line in reproduce line

time:
2013-11-25T10:53:32Z
class:
comments:
[API] bulk request now supports timeout, see #4220

time:
2013-11-25T10:48:22Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
comments:
Bulk should support shard timeout like the index api
closes #4220

time:
2013-11-25T10:24:55Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
acquireSearcher should fail with state failure when not set/closed
also fixes #4232

time:
2013-11-25T10:24:19Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
acquireSearcher should fail with state failure when not set/closed
also fixes #4232

time:
2013-11-25T09:32:35Z
class:
src/main/java/org/elasticsearch/gateway/local/LocalGatewayAllocator.java
comments:
iterator doesn't implement #remove()

time:
2013-11-25T02:20:01Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocationTests.java
comments:
Local primaries should be preferred to relocating primaries

To reproduce the bug use -Dtests.seed=5AB62524C9AB0489
Fixes #4237

time:
2013-11-24T20:08:38Z
class:
src/main/java/org/apache/lucene/index/XIndexWriter.java
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/main/java/org/apache/lucene/search/XLuceneConstantScoreQuery.java
src/main/java/org/apache/lucene/search/postingshighlight/CustomPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/CustomPostingsHighlighter.java
src/main/java/org/apache/lucene/search/postingshighlight/XDefaultPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/XPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/XPostingsHighlighter.java
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/apache/lucene/store/RateLimitedFSDirectory.java
src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferDirectory.java
src/main/java/org/elasticsearch/Version.java
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/common/lucene/Lucene.java
src/main/java/org/elasticsearch/common/lucene/search/XConstantScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/search/XFilteredQuery.java
src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java
src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormat.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/merge/OnGoingMerge.java
src/main/java/org/elasticsearch/index/merge/policy/IndexUpgraderMergePolicy.java
src/main/java/org/elasticsearch/index/query/CommonTermsQueryParser.java
src/main/java/org/elasticsearch/index/query/ConstantScoreQueryParser.java
src/main/java/org/elasticsearch/index/query/IdsQueryParser.java
src/main/java/org/elasticsearch/index/store/Store.java
src/main/java/org/elasticsearch/search/facet/query/QueryFacetExecutor.java
src/test/java/org/apache/lucene/search/postingshighlight/CustomPostingsHighlighterTests.java
src/test/java/org/apache/lucene/search/postingshighlight/XPostingsHighlighterTests.java
src/test/java/org/elasticsearch/index/cache/filter/FilterCacheTests.java
src/test/java/org/elasticsearch/index/codec/CodecTests.java
src/test/java/org/elasticsearch/index/codec/postingformat/DefaultPostingsFormatTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionPostingsFormatTest.java
src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
comments:
Upgrade to Lucene 4.6

This commit upgrades to Lucene 4.6 and contains the following improvements:

 * Remove XIndexWriter in favor of the fixed IndexWriter
 * Removes patched XLuceneConstantScoreQuery
 * Now uses Lucene passage formatters contributed from Elasticsearch in PostingsHighlighter
 * Upgrades to Lucene46 Codec from Lucene45 Codec
 * Fixes problem in CommonTermsQueryParser where close was never called.

Closes #4241

time:
2013-11-24T19:26:12Z
class:
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
comments:
added a waitForGreen condition for the unmapped tests on missing agg

time:
2013-11-24T14:35:11Z
class:
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentQueryTests.java
comments:
force default codec
reduce p/c searches and num child docs being generated

time:
2013-11-24T11:13:08Z
class:
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/action/search/SearchResponse.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollScanAction.java
src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java
src/main/java/org/elasticsearch/common/geo/GeoPoint.java
src/main/java/org/elasticsearch/common/joda/TimeZoneRounding.java
src/main/java/org/elasticsearch/common/lucene/ReaderContextAware.java
src/main/java/org/elasticsearch/common/lucene/ScorerAware.java
src/main/java/org/elasticsearch/common/rounding/DateTimeUnit.java
src/main/java/org/elasticsearch/common/rounding/Rounding.java
src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
src/main/java/org/elasticsearch/common/unit/TimeValue.java
src/main/java/org/elasticsearch/common/util/BigArray.java
src/main/java/org/elasticsearch/common/util/BigArrays.java
src/main/java/org/elasticsearch/common/util/BigDoubleArray.java
src/main/java/org/elasticsearch/common/util/BigIntArray.java
src/main/java/org/elasticsearch/common/util/BigLongArray.java
src/main/java/org/elasticsearch/common/util/BigObjectArray.java
src/main/java/org/elasticsearch/common/util/DoubleArray.java
src/main/java/org/elasticsearch/common/util/IntArray.java
src/main/java/org/elasticsearch/common/util/IntArrays.java
src/main/java/org/elasticsearch/common/util/LongArray.java
src/main/java/org/elasticsearch/common/util/ObjectArray.java
src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/script/SearchScript.java
src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java
src/main/java/org/elasticsearch/search/SearchModule.java
src/main/java/org/elasticsearch/search/TransportSearchModule.java
src/main/java/org/elasticsearch/search/aggregations/AbstractAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/Aggregation.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBinaryParseElement.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java
src/main/java/org/elasticsearch/search/aggregations/AggregationExecutionException.java
src/main/java/org/elasticsearch/search/aggregations/AggregationInitializationException.java
src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
src/main/java/org/elasticsearch/search/aggregations/AggregationParseElement.java
src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
src/main/java/org/elasticsearch/search/aggregations/Aggregations.java
src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorFactories.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java
src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
src/main/java/org/elasticsearch/search/aggregations/SearchContextAggregations.java
src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
src/main/java/org/elasticsearch/search/aggregations/ValuesSourceAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java
src/main/java/org/elasticsearch/search/aggregations/bucket/BucketsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/LongHash.java
src/main/java/org/elasticsearch/search/aggregations/bucket/SingleBucketAggregation.java
src/main/java/org/elasticsearch/search/aggregations/bucket/SingleBucketAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/Filter.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/Global.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/InternalMissing.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/Missing.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/Nested.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/Range.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeBuilderBase.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRange.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistance.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4Range.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/InternalIPv4Range.java
src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IpRangeParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/BucketPriorityQueue.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTermsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/MetricsAggregation.java
src/main/java/org/elasticsearch/search/aggregations/metrics/MetricsAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregationBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregatorParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/Avg.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/avg/InternalAvg.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/InternalMax.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/Max.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/InternalMin.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/Min.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/Stats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/InternalSum.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/Sum.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumParser.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/InternalValueCount.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCount.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountBuilder.java
src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountParser.java
src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldContext.java
src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java
src/main/java/org/elasticsearch/search/aggregations/support/ScriptValueType.java
src/main/java/org/elasticsearch/search/aggregations/support/ScriptValues.java
src/main/java/org/elasticsearch/search/aggregations/support/ValueSourceAggregatorFactory.java
src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceBased.java
src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceConfig.java
src/main/java/org/elasticsearch/search/aggregations/support/bytes/BytesValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/bytes/ScriptBytesValues.java
src/main/java/org/elasticsearch/search/aggregations/support/geopoints/GeoPointValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/NumericValuesSource.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/ScriptDoubleValues.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/ScriptLongValues.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/ValueFormatter.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/ValueFormatterStreams.java
src/main/java/org/elasticsearch/search/aggregations/support/numeric/ValueParser.java
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
src/main/java/org/elasticsearch/search/facet/datehistogram/CountDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/datehistogram/DateHistogramFacetParser.java
src/main/java/org/elasticsearch/search/facet/datehistogram/ValueDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/datehistogram/ValueScriptDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringOrdinalsFacetExecutor.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/main/java/org/elasticsearch/search/query/QueryPhase.java
src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
src/test/java/org/elasticsearch/benchmark/search/aggregations/HistogramAggregationSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/aggregations/QueryFilterAggregationSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/aggregations/TermsAggregationSearchBenchmark.java
src/test/java/org/elasticsearch/common/rounding/RoundingTests.java
src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
src/test/java/org/elasticsearch/common/util/BigArraysTests.java
src/test/java/org/elasticsearch/deps/joda/TimeZoneRoundingTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
src/test/java/org/elasticsearch/search/aggregations/RandomTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/FilterTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/GlobalTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongHashTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/MissingTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/NestedTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/RangeTests.java
src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractNumericTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/AvgTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/MaxTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/MinTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/SumTests.java
src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
initial commit of the aggregations module

Closes #3300
Hi All,
I recently tried the below query in elastic search Beta2 and couldn't get it to work. Anyone know what's wrong with the code? Or is the code for aggregations ordered by a sum not out yet in the current Beta2? Thanks!

code that doesn't work:

{
"size":0,
    "query":{
        "filtered":{
                   "query":{"matchall":{}},
                    "filter":{
                           "and":{
                                "filters":[{"range":{"date_time":{"from":"2013-12-12T00:00:00Z","to":"2013-12-12T23:59:59Z"}}}]
                            } 
                       }
           }
    },
"aggs":{
    "XXXXXXXXX" : {
       "terms" : { 
           "field" : "XXXXXXXXX.untouched",
           "size": 5,
           "order" : { "YYYYYY" : "desc" }
    },
    "aggs" : {
        "YYYYYY" : { "sum" : { "field" : "impression" } }
    }
 }
 }
}}
'

this curiously works fine:
{
"size":0,
    "query":{
        "filtered":{
                   "query":{"matchall":{}},
                    "filter":{
                           "and":{
                                "filters":[{"range":{"date_time":{"from":"2013-12-12T00:00:00Z","to":"2013-12-12T23:59:59Z"}}}]
                            } 
                       }
           }
    },
"aggs":{
    "XXXXXXXXX" : {
       "terms" : { 
           "field" : "XXXXXXXXX.untouched",
           "size": 5,
           "order" : { "_count" : "desc" }
    },
    "aggs" : {
        "YYYYYY" : { "sum" : { "field" : "impression" } }
    }
 }
 }
}}
'

In this line instead of "....  "min_price" : { "min" : { "field" : "nested.value" } } ..." wouldn't that  be:
 "....  "min_price" : { "min" : { "field" : "resellers.price" } } ..."? so we follow the previous product example.

Hey uboness, thanks for the awesome doc write up.
Just one thing that did not made much sense to me was the description that says that "...sub-aggregation (identified by the aggregation name):" and the example uses the aggregation type "stats.avg" which in this case should be the actual aggregation name"height_stats.avg". Unless the description is the wrong bit.
Thanks Again for the great examples.

absolutely... will fix

yep... another error.. thx!

thank you! :)


time:
2013-11-23T08:22:16Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
Don't use mock wrapper on relocate stress test for now since it could be the reason for intermediate/occational failures

time:
2013-11-23T06:40:59Z
class:
src/main/java/org/elasticsearch/common/jna/Natives.java
src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
comments:
Added mlockall setting to process info output

time:
2013-11-22T17:38:46Z
class:
src/test/java/org/elasticsearch/index/search/child/ChildrenQueryTests.java
src/test/java/org/elasticsearch/index/search/child/MockScorer.java
src/test/java/org/elasticsearch/index/search/child/ParentConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/ParentQueryTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
comments:
Added random test for ParentQuery and ChildrenQuery.

time:
2013-11-22T14:00:12Z
class:
comments:
Upgrade RandomizedRunner Maven Plugin to 2.0.14

time:
2013-11-22T12:47:02Z
class:
src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/percolator/PercolatorFacetsTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Introduced EA#assertMatchCount() and make test used that.

time:
2013-11-22T12:23:42Z
class:
src/test/java/org/elasticsearch/document/BulkTests.java
comments:
Added a bulk indexing while initializing test.

Relates to #4214

time:
2013-11-22T07:01:30Z
class:
comments:
Upgrade to forbiddenapis 1.4

time:
2013-11-22T01:08:57Z
class:
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
comments:
Fix possible NPE in snapshot service if a shard doesn't have primary

time:
2013-11-22T01:08:57Z
class:
src/main/java/org/elasticsearch/repositories/RepositoriesService.java
src/main/java/org/elasticsearch/snapshots/RestoreService.java
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Prevent modification or deletion of repositories while snapshots are running

time:
2013-11-22T01:08:57Z
class:
src/test/java/org/elasticsearch/test/store/MockRamDirectoryService.java
src/test/java/org/elasticsearch/test/store/MockRamIndexStore.java
comments:
Fix typo in MockRamDirectoryService name

time:
2013-11-21T21:59:48Z
class:
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
AckTests: more assertAcked and added common method to retrieve local cluster state

time:
2013-11-21T20:08:04Z
class:
comments:
jenkin scripts modification

1) client_tests_url, switch to JDK6
2) build_ranodmization, add jvm options randomization

time:
2013-11-21T19:03:22Z
class:
comments:
add nightly es_node_mode radomization

time:
2013-11-21T19:02:19Z
class:
comments:
property file for client build projects

this property file contains url information for s3 elasticsearch server
bits retrieval on master, 0.90 branch

time:
2013-11-21T18:19:04Z
class:
src/test/java/org/elasticsearch/index/search/child/BitSetCollector.java
src/test/java/org/elasticsearch/index/search/child/ParentConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
comments:
Added random test for ParentConstantScoreQuery

time:
2013-11-21T17:29:41Z
class:
src/test/java/org/elasticsearch/index/search/child/BitSetCollector.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
src/test/java/org/elasticsearch/index/search/child/TestSearchContext.java
comments:
removed the static field in ChildrenConstantScoreQueryTests

time:
2013-11-21T16:58:43Z
class:
comments:
allow passing JVM args via env variables if not defined via the cmd

time:
2013-11-21T16:39:11Z
class:
comments:
Allow passing additional parameters to the test JVM like GC settings etc.

time:
2013-11-21T15:01:03Z
class:
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
comments:
unset static field after test suite has been completed.

time:
2013-11-21T13:24:53Z
class:
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQueryTests.java
comments:
Added random test for ChildrenConstantScoreQuery.

time:
2013-11-21T10:51:54Z
class:
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
comments:
By default don't fail on close sicne pending open files are common in ES

We have pending open files on a regular basis since we search while
relocating etc. and keep search contexts around that are cleaned up
later. We should rather let the close call pass on even if files are
open and only force failures on teardown in ElasticsearchIntegrationTest

time:
2013-11-21T09:56:52Z
class:
comments:
Changed pom to allow import and running from eclipse

Currently when importing projects into eclipse you need to run 'mvn
eclipse:eclipse' on the command line to generate the poject files. This
means that when the pom changes you need to re-run the command on the
command line to reflect those changes in the project in eclipse.  This
commit allows the developer to import the project as an existing maven
project (can be shared using git after import) and then allows the
application to be run inside eclipse using the .launch file in
/dev-tools enabling easy debugging of the application within eclipse
without requiring a maven build.

time:
2013-11-21T08:48:00Z
class:
comments:
[DOCS] Added elasticsearch-extended-analyze plugin

time:
2013-11-21T06:38:51Z
class:
comments:
[DOCS] Fixed duplicate docs ID in delete

time:
2013-11-20T20:50:03Z
class:
comments:
add timeout doc to delete

time:
2013-11-20T17:31:19Z
class:
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java
src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
comments:
field level field data cache should take into account a null listener
also, cleanup the onRemoval code

time:
2013-11-20T11:56:08Z
class:
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
comments:
Use #assertAcked() for verification.

time:
2013-11-20T11:11:07Z
class:
src/main/java/org/elasticsearch/index/analysis/PreBuiltCharFilterFactoryFactory.java
src/main/java/org/elasticsearch/index/analysis/PreBuiltTokenFilterFactoryFactory.java
src/main/java/org/elasticsearch/index/analysis/PreBuiltTokenizerFactoryFactory.java
src/main/java/org/elasticsearch/indices/analysis/IndicesAnalysisService.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltCacheFactory.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltCharFilters.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenizers.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltCharFilterFactoryFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltTokenFilterFactoryFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltTokenizerFactoryFactoryTests.java
src/test/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzerIntegrationTests.java
comments:
Refactoring IndicesAnalysisService

Using enums where possible in order to clean up the code in IndicesAnalysisService

Also introduced a simpler generic caching mechanism, and tests.

time:
2013-11-20T09:40:25Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesResponse.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerResponse.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedResponse.java
comments:
Added readTimeout, writeTimeout, readAcknowledged and writeAcknowledged methods variation without version as parameter, to be used by api that always read and write those parameters. Helps avoiding to call the variation that accepts a Version with actual version null.

time:
2013-11-20T09:40:25Z
class:
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/cluster/ack/IndicesClusterStateUpdateRequest.java
comments:
Added base ClusterStateUpdateRequest class that executes on multiple indices

time:
2013-11-20T09:40:25Z
class:
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/close/CloseIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequest.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/open/OpenIndexResponse.java
src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
src/main/java/org/elasticsearch/cluster/ClusterModule.java
src/main/java/org/elasticsearch/cluster/action/index/NodeIndicesStateUpdatedAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
comments:
Refactored open/close index api to make use of the new recently introduced generic ack mechanism

Closes #4169

time:
2013-11-20T09:15:43Z
class:
src/main/java/org/elasticsearch/repositories/RepositoriesService.java
comments:
Removed redundant masterNodeTimeout, already present in the ClusterStateUpdateRequest base class

time:
2013-11-20T08:58:20Z
class:
src/main/java/org/elasticsearch/plugins/PluginsService.java
comments:
NPE in PluginsService when starting elasticsearch with a wrong user
When starting elasticsearch with a wrong linux user, it could generate a `NullPointerException` when `PluginsService` tries to list available plugins in `./plugins` dir.

To reproduce:

* create a plugins directory with `rwx` rights for root user only
* launch elasticsearch from another account (elasticsearch for example)

Related discussion: https://groups.google.com/forum/#!topic/elasticsearch/_WRW4Qfpo7M

Closes #4186.
Closes #4187.

time:
2013-11-20T03:04:44Z
class:
comments:
jenkin hookup modification

1) add build_desc property variable
2) use build_id plus build_number as an unique file name
3) tools subdirectory should be under current PWD when the script is
executing

time:
2013-11-19T23:21:00Z
class:
comments:
build randomization script

this script genereates envrionment property file necessary to do
jenkins randomization testing

time:
2013-11-19T19:54:32Z
class:
src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
src/main/java/org/elasticsearch/indices/InternalIndicesService.java
comments:
Running the node stats api while a shard is moving onto the node logs an exception
fixes #4203

time:
2013-11-19T18:18:16Z
class:
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/query/TermsFilterParser.java
src/main/java/org/elasticsearch/index/search/FieldDataTermsFilter.java
src/test/java/org/elasticsearch/index/search/FieldDataTermsFilterTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Add a field data based TermsFilter

Add FieldDataTermsFilter that compares terms out of
the fielddata cache. When filtering on a large
set of terms this filter can be considerably faster
than using a standard lucene terms filter.

Add the "fielddata" execution mode to the
terms filter parser to enable the use of
the new FieldDataTermsFilter.

Add supporting tests and documentation.

Closes #4209

time:
2013-11-19T15:11:59Z
class:
src/main/java/org/elasticsearch/index/search/slowlog/ShardSlowLogSearchService.java
src/test/java/org/elasticsearch/index/search/slowlog/ShardSlowLogSearchServiceTests.java
comments:
Revert Ignore slow log configuration on shard creation

This reverts commit 10810f00d490fdae35cdcff6f1a132d7c21c4816 as this introduces an exception to the rule when parsing settings.

time:
2013-11-19T14:35:50Z
class:
src/main/java/org/elasticsearch/index/search/slowlog/ShardSlowLogSearchService.java
src/test/java/org/elasticsearch/index/search/slowlog/ShardSlowLogSearchServiceTests.java
comments:
Ignore slow log configuration on shard creation

In case of a misconfigured slow search/index configuration (unparseable
TimeValue) an exception is thrown.

This is not a problem when creating a shard of an index, as an exception
is returned and all is good. However, this is a huge problem, when
starting up a node, as the shard creation is repeated endlessly.

This patch changes the behaviour to go on as usual and just disable the
slowlog, as an improper configuration of logging should not affect the
allocation behaviour.

Closes #2730

