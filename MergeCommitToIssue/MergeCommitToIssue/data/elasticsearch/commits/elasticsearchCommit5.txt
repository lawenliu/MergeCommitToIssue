time:
2016-09-13T18:54:41Z
class:
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/RestNoopBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/get/GetRequest.java
core/src/main/java/org/elasticsearch/action/get/GetRequestBuilder.java
core/src/main/java/org/elasticsearch/action/get/GetResponse.java
core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/index/get/GetResult.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/rest/action/document/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestUpdateAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestExplainAction.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceContext.java
core/src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/get/MultiGetShardRequestTests.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/document/DocumentActionsIT.java
core/src/test/java/org/elasticsearch/explain/ExplainActionIT.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/timestamp/SimpleTimestampIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
core/src/test/java/org/elasticsearch/update/TimestampTTLBWIT.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateRequest.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingIT.java
comments:
Fixed naming inconsistency for fields/stored_fields in the APIs (#20166)

This change replaces the fields parameter with stored_fields when it makes sense.
This is dictated by the renaming we made in #18943 for the search API.

The following list of endpoint has been changed to use `stored_fields` instead of `fields`:
* get
* mget
* explain

The documentation and the rest API spec has been updated to cope with the changes for the following APIs:
* delete_by_query
* get
* mget
* explain

The `fields` parameter has been deprecated for the following APIs (it is replaced by _source filtering):
* update: the fields are extracted from the _source directly.
* bulk: the fields parameter is used but fields are extracted from the source directly so it is allowed to have non-stored fields.

Some APIs still have the `fields` parameter for various reasons:
* cat.fielddata: the fields paramaters relates to the fielddata fields that should be printed.
* indices.clear_cache: used to indicate which fielddata fields should be cleared.
* indices.get_field_mapping: used to filter fields in the mapping.
* indices.stats: get stats on fields (stored or not stored).
* termvectors: fields are retrieved from the stored fields if possible and extracted from the _source otherwise.
* mtermvectors:
* nodes.stats: the fields parameter is used to concatenate completion_fields and fielddata_fields so it's not related to stored_fields at all.

Fixes #20155

time:
2016-09-13T18:46:34Z
class:
core/src/main/java/org/elasticsearch/common/logging/ESLoggerFactory.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/logging/PrefixLogger.java
core/src/main/java/org/elasticsearch/common/logging/PrefixMessageFactory.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
core/src/test/java/org/elasticsearch/test/MockLogAppender.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Fix prefix logging

Today we add a prefix when logging within Elasticsearch. This prefix
contains the node name, and index and shard-level components if
appropriate.

Due to some implementation details with Log4j 2 , this does not work for
integration tests; instead what we see is the node name for the last
node to startup. The implementation detail here is that Log4j 2 there is
only one logger for a name, message factory pair, and the key derived
from the message factory is the class name of the message factory. So,
when the last node starts up and starts setting prefixes on its message
factories, it will impact the loggers for the other nodes.

Additionally, the prefixes are lost when logging an exception. This is
due to another implementation detail in Log4j 2. Namely, since we log
exceptions using a parameterized message, Log4j 2 decides that that
means that we do not want to use the message factory that we have
provided (the prefix message factory) and so logs the exception without
the prefix.

This commit fixes both of these issues.

Relates #20429

time:
2016-09-13T17:18:21Z
class:
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractLatLonPointDVIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/LatLonPointDVAtomicFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LatLonPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java
core/src/test/java/org/elasticsearch/index/query/GeoPolygonQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Update docs for LatLonPoint cut over

This commit removes documentation for:

* geohash cell query
* lat_lon parameter
* geohash parameter
* geohash_precision parameter
* geohash_prefix parameter

It also updates failing tests that reference these parameters for backcompat.

time:
2016-09-13T17:17:36Z
class:
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractLatLonPointDVIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/LatLonPointDVAtomicFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LatLonPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/LegacyIndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/GeoContextMapping.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyGeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldsIntegrationIT.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractGeoTestCase.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/search/suggest/ContextCompletionSuggestSearchIT.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Cut over geo_point field and queries to new LatLonPoint type

This commit cuts over geo_point fields to use Lucene's new point-based LatLonPoint type for indexes created in 5.0. Indexes created prior to 5.0 continue to use their respective encoding type. Below is a description of the changes made to support the new encoding type:

* New indexes use a new LatLonPointFieldMapper which provides a parse method for the new type
* The new LatLonPoint parse method removes support for lat_lon and geohash parameters
* Backcompat testing for deprecated lat_lon and geohash parameters is added to all unit and integration tests
* LatLonPointFieldMapper provides DocValues support (enabled by default) which uses Lucene's new LatLonDocValuesField type
* New LatLonPoint field data classes are added for aggregation support (wraps LatLonPoint's Numeric Doc Values)
* MultiFields use the geohash as the string value instead of the lat,lon string making it easier to perform geo string queries on the geohash instead of a lat,lon comma delimited string.

Removed Features:

* With the removal of geohash indexing, GeoHashCellQuery support is removed for all new indexes (still supported on existing indexes)
* LatLonPoint does not support a Distance Range query because it is super inefficient. Instead, the geo_distance_range query should be accomplished using either the geo_distance aggregation, sorting by descending distance on a geo_distance query, or a boolean must not of the excluded distance (which is what the distance_range query did anyway).

TODO:

* fix/finish yaml changes for plugin and rest integration tests
* update documentation

time:
2016-09-13T16:36:20Z
class:
comments:
Added a indices flush to the rolling upgrades rest tests to ensure
they are on disk for the upgraded nodes to pick up.

time:
2016-09-13T16:25:53Z
class:
core/src/test/java/org/elasticsearch/search/query/MultiMatchQueryIT.java
comments:
[TEST] fix MultiMatchQueryIT random docs generation so that they don't interfere in score tests

When generating random bogus documents, it could happen that they contain both the terms "the" and "ultimate", which would match the query "the ultimate" better than all the other non bogus documents, which would cause testCrossFieldMode to fail. "the" is a term that's relatively likely to be randomly generated given its length; we can simply increase the minimum length of randomly generated terms to 5, so that there are no collisions, as "the" cannot be generated anymore (nor can "ultimate" as the lenght doesn't go up to 8).

Also made some assertions more accurate to check how many hits match a query rather than checking only that the first or second hits are there.

Closes #18873

time:
2016-09-13T15:59:50Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TasksIT.java
comments:
Rework the basic IT for GETing running tasks

This integ test relied on the false assumption that
`MockTaskManagerListener#onTaskUnregistered` was called *before* the
task was unregistered. It is in fact called after the task is unregistered.
This mistake led the test to *rarely* miss the task it was looking
for and fail.

Found by https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.x+multijob-unix-compatibility/os=ubuntu/4/consoleText

time:
2016-09-13T15:21:04Z
class:
core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
comments:
Cleanup version constant for unsupported version in QuerySearchResult

time:
2016-09-13T13:49:15Z
class:
test/framework/src/main/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
comments:
Remove unused import from BootstrapForTesting

This commit removes an unused import for o.e.c.l.LogConfigurator from
o.e.b.BootstrapForTesting.

time:
2016-09-13T13:26:29Z
class:
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTests.java
comments:
Add second test case for two fields in range query

In this test one field is a number and the other is a date.

Closes #20447

time:
2016-09-13T12:59:56Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/CustomQueryScorer.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/PlainHighlighterTests.java
comments:
remove workaround for highlighter bug with geo queries (#20418)

This has been fixed in Lucene
https://issues.apache.org/jira/browse/LUCENE-7293
This commit also adds the tests from #20412

time:
2016-09-13T12:08:24Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapException.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/test/java/org/elasticsearch/bootstrap/ElasticsearchCliTests.java
qa/evil-tests/src/test/java/org/elasticsearch/bootstrap/EvilElasticsearchCliTests.java
test/framework/src/main/java/org/elasticsearch/bootstrap/ESElasticsearchCliTestCase.java
comments:
Add quiet option to disable console logging (#20422)

This commit adds a -q/--quiet option to Elasticsearch so that it does not log anything in the console and closes stdout & stderr streams. This is useful for SystemD to avoid duplicate logs in both journalctl and /var/log/elasticsearch/elasticsearch.log while still allows the JVM to print error messages in stdout/stderr if needed.

closes #17220

time:
2016-09-13T11:57:18Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestIndicesActionTests.java
comments:
Add health status parameter to cat indices API

This commit adds a health status parameter to the cat indices API for
filtering on indices that match the specified status (green|yellow|red).

Relates #20393

time:
2016-09-13T11:40:09Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkUtils.java
core/src/test/java/org/elasticsearch/common/network/NetworkUtilsTests.java
comments:
Network: Allow to listen on virtual interfaces.

Previously when trying to listen on virtual interfaces during
bootstrap the application would stop working - the interface
couldn't be found by the NetworkUtils class.

The NetworkUtils utilize the underlying JDK NetworkInterface
class which, when asked to lookup by name only takes physical
interfaces into account, failing at virtual (or subinterfaces)
ones (returning null).

Note that when interating over all interfaces, both physical and
virtual ones are taken into account.

This changeset asks for all known interfaces, iterates over them
and matches on the given name as part of the loop, allowing it
to catch both physical and virtual interfaces.

As a result, elasticsearch can now also serve on virtual
interfaces.

A test case has been added which  makes sure that all
iterable interfaces can be found by their respective name.

Note that this PR is a second iteration over the previously
merged but later reverted #19537 because it causes tests
to fail when interfaces are down. The test has been modified
to take this into account now.

Closes #17473
Closes #19568
Relates #19537

time:
2016-09-13T11:27:33Z
class:
comments:
Documentation for field_masking_span query (#20395)

* Documentation for field_masking_span query. Fixes #20293

* After review fixes

time:
2016-09-13T11:19:25Z
class:
comments:
Add docs to template support for _msearch (#17382)

Add docs to template support for _msearch

Relates to #10885
Relates to #15674

* Reference those docs from the rest api spec for _msearch/template support.

time:
2016-09-13T10:46:35Z
class:
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
comments:
[TEST] add test for match query parsing error when providing an array of terms

Match query throws parsing errors when an array of terms is provided, we should test that to make sure this behaviour doesn't change.

Relates to #15741

time:
2016-09-13T10:44:40Z
class:
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Fix concurrency issues between cancelling a relocation and marking shard as relocated (#20443)

Once a primary is marked as relocated, we can not safely move it back to started (as we have no way of waiting on inflight operations that are performed on the target primary). If the master cancels the relocation in that state, we fail the primary. Sadly, there is a racing condition between the `updateRoutingEntry` method (which is called when the relocation is cancelled by the master) and the `relocated` method. That racing condition can leave the shard as marked "relocated" but have the routing entry not reflect the target relocation. This in turns causes NPEs in TransportReplicationAction:

```
java.util.Objects requireNonNull Objects.java 203
org.elasticsearch.action.support.replication.TransportReplicationAction$ConcreteShardRequest <init> TransportReplicationAction.java 982
```

Sadly, once we end up in this state, we will never recover.

This commit fixes that race condition by making sure `updateRoutingEntry` acquires the mutex when checking for the relocated status.  While at it, I also tightened up the code and added lots of assertions/hard checks.

time:
2016-09-13T09:17:39Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
comments:
Add node name to decider trace logging (#20437)

Adds the entire DiscoveryNode object to the trace log in AllocationDeciders.
The allocation decider logging at TRACE level can sometimes be helpful to determine why a shard is not getting allocated on specific nodes. Currently, we only log the node id for these messages. It will be helpful to also include the node name (esp. when dealing with a lot of nodes in the cluster).

time:
2016-09-13T07:26:56Z
class:
comments:
Add Ubuntu-16.04 to Vagrant VMs (#20425)

time:
2016-09-12T23:48:12Z
class:
comments:
Use HTTPS for downloading released versions

This commit changes the protocol used for downloading the Maven metadata
for released versions of Elasticsearch from HTTP to HTTPS.

time:
2016-09-12T23:47:20Z
class:
comments:
[TESTS] for the REST cluster stats test, if free or used (#20434)

memory are much less than the total memory, the percentage
returned could be 0%. The yaml tests check that the free/used
percentage are valid values by asserting `is_true`, but it
turns out that `is_true` returns false if the value is
assigned but it is 0 or even the string "0". This commit
changes the assertion in the yaml test to ensure the value
is greater than or equal to 0 instead.

time:
2016-09-12T23:02:44Z
class:
comments:
[TEST] Fix plugin list comparison

The plugin command now displays the version of the plugin, which is
compared to a string without the version. This removes the version from
the string.

time:
2016-09-12T22:46:06Z
class:
comments:
Reworking yaml tests for rolling upgrades

time:
2016-09-12T22:38:24Z
class:
comments:
Build: can not find JAVA_HOME in eclipse gradle plugin. (#17645)

time:
2016-09-12T22:24:09Z
class:
core/src/main/java/org/elasticsearch/plugins/ListPluginsCommand.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/ListPluginsCommandTests.java
comments:
Merge branch 'pr/18683'

time:
2016-09-12T22:01:49Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorBackwardsCompatibilityTests.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
comments:
Merge pull request #20433 from dakrone/remove-cluster-name-folder-fallback

No longer allow cluster name in data path

time:
2016-09-12T21:47:01Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorBackwardsCompatibilityTests.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
comments:
No longer allow cluster name in data path

In 5.x we allowed this with a deprecation warning. This removes the code
added for that deprecation, requiring the cluster name to not be in the
data path.

Resolves #20391

time:
2016-09-12T20:42:55Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/get/GetRequest.java
core/src/main/java/org/elasticsearch/action/get/GetRequestBuilder.java
core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
core/src/main/java/org/elasticsearch/action/get/MultiGetRequestBuilder.java
core/src/main/java/org/elasticsearch/action/get/MultiGetShardRequest.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/rest/action/document/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/search/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchLocalRequest.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/main/java/org/elasticsearch/search/query/QueryPhase.java
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/action/get/MultiGetShardRequestTests.java
core/src/test/java/org/elasticsearch/action/search/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/search/DefaultSearchContextTests.java
core/src/test/java/org/elasticsearch/search/SearchRequestTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
test/framework/src/main/java/org/elasticsearch/node/MockNode.java
test/framework/src/main/java/org/elasticsearch/search/MockSearchService.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Deguice SearchService and friends (#20423)

This change removes the guice dependency handling for SearchService and
several related classes like SearchTransportController and SearchPhaseController.
The latter two now have package private constructors and dependencies like FetchPhase
are now created by calling their constructors explicitly. This also cleans up several users
of the DefaultSearchContext and centralized it's creation inside SearchService.

time:
2016-09-12T20:29:42Z
class:
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
remove assumeX methods from IndexShardTests

The cause early termination of tests, which means we don't clean up and close shards, but also don't cause a failure. This in turns makes TestRuleTemporaryFilesCleanup fail on windows (because it does try to clean up, but the files are referenced). Getting stuff like:

 ```
 >    C:\jenkins\workspace\es_core_master_windows-2012-r2\core\build\testrun\test\J3\temp\org.elasticsearch.index.shard.IndexShardTests_68B5E1103D78A58B-001\tempDir-006\indices\_na_\0\translog\translog-1.tlog: java.nio.file.AccessDeniedException: C:\jenkins\workspace\es_core_master_windows-2012-r2\core\build\testrun\test\J3\temp\org.elasticsearch.index.shard.IndexShardTests_68B5E1103D78A58B-001\tempDir-006\indices\_na_\0\translog\translog-1.tlog
 ```

time:
2016-09-12T20:21:39Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/UnassignedShardDecision.java
core/src/main/java/org/elasticsearch/gateway/BaseGatewayShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UnassignedShardDecisionTests.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Split allocator decision making from decision application  (#20347)

Splits the PrimaryShardAllocator and ReplicaShardAllocator's decision
making for a shard from the implementation of that decision on the
routing table. This is a step toward making it easier to use the same
logic for the cluster allocation explain APIs.

time:
2016-09-12T20:05:36Z
class:
comments:
Changed rest-api-spec tests folder structure

time:
2016-09-12T18:09:43Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/CompilerSettings.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessPlugin.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessScriptEngineService.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/RegexTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ScriptTestCase.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/WhenThingsGoWrongTests.java
comments:
Disable regexes by default in painless

Adds a new node level, non-dynamic setting, `script.painless.regex.enabled`
can be used to enable regexes.

Closes #20397

time:
2016-09-12T16:36:43Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhase.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhaseTests.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
comments:
Merge pull request #20424 from javanna/enhancement/error_fetch_source_disabled

Throw error when trying to fetch fields from source and source is disabled

time:
2016-09-12T16:20:25Z
class:
core/src/test/java/org/elasticsearch/index/IndexServiceTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardIT.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/ShardUtilsTests.java
core/src/test/java/org/elasticsearch/indices/IndexingMemoryControllerTests.java
test/framework/src/main/java/org/elasticsearch/cluster/routing/ShardRoutingHelper.java
test/framework/src/main/java/org/elasticsearch/index/shard/IndexShardTestCase.java
comments:
Introduce IndexShardTestCase (#20411)

Introduce a base class for unit tests that are based on real `IndexShard`s. The base class takes care of all the little details needed to create and recover shards. 

This commit also moves `IndexShardTests` and `ESIndexLevelReplicationTestCase` to use the new base class. All tests in `IndexShardTests` that required a full node environment were moved to a new `IndexShardIT` suite.

time:
2016-09-12T16:07:51Z
class:
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryUnitTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
test/framework/src/main/java/org/elasticsearch/test/ClusterServiceUtils.java
comments:
Update discovery nodes after cluster state is published (#20409)

Before, when there was a new cluster state to publish,
zen discovery would first update the set of nodes to
ping based on the new cluster state, then publish the new
cluster state. This is problematic because if the cluster
state failed to publish, then the set of nodes to ping
should not have been updated.

This commit fixes the issue by updating the set of
nodes to ping for fault detection only *after* the new
cluster state has been published.

time:
2016-09-12T15:36:48Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhase.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhaseTests.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
comments:
With #20093 we fixed a NPE thrown when using _source include/exclude and source is disabled in the mappings. Fixing meant ignoring the _source parameter in the request as no fields can be extracted from it.

We should rather throw a clear exception to clearly point out that we cannot extract fields from _source. Note that this happens only when explicitly trying to extract fields from source. When source is disabled and no _source parameter is specified, no errors will be thrown and no source will be returned.

Closes #20408
Relates to #20093

time:
2016-09-12T14:53:32Z
class:
comments:
Adapt release flag to new CLI arguments

The JDK project is in the process of modifying the command-line flags
for various JDK tools (http://openjdk.java.net/jeps/293). In particular,
the release flag on javac has changed from -release to --release. This
commit adapts the build process to this change.

Relates #20420

time:
2016-09-12T13:56:06Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/CustomQueryScorer.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
comments:
Merge pull request #20400 from jimferenczi/function_score_highlight

Fix highlighting of MultiTermQuery within a FunctionScoreQuery

time:
2016-09-12T13:36:16Z
class:
comments:
Add offline install instructions for plugins

Follow up of https://github.com/elastic/elasticsearch/issues/15925#issuecomment-171250150

This commit adds offline install instructions for plugins.

time:
2016-09-12T12:42:56Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java
comments:
Merge pull request #20188 from qwerty4030/fix/3839_multi_index_add_remove

Fix IndexNotFoundException in multi index search request.

time:
2016-09-10T00:35:23Z
class:
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
comments:
Merge pull request #20396 from johtani/fix/fail_loading_non_prebuilt_tokenfilter_in_analyze_api

Can load non-PreBuiltTokenFilter in Analyze API

time:
2016-09-09T21:43:21Z
class:
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Separate configs for logging tests

The evil logger tests rely on external configuration. This configuration
is shared between these tests which means that changing the
configuration for one test can cause an unrelated test to fail. In
particular, removing the appenders on the root logger so that inherited
loggers in one test do not have a console and file appender by default
breaks tests that were expecting the root logger to have these
appenders. This commit separates these configs so that these tests are
not subject to this problem.

time:
2016-09-09T21:34:32Z
class:
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JsonProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JsonProcessorTests.java
comments:
introduce the JSON Processor (#20128)

introduce the JSON Processor

time:
2016-09-09T20:47:15Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/NamedWriteableRegistry.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchExtBuilder.java
core/src/main/java/org/elasticsearch/search/SearchExtParser.java
core/src/main/java/org/elasticsearch/search/SearchExtRegistry.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchPhase.java
core/src/main/java/org/elasticsearch/search/SearchRequestParsers.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/dfs/DfsPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/DocValueFieldsFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/main/java/org/elasticsearch/search/query/QueryPhase.java
core/src/main/java/org/elasticsearch/search/rescore/RescorePhase.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestPhase.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/search/SearchRequestTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RestReindexActionTests.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Merge pull request #20382 from javanna/enhancement/cleanup_parse_elements

Cleanup sub fetch phase extension point

time:
2016-09-09T19:24:18Z
class:
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
comments:
remove writeBoolean from searchExtBuilders serialization in SearchSourceBuilder

The list is not optional anymore, default is empty list

time:
2016-09-09T19:20:18Z
class:
core/src/test/java/org/elasticsearch/action/ingest/SimulateDocumentSimpleResultTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineResponseTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateProcessorResultTests.java
core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java
core/src/test/java/org/elasticsearch/ingest/IngestDocumentTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/LowercaseProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/TrimProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/UppercaseProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AbstractStringProcessorTestCase.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DotExpanderProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorTests.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestDocumentMatcher.java
comments:
add ignore_missing option to relevant processors (#20194)

time:
2016-09-09T19:17:16Z
class:
core/src/main/java/org/elasticsearch/search/SearchExtBuilder.java
core/src/main/java/org/elasticsearch/search/SearchRequestParsers.java
comments:
adjust SearchExtBuilder javadocs

time:
2016-09-09T18:55:32Z
class:
comments:
Remove unsupported environment variables check

The Elasticsearch startup scripts contain checks for the presence of
support for environment variables that were removed in the 5.x
series. These checks warn the user and fail the script if any of the
unsupported environment variables are present. This was provided as
migration step from 2.x to 5.x so that we were not just silently
ignoring environment variables that were previously set. This commit
removes these checks, as upgrades from 2.x to 6.x are not supported.

Relates #20404

time:
2016-09-09T17:10:42Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/NamedWriteableRegistry.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchExtBuilder.java
core/src/main/java/org/elasticsearch/search/SearchExtParser.java
core/src/main/java/org/elasticsearch/search/SearchExtRegistry.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchRequestParsers.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/search/SearchRequestTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RestReindexActionTests.java
test/framework/src/main/java/org/elasticsearch/search/MockSearchService.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
move parsing of search ext sections to the coordinating node

time:
2016-09-09T16:47:37Z
class:
core/src/test/java/org/elasticsearch/common/xcontent/BaseXContentTestCase.java
comments:
[TEST] Fix offsets in BaseXContentTestCase.testBinaryValueWithOffsetLength

The max value for randomIntBetween is inclusive, so we should use byte array length minus one to avoid an AIOB exception.

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/SearchExtParserRegistry.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
test/framework/src/main/java/org/elasticsearch/search/MockSearchService.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
decouple registration of SearchExtParsers from sub fetch phases

Search section supports an ext section that is used to provide additional config needed from plugins. It is now tied to sub fetch phases because it is the only section that may need additional config, but there is no reason for the two to be tightly coupled.

It is now possible to register a searchExtParser independently from a sub fetch phase. All a search ext parser does is parsing some ext section of a search request, whose parsed resulting object is stored in the search context for later retrieval.

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/SearchExtParser.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
comments:
move SearchExtParser back to o.e.search package

The parser is now needed only for sub fetch phases, but doesn't have to be strictly connected to them, it could be used for something else as well potentially

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/SearchExtParser.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
comments:
FetchSubPhase to support a single parser that extends SearchExtParser

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/SearchParseElement.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseParser.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
remove FetchSubPhaseContext in favour of generic fetch sub phase builder of type object

The context was an object where the parsed info are stored. That is more of what we call the builder since after the search refactoring. No need for generics in FetchSubPhaseParser then. Also the previous setHitsExecutionNeeded wasn't useful, it can be removed as well, given that once there is a parsed ext section, it will become a builder that can be retrieved by the sub fetch phase. The sub fetch phase is responsible for doing nothing in case the builder is not set, meaning that the fetch sub phase is plugged in but the request didn't have the corresponding section.

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseParser.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
clarify that SearchParseElement is only used for custom fetch sub phases and clean up extension point

SearchParseElement is renamed to FetchSubPhaseParser and moved to the search.fetch package. Its parse method doesn't get the SearchContext as argument anymore, only the XContentParser, and the return type is what gets parsed (the fetch sub phase context which we may as well rename later).

It is the parser that initializes the FetchSubPhaseContext then. SearchService retrieves the parser by name, calls parse against it and stores the result of parsing by name. No need for FetchSubPhase.ContextFactory anymore, which can be removed.

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
comments:
resolve some line length problems and remove some entry from checkstyle suppressions (deleted classes)

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/DocValueFieldsFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
make docValueFields similar to other standard sub fetch phases

Given that doc value fields is our own fetch sub phase, it doesn't need to be implemented like if it was plugged in from the outside. It doesn't need its own fetch sub phase context, but it can just be an instance member in SearchContext

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
comments:
remove unused topLevelSearcher method from FetchSubPhase.HitContext

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
core/src/main/java/org/elasticsearch/search/dfs/DfsPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/query/QueryPhase.java
core/src/main/java/org/elasticsearch/search/rescore/RescorePhase.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestPhase.java
comments:
add java docs to all of the SearchPhase implementations

time:
2016-09-09T16:05:49Z
class:
core/src/main/java/org/elasticsearch/search/SearchPhase.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
comments:
Remove parseElements method from SearchPhase interface

Parse elements are always empty for all of our search phases. They can be non empty only for sub fetch phases as they are pluggable and search parse element is left to be used only for plugins that plug in their own sub fetch phase. Only FetchPhase needs now the parseElements method then.

time:
2016-09-09T15:59:15Z
class:
core/src/main/java/org/apache/logging/log4j/core/jmx/Server.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Logging shutdown hack

Log4j has a bug where on shutdown it ignores that JMX might be disabled;
since it does not respect this on shutdown, it proceeds to attempt to
access JMX leading to a security exception that should have otherwise
not occurred had it respected that JMX is disabled. This commit
intentionally introduces jar hell with the Server class to work around
this bug until a fix is released.

Relates #20389

time:
2016-09-09T13:15:35Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
test/framework/src/main/java/org/elasticsearch/common/logging/TestLoggers.java
comments:
Disable console logging

Previously we would disable console logging in certain circumstances
(for example, if Elasticsearch is not in the foreground, or if
Elasticsearch is in the foreground but an exception was thrown during
bootstrap). This commit makes this handling work with Log4j 2. This will
prevent users from seeing double bootstrap check failure messages.

Relates #20387

time:
2016-09-09T13:07:07Z
class:
core/src/test/java/org/elasticsearch/common/xcontent/BaseXContentTestCase.java
comments:
[TEST] make BaseXContentTestCase platform independent (bis)

time:
2016-09-09T11:06:49Z
class:
comments:
Update search-template.asciidoc

Fixed typo

time:
2016-09-09T11:00:41Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/CustomQueryScorer.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
comments:
Fix highlighting of MultiTermQuery within a FunctionScoreQuery

Since the sub query of a function score query is checked on CustomQueryScorer#extractUnknwonQuery we try to extract the terms from the rewritten form of the sub query.
MultiTermQuery rewrites query within a constant score query/weight which returns an empty array when extractTerms is called.
The extraction of the inner terms of a constant score query/weight changed in Lucene somewhere between ES version 2.3 and 2.4 (https://issues.apache.org/jira/browse/LUCENE-6425) which is why this problem occurs on ES > 2.3.
This change moves the extraction of the sub query from CustomQueryScorer#extractUnknownQuery to CustomQueryScorer#extract in order to do the extraction of the terms on the original form of the sub query.
This fixes highlighting of sub queries that extend MultiTermQuery since there is a special path for this kind of query in the QueryScorer (which extract the terms to highlight).

time:
2016-09-09T07:53:07Z
class:
comments:
Added warning messages about the dangers of pathological regexes to:
* pattern-replace charfilter
* pattern-capture and pattern-replace token filters
* pattern tokenizer
* pattern analyzer

Relates to #20038

time:
2016-09-09T07:30:04Z
class:
comments:
Update painless.asciidoc

Asciidoc typo

time:
2016-09-09T07:19:11Z
class:
core/src/test/java/org/elasticsearch/common/xcontent/BaseXContentTestCase.java
comments:
[TEST] make BaseXContentTestCase platform independent

time:
2016-09-09T07:10:17Z
class:
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
comments:
Can load non-PreBuiltTokenFilter in Analyze API

Fix the error when using default min_hash in analyze API

time:
2016-09-08T21:29:47Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/index/VersionType.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/index/VersionTypeTests.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
comments:
Remove FORCE version_type

This was an error-prone version type that allowed overriding previous
version semantics. It could cause primaries and replicas to be out of
sync however, so it has been removed.

Resolves #19769

time:
2016-09-08T21:27:01Z
class:
comments:
id to name

time:
2016-09-08T20:01:42Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutIndexTemplateAction.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
comments:
Add "version" field to Templates

This adds a version field to Templates, which is itself is unused by Elasticsearch, but exists for users to better manage their own templates. Like description, it's optional.
The `>` makes it interpret this as a string, should we use `|` instead?

time:
2016-09-08T18:42:03Z
class:
core/src/main/java/org/elasticsearch/Version.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/RestoreBackwardsCompatIT.java
comments:
Remove unreleased version, these versons should be added once they are released

time:
2016-09-08T17:36:31Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Remove allow unquoted JSON

Previous versions of Elasticsearch permitted unquoted JSON field names even though this is against the JSON spec. This leniency was disabled by default in the 5.x series of Elasticsearch but a backwards compatibility layer was added via a system property with the intention of removing this layer in 6.0.0. This commit removes this backwards compatibility layer.

Relates #20388

time:
2016-09-08T17:09:05Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
comments:
Remove assertion for cluster name in data path

This commit removes an assertion regarding removing the support for
cluster name being part of the data path in favor of a tracking issue.

Relates #20391

time:
2016-09-08T16:30:37Z
class:
comments:
Use a comment block to comment out release notes

time:
2016-09-08T16:29:18Z
class:
comments:
Bumped doc versions to 6.0.0-alpha1

time:
2016-09-08T16:27:01Z
class:
comments:
Add breaking changes for 6.0

time:
2016-09-08T16:17:27Z
class:
comments:
Comment out release notes section

time:
2016-09-08T16:07:39Z
class:
comments:
Remove links to release notes

time:
2016-09-08T15:31:28Z
class:
comments:
Remove 5.x release notes

This commit removes the series 5.x release notes from master as that
branch is currently on the 6.x series.

time:
2016-09-08T15:09:48Z
class:
comments:
Rework documentation example for _all to be less ambigious with numerics

time:
2016-09-08T15:09:48Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
comments:
Default `include_in_all` for numeric-like types to false

This includes:

- All regular numeric types such as int, long, scaled-float, double, etc
- IP addresses
- Dates
- Geopoints and Geoshapes

Relates to #19784

time:
2016-09-08T14:57:48Z
class:
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Remove logging configuration warning

The 5.x series of Elasticsearch emits a warning if any of the old
logging configuration formats are present. This commit removes that
warning.

Relates #20386

time:
2016-09-08T14:56:11Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapException.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/NodeValidationException.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
qa/evil-tests/src/test/java/org/elasticsearch/tribe/TribeUnitTests.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Do not log full bootstrap checks exception

By default, when an exception causes the JVM to terminate, the stack
trace is printed. In the case of failing bootstrap checks, this stack
trace is useless to the user, and might even distract them from seeing
that the bootstrap checks failed for reasons under their control. With
this commit, we cause the stack trace for a failing bootstrap check to
be truncated.

We also modify some methods to not declare that they throw the top level
checked exception type Exception, but instead explicitly declare the
exceptions that they throw. These exceptions are caught and wrapped in a
BootstrapException so that we can percolate only two exception types out
of Bootstrap#init as checked exception, BootstrapException and
NodeValidationException.

Relates #19989

time:
2016-09-08T14:16:46Z
class:
core/src/test/java/org/elasticsearch/bwcompat/RestoreBackwardsCompatIT.java
comments:
Skip unreleased versions in RestoreBackwardsCompatIT

time:
2016-09-08T13:43:55Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/index/VersionType.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/index/VersionTypeTests.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
comments:
Revert "Remove FORCE version_type"

This reverts commit b4cc3cd35dea2e3059142c6bd7e2eb13ca8944ac.

time:
2016-09-08T13:37:36Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTests.java
comments:
Remove collect payloads parameter

The collect_payloads parameter of the span_near query was previously
deprecated with the intention to be removed. This commit removes this
parameter.

Relates #20385

time:
2016-09-08T13:09:09Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/DetailAnalyzeResponse.java
core/src/main/java/org/elasticsearch/common/xcontent/XContent.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/index/mapper/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightBuilder.java
core/src/main/java/org/elasticsearch/search/searchafter/SearchAfterBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/GeolocationContextMapping.java
core/src/main/java/org/elasticsearch/tasks/TaskInfo.java
core/src/test/java/org/elasticsearch/action/admin/indices/alias/AliasActionsTests.java
core/src/test/java/org/elasticsearch/common/xcontent/BaseXContentTestCase.java
core/src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
core/src/test/java/org/elasticsearch/common/xcontent/cbor/JsonVsCborTests.java
core/src/test/java/org/elasticsearch/common/xcontent/smile/JsonVsSmileTests.java
core/src/test/java/org/elasticsearch/common/xcontent/support/XContentMapValuesTests.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/mget/SimpleMgetIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/BooleanTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/NestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/CardinalityIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/sort/SimpleSortIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/ContextSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CategoryContextMappingTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/GeoContextMappingTests.java
core/src/test/java/org/elasticsearch/threadpool/SimpleThreadPoolIT.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/ObjectPathTests.java
comments:
Clean up XContentBuilder

This commit cleans most of the methods of XContentBuilder so that:
- Jackson's convenience methods are used instead of our custom ones (ie field(String,long) now uses Jackson's writeNumberField(String, long) instead of calling writeField(String) then writeNumber(long))
- null checks are added for all field names and values
- methods are grouped by type in the class source
- methods have the same parameters names
- duplicated methods like field(String, String...) and array(String, String...) are removed
- varargs methods now have the "array" name to reflect that it builds arrays
- unused methods like field(String,BigDecimal) are removed
- all methods now follow the execution path: field(String,?) -> field(String) then value(?), and value(?) -> writeSomething() method. Methods to build arrays also follow the same execution path.

time:
2016-09-08T11:38:18Z
class:
core/src/main/java/org/elasticsearch/common/settings/Setting.java
comments:
Fix UpdateSettingsIT#testUpdateMergeMaxThreadCount.

Log the setting(s) that changed in the compound updater.

time:
2016-09-08T10:55:30Z
class:
core/src/main/java/org/elasticsearch/Version.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
comments:
Prepare master branch to be 6.0.0-alpha1

time:
2016-09-08T10:50:25Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Add Version [5.0.0.beta1]

time:
2016-09-08T10:47:27Z
class:
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/MergeSchedulerConfig.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
comments:
Merge pull request #20383 from jimferenczi/max_merge_settings

Validate max thread/merge settings

time:
2016-09-08T08:47:43Z
class:
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/MergeSchedulerConfig.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
comments:
Validate max thread/merge settings

This change checks that `index.merge.scheduler.max_thread_count` < `index.merge.scheduler.max_merge_count` and fails index creation
and settings update if the condition is not met.

Fixes #20380

time:
2016-09-08T01:27:39Z
class:
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerConfigurationTests.java
comments:
Shutdown logging in logging configuration tests

The logging configuration tests write to log files which are deleted at
the end of the test. If these files are not closed, some operating
systems will complain when these deletes are performed. This commit
ensures that the logging system is properly shutdown so that these files
can be properly deleted.

time:
2016-09-07T22:52:34Z
class:
comments:
Remove -D handling in args for windows (#20378)

-D parameters used to be allowed when starting elasticsearch scripts.
However, this was removed in #18207, but the elasticsearch-plugin.bat script
was forgotten. This change removes the -D handling.

time:
2016-09-07T21:48:58Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/index/VersionType.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/index/VersionTypeTests.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
comments:
Merge remote-tracking branch 'dakrone/remove-force-version-type'

time:
2016-09-07T19:05:18Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/index/VersionType.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/index/VersionTypeTests.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
comments:
Remove FORCE version_type

This was an error-prone version type that allowed overriding previous
version semantics. It could cause primaries and replicas to be out of
sync however, so it has been removed.

Resolves #19769

time:
2016-09-07T17:43:53Z
class:
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Shutdown logging in logging evil tests

The evil logging tests write to log files which are deleted at the end
of the test. If these files are not closed, some operating systems will
complain when these deletes are performed. This commit ensures that the
logging system is properly shutdown so that these files can be properly
deleted.

time:
2016-09-07T15:21:28Z
class:
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
comments:
Add field with dot in name to 2.4+ static bwc indexes (#20360)

This change adds a `field.with.dots` to all 2.4 bwc indicse and above.
It also adds verification code to OldIndexBackwardsCompatibilityIT to
ensure we upgrade the indices cleanly and the field is present.

Closes #19956

time:
2016-09-07T14:53:24Z
class:
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
comments:
Ensure all static BWC indices have some translog entries (#20362)

Due to the way the nodes where shut down etc. we always flushed
away the translog. This means we never tested upgrades of transaction
logs from older version. This change regenerates all valid bwc indices
and repositories with transaction logs and adds correspondent changes
to the OldIndexBackwardsCompatibilityIT.java

time:
2016-09-07T14:27:40Z
class:
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/Pipeline.java
core/src/test/java/org/elasticsearch/action/ingest/IngestActionFilterTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestParsingTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineExecutionServiceTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
comments:
Add "version" field to Pipelines

This adds a version field to Pipelines, which is itself is unused by Elasticsearch, but exists for users to better manage their own pipelines.

time:
2016-09-07T13:45:50Z
class:
comments:
[docs] Mark percolator response snippets properly

Now the docs tests will catch any errors in the responses. This
would have caught the error fixed in
https://github.com/elastic/elasticsearch/pull/20351

time:
2016-09-07T12:21:33Z
class:
core/src/main/java/org/elasticsearch/script/ScriptMetaData.java
core/src/test/java/org/elasticsearch/script/ScriptMetaDataTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
comments:
Parse script on storage instead of on retrieval

Parsing a script on retrieval causes it to be re-parsed on every single script call, which can be very expensive for large frequently called scripts. This change switches to parsing scripts only once during store operation.

time:
2016-09-07T12:15:20Z
class:
comments:
[docs] Percolator samples are not working. Mapping is wrong.

Hi all, 

I was trying to run the percolate examples, but I figured that because of the "type":"keyword" , the code wasn't working.
In the saerch query the "message" : "A new bonsai tree in the office" is a pure string. 

I changed it to "text".

time:
2016-09-07T08:06:25Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseParseElement.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
comments:
Merge pull request #20350 from javanna/enhancement/remove_fetch_subphase_parse_element

Remove FetchSubPhaseParseElement

time:
2016-09-07T08:05:21Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseParseElement.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
comments:
Remove FetchSubPhaseParseElement

With the search refactoring we don't use SearchParseElement anymore to define our own parsing code but only for plugins. There was an abstract subclass called FetchSubPhaseParseElement in our production code, only used in one of our tests. We can remove that abstract class as it is not needed and not that useful for the test that depends on it.

time:
2016-09-07T08:04:52Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java
core/src/main/java/org/elasticsearch/discovery/DiscoveryStats.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStateStats.java
core/src/main/java/org/elasticsearch/http/HttpStats.java
core/src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
core/src/main/java/org/elasticsearch/indices/breaker/AllCircuitBreakerStats.java
core/src/main/java/org/elasticsearch/indices/breaker/CircuitBreakerStats.java
core/src/main/java/org/elasticsearch/monitor/fs/FsInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
core/src/main/java/org/elasticsearch/script/ScriptStats.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolStats.java
core/src/main/java/org/elasticsearch/transport/TransportStats.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsIT.java
core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java
core/src/test/java/org/elasticsearch/monitor/process/ProcessProbeTests.java
comments:
Merge pull request #20327 from javanna/enhancement/stats_writeable

NodeStats classes to implement Writeable rather then Streamable

time:
2016-09-07T08:04:28Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionIT.java
comments:
Merge pull request #20331 from johtani/cleanup_analyze_api_test

Clean up Analyze API test case

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/indices/breaker/CircuitBreakerStats.java
comments:
remove stale comment from CircuitBreakerStats

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java
comments:
make memoryPools in JvmStats not nullable, default to empty list

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
comments:
use Collections.addAll rather manually copying array

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
comments:
remove bw comp layer that's not needed in CommonStatsFlags

time:
2016-09-07T08:03:41Z
class:
core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java
comments:
[TEST] introduce more intermediate variables in NodeStatsTests to prevent too much line wrapping

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java
comments:
Use a list for JvmStats memoryPools rather than an array

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java
comments:
add NodeStatsTests to test NodeStats serialization

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/monitor/fs/FsInfo.java
comments:
add missing getters to FsInfo.IoStats class

Without the getters there is no way to retrieve the values for its instance members from the java api, they only get printed out on the REST layer

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/monitor/fs/FsInfo.java
core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java
comments:
Eagerly compute FsInfo#total so that the member instance can become final

FsInfo#total is removed in favour of getTotal, which allows to retrieve the total value

[TEST] fix FsProbeTests: null is not accepted as path constructor argument

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java
core/src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsIT.java
comments:
CommonStats and CommonStatsFlags to implement Writeable rather than Streamable

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/indices/breaker/AllCircuitBreakerStats.java
core/src/main/java/org/elasticsearch/indices/breaker/CircuitBreakerStats.java
comments:
AllCircuitBreakerStats and CircuitBreakerStats to implement Writeable rather than Streamable

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/discovery/DiscoveryStats.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStateStats.java
comments:
DiscoveryStats and PendingClusterStateStats to implement Writeable rather than Streamable

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/script/ScriptStats.java
comments:
ScriptStats to implement Writeable rather than Streamable

Also removed ScriptStats#add method which was unused

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/http/HttpStats.java
comments:
HttpStats to implement Writeable rather than Streamable

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/transport/TransportStats.java
comments:
TransportStats to implement Writeable rather than Streamable

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolStats.java
comments:
ThreadPoolStats to implement Writeable rather than Streamable

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
comments:
JvmStats to implement Writeable rather than Streamable

also removed null checks in toXContent for subobjects that cannot be null and added @Nullable annotation for memory pools

time:
2016-09-07T08:03:41Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
core/src/test/java/org/elasticsearch/monitor/process/ProcessProbeTests.java
comments:
ProcessStats to implement Writeable rather than Streamable

time:
2016-09-07T07:53:41Z
class:
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/util/PageCacheRecycler.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesQueryCache.java
core/src/main/java/org/elasticsearch/indices/IndicesRequestCache.java
core/src/main/java/org/elasticsearch/indices/breaker/HierarchyCircuitBreakerService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/test/java/org/elasticsearch/common/settings/MemorySizeSettingsTests.java
core/src/test/java/org/elasticsearch/common/settings/SettingTests.java
comments:
Fix filter cache setting to allow percentages

During adding the new settings infrastructure the option to specify the
size of the filter cache as a percentage of the heap size which accidentally
removed. This change adds that ability back.

In addition the `Setting` class had multiple `.byteSizeSetting` methods
which all except one used `ByteSizeValue.parseBytesSizeValue` to parse
the value. One method used `MemorySizeValue.parseBytesSizeValueOrHeapRatio`.
This was confusing as the way the value was parsed depended on how many
arguments were provided.

This change makes all `Setting.byteSizeSetting` methods parse the value
the same way using `ByteSizeValue.parseBytesSizeValue` and adds
`Setting.memorySizeSetting` methods to parse settings that express memory
sizes (i.e. can be absolute bytes values or percentages). Relevant settings
have been moved to use these new methods.

Closes #20330

time:
2016-09-07T07:38:12Z
class:
core/src/main/java/org/elasticsearch/index/analysis/MinHashTokenFilterFactory.java
core/src/main/java/org/elasticsearch/indices/analysis/AnalysisModule.java
core/src/test/java/org/elasticsearch/index/analysis/MinHashFilterFactoryTests.java
test/framework/src/main/java/org/elasticsearch/AnalysisFactoryTestCase.java
comments:
Exposing lucene 6.x minhash filter. (#20206)

Exposing lucene 6.x minhash tokenfilter

Generate min hash tokens from an incoming stream of tokens that can
be used to estimate document similarity.

Closes #20149

time:
2016-09-06T23:08:27Z
class:
comments:
Use 5.0 alpha5 for bwc version, so we have transport.ports

Also fixed bug to ensure unicast host is writtent in yaml quotes

time:
2016-09-06T22:52:03Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
core/src/main/java/org/apache/log4j/Java9Hack.java
core/src/main/java/org/apache/log4j/package-info.java
core/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsAndModules.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/JNACLibrary.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Natives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/SuppressLoggerChecks.java
core/src/main/java/org/elasticsearch/common/breaker/ChildMemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/breaker/MemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/common/logging/ConsoleAppender.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLoggerFactory.java
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/logging/PrefixMessageFactory.java
core/src/main/java/org/elasticsearch/common/logging/TerminalAppender.java
core/src/main/java/org/elasticsearch/common/lucene/LoggerInfoStream.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/network/IfConfig.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/common/util/IndexFolderUpgrader.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessor.java
core/src/main/java/org/elasticsearch/common/util/concurrent/LoggingRunnable.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/http/HttpInfo.java
core/src/main/java/org/elasticsearch/index/AbstractIndexComponent.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/IndexingSlowLog.java
core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java
core/src/main/java/org/elasticsearch/index/SearchSlowLog.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/engine/ElasticsearchConcurrentMergeScheduler.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/EngineSearcher.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/GlobalOrdinalsBuilder.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/QueryRewriteContext.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/shard/AbstractIndexShardComponent.java
core/src/main/java/org/elasticsearch/index/shard/ElasticsearchMergePolicy.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/ShardNotFoundException.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/store/IndexStore.java
core/src/main/java/org/elasticsearch/index/store/IndexStoreConfig.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/warmer/ShardIndexWarmerService.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryPrepareForTranslogOperationsRequest.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RemoteRecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/os/DummyOsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/DummyPluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/RestActionListener.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ip/IpRangeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/DiversifiedSamplerParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristicParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/AbstractTermsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/GeoBoundsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/GeoCentroidParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AbstractValuesSourceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/support/XContentParseContext.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/tasks/LoggingTaskListener.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskResultsService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolInfo.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TransportChannelResponseHandler.java
core/src/main/java/org/elasticsearch/transport/TransportInfo.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/FileWatcher.java
core/src/test/java/org/apache/log4j/Java9HackTests.java
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIT.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/index/IndexRequestTests.java
core/src/test/java/org/elasticsearch/action/support/AutoCreateIndexTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
comments:
Merge branch 'master' into rolling_upgrades

time:
2016-09-06T22:51:14Z
class:
comments:
Made node config always have a unicast transport uri closure

time:
2016-09-06T20:46:15Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
comments:
Merge remote-tracking branch 'dakrone/disk-decider-relocation-switcharoo'

time:
2016-09-06T20:26:18Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
comments:
Change DiskThresholdDecider's behavior when factoring in leaving shards

This changes DiskThresholdDecider to only factor in leaving shards when
checking if a shard can remain. Previously, leaving shards were factored
in for both the `canAllocate` and `canRemain` checks, however, this
makes only the leaving shard sizes subtracted in the `canRemain` check.

It was possible that multiple shards relocating away from the node would
have their entire size subtracted, and the node had a chance to go over
the disk threshold (or hit the disk full) because it subtracted space
that was still being used for other in-progress relocations.

time:
2016-09-06T19:41:14Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
comments:
Make ConcreteShardRequest public and static

Request interceptors need to be able to work with it.

time:
2016-09-06T17:29:33Z
class:
comments:
[DOCS] Mark cluster allocation explain API as experimental in docs

time:
2016-09-06T16:44:48Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/QueryRewriteContext.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoHashGridParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ip/IpRangeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/DiversifiedSamplerParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristicParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/AbstractTermsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/GeoBoundsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/GeoCentroidParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AbstractValuesSourceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/support/XContentParseContext.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/index/query/QueryRewriteContextTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/script/ScriptSettingsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/sort/ScriptSortBuilderTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorBackwardsCompatibilityTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
comments:
* Removed `script.default_lang` setting and made `painless` the hardcoded default script language.
** The default script language is now maintained in `Script` class.
* Added `script.legacy.default_lang` setting that controls the default language for scripts that are stored inside documents (for example percolator queries).  This defaults to groovy.
** Added `QueryParseContext#getDefaultScriptLanguage()` that manages the default scripting language. Returns always `painless`, unless loading query/search request in legacy mode then the returns what is configured in `script.legacy.default_lang` setting.
** In the aggregation parsing code added `ParserContext` that also holds the default scripting language like `QueryParseContext`. Most parser don't have access to `QueryParseContext`. This is for scripts in aggregations.
* The `lang` script field is always serialized (toXContent).

Closes #20122

time:
2016-09-06T15:43:51Z
class:
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/RemovePluginCommandTests.java
comments:
Merge pull request #20338 from jasontedor/remove-plugin

Print message when removing plugin with config

time:
2016-09-06T14:48:19Z
class:
comments:
Add CONSOLE places where it is obviously missing

These places already have other annotations like `// TEST` and
`// TESTSETUP` so they are already in console format.

time:
2016-09-06T14:39:20Z
class:
comments:
Only ignore gradle wrapper in root dir (#20341)

Otherwise we ignore the `gradle` directories in `buildSrc`.

time:
2016-09-06T14:32:54Z
class:
comments:
Remove most of the need for `// NOTCONSOLE`

and be much more stingy about what we consider a console candidate.

* Add `// CONSOLE` to check-running
* Fix version in some snippets
* Mark groovy snippets as groovy
* Fix versions in plugins
* Fix language marker errors
* Fix language parsing in snippets

  This adds support for snippets who's language is written like
  `[source, txt]` and `["source","js",subs="attributes,callouts"]`.

  This also makes language required for snippets which is nice because
  then we can be sure we can grep for snippets in a particular language.

time:
2016-09-06T14:25:22Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Remove Log4j 1 jar hell exemption

When Elasticsearch depended on Log4j 1, there was jar hell from the
log4j and the apache-log4j-extras jar. As these dependencies are gone,
the jar hell exemption for Log4j 1 can be removed.

Relates #20336

time:
2016-09-06T12:51:12Z
class:
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/RemovePluginCommandTests.java
comments:
More verbose message on preserving plugin config

This commit expands on the message printed when config files are
preserved when removing a plugin to give the user an indication of the
reason the config files are preserved.

time:
2016-09-06T12:32:48Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/index/shard/ShardNotFoundException.java
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
comments:
Verify AllocationIDs in replication actions (#20320)

Replicated operation consist of a routing action (the original), which is in charge of sending the operation to the primary shard, a primary action which executes the operation on the resolved primary and replica actions which performs the operation on a specific replica. This commit adds the targeted shard's allocation id to the primary and replica actions and makes sure that those match the shard the actions end up executing on.

This helps preventing extremely rare failure mode where a shard moves off a node and back to it, all between an action is sent and the time it's processed. 

For example:
1) Primary action is sent to a relocating primary on node A.
2) The primary finishes relocation to node B and start relocating back.
3) The relocation back gets to the phase and opens up the target engine, on the original node, node A.
4) The primary action is executed on the target engine before the relocation finishes, at which the shard copy on node B is still the official primary - i.e., it is executed on the wrong primary.

time:
2016-09-06T12:01:43Z
class:
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/RemovePluginCommandTests.java
comments:
Print message when removing plugin with config

When removing a plugin with a config directory, we preserve the config
directory. This is because the workflow for upgrading a plugin involves
removing and then installing the plugin again and losing the plugin
config in this case would be terrible. This commit causes a message
regarding this to be printed in case the user wants to manually delete
these files.

time:
2016-09-06T11:39:23Z
class:
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
comments:
Add finals to RemovePluginCommand

This commit marks the RemovePluginCommand class as final, and marks
some local variables as final too.

time:
2016-09-06T11:31:59Z
class:
comments:
Dependencies: Updates to mustache 0.9.3 (#20337)

time:
2016-09-06T11:28:05Z
class:
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
comments:
Remove length violation in RemovePluginCommand

This commit removes a line-length violation in RemovePluginCommand.java
and removes this file from the list of files for which the line-length
check is suppressed.

time:
2016-09-06T09:55:06Z
class:
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Add test for Log4j throwable proxy leniency

We have intentionally introduced leniency for ThrowableProxy from Log4j
to work around a bug there. Yet, a test for this introduced leniency was
not addded. This commit introduces such a test.

Relates #20329

time:
2016-09-06T09:53:00Z
class:
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Skip loading of jansi from log4j2 (#20334)

Jython shades `jansi` into it's classpath without changing it's package or
anything like that. This causes attempts to load native code on windows which
blows up tests. This change adds `log4j.skipJansi=true` system property to our
tests as well as to the JVM properties we set.

time:
2016-09-06T08:47:42Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Remove Joda-Time jar hell exemption

Previously we had an exemption for Joda-Time BaseDateTime because we
forked this class to remove the usage of a volatile field. This hack is
no longer in place, so the exemption is no longer necessary. This commit
removes that exemption.

Relates #20328

time:
2016-09-06T08:45:25Z
class:
comments:
Add Gradle wrapper to gitignore

This commit adds the paths used by a Gradle wrapper to gitignore.

Relates #20332

time:
2016-09-06T06:46:18Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionIT.java
comments:
Clean up Analyze API test case

Using expectThrows instead of using try-catch

time:
2016-09-05T14:28:49Z
class:
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
test/framework/src/main/java/org/elasticsearch/test/BackgroundIndexer.java
comments:
Improve error reporting for tests with BackgroundIndexer (#20324)

The BackgroundIndexer now uses auto-generated IDs randomly. This causes some problems
for tests that still rely on the fact that the IDs are increasing integers. This change
exposes all IDs via a Set<String> to iterate over for tests.

time:
2016-09-05T05:28:38Z
class:
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DotExpanderProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DotExpanderProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DotExpanderProcessorTests.java
comments:
ingest: Add `dot_expander` processor that can turn fields with dots in the field name into object fields.

time:
2016-09-04T15:09:08Z
class:
core/src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsIT.java
comments:
Mark CSIT#testLoggerLevelUpdate as awaits fix

This commit marks ClusterSettingsIT#testLoggerLevelUpdate as awaiting a
fix due to a test bug.

time:
2016-09-03T13:48:09Z
class:
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
comments:
Only warn on old log configs if resolving configs

A warning was introduced if old log config files are present (e.g.,
logging.yml). However, this check is executed unconditionally. This can
lead to no such file exceptions when logging configs are not being
resolved, for example when installing a plugin. This commit moves this
check to only execute when logging configs are being resolved.

time:
2016-09-03T13:26:03Z
class:
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
comments:
Workaround possible JVM bug on Windows

Some assertions in MaxMapCountCheckTests assert that certain messages
are logged. These assertions pass everywhere except Windows where the
JVM seems confused. The issue is not the javac compiler as the bytecode
produced on OS X and Windows is identical for the relevant classes so
this leaves a possible JVM bug. It is not worth investigating the
ultimate cause of this bug so instead this commit introduces a
workaround.

time:
2016-09-03T10:41:07Z
class:
comments:
Configure AWS SDK logging configuration

Because of security permissions that we do not grant to the AWS SDK (for
use in discovery-ec2 and repository-s3 plugins), certain calls in the
AWS SDK will lead to security exceptions that are logged at the warning
level. These warnings are noise and we should suppress them. This commit
adds plugin log configurations for discovery-ec2 and repository-s3 to
ship with default Log4j 2 configurations that suppress these log
warnings.

Relates #20313

time:
2016-09-03T05:34:39Z
class:
qa/rolling-upgrade/src/test/java/org/elasticsearch/upgrades/UpgradeClusterClientYamlTestSuiteIT.java
comments:
Adds tests for rolling upgrades to execute

time:
2016-09-03T00:26:32Z
class:
core/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Hack around Log4j bug rendering exceptions

Log4j has a bug where it does not handle a security exception that can
be thrown when it is rendering a stack trace. This commit intentionally
introduces jar hell with the ThrowableProxy class to work around this
bug until a fix is a released.

Relates #20306

time:
2016-09-02T22:36:57Z
class:
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Warn if unsupported logging configuration present

This commit adds a warning that an unsupported logging configuration is
present and points users to the new logging configuration file.

Relates #20309

time:
2016-09-02T22:22:30Z
class:
comments:
Switch more docs to CONSOLE

Related to #18160

time:
2016-09-02T19:07:55Z
class:
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryPrepareForTranslogOperationsRequest.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RemoteRecoveryTargetHandler.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/replication/IndexLevelReplicationTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
comments:
Pass on maxUnsafeAutoIdTimestamp on recovery / relocation (#20300)

To ensure we don't add documents more than once even if it's mostly paranoia
except of one case where we relocated a shards away and back to the same node
while an initial request is in flight but has not yet finished AND is retried.

Yet, this is a possible case and for that reason we ensure we pass on the
maxUnsafeAutoIdTimestamp on when we prepare for translog recovery.

Relates to #20211

time:
2016-09-02T19:06:46Z
class:
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptMultiThreadedTests.java
comments:
Merge pull request #20307 from jdconrad/jstestfix

Fix Javascript OOM build Failure

time:
2016-09-02T18:57:22Z
class:
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
comments:
[TESTS] added higher level logging to the testShadowReplicaNaturalRelocation
test

time:
2016-09-02T18:56:44Z
class:
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptMultiThreadedTests.java
comments:
Reduce the number of threads and scripts being used in multi-threaded
tests to prevent OOM from deprecation logging.

time:
2016-09-02T17:03:51Z
class:
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeAction.java
core/src/test/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeActionTests.java
comments:
Merge pull request #20285 from johtani/fix/remove_token_filter_param_in_analyze_api

Remove `token_filter` in _analyze API

time:
2016-09-02T16:39:16Z
class:
comments:
Merge pull request #20169 from areek/doc/fix_completion_breaking_changes

Update breaking changes for completion suggester

time:
2016-09-02T16:37:56Z
class:
comments:
move completion performance tips from migration docs to completion docs

time:
2016-09-02T14:33:49Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
comments:
Merge pull request #20299 from masaruh/query_string_fuzzy

query_string_query should take term length into consideration when fuzziness is auto

time:
2016-09-02T14:16:30Z
class:
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
test/framework/src/main/java/org/elasticsearch/test/OldIndexUtils.java
comments:
Rename method in OldIndexUtils

loadIndexList -> loadDataFilesList. The new method name is more accurate.

time:
2016-09-02T14:08:34Z
class:
comments:
Update rollover-index.asciidoc

Fixed weirdly formatted callouts in rollover docs

time:
2016-09-02T13:17:02Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
comments:
query_string_query should take term length into consideration when fuzziness is auto

Fixes #15972

time:
2016-09-02T12:41:07Z
class:
comments:
Docs: clarify calculation of sigma and lambda in function_score (#20267)

- Using log() to indicate natural log can add some confusion when trying to further adjust/tweak scores. Other parts of the API (field_value_factor on this same page) use 'ln' and 'log', so this change should be more consistent
- Fixes #20027
- I generated the images using http://latex2png.com/ at a resolution of 150 which seemed to be about the same size as before

time:
2016-09-02T12:28:47Z
class:
comments:
Add more information to the how-to docs. #20297

 - use auto-generated ids for indexing #20211
 - use rounded dates in queries #20115

time:
2016-09-02T09:44:25Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsAndModules.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/http/HttpInfo.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/os/DummyOsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessService.java
core/src/main/java/org/elasticsearch/plugins/DummyPluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolInfo.java
core/src/main/java/org/elasticsearch/transport/TransportInfo.java
core/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmInfoTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
core/src/test/java/org/elasticsearch/monitor/process/ProcessProbeTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Merge pull request #20288 from javanna/enhancement/more_writeable

More info classes to implement Writeable rather than Streamable

time:
2016-09-02T08:54:05Z
class:
comments:
Fix bad link in plugin docs

time:
2016-09-02T08:27:59Z
class:
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
comments:
[TEST] fix bad merge

time:
2016-09-02T08:23:49Z
class:
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
comments:
[TEST] expand NodeInfoStreamingTests to also test serialization of nullable values

time:
2016-09-02T08:23:49Z
class:
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
[TEST] adjusted EsTestCase#randomPositiveLong

time:
2016-09-02T08:23:49Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmInfoTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsInfoTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
comments:
remove redundant serialization test for JvmInfo and OsInfo and expand existing NodeInfoStreamingTests

time:
2016-09-02T08:23:49Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/plugins/DummyPluginInfo.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java
comments:
fix line length in some touched classes

time:
2016-09-02T08:23:05Z
class:
core/src/test/java/org/elasticsearch/monitor/os/OsInfoTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
comments:
[TEST] use single line ternary over more verbose ifs

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsAndModules.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolInfo.java
comments:
use read/writeList and readMap where possible

time:
2016-09-02T08:23:05Z
class:
core/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsInfoTests.java
comments:
[TEST] use randomPositiveLong where possible

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolInfo.java
core/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java
comments:
ThreadPool.Info and SizeValue to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsAndModules.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
comments:
PluginInfo to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
comments:
use read/writeOptionalWriteable in NodeInfo serialization code

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsAndModules.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
comments:
PluginsAndModules to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/transport/TransportInfo.java
comments:
TransportInfo to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessService.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
core/src/test/java/org/elasticsearch/monitor/process/ProcessProbeTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
ProcessInfo to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPoolInfo.java
comments:
ThreadPoolInfo to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/http/HttpInfo.java
comments:
HttpInfo to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmInfoTests.java
comments:
JvmInfo to implement Writeable rather than Streamable

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/monitor/os/DummyOsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/test/java/org/elasticsearch/monitor/os/OsInfoTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
comments:
OsInfo to implement Writeable rather than Streamable

This allows to make all instance members final. Also added serialization tests and sorted out inizialization that was scattered in two places.

time:
2016-09-02T08:23:05Z
class:
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
comments:
ByteSizeValue to implement Writeable rather than Streamable

With this we can make ByteSizeValue immutable for real.

time:
2016-09-02T08:19:51Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIT.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsStatsTests.java
comments:
Merge pull request #20255 from javanna/enhancement/cluster_stats_available_memory

Add mem section back to cluster stats

time:
2016-09-02T08:07:58Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestExecutionContext.java
comments:
[TEST] fix possible NPE in ClientYamlTestExecutionContext

time:
2016-09-02T08:00:31Z
class:
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
comments:
[TEST] Fix settings keys to be the actual keys rather than the toString() of the Setting

time:
2016-09-02T06:56:04Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/test/java/org/elasticsearch/common/xcontent/BaseXContentTestCase.java
core/src/test/java/org/elasticsearch/common/xcontent/cbor/CborXContentTests.java
core/src/test/java/org/elasticsearch/common/xcontent/json/JsonXContentTests.java
core/src/test/java/org/elasticsearch/common/xcontent/smile/SmileXContentTests.java
core/src/test/java/org/elasticsearch/common/xcontent/yaml/YamlXContentTests.java
comments:
Source filtering should keep working when the source contains numbers greater than `Long.MAX_VALUE`. #20278

Currently it does not because our parsers do not support big integers/decimals
(on purpose) but we do not have to ask our parser for the number type, we can
just ask the jackson parser for a number representation of the value with the
right type.

Note that I did not add similar tests for big decimals because Jackson seems to
never return big decimals, even for decimal values that are out of the range of
values that can be represented by doubles.

Closes #11508

time:
2016-09-02T06:08:28Z
class:
core/src/test/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeActionTests.java
comments:
Remove `token_filter` in _analyze API

Fix wording in docs
Refactoring RestAnalyzeActionTests using expectThrows()

Closes #20283

time:
2016-09-02T01:48:30Z
class:
comments:
Update breaking changes for completion suggester

To indicate we removed completion payload option
in favour of returning document source with
completion suggestions

time:
2016-09-02T00:41:44Z
class:
comments:
Fix broken link reportedby Twitter user (#20291)

time:
2016-09-01T23:30:07Z
class:
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
plugins/lang-javascript/src/main/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineService.java
plugins/lang-python/src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
comments:
Merge pull request #20244 from jdconrad/deprecate

Deprecate Groovy, Python, and Javascript

time:
2016-09-01T23:29:08Z
class:
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
comments:
Removed extraneous import.

time:
2016-09-01T21:53:49Z
class:
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
test/framework/src/main/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
test/framework/src/test/java/org/elasticsearch/test/test/LoggingListenerTests.java
comments:
Merge branch 'master' into deprecate

time:
2016-09-01T21:08:18Z
class:
comments:
Add CONSOLE to more docs

Relates to #18160

time:
2016-09-01T18:25:04Z
class:
comments:
Size limit deprecation logs

This commit configures the deprecation logs to be size-limited to 1 GB,
and compress these logs when they roll. The default configuration will
preserve up to four rolled logs.

Relates #20287

time:
2016-09-01T18:16:02Z
class:
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
comments:
Fix double delete on replica copy when executing bulk request

time:
2016-09-01T18:15:54Z
class:
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
comments:
Simplify shard-level bulk operation execution

This commit refactors execution of shard-level
bulk operations to use the same failure handling
for index, delete and update operations.

time:
2016-09-01T18:00:47Z
class:
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
test/framework/src/main/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
test/framework/src/test/java/org/elasticsearch/test/test/LoggingListenerTests.java
comments:
Configure test logging with Log4j 2

This commit configures test logging for Log4j 2. The default logger
configuration uses the console appender but at the error level, so most
tests are missing logging. Instead, this commit provides a configuration
for tests which is picked up from the classpath by Log4j 2 when it
initializes. However, this now means that we can no longer initialize
Log4j with a bare-bones configuration when tests run as doing so will
prevent Log4j 2 from attempting to configure logging via the
classpath. Consequently, we move this needed initialization (as
commented, to avoid a message about a status logger not being configured
when we are preparing to configure Log4j from properties files in the
config directory) to only run when we are explicitly configuring Log4j
from properties files.

Relates #20284

time:
2016-09-01T17:22:44Z
class:
comments:
Fixed wording

time:
2016-09-01T17:22:13Z
class:
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIT.java
comments:
[TEST] improve ClusterStatsIT to better check mem values returned

Rather than checking that those values are greater than 0, we can sum up the values gotten from all nodes and check that what is returned is that same value.

time:
2016-09-01T17:08:36Z
class:
comments:
Add CONSOLE to a few snippets in reference docs

This allows them to be run in Console and adds them to the list of
docs that are automatically tested as part of the build.

Relates to #18160

time:
2016-09-01T16:36:45Z
class:
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeAction.java
core/src/test/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeActionTests.java
comments:
Remove `token_filter` in _analyze API

Remove the param and change docs

Closes #20283

time:
2016-09-01T15:51:29Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
core/src/main/java/org/apache/log4j/Java9Hack.java
core/src/main/java/org/apache/log4j/package-info.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/JNACLibrary.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Natives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/SuppressLoggerChecks.java
core/src/main/java/org/elasticsearch/common/breaker/ChildMemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/breaker/MemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/common/logging/ConsoleAppender.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLoggerFactory.java
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/logging/PrefixMessageFactory.java
core/src/main/java/org/elasticsearch/common/logging/TerminalAppender.java
core/src/main/java/org/elasticsearch/common/lucene/LoggerInfoStream.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/network/IfConfig.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java
core/src/main/java/org/elasticsearch/common/util/IndexFolderUpgrader.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessor.java
core/src/main/java/org/elasticsearch/common/util/concurrent/LoggingRunnable.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/AbstractIndexComponent.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/IndexingSlowLog.java
core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java
core/src/main/java/org/elasticsearch/index/SearchSlowLog.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/engine/ElasticsearchConcurrentMergeScheduler.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/EngineSearcher.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/GlobalOrdinalsBuilder.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/shard/AbstractIndexShardComponent.java
core/src/main/java/org/elasticsearch/index/shard/ElasticsearchMergePolicy.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/store/IndexStore.java
core/src/main/java/org/elasticsearch/index/store/IndexStoreConfig.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/warmer/ShardIndexWarmerService.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/RestActionListener.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/tasks/LoggingTaskListener.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskResultsService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TransportChannelResponseHandler.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/FileWatcher.java
core/src/test/java/org/apache/log4j/Java9HackTests.java
core/src/test/java/org/elasticsearch/action/index/IndexRequestTests.java
core/src/test/java/org/elasticsearch/action/support/AutoCreateIndexTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsIT.java
core/src/test/java/org/elasticsearch/common/logging/ESLoggerTests.java
core/src/test/java/org/elasticsearch/common/logging/LoggingConfigurationTests.java
core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java
core/src/test/java/org/elasticsearch/common/settings/SettingsModuleTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandlerTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataStateFormatTests.java
core/src/test/java/org/elasticsearch/gateway/ReusePeerRecoverySharedTest.java
core/src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingDisabledTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreEquivalenceTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/replication/IndexLevelReplicationTests.java
core/src/test/java/org/elasticsearch/index/replication/RecoveryDuringReplicationTests.java
core/src/test/java/org/elasticsearch/index/shard/CommitPointsTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexRecoveryIT.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
core/src/test/java/org/elasticsearch/indices/state/SimpleIndexStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmGcMonitorServiceTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ShardSizeTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/snapshots/AbstractSnapshotIntegTestCase.java
core/src/test/java/org/elasticsearch/test/MockLogAppender.java
comments:
Merge branch 'master' into deprecate

time:
2016-09-01T10:52:01Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Elasticsearch 2.4.0 uses Lucene 5.5.2

time:
2016-09-01T10:33:30Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/test/java/org/elasticsearch/action/support/AutoCreateIndexTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingDisabledTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexSourceTargetValidationTests.java
comments:
settings: Make `action.auto_create_index` setting a dynamic cluster setting.

Closes #7513

time:
2016-09-01T09:36:49Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Added version 2.4.0 with bwc indices

time:
2016-09-01T09:26:03Z
class:
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
comments:
make sure that mem, cpu and swap are never null in OsStats

time:
2016-09-01T09:26:03Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIT.java
comments:
add mem section back to cluster stats

The mem section was buggy in cluster stats and removed. It is now added back with the same structure as in node stats, containing total memory, available memory, used memory and percentages. All the values are the sum of all the nodes across the cluster (or at least the ones that we were able to get the values from).

time:
2016-09-01T09:24:56Z
class:
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
comments:
OsStats.Cpu, OsStats.Mem & OsStats.Swap to implement ToXContent

time:
2016-09-01T09:24:56Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsStatsTests.java
comments:
OsStats and subobjects to implement Writeable rather than Streamable

 We can now have final instance members, also drop some optional values and related null checks that weren't needed.

time:
2016-09-01T09:23:32Z
class:
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldTypeTests.java
comments:
Fix NPE when running a range query on a `scaled_float` with no upper bound. #20253

The null check was there, but on the wrong variable.

time:
2016-09-01T08:39:40Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
core/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/test/java/org/elasticsearch/action/index/IndexRequestTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/replication/IndexLevelReplicationTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexRecoveryIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ShardSizeTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
test/framework/src/main/java/org/elasticsearch/test/BackgroundIndexer.java
comments:
Optimize indexing for the autogenerated ID append-only case (#20211)

If elasticsearch controls the ID values as well as the documents
version we can optimize the code that adds / appends the documents
to the index. Essentially we an skip the version lookup for all
documents unless the same document is delivered more than once.

On the lucene level we can simply call IndexWriter#addDocument instead
of #updateDocument but on the Engine level we need to ensure that we deoptimize
the case once we see the same document more than once.

This is done as follows:

1. Mark every request with a timestamp. This is done once on the first node that
receives a request and is fixed for this request. This can be even the
machine local time (see why later). The important part is that retry
requests will have the same value as the original one.

2. In the engine we make sure we keep the highest seen time stamp of "retry" requests.
This is updated while the retry request has its doc id lock. Call this `maxUnsafeAutoIdTimestamp`

3. When the engine runs an "optimized" request comes, it compares it's timestamp with the
current `maxUnsafeAutoIdTimestamp` (but doesn't update it). If the the request
timestamp is higher it is safe to execute it as optimized (no retry request with the same
timestamp has been run before). If not we fall back to "non-optimzed" mode and run the request as a retry one
and update the `maxUnsafeAutoIdTimestamp` unless it's been updated already to a higher value

Relates to #19813

time:
2016-09-01T07:39:44Z
class:
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreEquivalenceTests.java
test/framework/src/main/java/org/elasticsearch/index/store/EsBaseDirectoryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTokenStreamTestCase.java
comments:
Ensure ESTestCase is initialized before we run tests

time:
2016-09-01T03:34:40Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
core/src/main/java/org/apache/log4j/Java9Hack.java
core/src/main/java/org/apache/log4j/package-info.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/JNACLibrary.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Natives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/SuppressLoggerChecks.java
core/src/main/java/org/elasticsearch/common/breaker/ChildMemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/breaker/MemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/common/logging/ConsoleAppender.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLoggerFactory.java
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/logging/PrefixMessageFactory.java
core/src/main/java/org/elasticsearch/common/logging/TerminalAppender.java
core/src/main/java/org/elasticsearch/common/lucene/LoggerInfoStream.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/network/IfConfig.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java
core/src/main/java/org/elasticsearch/common/util/IndexFolderUpgrader.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessor.java
core/src/main/java/org/elasticsearch/common/util/concurrent/LoggingRunnable.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/AbstractIndexComponent.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/IndexingSlowLog.java
core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java
core/src/main/java/org/elasticsearch/index/SearchSlowLog.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/engine/ElasticsearchConcurrentMergeScheduler.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineSearcher.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/GlobalOrdinalsBuilder.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/shard/AbstractIndexShardComponent.java
core/src/main/java/org/elasticsearch/index/shard/ElasticsearchMergePolicy.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/store/IndexStore.java
core/src/main/java/org/elasticsearch/index/store/IndexStoreConfig.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/warmer/ShardIndexWarmerService.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/RestActionListener.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/tasks/LoggingTaskListener.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskResultsService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TransportChannelResponseHandler.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/FileWatcher.java
core/src/test/java/org/apache/log4j/Java9HackTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsIT.java
core/src/test/java/org/elasticsearch/common/logging/ESLoggerTests.java
core/src/test/java/org/elasticsearch/common/logging/LoggingConfigurationTests.java
core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java
core/src/test/java/org/elasticsearch/common/settings/SettingsModuleTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandlerTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataStateFormatTests.java
core/src/test/java/org/elasticsearch/gateway/ReusePeerRecoverySharedTest.java
core/src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/replication/RecoveryDuringReplicationTests.java
core/src/test/java/org/elasticsearch/index/shard/CommitPointsTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
core/src/test/java/org/elasticsearch/indices/state/SimpleIndexStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmGcMonitorServiceTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/snapshots/AbstractSnapshotIntegTestCase.java
core/src/test/java/org/elasticsearch/test/MockLogAppender.java
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
modules/percolator/src/main/java/org/elasticsearch/percolator/QueryAnalyzer.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkByScrollTask.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ClientScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
comments:
Merge pull request #20235 from jasontedor/log4j2

Introduce Log4j 2

time:
2016-09-01T03:14:13Z
class:
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Utils.java
comments:
Fix additional exception logging calls

This commit modifies a pair of exception logging calls to use
parameterized messages from Log4j.

time:
2016-09-01T02:34:47Z
class:
comments:
Merge branch 'master' into log4j2

* master:
  Correct path.conf for integ-test-zip distribution

time:
2016-09-01T02:03:23Z
class:
comments:
Merge branch 'master' into deprecate

time:
2016-09-01T01:28:40Z
class:
comments:
Correct path.conf for integ-test-zip distribution

The integ-test-zip distribution did not specify a value for
path.conf. As such, it picked up the default value of
/etc/elasticsearch. This means that on machines that have this
directory, integration tests could fail because they would try to pick
up configuration from that directory rather than from the home directory
of the exploded distribution. This commit fixes this issue by specifying
a value of path.conf for the integ-test-zip distribution.

Relates #20271

time:
2016-08-31T23:45:03Z
class:
comments:
Add rolling upgrade test project

time:
2016-08-31T22:58:14Z
class:
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterHealthAction.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/common/logging/ESLoggerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/document/ShardInfoIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesIT.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionIT.java
core/src/test/java/org/elasticsearch/indices/flush/FlushIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateNumberOfReplicasIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/ingest/IngestServiceTests.java
core/src/test/java/org/elasticsearch/recovery/FullRollingRestartIT.java
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingIT.java
core/src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/SmokeTestClientIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruption.java
test/framework/src/main/java/org/elasticsearch/test/disruption/SingleNodeDisruption.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/LoggingListener.java
test/framework/src/test/java/Dummy.java
test/framework/src/test/java/org/elasticsearch/test/test/LoggingListenerTests.java
comments:
Merge branch 'master' into deprecate

time:
2016-08-31T22:56:31Z
class:
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
plugins/lang-javascript/src/main/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineService.java
plugins/lang-python/src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
comments:
Made deprecation of Groovy, Javascript, and Python more explicit.

time:
2016-08-31T20:37:55Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterHealthAction.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/document/ShardInfoIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesIT.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionIT.java
core/src/test/java/org/elasticsearch/indices/flush/FlushIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateNumberOfReplicasIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/recovery/FullRollingRestartIT.java
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingIT.java
core/src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/SmokeTestClientIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruption.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkPartition.java
test/framework/src/main/java/org/elasticsearch/test/disruption/SingleNodeDisruption.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/LoggingListener.java
test/framework/src/test/java/Dummy.java
test/framework/src/test/java/org/elasticsearch/test/test/LoggingListenerTests.java
comments:
Merge branch 'master' into log4j2

* master:
  Avoid NPE in LoggingListener
  Randomly use Netty 3 plugin in some tests
  Skip smoke test client on JDK 9
  Revert "Don't allow XContentBuilder#writeValue(TimeValue)"
  [docs] Remove coming in 2.0.0
  Don't allow XContentBuilder#writeValue(TimeValue)
  [doc] Remove leftover from CONSOLE conversion
  Parameter improvements to Cluster Health API wait for shards (#20223)
  Add 2.4.0 to packaging tests list
  Docs: clarify scale is applied at origin+offest (#20242)

time:
2016-08-31T20:11:12Z
class:
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/LoggingListener.java
test/framework/src/test/java/Dummy.java
test/framework/src/test/java/org/elasticsearch/test/test/LoggingListenerTests.java
comments:
Avoid NPE in LoggingListener

This commit avoids an NPE that could arise when implementing an
ESTestCase for test classes placed in the default package.

Relates #20269

time:
2016-08-31T19:52:28Z
class:
comments:
Update packaging tests for Log4j 2

This commit updates the packaging tests for Log4j 2. Namely, these tests
make assertions about logging.yml that should now be about
log4j2.properties.

time:
2016-08-31T19:51:52Z
class:
comments:
Update docs for Log4j 2

This commit updates the logging docs for Elasticsearch to reflect the
migration to Log4j 2.

time:
2016-08-31T19:50:45Z
class:
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
comments:
Remove code references to logging.yml

This commit removes code references to logging.yml in TranslogToolCli
and PluginCli.

time:
2016-08-31T19:41:39Z
class:
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
comments:
Randomly use Netty 3 plugin in some tests

When Netty 4 was introduced, it was not the default network
implementation. Some tests were constructed to randomly use Netty 4
instead of the default network implementation. When Netty 4 was made the
default implementation, these tests were not updated. Thus, these tests
are randomly choosing between the default network implementation (Netty
4) and Netty 4. This commit updates these tests to reverse the role of
Netty 3 and Netty 4 so that the randomization is choosing between Netty
3 and the default (again, now Netty 4).

Relates #20265

time:
2016-08-31T18:57:12Z
class:
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/SmokeTestClientIT.java
comments:
Skip smoke test client on JDK 9

This commit adds an assumption to SmokeTestClientIT tests on JDK 9. The
underlying issue is that Netty attempts to access sun.nio.ch but this
package is not exported from java.base on JDK 9. This throws an uncaught
InaccessibleObjectException causing the test to fail. This assumption
can be removed when Netty 4.1.6 is released as it will include a fix for
this scenario.

Relates #20260

time:
2016-08-31T18:45:03Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
comments:
Revert "Don't allow XContentBuilder#writeValue(TimeValue)"

This reverts commit 7f70c00dad0574f35adea06c33ee2939ecd3e477.

time:
2016-08-31T18:43:04Z
class:
comments:
[docs] Remove coming in 2.0.0

2.0.0's been out for a long time.

Closes #20268

time:
2016-08-31T17:23:38Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
comments:
Don't allow XContentBuilder#writeValue(TimeValue)

We have specific support for writing `TimeValue`s in the form of
`XContentBuilder#timeValueField`. Writing a `TimeValue` using
`XContentBuilder#writeValue` is a bug waiting to happen.

time:
2016-08-31T17:14:47Z
class:
comments:
[doc] Remove leftover from CONSOLE conversion

time:
2016-08-31T15:58:19Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterHealthAction.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/document/ShardInfoIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesIT.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionIT.java
core/src/test/java/org/elasticsearch/indices/flush/FlushIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateNumberOfReplicasIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/recovery/FullRollingRestartIT.java
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingIT.java
core/src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruption.java
test/framework/src/main/java/org/elasticsearch/test/disruption/SingleNodeDisruption.java
comments:
Parameter improvements to Cluster Health API wait for shards (#20223)

* Params improvements to Cluster Health API wait for shards

Previously, the cluster health API used a strictly numeric value
for `wait_for_active_shards`. However, with the introduction of
ActiveShardCount and the removal of write consistency level for
replication operations, `wait_for_active_shards` is used for
write operations to represent values for ActiveShardCount. This
commit moves the cluster health API's usage of `wait_for_active_shards`
to be consistent with its usage in the write operation APIs.

This commit also changes `wait_for_relocating_shards` from a
numeric value to a simple boolean value `wait_for_no_relocating_shards`
to set whether the cluster health operation should wait for
all relocating shards to complete relocation.

* Addresses code review comments

* Don't be lenient if `wait_for_relocating_shards` is set

time:
2016-08-31T15:23:20Z
class:
comments:
Add 2.4.0 to packaging tests list

time:
2016-08-31T15:02:59Z
class:
comments:
Docs: clarify scale is applied at origin+offest (#20242)

- fixes #19832

time:
2016-08-31T14:59:27Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/ingest/IngestServiceTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/FileUtils.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/FileUtilsTests.java
comments:
Merge branch 'master' into log4j2

* master:
  Increase visibility of deprecation logger
  Skip transport client plugin installed on JDK 9
  Explicitly disable Netty key set replacement
  percolator: Fail indexing percolator queries containing either a has_child or has_parent query.
  Make it possible for Ingest Processors to access AnalysisRegistry
  Allow RestClient to send array-based headers
  Silence rest util tests until the bogusness can be simplified
  Remove unknown HttpContext-based test as it fails unpredictably on different JVMs
  Tests: Improve rest suite names and generated test names for docs tests
  Add support for a RestClient base path

time:
2016-08-31T14:51:17Z
class:
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/test/java/org/elasticsearch/common/logging/ESLoggerTests.java
comments:
Increase visibility of deprecation logger

The deprecation logger is an important way to make visible features of
Elasticsearch that are deprecated. Yet, the default logging makes the
log messages for the deprecation logger invisible. We want these log
messages to be visible, so the default logging for the deprecation
logger should enable these log messages. This commit changes the log
level of deprecation log message to warn, and configures the deprecation
logger so that these log messages are visible out of the box.

Relates #20254

time:
2016-08-31T13:46:27Z
class:
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
comments:
Skip transport client plugin installed on JDK 9

This commit adds an assumption to
PreBuiltTransportClientTests#testPluginInstalled on JDK 9. The
underlying issue is that Netty attempts to access sun.nio.ch but this
package is not exported from java.base on JDK 9. This throws an uncaught
InaccessibleObjectException causing the test to fail. This assumption
can be removed when Netty 4.1.6 is released as it will include a fix for
this scenario.

Relates #20251

time:
2016-08-31T13:05:26Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerConfigurationTests.java
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Enable console logging for CLI tools

This commit enables CLI tools to have console logging. For the CLI
tools, we skip configuring the logging infrastructure via the config
file, and instead set the level only via a system property.

time:
2016-08-31T12:11:03Z
class:
comments:
Explicitly disable Netty key set replacement

Netty replaces the backing set for the selector implementation. The
value of doing this is questionable, and doing this requires permissions
that we are not going to grant. This commit explicitly disables this
optimization rather than relying on it failing due to lack of
permissions.

Relates #20249

time:
2016-08-31T08:41:07Z
class:
test/logger-usage/src/test/java/org/elasticsearch/test/loggerusage/ESLoggerUsageTests.java
comments:
Add empty test to ESLoggerUsageTests

This commit adds an empty test to ESLoggerUsageTests to avoid the test
suite from failing for having no tests after the existing tests were
marked as awaits fix in 1d197eddcc2a5dea7d7608d76530e1c2b20f2cd0.

time:
2016-08-31T05:46:17Z
class:
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorIT.java
comments:
percolator: Fail indexing percolator queries containing either a has_child or has_parent query.

Closes #2960

time:
2016-08-31T02:30:14Z
class:
test/logger-usage/src/test/java/org/elasticsearch/test/loggerusage/ESLoggerUsageTests.java
comments:
Mark ESLoggerUsageTests as awaits fix

This commit marks the ESLoggerUsageTests as awaits fix as these tests
are not currently compatible with the Log4j 2 API.

time:
2016-08-31T01:19:16Z
class:
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
comments:
Remove logger getter from DeprecationLogger

This commit removes an unused getter for the logger field from the
DeprecationLogger.

time:
2016-08-31T01:13:17Z
class:
comments:
Add link to open logger usage issue

This commit adds comments linking to an open issue regarding updating
the logger usage check for the Log4j 2 API.

time:
2016-08-31T01:09:41Z
class:
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/ingest/IngestServiceTests.java
comments:
Make it possible for Ingest Processors to access AnalysisRegistry

The analysis registry will be used in PMML plugin ingest processor.

time:
2016-08-31T01:00:41Z
class:
comments:
Fix failing evil logging configuration tests

This commit fixes failing evil logging configuration tests. The test for
resolving multiple configuration files was failing after
9a58fc23485af15a611ce98eb5e1bf6aba9d2c38 removed some of the
configuration needed for this test. The solution is revert the removal
of that configuration, but remove additivity from the test logger to
prevent the evil logger tests from failing.

time:
2016-08-31T00:06:03Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/FileUtilsTests.java
comments:
Merge branch 'master' into deprecate

time:
2016-08-30T23:51:37Z
class:
comments:
Fixed a doc test.

time:
2016-08-30T22:49:39Z
class:
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
comments:
Fix failing max map count check test

This commit fixes failing max map count check test due to the use of a
logging message supplier.

time:
2016-08-30T22:35:08Z
class:
qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java
comments:
Fix failing evil logger tests

This commit fixes failing evil logger tests. The tests were failing
after inadvertently configuring appenders on the parent and child
logger.

time:
2016-08-30T22:26:45Z
class:
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
comments:
Add missing cast to logging message supplier

This commit adds a missing cast to logging message supplier on a single
invocation receiving a parameterized message parameter.

time:
2016-08-30T22:17:09Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/util/concurrent/LoggingRunnable.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/tasks/LoggingTaskListener.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskResultsService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TransportChannelResponseHandler.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/snapshots/AbstractSnapshotIntegTestCase.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ClientScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceInstancesServiceImpl.java
plugins/discovery-gce/src/main/java/org/elasticsearch/discovery/gce/GceUnicastHostsProvider.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
test/framework/src/main/java/org/elasticsearch/test/BackgroundIndexer.java
test/framework/src/main/java/org/elasticsearch/test/tasks/MockTaskManager.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
test/logger-usage/src/test/java/org/elasticsearch/test/loggerusage/ESLoggerUsageTests.java
comments:
Avoid allocating log parameterized messages

This commit modifies the call sites that allocate a parameterized
message to use a supplier so that allocations are avoided unless the log
level is fine enough to emit the corresponding log message.

time:
2016-08-30T22:02:07Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
comments:
Allow RestClient to send array-based headers

This enables the RestClient to send array-based (multi-valued) header values, rather than only sending whatever happened to be the _last_ value of the header.

time:
2016-08-30T21:58:44Z
class:
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/FileUtilsTests.java
comments:
Silence rest util tests until the bogusness can be simplified

time:
2016-08-30T21:43:15Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/FileUtils.java
comments:
Merge branch 'master' into deprecate

time:
2016-08-30T21:18:01Z
class:
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
comments:
Remove unknown HttpContext-based test as it fails unpredictably on different JVMs

time:
2016-08-30T21:05:50Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/FileUtils.java
comments:
Merge pull request #20239 from rjernst/docs_rest_debugging

Tests: Improve rest suite names and generated test names for docs tests

time:
2016-08-30T20:55:44Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/FileUtils.java
comments:
Tests: Improve rest suite names and generated test names for docs tests

Rest test suites are currently only the directory above the yaml test
file. That is confusing when there are more than one directory level
which contain yaml tests, as there are in generated docs tests. This
change makes rest tests use the full relative path to the rest test root
as the suite name, and also makes the test names for docs tests a little
clearer (that they are testing an example from a specific line number,
instead of just the line number as an opaque test name).

time:
2016-08-30T17:46:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
comments:
Add support for a RestClient base path

This enables simple support for proxies (beyond proxy host and proxy port, which is done via the RequestConfig)) to provide a base path in front of all requests performed by the RestClient.

time:
2016-08-30T17:31:24Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
core/src/main/java/org/apache/log4j/Java9Hack.java
core/src/main/java/org/apache/log4j/package-info.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/JNACLibrary.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Natives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/SuppressLoggerChecks.java
core/src/main/java/org/elasticsearch/common/breaker/ChildMemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/breaker/MemoryCircuitBreaker.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/common/logging/ConsoleAppender.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/logging/ESLoggerFactory.java
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/logging/PrefixMessageFactory.java
core/src/main/java/org/elasticsearch/common/logging/TerminalAppender.java
core/src/main/java/org/elasticsearch/common/lucene/LoggerInfoStream.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/network/IfConfig.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java
core/src/main/java/org/elasticsearch/common/util/IndexFolderUpgrader.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessor.java
core/src/main/java/org/elasticsearch/common/util/concurrent/LoggingRunnable.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/AbstractIndexComponent.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/IndexingSlowLog.java
core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java
core/src/main/java/org/elasticsearch/index/SearchSlowLog.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/engine/ElasticsearchConcurrentMergeScheduler.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineSearcher.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/GlobalOrdinalsBuilder.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/shard/AbstractIndexShardComponent.java
core/src/main/java/org/elasticsearch/index/shard/ElasticsearchMergePolicy.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/store/IndexStore.java
core/src/main/java/org/elasticsearch/index/store/IndexStoreConfig.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/warmer/ShardIndexWarmerService.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/RestActionListener.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/tasks/LoggingTaskListener.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskResultsService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TransportChannelResponseHandler.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/FileWatcher.java
core/src/test/java/org/apache/log4j/Java9HackTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsIT.java
core/src/test/java/org/elasticsearch/common/logging/ESLoggerTests.java
core/src/test/java/org/elasticsearch/common/logging/LoggingConfigurationTests.java
core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java
core/src/test/java/org/elasticsearch/common/settings/SettingsModuleTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandlerTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataStateFormatTests.java
core/src/test/java/org/elasticsearch/gateway/ReusePeerRecoverySharedTest.java
core/src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/replication/RecoveryDuringReplicationTests.java
core/src/test/java/org/elasticsearch/index/shard/CommitPointsTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
core/src/test/java/org/elasticsearch/indices/state/SimpleIndexStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmGcMonitorServiceTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/snapshots/AbstractSnapshotIntegTestCase.java
core/src/test/java/org/elasticsearch/test/MockLogAppender.java
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
modules/percolator/src/main/java/org/elasticsearch/percolator/QueryAnalyzer.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkByScrollTask.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ClientScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3InternalESLogger.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3OpenChannelsHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4InternalESLogger.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4OpenChannelsHandler.java
comments:
Introduce Log4j 2

This commit introduces Log4j 2 to the stack.

time:
2016-08-30T17:28:07Z
class:
comments:
Disable logger usage checks

This commit disables the logger usage checks as they will not be
compatible with Log4j 2. This disabling is temporary, they will return.

time:
2016-08-30T16:11:18Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/common/xcontent/XContent.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/support/filtering/FilterPath.java
core/src/main/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathBasedFilter.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContentGenerator.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/rest/AbstractRestChannel.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
core/src/test/java/org/elasticsearch/action/admin/indices/alias/AliasActionsTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesServiceTests.java
core/src/test/java/org/elasticsearch/cluster/shards/ClusterSearchShardsIT.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/AbstractFilteringJsonGeneratorTestCase.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathGeneratorFilteringTests.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathTests.java
core/src/test/java/org/elasticsearch/indices/IndicesServiceTests.java
core/src/test/java/org/elasticsearch/ingest/IngestDocumentTests.java
core/src/test/java/org/elasticsearch/routing/AliasResolveRoutingIT.java
core/src/test/java/org/elasticsearch/routing/AliasRoutingIT.java
core/src/test/java/org/elasticsearch/search/morelikethis/MoreLikeThisIT.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorTests.java
comments:
Merge branch 'master' into deprecate

time:
2016-08-30T16:06:18Z
class:
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
plugins/lang-javascript/src/main/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineService.java
plugins/lang-python/src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
comments:
Deprecate Groovy, Python, and Javascript scripts.

time:
2016-08-30T15:29:52Z
class:
comments:
[DOCS] Document performRequest being renamed to performRequestAsync

This updates the docs to reflect that the asynchronous variants were renamed to have "Async" at the end.

time:
2016-08-30T14:15:21Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesAliasesAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/alias/AliasActionsTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesServiceTests.java
core/src/test/java/org/elasticsearch/cluster/shards/ClusterSearchShardsIT.java
core/src/test/java/org/elasticsearch/indices/IndicesServiceTests.java
core/src/test/java/org/elasticsearch/routing/AliasResolveRoutingIT.java
core/src/test/java/org/elasticsearch/routing/AliasRoutingIT.java
core/src/test/java/org/elasticsearch/search/morelikethis/MoreLikeThisIT.java
comments:
Add an alias action to delete an index

While removing an index isn't actually an alias action, if we add
an alias action that deletes an index then we can delete and index
and add an alias with the same name as the index atomically, in
the same cluster state update.

Closes #20064

time:
2016-08-30T11:05:02Z
class:
comments:
Update percolate.asciidoc

Tidy up percolator docs

time:
2016-08-30T10:58:54Z
class:
core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
comments:
User lambda instead of annoymous class in SearchPhaseController

time:
2016-08-30T09:46:40Z
class:
comments:
Upgrade to Netty 4.1.5

This commit upgrades the Netty dependencies from version 4.1.4 to
version 4.1.5. This upgrade brings several bug fixes including the
removal of a obnoxious and scary-looking log message when unsafe is
explicitly disabled.

Relates #20222

time:
2016-08-30T07:33:59Z
class:
comments:
Merge pull request #20213 from jimferenczi/painless_list_add

Fix docs that uses += to add an element in a list even though painless does not accept it.

time:
2016-08-30T07:08:30Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/XContent.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/support/filtering/FilterPath.java
core/src/main/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathBasedFilter.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContentGenerator.java
core/src/main/java/org/elasticsearch/rest/AbstractRestChannel.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/AbstractFilteringJsonGeneratorTestCase.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathGeneratorFilteringTests.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathTests.java
comments:
Add exclusion filters support to filter_path

This commit adds the support for exclusion filter to the response filtering (filter_path) feature. It changes the XContentBuilder APIs so that it now accepts two types of filters: inclusive and exclusive. Filters are no more String arrays but sets of String instead.

time:
2016-08-30T05:38:01Z
class:
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/test/java/org/elasticsearch/ingest/IngestDocumentTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorTests.java
comments:
ingest: Fix rename processor change rename leaf fields into branch fields

Instead of get, set and remove we do get, remove and then set to avoid type conflicts in IngestDocument.
If the set still fails we try to restore the original field in ingest document.

Closes #19892

time:
2016-08-29T21:51:35Z
class:
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
comments:
Ensures that during the restore process, if a file in the snapshot (#20220)

already has a file of the same name in the Store, but is different
in content (different checksum/length), then those files are first
deleted before restoring the files in question.

time:
2016-08-29T16:44:58Z
class:
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
comments:
Removes unused test helper method to write old blob store format

time:
2016-08-29T16:34:24Z
class:
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
comments:
Merge pull request #20034 from areek/cleanup/index_operation

Set created flag in index operation

time:
2016-08-29T15:27:37Z
class:
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java
core/src/test/java/org/elasticsearch/codecs/CodecTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TTLFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java
comments:
Support downgrading keyword/text into string

This changes Elasticsearch to automatically downgrade `text` and
`keyword` fields into appropriate `string` fields when changing the
mapping of indexes imported from 2.x. This allows users to use the
modern, documented syntax against 2.x indexes. It also makes it clear
that reindexing in order to recreate the index in 5.0 is required for
any long lived indexes. This change is useful for the times when you
can't (cluster is just starting, not stable enough for reindex) or
shouldn't (index will only live 90 days or something).

time:
2016-08-29T15:20:26Z
class:
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
comments:
[TEST] enable cacheKey check in ShardSearchTransportRequestTests

Now that #20081 is merged we can check that cacheKey is consistent across equal search requests, something that wasn't true before due to ordering of map keys when using index boost.

Relates to #19986

time:
2016-08-29T14:52:11Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] minor cleanups to AbstractQueryTestCase

Removed null check for token, if we are outside the null it already means it is null.

Fixed typo in comment and remove leftover assignment to unused local variable.
leftover for debugging purpose, thanks 


time:
2016-08-29T14:19:33Z
class:
comments:
Merge pull request #20186 from gmarz/spec/wait_for_active_shards

[SPEC] Fix type for wait_for_active_shards (string => number)

time:
2016-08-29T14:00:11Z
class:
comments:
Fix docs that uses += to add an element in a list even though painless does not accept it.

time:
2016-08-29T13:31:01Z
class:
comments:
[SPEC] Change type of wait_for_active_shards from number to string

time:
2016-08-29T13:10:20Z
class:
comments:
Update api-conventions.asciidoc (#20203)

time:
2016-08-29T12:28:16Z
class:
comments:
Mark lots of stuff `// NOTCONSOLE`

time:
2016-08-29T12:28:16Z
class:
comments:
Add `// TESTRESPONSE` to mapper-attachements docs

time:
2016-08-29T11:51:39Z
class:
comments:
Correct grammar in parent field doc

time:
2016-08-29T11:49:52Z
class:
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/Transports.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
comments:
Rename Netty TCP transports thread factories from http_* to transport_*

  Netty3/4 TcpTransport implementations are creating thread factories with a "http_server" thread prefix whereas it should start with "transport_server" and let the "http_server" prefix for the HttpServerTransport implementations.

time:
2016-08-29T11:42:13Z
class:
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
test/framework/src/main/java/org/elasticsearch/test/disruption/LongGCDisruption.java
comments:
[TEST] Add additional logging to testStaleMasterNotHijackingMajority

This test is periodically failing. As I suspect that the GCDisruption scheme is somehow making the wrong node block on
its cluster state update thread, I've added some more logging and a thread dump once the given assertion triggers
again.

time:
2016-08-29T11:28:23Z
class:
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
comments:
fix test bug

time:
2016-08-29T02:52:18Z
class:
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapper2xTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/SimpleAttachmentMapperTests.java
plugins/mapper-murmur3/src/test/java/org/elasticsearch/index/mapper/murmur3/Murmur3FieldMapperTests.java
comments:
Merge pull request #19860 from johtani/fix/validate_empty_field_name

Validate blank field name

time:
2016-08-27T21:20:55Z
class:
core/src/test/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessorTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
[TEST] Ensure test never hangs but fails if it doesn't finish after 10 seconds waiting for threads

time:
2016-08-27T19:42:38Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessor.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AsyncIOProcessorTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
comments:
Fsync documents in an async fashion (#20145)

today we fsync in a blocking fashion where all threads block while another
syncs. Yet, we can improve this and make use of the async infrastrucutre added
for `wait_for_refresh` and make fsyncing single threaded while all other threads
can continue indexing. The syncing thread then notifies a listener once the requests
location is synced. This also allows to send docs to replicas before its actually fsynced
allowing for cocurrent replica processing.

This patch has a significant impact on performance on slower discs. An initial single node benchmark
shows that on very fast SSDs there is no noticable impact but on slow spinning disk this
patch shows a ~32% performance improvement.

```
NVME SSD:

336ec0ac9a12b967163a4a21f75beb41c8582cde (master):

 Total docs/sec: 47200.9
 Total docs/sec: 46440.4

23543a97e3e7f72a31e26b50e00931919784426c (async wait for translog):

 Total docs/sec: 47461.6
 Total docs/sec: 46188.3
-------------------------------------------------------------------
Spinning disk:

336ec0ac9a12b967163a4a21f75beb41c8582cde (master):

 Total docs/sec: 22733.0
 Total docs/sec: 24129.8

23543a97e3e7f72a31e26b50e00931919784426c (async wait for translog):

 Total docs/sec: 32724.1
 Total docs/sec: 32845.4
--------------------------------------------------------------------
```

time:
2016-08-27T14:11:51Z
class:
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
comments:
Don't rebuild pipeline on every cluster state update

Currently, after at least one pipeline is registered it is getting rebuilt on every single cluster state update, even when this update is not related to ingest metadata. This change adds a check that the ingest metadata changed before trying to rebuild all pipelines.

time:
2016-08-27T14:11:10Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RecoverySource.java
core/src/main/java/org/elasticsearch/cluster/routing/RestoreSource.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/IndexMetaDataUpdater.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateEmptyPrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateStalePrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/FilterAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/NodeVersionAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoverySourceService.java
core/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RemoteRecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/StartRecoveryRequest.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ClusterStateCreationUtils.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RandomShardRoutingMutator.java
core/src/test/java/org/elasticsearch/cluster/routing/RecoverySourceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableGenerator.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingHelper.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/replication/RecoveryDuringReplicationTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/indices/IndexingMemoryControllerTests.java
core/src/test/java/org/elasticsearch/indices/IndicesLifecycleListenerSingleNodeTests.java
core/src/test/java/org/elasticsearch/indices/cluster/AbstractIndicesClusterStateServiceTestCase.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexRecoveryIT.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoverySourceHandlerTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryStatusTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryTargetTests.java
core/src/test/java/org/elasticsearch/indices/recovery/StartRecoveryRequestTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
core/src/test/java/org/elasticsearch/recovery/FullRollingRestartIT.java
core/src/test/java/org/elasticsearch/recovery/RecoveriesCollectionTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/recovery/TruncatedRecoveryIT.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestIndicesActionTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestRecoveryActionTests.java
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
test/framework/src/main/java/org/elasticsearch/cluster/routing/TestShardRouting.java
comments:
Add recovery source to ShardRouting (#19516)

Adds an explicit recoverySource field to ShardRouting that characterizes the type of recovery to perform:

- fresh empty shard copy
- existing local shard copy
- recover from peer (primary)
- recover from snapshot
- recover from other local shards on same node (shrink index action)

time:
2016-08-27T11:24:45Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhase.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhaseTests.java
comments:
Fix NPE during search with source filtering if the source is disabled. (#20093)

* Fix NPE during search with source filtering if the source is disabled.
Instead of throwing an NPE, a search response with source filtering will not contain the source if it is disabled in the mapping.

Closes #7758

* Created unit tests for FetchSourceSubPhase. Tests similar to SourceFetchingIT.
Removed SourceFetchingIT#testSourceDisabled (now covered via unit test FetchSourceSubPhaseTests#testSourceDisabled).

* Updated FetchSouceSubPhase unit tests per comments.
Renamed main unit test method.
Use assertEquals and assertNull instead of assertThat (less code).

time:
2016-08-27T05:29:29Z
class:
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
comments:
Fixes test to use admin client to check the cluster state
instead of a random node's cluster service.

time:
2016-08-26T23:59:22Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java
comments:
Fix IndexNotFoundException if an multi index search request had a concrete index followed by an add/remove concrete index.
The code now properly adds/removes the index instead of throwing an exception.

Closes #3839

time:
2016-08-26T21:13:14Z
class:
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
comments:
Removed an unecessary TODO for snapshot file restoration and instead
added comments explaining what happens during the restore process.

time:
2016-08-26T20:01:07Z
class:
comments:
Cleanup some docs

Mark one `// NOTCONSOLE`, mark another `[source,painless]`, and
another `// TESTRESPONSE` and fix a bug in it.

time:
2016-08-26T19:53:48Z
class:
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/test/java/org/elasticsearch/script/ScriptSettingsTests.java
comments:
Merge remote-tracking branch 'dakrone/prop-script-settings'

time:
2016-08-26T19:39:44Z
class:
comments:
Use `painless` as language for painless snippets (#20185)

The syntax highlighter does a decent job when you do this. This lets
us `grep` for painless snippets in the docs.

Closes #20025

time:
2016-08-26T19:03:32Z
class:
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/test/java/org/elasticsearch/script/ScriptSettingsTests.java
comments:
Fix propagating the default value for script settings

Fixes an issue where the value for the `script.engine.<lang>.inline`
settings would be _set_ properly, but would not accurately be reflected
in the `include_defaults` output. Adds a test to ensure the default raw
setting is now correct.

Resolves #20159

time:
2016-08-26T17:08:52Z
class:
comments:
Add reindex example on how to reindex daily indices (#18654)

This can be a common case with beats in case the template changes between two versions and the old data should be reindex with the new templates.

time:
2016-08-26T17:02:54Z
class:
comments:
Docs: Remove extra word from phrase-suggester

time:
2016-08-26T16:07:32Z
class:
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
comments:
ingest: don't render template twice for append processor

time:
2016-08-26T16:03:24Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
comments:
Fix request cache key for search

* Make sure indexBoost is serialized in a consistent order
* remove hasIndexBoost by using indexBoost size
* Make sure phrase suggester's collateParams is serialized in consistent
order
* Make StreamOutput writer to serialize maps in consistent order

time:
2016-08-26T14:51:33Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
comments:
Add "Async" to the end of each Async RestClient method

This makes it much harder to accidentally miss the Response.

time:
2016-08-26T11:10:33Z
class:
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
comments:
Validate blank field name

Validate only 5.0 alpha 6+ index only

Closes #19251

time:
2016-08-26T11:10:33Z
class:
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapper2xTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/SimpleAttachmentMapperTests.java
plugins/mapper-murmur3/src/test/java/org/elasticsearch/index/mapper/murmur3/Murmur3FieldMapperTests.java
comments:
Validate blank field name

add validation and validate only 5.0+
Add tests before 5.0

Closes #19251

time:
2016-08-26T09:07:05Z
class:
core/src/main/java/org/elasticsearch/common/settings/Setting.java
comments:
Avoid prematurely triggering logger initialization

The class Setting holds a static reference to a deprecation logger
instance. When the class initializer for Setting runs, it starts
triggering log4j initialization. There is a chain of initializations
from InternalSettingsPreparer to Environment to Setting that triggers
this initialization before log4j configuration has occurred. This commit
modifies this initialization so that initialization is not done eagerly.

Relates #20170

time:
2016-08-26T08:55:42Z
class:
comments:
docs: add sort workaround

time:
2016-08-26T08:35:23Z
class:
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/document/AliasedIndexDocumentActionsIT.java
core/src/test/java/org/elasticsearch/document/DocumentActionsIT.java
core/src/test/java/org/elasticsearch/explain/ExplainActionIT.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
plugins/mapper-murmur3/src/main/java/org/elasticsearch/index/mapper/murmur3/Murmur3FieldMapper.java
comments:
GET operations should not extract fields from `_source`. #20158

This makes GET operations more consistent with `_search` operations which expect
`(stored_)fields` to work on stored fields and source filtering to work on the
`_source` field. This is now possible thanks to the fact that GET operations
do not read from the translog anymore (#20102) and also allows to get rid of
`FieldMapper#isGenerated`.

The `_termvectors` API (and thus more_like_this too) was relying on the fact
that GET operations would extract fields from either stored fields or the source
so the logic to do this that used to exist in `ShardGetService` has been moved
to `TermVectorsService`. It would be nice that term vectors do not rely on this,
but this does not seem to be a low hanging fruit.

time:
2016-08-26T08:09:57Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingChangesObserver.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/IndexMetaDataUpdater.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesChangedObserver.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTests.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ActiveAllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/InSyncAllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
comments:
Mark shard as stale on non-replicated write, not on node shutdown (#20023)

Non-stale shard copies are currently tracked using their allocation ids in the cluster state. When a node leaves the cluster, shard copies of that node are marked as stale by removing their allocation ids from the active set in the cluster. For full cluster restarts, this can have the unwanted effect that only the last node holding a copy of the shard will be seen as non-stale. The other shard copies are not really stale though as long as no writes have happened on this shard copy. Shard copies should thus only be marked as stale (by the master in the cluster state) if other active shards have received writes.

This commit implements the above logic and also renames the persistent structure used to track non-stale shard copies from "active_allocations" to "in_sync_allocations" as we now also support tracking non-stale shard copies that have no active routing entries in the cluster state.

time:
2016-08-26T08:00:36Z
class:
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
comments:
Do not parse numbers as both strings and numbers when not included in `_all`. #20167

We need to get the string representation of numbers in order to include in
`_all`. However this has a cost and disabling `_all` is rather common so we
should look into skipping it.

time:
2016-08-26T07:58:53Z
class:
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/search/NoopSearchRequestBuilder.java
comments:
Remove obsolete NoopSearchRequestBuilder#setNoStoredFields()

time:
2016-08-26T07:05:47Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/AbstractBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkMain.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkRunner.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Metrics.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/MetricsCalculator.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Sample.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/SampleRecorder.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/rest/RestClientBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/transport/TransportClientBenchmark.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/NoopPlugin.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/NoopBulkAction.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/NoopBulkRequestBuilder.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/RestNoopBulkAction.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/TransportNoopBulkAction.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/search/NoopSearchAction.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/search/NoopSearchRequestBuilder.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/search/RestNoopSearchAction.java
client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/search/TransportNoopSearchAction.java
comments:
Add client-benchmark-noop-api-plugin to stress clients even more in benchmarks (#20103)

time:
2016-08-26T01:08:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
comments:
Add network types to cluster stats

The network types in use on a cluster can be useful information to have,
so this commit adds aggregate metrics for the network types in use in a
cluster to the cluster stats.

Relates #20144

time:
2016-08-25T21:27:22Z
class:
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/ExamplePluginConfiguration.java
comments:
Refactored to use Settings object

time:
2016-08-25T20:20:03Z
class:
core/src/main/java/org/elasticsearch/env/ShardLockObtainFailedException.java
plugins/analysis-phonetic/src/main/java/org/elasticsearch/index/analysis/phonetic/Nysiis.java
comments:
Use StringBuilder in favor of StringBuffer

This removes all instances of StringBuffer that are removeable.

Uncontended synchronization in Java is pretty cheap, but it's unnecessary.

time:
2016-08-25T20:10:48Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/io/stream/Writeable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
comments:
Make MapOfLists Generic

This moves the Writer interface from StreamOutput into Writeable, as a peer of its inner Reader interface. This should hopefully help to avoid random functional interfaces being created for the same purpose.

It also makes use of the moved class by updating writeMapOfLists and readMapOfLists.

time:
2016-08-25T20:02:04Z
class:
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
comments:
Un-final Core REST Client classes

This removes final from the RestClient, Response, and Sniffer classes so that outside code can mock them. Their constructors are already package private, so there's not much that can go wrong.

time:
2016-08-25T18:54:06Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Fix MoreLikeThisQueryBuilderTests.testUnknownObjectException()

Objects hierarchy must be tracked when entering/leaving an object so that it better knows if the "newField" has been inserted into an arbitrary holding object.

Can be reproduced with gradle :core:test -Dtests.seed=760F8BD0F7E46D45 -Dtests.class=org.elasticsearch.index.query.MoreLikeThisQueryBuilderTests -Dtests.method="testUnknownObjectException" -Dtests.security.manager=true -Dtests.locale=ko -Dtests.timezone=Etc/Zulu

time:
2016-08-25T18:34:11Z
class:
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerPipeliningTests.java
comments:
Address race condition in HTTP pipeline tests

The Netty 4 HTTP server pipeline tests contains two different test
cases. The general idea behind these tests is to submit some requests to
a Netty 4 HTTP server, one test with pipelining enabled and another test
with pipelining disabled. These requests are submitted to two endpoints,
one with a path like /{id} and another with a path like /slow with a
query string parameter sleep. This parameter tells the request handler
how long to sleep for before replying. The idea is that in the case of
the pipelining enabled tests, the requests should come back exactly in
the order submitted, even with some of the requests hitting the slow
endpoint with random sleep durations; this is the guarantee that
pipelining provides. And in the case of the pipelining disabled tests,
requests were randombly submitted to /{id} and /slow with sleep
parameters starting at 600ms and increasing by 100ms for each slow
request constructed. We would expect the requests to come back with the
all the responses to the /{id} requests first because these requests
will execute instantaneously, and then the responses to the /slow
requests. Further, it was expected that the slow requests would come
back ordered by the length of the sleep, the thinking being that 100ms
should be enough of a difference between each request that we would
avoid any race conditions. Sadly, this is not the case, the threads do
sometimes hit race conditions.

This commit modifies the HTTP server pipelining tests to address this
race condition. The modification is that the query string parameter on
the /slow endpoint is removed in favor of just submitting requests to
the path /slow/{id}, where id just used a marker to distinguish each
request. The server chooses a random sleep of at least 500ms for each
request on the slow path. The assertion here then is that the /{id}
responses arrive first, then then /slow responses. We can not make an
assertion on the order of the responses, but we can assert that we did
see every expected response.

Relates #19845

time:
2016-08-25T16:30:26Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSubEachArray.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSubEachIterable.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
comments:
Merge pull request #20146 from jdconrad/break

Fix break bug in for/foreach loops.

time:
2016-08-25T16:26:04Z
class:
core/src/main/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilter.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/analysis/ArabicAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ArmenianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BasqueAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BrazilianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BrazilianStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/BulgarianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CatalanAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CjkAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CommonGramsTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/CzechAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DanishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DutchAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DutchStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ElisionTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/EnglishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FingerprintAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/FingerprintAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FinnishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FrenchAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FrenchStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/GalicianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/GermanAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/GermanStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/HindiAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/HungarianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/IndonesianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/IrishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ItalianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/KeepWordFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/KeywordMarkerTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/LatvianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/LithuanianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/LowerCaseTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/NorwegianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/PortugueseAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/RomanianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/RussianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ScandinavianFoldingFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ScandinavianNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SoraniAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SpanishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StopAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StopTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SwedishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/TurkishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/WordDelimiterTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/compound/AbstractCompoundWordTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/shard/LocalShardSnapshot.java
core/src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestBucketsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestDocsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/profile/aggregation/ProfilingLeafBucketCollector.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTestCase.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisTests.java
core/src/test/java/org/elasticsearch/index/analysis/FingerprintAnalyzerTests.java
core/src/test/java/org/elasticsearch/index/analysis/ShingleTokenFilterFactoryTests.java
core/src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/filter1/MyFilterTokenFilterFactory.java
core/src/test/java/org/elasticsearch/index/codec/CodecTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/RootObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/analysis/DummyAnalyzer.java
core/src/test/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuTokenizerFactory.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/index/analysis/JapaneseStopTokenFilterFactory.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/index/analysis/KuromojiAnalyzerProvider.java
test/framework/src/main/java/org/elasticsearch/AnalysisFactoryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/store/MockFSDirectoryService.java
test/framework/src/test/java/org/elasticsearch/test/AbstractQueryTestCaseTests.java
comments:
Merge branch 'master' into break

time:
2016-08-25T14:24:22Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/test/java/org/elasticsearch/test/AbstractQueryTestCaseTests.java
comments:
Fix AbstractQueryTestCase.testUnknownObjectException()

When need to check the whole hierarchy of objects to know if the newly inserted "newField" object is part of an arbitrary holding object or not.

Reproduced with `gradle :modules:percolator:test -Dtests.seed=736B0B67DA7A3632 -Dtests.class=org.elasticsearch.percolator.PercolateQueryBuilderTests -Dtests.method="testUnknownObjectException" -Dtests.security.manager=true -Dtests.locale=es-ES -Dtests.timezone=ART`

time:
2016-08-25T13:58:55Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestBucketsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestDocsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/profile/aggregation/ProfilingLeafBucketCollector.java
core/src/test/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java
comments:
#20156 Fix agg profiling when using breadth_first collect mode

Fix agg profiling when using breadth_first collect mode

time:
2016-08-25T13:57:52Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestBucketsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestDocsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/profile/aggregation/ProfilingLeafBucketCollector.java
core/src/test/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java
comments:
Fix agg profiling when using breadth_first collect mode

Previous to this change the nesting of aggregation profiling results
would be incorrect when the request contains a terms aggregation and the
collect mode is (implicitly or explicitly) set to `breadth_first`. This
was because the aggregation profiling has to make the assumption that
the `preCollection()` method of children aggregations is always called in
the `preCollection()` method of their parent aggregation. When the collect
mode is `breadth_first` the `preCollection` of the children aggregations
was delayed until the documents were replayed.

This change moves the `preCollection()` of deferred aggregations to run
during the `preCollection()` of the parent aggregation. This should have
no adverse impact on the breadth_first mode as there is no allocation of
memory in any of the aggregations.

We also apply the same logic to the diversified sampler aggregation as
we did to the terms aggregation to move the `preCollection()` of the
child aggregations method to be called during the `preCollection()` of
the parent aggregation.

This commit also includes a fix so that the `ProfilingLeafBucketCollector`
propagates the scorer to its delegate so the diversified sampler agg works
when profiling is enabled.

time:
2016-08-25T11:37:14Z
class:
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyGeoPointFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldTests.java
comments:
Revert "Revert "Save one utf8 conversion in KeywordFieldMapper. #19867""

This reverts commit d805266d94adcf3643b77194a7895de6200f2914.

time:
2016-08-25T11:01:04Z
class:
comments:
Add an example call of how to stop a snapshot or restore operation (#20153)

time:
2016-08-25T10:39:38Z
class:
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/RootObjectMapperTests.java
comments:
The root object mapper should support updating `numeric_detection`, `date_detection` and `dynamic_date_formats`. #20119

If they are specified by a mapping update, these properties are currently
ignored. This commit also fixes the handling of `dynamic_templates` so that it
is possible to remove templates (and so that it works more similarly to all
other mapping properties).

Closes #20111

time:
2016-08-25T10:03:34Z
class:
core/src/main/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilter.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/analysis/ArabicAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ArmenianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BasqueAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BrazilianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BrazilianStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/BulgarianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CatalanAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CjkAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CommonGramsTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/CzechAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DanishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DutchAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DutchStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ElisionTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/EnglishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FingerprintAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/FingerprintAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FinnishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FrenchAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FrenchStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/GalicianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/GermanAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/GermanStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/HindiAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/HungarianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/IndonesianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/IrishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ItalianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/KeepWordFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/KeywordMarkerTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/LatvianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/LithuanianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/LowerCaseTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/NorwegianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/PortugueseAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/RomanianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/RussianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ScandinavianFoldingFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ScandinavianNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SoraniAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SpanishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StopAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StopTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SwedishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/TurkishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/WordDelimiterTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/compound/AbstractCompoundWordTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/shard/LocalShardSnapshot.java
core/src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTestCase.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisTests.java
core/src/test/java/org/elasticsearch/index/analysis/FingerprintAnalyzerTests.java
core/src/test/java/org/elasticsearch/index/analysis/ShingleTokenFilterFactoryTests.java
core/src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/filter1/MyFilterTokenFilterFactory.java
core/src/test/java/org/elasticsearch/index/codec/CodecTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/analysis/DummyAnalyzer.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuTokenizerFactory.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/index/analysis/JapaneseStopTokenFilterFactory.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/index/analysis/KuromojiAnalyzerProvider.java
test/framework/src/main/java/org/elasticsearch/AnalysisFactoryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/store/MockFSDirectoryService.java
comments:
Merge pull request #20147 from mikemccand/lucene_620_upgrade

Upgrade to Lucene 6.2.0

time:
2016-08-25T08:57:30Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/test/java/org/elasticsearch/test/AbstractQueryTestCaseTests.java
comments:
Improve AbstractQueryTestCase#unknownObjectExceptionTest()

This method fails when a randomized string value contains a double-quote. This commit changes the method so that it is not based on string concatenation anymore. It now use XContentGenerator & XContentParser to mutate the valid queries.

Related #19864

time:
2016-08-25T08:43:56Z
class:
core/src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
comments:
Pass baseSimilarity to super (PerFieldSimilarityWrapper)

time:
2016-08-24T23:50:25Z
class:
core/src/main/java/org/elasticsearch/index/analysis/ScandinavianFoldingFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ScandinavianNormalizationFilterFactory.java
test/framework/src/main/java/org/elasticsearch/AnalysisFactoryTestCase.java
comments:
Mark Scandinavian analysis components as multi term aware

time:
2016-08-24T22:20:30Z
class:
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
test/framework/src/main/java/org/elasticsearch/test/store/MockFSDirectoryService.java
comments:
Remove now unused Store.renameFile, and obsolete commented out code

time:
2016-08-24T22:17:18Z
class:
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
comments:
Made for/each break tests more robust in Painless.

time:
2016-08-24T21:26:28Z
class:
core/src/main/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilter.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/index/analysis/Analysis.java
core/src/main/java/org/elasticsearch/index/analysis/ArabicAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ArmenianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BasqueAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BrazilianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/BrazilianStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/BulgarianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CatalanAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CjkAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/CommonGramsTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/CzechAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DanishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DutchAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/DutchStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ElisionTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/EnglishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FingerprintAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/FingerprintAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FinnishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FrenchAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/FrenchStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/GalicianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/GermanAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/GermanStemTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/HindiAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/HungarianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/IndonesianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/IrishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/ItalianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/KeepWordFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/KeywordMarkerTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/LatvianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/LithuanianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/LowerCaseTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/NorwegianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/PortugueseAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/RomanianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/RussianAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/SnowballAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SoraniAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SpanishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzer.java
core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StopAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/StopTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SwedishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/TurkishAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/analysis/WordDelimiterTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/compound/AbstractCompoundWordTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/shard/LocalShardSnapshot.java
core/src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTestCase.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisTests.java
core/src/test/java/org/elasticsearch/index/analysis/FingerprintAnalyzerTests.java
core/src/test/java/org/elasticsearch/index/analysis/ShingleTokenFilterFactoryTests.java
core/src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/filter1/MyFilterTokenFilterFactory.java
core/src/test/java/org/elasticsearch/index/codec/CodecTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/analysis/DummyAnalyzer.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuTokenizerFactory.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/index/analysis/JapaneseStopTokenFilterFactory.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/index/analysis/KuromojiAnalyzerProvider.java
test/framework/src/main/java/org/elasticsearch/AnalysisFactoryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/store/MockFSDirectoryService.java
comments:
Upgrade to Lucene 6.2.0
Hi @mikemccand, It was indicated that myanmarAsWords is not configurable yet.  Please let me know if it would be possible to have that option as false to perform syllable segmentation, instead of dictionary base segmentation when it is true by default.  Thanks a lot. 

time:
2016-08-24T21:25:54Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSubEachArray.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSubEachIterable.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
comments:
Fix break bug in for/foreach loops.

time:
2016-08-24T20:49:48Z
class:
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
comments:
Add support for parameters to the script ingest processor

The script processor should support `params` to be consistent with all other script consumers.

time:
2016-08-24T20:37:59Z
class:
comments:
Fixed doc links

time:
2016-08-24T19:40:25Z
class:
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/LegacyInMemoryGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/LegacyIndexedGeoBoundingBoxQuery.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTestCase.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/GeoEncodingTests.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
comments:
Refactor GeoPointFieldMapperLegacy and Legacy BBox query helpers

This is a house cleaning commit that refactors GeoPointFieldMapperLegacy to LegacyGeoPointFieldMapper for consistency with Legacy Numerics and IP field mappers.

IndexedGeoBoundingBoxQuery and InMemoryGeoBoundingBoxQuery are also deprecated and refactored as Legacy classes.

time:
2016-08-24T19:30:47Z
class:
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/StoredFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ParentFieldSubFetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/VersionFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/source/MetadataFetchingIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteRequestBuilders.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Merge pull request #20026 from jimferenczi/disable_stored_fields

Add the ability to disable the retrieval of the stored fields entirely

time:
2016-08-24T15:49:13Z
class:
comments:
Merge pull request #20134 from rjernst/plugin_run_config

Build: Allow plugin to set run configuration distro to zip

time:
2016-08-24T14:40:08Z
class:
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/StoredFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ParentFieldSubFetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/VersionFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/source/MetadataFetchingIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteRequestBuilders.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Add the ability to disable the retrieval of the stored fields entirely

This change adds a special field named _none_ that allows to disable the retrieval of the stored fields in a search request or in a TopHitsAggregation.

To completely disable stored fields retrieval (including disabling metadata fields retrieval such as _id or _type) use _none_ like this:

````
POST _search
{
   "stored_fields": "_none_"
}
````

time:
2016-08-24T13:38:43Z
class:
comments:
Add cloud to S3/EC2 plugin docs

time:
2016-08-24T13:30:08Z
class:
core/src/main/java/org/elasticsearch/index/engine/DeleteVersionValue.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/LiveVersionMap.java
core/src/main/java/org/elasticsearch/index/engine/VersionValue.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/LiveVersionMapTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/VersionValueTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/timestamp/SimpleTimestampIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
comments:
Use _refresh instead of reading from Translog in the RT GET case (#20102)

Today we do a lot of accounting inside the engine to maintain locations
of documents inside the transaction log. This is only needed to ensure
we can return the documents source from the engine if it hasn't been refreshed.
Aside of the added complexity to be able to read from the currently writing translog,
maintainance of pointers into the translog this also caused inconsistencies like different values
of the `_ttl` field if it was read from the tlog or not. TermVectors are totally different if
the document is fetched from the tranlog since copy fields are ignored etc.

This chance will simply call `refresh` if the documents latest version is not in the index. This
streamlines the semantics of the `_get` API and allows for more optimizations inside the engine
and on the transaction log. Note: `_refresh` is only called iff the requested document is not refreshed
yet but has recently been updated or added.

#Relates to #19787

time:
2016-08-24T12:55:02Z
class:
comments:
Fixed the reindex_rethrottle REST tests

The API was renamed from reindex.rethrottle to reindex_rethrottle

time:
2016-08-24T11:30:48Z
class:
comments:
Renamed REST spec reindex.rethrottle to reindex_rethrottle

There is already a reindex method, so reindex can't
also be used as a namespace.

time:
2016-08-24T08:04:27Z
class:
core/src/main/java/org/elasticsearch/index/mapper/VersionFieldMapper.java
comments:
Don't index the `_version` field (#20132)

The `_version` field doesn't allow to be searched anyway since it's
set `IndexOptions#NONE` for it instead.

time:
2016-08-24T07:54:06Z
class:
core/src/main/java/org/elasticsearch/index/engine/DeleteVersionValue.java
core/src/main/java/org/elasticsearch/index/engine/LiveVersionMap.java
core/src/main/java/org/elasticsearch/index/engine/VersionValue.java
core/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/test/java/org/elasticsearch/index/engine/LiveVersionMapTests.java
core/src/test/java/org/elasticsearch/index/engine/VersionValueTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
comments:
Fix RAM usage estimation of LiveVersionMap. #20123

I was writing tests for RAM usage estimation of LiveVersionMap and found a
couple issues:
 - The BytesRef objects used as uids were oversized since they were created
   via `new BytesRef(CharSequence)` which creates a `byte[]` whose size is 3x
   the length of the provided char sequence. Given that our uids are most of
   times ASCII sequences, this is a waste of memory.
 - `VersionValue` was using `translogLocation.size` instead of
   `translogLocation.ramBytesUsed()` for RAM estimation, which is completely
   unrelated to the memory footprint of the `Translog.Location` object.

In particular, the latter issue could cause RAM usage estimation to be
significantly overestimated, especially on large documents.

I also added tests for ram accounting.

time:
2016-08-24T03:12:24Z
class:
comments:
Correct Vagrant boxes memory allocation

This commit corrects the memory allocation to the boxes uses for the
Vagrant tests to actually be 3 GB (really, this is just an OCD-driven
commit).

time:
2016-08-23T23:12:35Z
class:
comments:
Build: Allow plugin to set run configuration distro to zip

This was previously broken because run and integTest used the same
configuration name. This change makes the configuration name prefixed by
the task the cluster is created for.

time:
2016-08-23T18:54:40Z
class:
comments:
Give vagrant test boxes 3gb of ram

Now that Elasticsearch defaults to 2gb heaps those boxes need more ram,
especially opensuse-13 for some reason. It has failed to run the
packaging tests ever since the change.....

time:
2016-08-23T18:31:58Z
class:
comments:
Remove minimum master nodes bootstrap docs

The minimum master nodes bootstrap check was removed in
069fc2269664c5b2a4a393c893825f982b55ccc7 but the docs were left behind.
This commit removes these stale docs.

Relates #20127

time:
2016-08-23T18:08:52Z
class:
comments:
Update index_.asciidoc (#20125)

time:
2016-08-23T17:43:35Z
class:
comments:
Add deprecation warnings to docs for geohash

Relates to #20126

time:
2016-08-23T15:55:11Z
class:
comments:
Fix packaging tests to test upgrading on disk groovy script

time:
2016-08-23T15:24:33Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
comments:
Revert "Merge remote-tracking branch 'dakrone/exclude-numerics-from-all'"

This reverts commit 514585290c04293485a494758a52bc3a876abb33, reversing
changes made to 8563c8d8970f27420f5a4c39f95643d5f0191232.

time:
2016-08-23T14:33:37Z
class:
core/src/main/java/org/elasticsearch/action/DocumentRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/ingest/PipelineExecutionService.java
core/src/main/java/org/elasticsearch/rest/action/document/RestIndexAction.java
core/src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/bulk/RetryTests.java
core/src/test/java/org/elasticsearch/action/index/IndexRequestTests.java
core/src/test/java/org/elasticsearch/action/ingest/BulkRequestModifierTests.java
core/src/test/java/org/elasticsearch/action/ingest/IngestActionFilterTests.java
core/src/test/java/org/elasticsearch/document/DocumentActionsIT.java
core/src/test/java/org/elasticsearch/ingest/PipelineExecutionServiceTests.java
core/src/test/java/org/elasticsearch/routing/SimpleRoutingIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFailureTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexVersioningTests.java
comments:
Make bulk item-level requests implement DocumentRequest interface

Currently, bulk item requests can be any ActionRequest, this commit
restricts bulk item requests to DocumentRequest. This simplifies
handling failures during bulk requests. Additionally, a new enum
is added to DocumentRequest to represent the intended operation
to be performed by a document request. Now, index operation type
also uses the new enum to specify whether the request should
create or index a document.

time:
2016-08-23T14:19:21Z
class:
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
comments:
Deprecate geohash parameters for geo_point parser

This commit deprecates all geohash parameters in the geo_point field parser.

time:
2016-08-23T14:14:54Z
class:
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeQuery.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Deprecate optimize_bbox on geodistance queries

Deprecates the optimize_bbox parameter on geodistance queries. This has no longer been needed since version 2.2 because lucene geo distance queries (postings and LatLonPoint) already optimize by bounding box.

time:
2016-08-23T13:58:32Z
class:
comments:
Add description to task in vagrant build

time:
2016-08-23T13:15:22Z
class:
comments:
Allow to enable annotation processing explicitly (#20117)

In 1e91f3b we disabled annotation processors globally. However, some
project like JMH need annotation processing, so we add an ability to
selectively enabled annotation processing for certain projects by
setting an external property in the corresponding Gradle build script.

Note that `javac` would allow to set a specific annotation processor
with the command line option `-processor`. However, due to a bug in
Gradle we we cannot use this option and need to enable all annotation
processors.

time:
2016-08-23T11:32:14Z
class:
comments:
Use `refresh=true` in mapping/fields examples (#20120)

Fix field examples to make documents actually visible

This commit adds refresh calls to field examples an removes not working
`_routing` and `_field_names` script access.

Closes #20118

time:
2016-08-23T10:37:38Z
class:
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineSearcher.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
comments:
Don't suppress AlreadyClosedException (#19975)

Catching and suppressing AlreadyClosedException from Lucene is dangerous because it can mean there is a bug in ES since ES should normally guard against invoking Lucene classes after they were closed.

I reviewed the cases where we catch AlreadyClosedException from Lucene and removed the ones that I believe are not needed, or improved comments explaining why ACE is OK in that case.

I think (@s1monw can you confirm?) that holding the engine's readLock means IW will not be closed, except if disaster strikes (failEngine) at which point I think it's fine to see the original ACE in the logs?

Closes #19861

time:
2016-08-23T02:34:59Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
comments:
Merge pull request #20046 from masaruh/same_shard_host_setting

Move cluster.routing.allocation.same_shard.host setting to new settings infrastructure

time:
2016-08-23T00:38:02Z
class:
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/test/java/org/elasticsearch/script/ScriptSettingsTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovyIndexedScriptTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovyScriptTests.java
comments:
Make Painless the default scripting language.

Closes #20017

time:
2016-08-22T18:36:25Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
comments:
Merge remote-tracking branch 'dakrone/exclude-numerics-from-all'

time:
2016-08-22T17:38:13Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
comments:
Merge pull request #20042 from tsouza/fix/issue-19364

Use internal from/to when creating InternalDateRange.Bucket

time:
2016-08-22T14:20:14Z
class:
comments:
Correct sentence (#20088)

time:
2016-08-22T13:41:05Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/search/SearchServiceTests.java
comments:
Add ref-counting to SearchContext to prevent accessing already closed readers (#20095)

When a SearchContext is closed it's reader / searcher reference is closed too.
If this happens while a search is accessing it's reader reference it can lead
to an unexpected `AlreadyClosedException` or worst case, an already closed MMapDirectory
is access causing a `SIGSEV` like in #20008 (even though the window for this is very small).

SearchContext can be closed concurrently if:
 * an index is deleted / removed from the node
 * a search context is idle for too long and is cleaned by the reaper
 * an explicit freeContext message is received

This change adds reference counting to the SearchContext base class and it's used
inside SearchService each time the context is accessed.

Closes #20008

time:
2016-08-22T13:03:34Z
class:
comments:
Removes the whitespace between the # (to comment out) and (#20094)

the setting in elasticsearch.yml, so that when a user uncomments
out a setting by just removing the #, the setting actually
takes effect. Before, it was very easy to uncomment out a
setting by just removing the #, leaving a single whitespace
character before the setting name, which would cause the
setting to not get picked up by Elasticsearch.

Closes #20090

time:
2016-08-22T08:51:12Z
class:
comments:
Merge pull request #20096 from jimferenczi/index_mapper_dynamic

Fix docs stating that index.mapper.dynamic can be set for all node in the elasticsearch.yml file.

time:
2016-08-22T08:20:43Z
class:
comments:
Fix docs stating that index.mapper.dynamic can be set for all nodes in the elasticsearch.yml file. This is not supported in 5.x (index settings cannot be set at the cluster level) and should be replace with a template for all indices.

time:
2016-08-22T02:07:42Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
comments:
Move cluster.routing.allocation.same_shard.host setting to new settings infrastructure

Fixes #20045

time:
2016-08-20T04:13:20Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/test/java/org/elasticsearch/action/admin/indices/template/put/MetaDataIndexTemplateServiceTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/template/IndexTemplateFilteringIT.java
comments:
Merge pull request #20072 from rjernst/remove_index_template_filter

Plugins: Remove IndexTemplateFilter

time:
2016-08-20T04:14:12Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotsStatusRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotsStatusRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/StartupException.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/gateway/GatewayModule.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/ClusterPlugin.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotMissingException.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceUnbalancedClusterTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Merge branch 'master' into remove_index_template_filter

time:
2016-08-20T03:55:31Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/plugins/ClusterPlugin.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
comments:
Merge pull request #20071 from rjernst/pull_shards_allocator

Plugins: Switch custom ShardsAllocators to pull based model

time:
2016-08-20T03:47:07Z
class:
core/src/main/java/org/elasticsearch/gateway/GatewayModule.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Merge pull request #20073 from rjernst/deguice_indices_service

Deguice IndicesService

time:
2016-08-19T22:44:38Z
class:
comments:
Rework documentation example for _all to be less ambigious with numerics

time:
2016-08-19T21:50:38Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
comments:
Default `include_in_all` for numeric-like types to false

This includes:

- All regular numeric types such as int, long, scaled-float, double, etc
- IP addresses
- Dates
- Geopoints and Geoshapes

Relates to #19784

time:
2016-08-19T20:44:41Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/StartupException.java
comments:
Merge pull request #20083 from jasontedor/improve-startup-exception

Improve startup exception

time:
2016-08-19T20:19:56Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotsStatusRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotsStatusRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotMissingException.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
comments:
Adds ignoreUnavailable option to the snapshot status API (#20066)

Adds ignoreUnavailable to the snapshot status API to be consistent
with the get snapshots API which has a similar parameter. If
ignoreUnavailable is set to true, then the snapshot status request
will ignore any snapshots that were not found in the repository,
instead of throwing a SnapshotMissingException.

Closes #18522

time:
2016-08-19T19:10:54Z
class:
core/src/main/java/org/elasticsearch/bootstrap/StartupException.java
comments:
Add print stack trace override to StartupException

StartupException overrides Throwable#printStackTrace(PrintStream) but
not Throwable#printStackTrace(PrintWriter). The former override is used
when the JVM terminates with an exception, but the latter override can
be used in some logging frameworks when rendering an exception (e.g.,
log4j). This commit adds an override for the latter, with the behavior
for the two overrides being the same.

time:
2016-08-19T18:53:08Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/StartupException.java
comments:
Rename StartupError to StartupException

This commit renames StartupError to StartupException. This rename is due
to the fact that this class inherits from Exception not Error in the
Throwable class hierarchy.

time:
2016-08-19T18:42:02Z
class:
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
comments:
Fixes tests so allocation ids in IndexMetaData is in sync with
what is in the RoutingTable

time:
2016-08-19T18:21:17Z
class:
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
comments:
Remove minimum master nodes bootstrap check

This commit removes the minimum master nodes bootstrap check. The
motivation for this check was to raise awareness of the minimum master
nodes setting but this check gives a false sense of security because
it's too easy to set the setting to one when first standing up a cluster
and never update it when adding master-eligible nodes, or have it out of
sync on various nodes and still pass this check. Since this check does
not have the security that other bootstrap checks provide, it should be
removed in favor of a stronger guarantee in the future. We do log a
warning if an election occurs with minimum master nodes less than a
quorum of master-eligible nodes that participated in an election and
this is the best that we can do right now.

Relates #20082

time:
2016-08-19T17:55:26Z
class:
comments:
Merge pull request #20080 from jasontedor/min-heap-equals-max-heap

Set default min heap equal to default max heap

time:
2016-08-19T17:09:15Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
comments:
Use supported random methods instead of DateTime.now()

time:
2016-08-19T16:55:48Z
class:
comments:
Set external nodes to default to 512m of heap

This commit sets external nodes for integration tests to default to
using 512m of heap. This can be overridden using tests.heap.size (a
system property that we already use elesewhere for setting the size of
the heap for the test runner) or using tests.jvm.argline (this last one
takes precedence).

time:
2016-08-19T16:53:15Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
comments:
Use a better name for unit test method

time:
2016-08-19T16:29:48Z
class:
comments:
Set default min heap equal to default max heap

This commit sets the default min heap equal to the default max
heap. This is to align the default out-of-box settings with the heap
size bootstrap check.

time:
2016-08-19T16:18:30Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceUnbalancedClusterTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Merge pull request #20075 from ywelsch/fix/update-cs-with-routingresult

Some time ago, AllocationService.reroute was changed to not only return updates to the routing table but also to the metadata (which contain primary terms and in-sync allocation ids). A lot of test code still only updates the routing table though, which is fixed by this PR.

time:
2016-08-19T15:15:02Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceUnbalancedClusterTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Use routingResult method to update cluster state after reroute

This ensures that the routing table as well as the metadata (with the primary terms and in-sync allocation ids) is updated.

time:
2016-08-19T13:55:24Z
class:
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
comments:
Make generics explicit to please ECJ.

time:
2016-08-19T12:12:10Z
class:
comments:
[Doc] Update plugins intro about categories of plugins core/community

time:
2016-08-19T08:41:11Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
comments:
Check that all active shards have their allocation id in the in-sync set

time:
2016-08-19T07:27:37Z
class:
core/src/main/java/org/elasticsearch/gateway/GatewayModule.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Internal: Deguice IndicesService

Almost all the dependencies of indices service are already created outside of
guice. This change deguices MetaStateService, and then IndicesService.

time:
2016-08-19T07:18:24Z
class:
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestTypesExistsAction.java
comments:
Switch indices.exists_type from `{index}/{type}` to `{index}/_mapping/{type}`. #20055

This will help remove types as we will need `{index}/{id}` to tell whether a
document exists.

Relates #15613

time:
2016-08-19T06:06:14Z
class:
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
comments:
Fix staging url for official plugins

This was incorrectly setup in #19996, without the version in the staging
build id.

time:
2016-08-19T05:41:25Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/test/java/org/elasticsearch/action/admin/indices/template/put/MetaDataIndexTemplateServiceTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/template/IndexTemplateFilteringIT.java
comments:
Plugins: Remove IndexTemplateFilter

How index templates match is currently controlled by the
IndexTemplateFilter interface. It is pluggable, to add additional
filter implementations to the default glob matcher.

This change removes the IndexTemplateFilter interface completely. This
is a very esoteric extension point, and not worth maintaining. Instead,
any improvements should be made to all of our glob matching.

time:
2016-08-19T05:18:33Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/plugins/ClusterPlugin.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
comments:
Plugins: Switch custom ShardsAllocators to pull based model

This change moves custom ShardsAllocators from registration on
ClusterModule, to implementing getShardsAllocators() in ClusterPlugin.
It also removes the legacy alias "even_shard" for the balanced allocator
which was removed in 2.0.

time:
2016-08-18T20:31:16Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/InnerHitsContext.java
comments:
Merge pull request #20041 from tsouza/fix/issue-19142

Make exception message more descriptive

time:
2016-08-18T19:07:09Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ClusterRebalanceAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ConcurrentRebalanceAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/FilterAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/MaxRetryAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/NodeVersionAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/RebalanceOnlyWhenActiveAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ReplicaAfterPrimaryActiveAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ShardsLimitAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SnapshotInProgressAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/ClusterPlugin.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/routing/DelayedAllocationServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ActiveAllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/common/util/ExtensionPointTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/indices/state/RareClusterStateIT.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Merge pull request #20040 from rjernst/pull_allocation_deciders

Make custom allocation deciders use pull based extensions

time:
2016-08-18T17:51:59Z
class:
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
comments:
Fix cat allocation test line length violations

time:
2016-08-18T12:08:58Z
class:
comments:
Fied bad asciidoc

time:
2016-08-18T12:04:46Z
class:
comments:
Update wildcard-query.asciidoc (#20057)

Update sentence grammar

time:
2016-08-18T11:52:45Z
class:
comments:
Document that pipeline aggs cannot be used for sorting

Closes #20037

time:
2016-08-18T10:45:28Z
class:
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
comments:
Mapping updates on objects should propagate `include_an_all`. #20051

Today you can't update `include_an_all` on an existing object. The bug affects
2.x too.

time:
2016-08-18T10:19:43Z
class:
core/src/test/java/org/elasticsearch/script/ScriptTests.java
comments:
tests for Script parsing and serialization

time:
2016-08-18T06:17:28Z
class:
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldTests.java
comments:
Revert "Save one utf8 conversion in KeywordFieldMapper. #19867"

This reverts commit c44679d952d96a0f660cb698108f0a7101c23b55.

Conflicts:
	core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
	core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapperLegacy.java
	core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java

time:
2016-08-18T06:13:55Z
class:
core/src/main/java/org/elasticsearch/index/mapper/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyLongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
comments:
Simplify inclusion in `_all`. #20028

Currently, when you set `include_in_all` on an object, it will propagate the
information to its sub mappers immediately. This is annoying because this is
done using a different mechanism than regular mapping updates.

This PR changes object fields to propagate the information at document parsing
time rather than when `include_an_all` is updated. While moving this cost to
document parsing time rather than mapping update time is probably a bad
trade-off, I am confident that this cost is very low and think this new way
makes things simpler.

time:
2016-08-18T03:26:37Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
comments:
Use internal from/to when creating InternalDateRange.Bucket
InternalDateRange.Factory.createBucket should use
prototype's internal from/to

Fixes https://github.com/elastic/elasticsearch/issues/19364

time:
2016-08-17T23:28:31Z
class:
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Fix checkstyle line length violations in allocation tests

time:
2016-08-17T22:55:31Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ClusterRebalanceAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ConcurrentRebalanceAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/FilterAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/MaxRetryAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/NodeVersionAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/RebalanceOnlyWhenActiveAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ReplicaAfterPrimaryActiveAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SameShardAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ShardsLimitAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SnapshotInProgressAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/ClusterPlugin.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/routing/DelayedAllocationServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ActiveAllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/common/util/ExtensionPointTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/indices/state/RareClusterStateIT.java
test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java
comments:
Plugins: Make custom allocation deciders use pull based extensions

This change converts AllocationDecider registration from push based on
ClusterModule to implementing with a new ClusterPlugin interface.
AllocationDecider instances are allowed to use only Settings and
ClusterSettings.

time:
2016-08-17T22:54:42Z
class:
core/src/main/java/org/elasticsearch/search/fetch/subphase/InnerHitsContext.java
comments:
Make exception message more descriptive
Exception message should be more descriptive about what to do when
inner_hit names colides.

Fixes https://github.com/elastic/elasticsearch/issues/19142

time:
2016-08-17T22:01:09Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
comments:
Merge remote-tracking branch 'dakrone/forbid-simpleregex-in-index-name'

time:
2016-08-17T21:13:03Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
comments:
Disallow creating indices starting with '-' or '+'

Previously this was possible, which was problematic when issuing a
request like `DELETE /-myindex`, which was interpretted as "delete
everything except for myindex".

Resolves #19800

time:
2016-08-17T21:09:34Z
class:
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
comments:
Set created flag in index operation

Now document created flag is set in the index operation instead of
being returned from engine operation. This change makes the engine
index and delete operations have the same signature.

time:
2016-08-17T16:13:09Z
class:
comments:
Update max local storage nodes docs

This commit updates the max local storage nodes docs to reflect that the
default is now one after 1f0673c9bd7e26ddf5ce55c6a184db2dbf4c778a.

Relates #20029

time:
2016-08-17T16:08:55Z
class:
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RethrottleTests.java
comments:
Wait for task to start in reindex test

`RethrottleTests#testReindex` fail in CI:
https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-intake/1274/console

I was unable to reproduce it locally but it *looks* like a race to start
the task. So I've added a wait for it to start just in case.

time:
2016-08-17T14:57:50Z
class:
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/DiskThresholdMonitor.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/DiskThresholdSettings.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DiskThresholdSettingsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge pull request #20018 from rjernst/split_disk_threshold

Internal: Split disk threshold monitoring from decider

time:
2016-08-17T14:58:27Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
comments:
Make disk threshold settings final

time:
2016-08-17T14:25:38Z
class:
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFailureTests.java
comments:
Reindex tests should expect the right failure

Reindex intentionally tries to fail the search operation to make sure
that the exception flows back. The exception message changed so we
should catch the appropriate exception.

time:
2016-08-17T14:13:06Z
class:
comments:
Add NOTCONSOLE to a few of the docs

These are docs for the java client and console doesn't make much
sense there.

time:
2016-08-17T13:56:00Z
class:
comments:
Test response snippets in kuromoji docs

Relates to #18160

time:
2016-08-17T13:26:41Z
class:
comments:
Add `// CONSOLE` to much of pipeline agg docs

Most of the examples in the pipeline aggregation docs use a small
"sales" test data set and I converted all of the examples that use
it to `// CONSOLE`. There are still a bunch of snippets in the pipeline
aggregation docs that aren't `// CONSOLE` so they aren't tested. Most
of them are "this is the most basic form of this aggregation" so they
are more immune to errors and bit rot then the examples that I converted.
I'd like to do something with them as well but I'm not sure what.

Also, the moving average docs and serial diff docs didn't get a lot of
love from this pass because they don't use the test data set or follow
the same general layout.

Relates to #18160

time:
2016-08-17T12:40:59Z
class:
comments:
Update ingest.get_pipeline.json

The `id` parameter is not required

Closes #20010

time:
2016-08-17T11:39:22Z
class:
comments:
Update synonym-tokenfilter.asciidoc (#19988)

* Update synonym-tokenfilter.asciidoc

* Update synonym-tokenfilter.asciidoc

time:
2016-08-17T08:46:59Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingChangesObserver.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/IndexMetaDataUpdater.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesChangedObserver.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/ShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/cluster/ClusterModuleTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
test/framework/src/main/java/org/elasticsearch/test/ESAllocationTestCase.java
test/framework/src/main/java/org/elasticsearch/test/gateway/NoopGatewayAllocator.java
comments:
Add routing changes API to RoutingAllocation (#19992)

Adds a class that records changes made to RoutingAllocation, so that at the end of the allocation round other values can be more easily derived based on these changes. Most notably, it:

- replaces the explicit boolean flag that is passed around everywhere to denote changes to the routing table. The boolean flag is automatically updated now when changes actually occur, preventing issues where it got out of sync with actual changes to the routing table.
- records actual changes made to RoutingNodes so that primary term and in-sync allocation ids, which are part of index metadata, can be efficiently updated just by looking at the shards that were actually changed.

time:
2016-08-17T08:15:42Z
class:
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCreateIndexAction.java
comments:
Only use `PUT` for index creation, not POST. #20001

Currently both `PUT` and `POST` can be used to create indices. This commit
removes support for `POST index_name` so that we can use it to index documents
with auto-generated ids once types are removed.

Relates #15613

time:
2016-08-17T08:14:25Z
class:
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/StringMappingUpgradeTests.java
comments:
Automatically upgrade analyzed string fields that have `index_options` or `position_increment_gap` set. #20002

Closes #19974

time:
2016-08-17T07:22:16Z
class:
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/DiskThresholdMonitor.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/DiskThresholdSettings.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DiskThresholdSettingsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Internal: Split disk threshold monitoring from decider

In addition to be an allocation decider, DiskThresholdDecider also
monitors the used disk in order to trigger a reroute when the thresholds
are crossed. This change splits out the settings for disk thresholds
into DiskThresholdSettings, and moves the monitoring to a new
DiskThresholdMonitor.  DiskThresholdDecider is then in line with other
allocation deciders, needing only Settings and ClusterSettings for
construction, which will allow deguicing allocation deciders.

time:
2016-08-16T20:41:27Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/env/ShardLock.java
core/src/main/java/org/elasticsearch/env/ShardLockObtainFailedException.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/indices/IndicesServiceTests.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge remote-tracking branch 'dakrone/lockobtainfailed-replacement'

time:
2016-08-16T20:37:36Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/env/ShardLock.java
core/src/main/java/org/elasticsearch/env/ShardLockObtainFailedException.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/indices/IndicesServiceTests.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Switching LockObtainFailedException over to ShardLockObtainFailedException

`LobObtainFailedException` should be reserved for on-disk locks that
Lucene attempts (like `write.lock`). This switches our in-memory
semaphore locks for shards to use a different exception. Additionally,
ShardLockObtainFailedException no longer subclasses IOException, since
no IO is being done is this case.

Resolves #19978

time:
2016-08-16T20:30:26Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/MetaDataUpgrader.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
comments:
Merge pull request #19962 from areek/enhancement/plugins_upgrade_hook

Allow plugins to upgrade global custom metadata on startup

time:
2016-08-16T20:24:43Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/MetaDataUpgrader.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
comments:
Allow plugins to upgrade global custom metadata on startup

Currently plugins can not inspect or upgrade custom
meta data on startup. This commit allow plugins
to check and/or upgrade global custom meta data on startup.
Plugins can stop a node if any custom meta data is not supported.

time:
2016-08-16T20:03:18Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/UpdateByQueryRequest.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/CancelTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
comments:
Fix _update_by_query's ingest pipeline support

It wasn't being serialized so it wasn't working with the transport
client.

time:
2016-08-16T19:12:40Z
class:
modules/reindex/src/test/java/org/elasticsearch/index/reindex/CancelTests.java
comments:
Suppress failing test

This test was failing in the presence of transport clients. This turns
off transport clients while I fix the test so it doesn't fail for
everyone in the mean time.

time:
2016-08-16T18:29:20Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSuggestAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchRequestParsers.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationCollectorTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RestReindexActionTests.java
comments:
Merge pull request #20000 from rjernst/search_parser

Consolidate search parser registries

time:
2016-08-16T18:28:59Z
class:
core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollRequest.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/MaxRetryAllocationDecider.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/rest/action/AcknowledgedRestListener.java
core/src/main/java/org/elasticsearch/rest/action/RestActionListener.java
core/src/main/java/org/elasticsearch/rest/action/RestActions.java
core/src/main/java/org/elasticsearch/rest/action/RestBuilderListener.java
core/src/main/java/org/elasticsearch/rest/action/RestFieldStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/RestMainAction.java
core/src/main/java/org/elasticsearch/rest/action/RestResponseListener.java
core/src/main/java/org/elasticsearch/rest/action/RestStatusToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/RestToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterRerouteAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterStateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetTaskAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCloseIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestDeleteIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestForceMergeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetFieldMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestHeadIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestOpenIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRefreshAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestSyncedFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestUpgradeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestValidateQueryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/package-info.java
core/src/main/java/org/elasticsearch/rest/action/document/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestUpdateAction.java
core/src/main/java/org/elasticsearch/rest/action/document/package-info.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestDeletePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestSimulatePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/package-info.java
core/src/main/java/org/elasticsearch/rest/action/package-info.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSuggestAction.java
core/src/main/java/org/elasticsearch/rest/action/search/package-info.java
core/src/main/java/org/elasticsearch/rest/package-info.java
core/src/main/java/org/elasticsearch/search/Scroll.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ip/IpRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/DiversifiedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/GeoBoundsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/GeoCentroidAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/StatsBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/extended/ExtendedStatsBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/internal/InternalScrollSearchRequest.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchLocalRequest.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/action/search/SearchScrollRequestTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/rest/action/RestMainActionTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestTableTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/SearchRequestTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
core/src/test/java/org/elasticsearch/search/simple/SimpleSearchIT.java
core/src/test/java/org/elasticsearch/tasks/ListTasksResponseTests.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/MatrixAggregationPlugin.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/MatrixStatsAggregationBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateResponse.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkIndexByScrollResponseContentListener.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportRethrottleAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexTestCase.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/ExampleCatAction.java
test/framework/src/main/java/org/elasticsearch/node/MockNode.java
test/framework/src/main/java/org/elasticsearch/search/MockSearchService.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/test/java/org/elasticsearch/node/MockNodeTests.java
comments:
Merge branch 'master' into search_parser

time:
2016-08-16T18:25:34Z
class:
core/src/main/java/org/elasticsearch/search/SearchRequestParsers.java
comments:
Add comment about making parser members private instead of public

time:
2016-08-16T16:15:15Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestListTasksAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/tasks/ListTasksResponseTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportRethrottleAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexTestCase.java
comments:
Fix reindex under the transport client

The big change here is cleaning up the `TaskListResponse` so it doesn't
have a breaky `toString` implementation. That was causing the reindex
tests to break.

Also removed `NetworkModule#registerTaskStatus` which is part of the
Plugin API. Use `Plugin#getNamedWriteables` instead.

time:
2016-08-16T15:55:56Z
class:
comments:
[DOCS] Add missing index to test setup

#19884 fixed the aliases, but didn't add `index2` to the test setup which causes the
alias command to fail

time:
2016-08-16T15:25:45Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/MaxRetryAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
comments:
Primary shard allocator observes limits in forcing allocation (#19811)

Primary shard allocation observes limits in forcing allocation

Previously, during primary shards allocation of shards
with prior allocation IDs, if all nodes returned a
NO decision for allocation (e.g. the settings blocked
allocation on that node), we would chose one of those
nodes and force the primary shard to be allocated to it.

However, this meant that primary shard allocation
would not adhere to the decision of the MaxRetryAllocationDecider,
which would lead to attempting to allocate a shard
which has failed N number of times already (presumably
due to some configuration issue).

This commit solves this issue by introducing the
notion of force allocating a primary shard to a node
and each decider implementation must implement whether
this is allowed or not. In the case of MaxRetryAllocationDecider,
it just forwards the request to canAllocate.

Closes #19446

time:
2016-08-16T13:24:42Z
class:
comments:
Swap a index for the same alias (#19884)

In the example there was a alias removed and then a different alias created for the same index, but I think actually swapping a index by another one for the same alias would make more sense as an example here.

time:
2016-08-16T13:08:36Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ip/IpRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/DiversifiedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/GeoBoundsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/GeoCentroidAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/StatsBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/extended/ExtendedStatsBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregationBuilder.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/MatrixAggregationPlugin.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/MatrixStatsAggregationBuilder.java
test/framework/src/main/java/org/elasticsearch/node/MockNode.java
test/framework/src/main/java/org/elasticsearch/search/MockSearchService.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/test/java/org/elasticsearch/node/MockNodeTests.java
comments:
Switch aggregation registration for push to pull

Adds `getAggregations` to `SearchPlugin` which can be used to register
aggregations.

Fixup MockNode which wasn't createing MockBigArrays.

time:
2016-08-16T08:59:24Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchRequestParsers.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationCollectorTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RestReindexActionTests.java
comments:
Internal: Consolidate search parser registries

Parsing a search request is currently split up among a number of
classes, using multiple public static methods, which take multiple
regstries of elements that may appear in the search request like query
parsers and aggregations. This change begins consolidating all this code
by collapsing the registries normally used for parsing search requests
into a single SearchRequestParsers class. It is also made available to
plugin services to enable templating of search requests.  Eventually all
of the actual parsing logic should move to the class, and the registries
should be hidden, but for now they are at least co-located to reduce the
number of objects that must be passed around.

time:
2016-08-16T04:53:53Z
class:
comments:
Merge pull request #19876 from rjernst/gradle_pom_runtime_deps

Build: Fix compile time deps in poms and simplify transitive exclusions

time:
2016-08-16T03:36:01Z
class:
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
comments:
Merge pull request #19996 from rjernst/plugin_location

Plugins: Update official plugin location with unified release

time:
2016-08-16T01:06:32Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/rest/action/AcknowledgedRestListener.java
core/src/main/java/org/elasticsearch/rest/action/RestActionListener.java
core/src/main/java/org/elasticsearch/rest/action/RestActions.java
core/src/main/java/org/elasticsearch/rest/action/RestBuilderListener.java
core/src/main/java/org/elasticsearch/rest/action/RestFieldStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/RestMainAction.java
core/src/main/java/org/elasticsearch/rest/action/RestResponseListener.java
core/src/main/java/org/elasticsearch/rest/action/RestStatusToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/RestToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterRerouteAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterStateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetTaskAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCloseIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestDeleteIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestForceMergeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetFieldMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestHeadIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestOpenIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRefreshAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestSyncedFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestUpgradeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestValidateQueryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/package-info.java
core/src/main/java/org/elasticsearch/rest/action/document/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/document/RestUpdateAction.java
core/src/main/java/org/elasticsearch/rest/action/document/package-info.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestDeletePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestSimulatePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/package-info.java
core/src/main/java/org/elasticsearch/rest/action/package-info.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSuggestAction.java
core/src/main/java/org/elasticsearch/rest/action/search/package-info.java
core/src/main/java/org/elasticsearch/rest/package-info.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/rest/action/RestMainActionTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestTableTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateResponse.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkIndexByScrollResponseContentListener.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/ExampleCatAction.java
comments:
Squash the rest of o.e.rest.action

Squashes all the subpackages of `org.elasticsearch.rest.action` down to
the following:
* `o.e.rest.action.admin` - Administrative actions
* `o.e.rest.action.cat` - Actions that make tables for `grep`ing
* `o.e.rest.action.document` - Actions that act on documents
* `o.e.rest.action.ingest` - Actions that act on ingest pipelines
* `o.e.rest.action.search` - Actions that search

I'm tempted to merge `search` into `document` but the `document`
package feels fairly complete as is and `Suggest` isn't actually always
about documents either....

I'm also tempted to merge `ingest` into `admin.cluster` because the
latter contains the actions for dealing with stored scripts.

I've moved the `o.e.rest.action.support` into `o.e.rest.action`.

I've also added `package-info.java`s to all packges in `o.e.rest`. I
figure if the package is too small to deserve a `package-info.java` file
then it is too small to deserve to be a package....

Also fixes checkstyle in all moved classes.

time:
2016-08-16T01:00:16Z
class:
core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
comments:
Enable BoostingQuery with FVH highlighter (#19984)

* Enable BoostingQuery with FVH highlighter
* apply boost with negativeBoost
* flatten boosting query with its own boost and update boost query to a single layer

time:
2016-08-16T00:12:24Z
class:
comments:
add geo distance script breaking changes to migration docs

time:
2016-08-15T22:51:17Z
class:
core/src/test/java/org/elasticsearch/search/SearchRequestTests.java
comments:
Clear some more static state in tests

This was causing CI build failures that didn't reproduce consistently
locally. Hopefully this will fix the error on CI.

time:
2016-08-15T21:27:01Z
class:
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
comments:
Fix broken test

Randomized testing requires that we clean all the static state
in test classess.

time:
2016-08-15T21:26:48Z
class:
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollRequest.java
core/src/main/java/org/elasticsearch/search/Scroll.java
core/src/main/java/org/elasticsearch/search/internal/InternalScrollSearchRequest.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchLocalRequest.java
core/src/test/java/org/elasticsearch/action/search/SearchScrollRequestTests.java
core/src/test/java/org/elasticsearch/search/SearchRequestTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/internal/ShardSearchTransportRequestTests.java
core/src/test/java/org/elasticsearch/search/simple/SimpleSearchIT.java
comments:
Restore assignment of time value when deserializing a scroll instance (#19977)

* Assign scroll keepAlive when deserializing

The scroll time value was never assign when deserializing from the transport layer, meaning that it would always be null when received from another node, although the originating search request might have it set to some value.

* add tests for SearchRequest serialization and fail fast with illegal arguments

To ease testing, also introduced equals, hashcode and toString methods in SearchRequest and Scroll.

The serialization test brought up a few wrong assumptions about non null instance members, for which some null checks were needed to avoid NPEs when serializing.

* make Scroll implement Writeable rather than Streamable

* [TEST] add serialization test for ShardSearchTransportRequest

This also covers ShardSearchLocalRequest implicitly as most of the serialization code is in it.

time:
2016-08-15T20:24:11Z
class:
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
comments:
Plugins: Update official plugin locaion with unified release

This change updates the url pattern for official plugins to be inline
with what the unified release will produce.

time:
2016-08-15T20:17:58Z
class:
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
comments:
Removes support for adding aliases to analyzers. Indices created pre 5.x (#19994)

that have analyzer aliases in their analysis settings will still work, but
any attempts to create an alias for analyzers in newly created indices
will result in an IllegalArgumentException.

As a result, the setting `index.analysis.analyzer.{analyzerName}.alias` is
no longer supported.

Closes #18244

time:
2016-08-15T17:57:39Z
class:
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
comments:
remove ability to set field value in script-processor configuration (#19981)

time:
2016-08-15T14:02:43Z
class:
core/src/main/java/org/elasticsearch/action/ActionRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/tasks/Task.java
core/src/main/java/org/elasticsearch/tasks/TaskInfo.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskResult.java
core/src/main/java/org/elasticsearch/tasks/TaskResultsService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TasksIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TestTaskPlugin.java
core/src/test/java/org/elasticsearch/tasks/TaskResultTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequestBuilder.java
comments:
Rename Task Persistence into Storing Task Results

The term persisted task was used to indicate that a task should store its results upon its completion. We would like to use this term to indicate that a task can survive restart of nodes instead. This commit removes usages of the term "persist" when it means store results.

time:
2016-08-15T01:03:05Z
class:
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
comments:
Fix number of nodes in discovery disruption tests

This commit fixes the number of max local storage nodes setting used in
the discovery disruption tests. In some cases (randomly but rarely), the
acked indexing test can run with five nodes instead of three, breaching
the max local storage nodes configuration.

time:
2016-08-12T22:21:15Z
class:
core/src/main/java/org/elasticsearch/search/fetch/package-info.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ExplainFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/FastVectorHighlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightUtils.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/PlainHighlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/PostingsHighlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/SimpleFragmentsBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/SourceScoreOrderFragmentsBuilder.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/MatchedQueriesIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
comments:
Checkstyle

time:
2016-08-12T22:21:15Z
class:
core/src/main/java/org/apache/lucene/search/postingshighlight/CustomPassageFormatter.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/get/GetRequest.java
core/src/main/java/org/elasticsearch/action/get/GetRequestBuilder.java
core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchHit.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/package-info.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/DocValueFieldsFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ExplainFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/FetchSourceSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/InnerHitsFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/MatchedQueriesFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ParentFieldSubFetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ScriptFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/ScriptFieldsFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/VersionFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/AbstractHighlighterBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/CustomQueryScorer.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/FastVectorHighlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/FragmentBuilderHelper.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightField.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightUtils.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/Highlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterContext.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/PlainHighlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/PostingsHighlighter.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/SearchContextHighlight.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/SimpleFragmentsBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/SourceScoreOrderFragmentsBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/SourceSimpleFragmentsBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/highlight/package-info.java
core/src/main/java/org/elasticsearch/search/fetch/subphase/package-info.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/test/java/org/apache/lucene/search/postingshighlight/CustomPostingsHighlighterTests.java
core/src/test/java/org/apache/lucene/search/postingshighlight/CustomSeparatorBreakIteratorTests.java
core/src/test/java/org/elasticsearch/action/get/MultiGetShardRequestTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/mget/SimpleMgetIT.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/NestedChildrenFilterTests.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/CustomHighlighter.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/CustomHighlighterPlugin.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/CustomHighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/fetch/subphase/highlight/PlainHighlighterTests.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsIT.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateRequestBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateResponse.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateSourceBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhase.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhaseTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorQuerySearchIT.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Move all FetchSubPhases to `o.e.search.fetch.subphase`

As the most complicated `FetchSubPhase` highlighting gets its own package
(`o.e.seach.fetch.subphase.highlight`. No other `FetchSubPhase`s get their
own package. Instead they all reside together in `o.e.search.fetch.subphase`.

Add package descriptions to `o.e.search.fetch` and subpackages.

time:
2016-08-12T21:32:22Z
class:
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
comments:
Fix bug in single shard optimization when sorting documents in search request

This commit adds a function to shard-level query result to determine whether
there are any hits that needs fetching. Currently, a shard-level query result
can have hits when there are search hits and/or completion suggestion hits.
The newly added function encapsulates the checks to determine if a shard-level
query result has any fetchable hits, which is used in optimizing for sorting
documents and releasing search request contexts.

time:
2016-08-12T21:08:43Z
class:
comments:
[docs] Don't allow `[source,javascript]`

The syntax highlighter doesn't support it. Just use `js`.

time:
2016-08-12T20:49:57Z
class:
comments:
Add `// NOTCONSOLE` to docs

We have 1074 snippets that look like they should be converted to
`// CONSOLE`. At least that is what `gradle docs:listConsoleCandidates`
says. This adds `// NOTCONSOLE` to explicitly mark snippets that
*shouldn't* be converted to `// CONSOLE`. After marking the blindingly
obvious ones this cuts the remaining snippet count to 1032.

time:
2016-08-12T19:07:13Z
class:
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovySecurityTests.java
comments:
Merge remote-tracking branch 'dakrone/handle-groovy-errors-better'

time:
2016-08-12T19:06:49Z
class:
modules/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovySecurityTests.java
comments:
Catch AssertionError and NoClassDefFoundError in groovy scripts

Previously, we only caught subclasses of Exception, however, there are
some cases when Errors are thrown instead of Exceptions. These two cases
are `assert` and when a class cannot be found.

Without this change, the exception would bubble up to the
`uncaughtExceptionHandler`, which would in turn, exit the JVM
(related: #19923).

A note of difference between regular Java asserts and Groovy asserts,
from http://docs.groovy-lang.org/docs/latest/html/documentation/core-testing-guide.html

"Another important difference from Java is that in Groovy assertions are
enabled by default. It has been a language design decision to remove the
possibility to deactivate assertions."

In the event that a user uses an assert such as:

```groovy
def bar=false; assert bar, "message";
```

The GroovyScriptEngineService throws a NoClassDefFoundError being unable
to find the `java.lang.StringBuffer` class. It is *highly* recommended
that any Groovy scripting user switch to using regular exceptions rather
than unconfiguration Groovy assertions.

Resolves #19806

time:
2016-08-12T18:33:06Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
comments:
fix typo getMovingAverageMdelParserRegistry->getMovingAverageModelParserRegistry in SearchModule

time:
2016-08-12T18:30:08Z
class:
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
comments:
fix javadocs for SearchExtensionSpec

time:
2016-08-12T18:20:21Z
class:
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
Merge pull request #19969 from chengpohi/master

fix CompletionSuggestion test failed caused by shard is 1

time:
2016-08-12T17:19:30Z
class:
comments:
RESTART_ON_UPGRADE incorrectly named ES_RESTART_ON_UPGRADE in sysconfig (#19976)

Closes #19950

time:
2016-08-12T16:20:46Z
class:
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
fix CompletionSuggestion test failed caused by shard is 1

time:
2016-08-12T14:56:56Z
class:
comments:
Replaced "true" with true in snapshot restore docs

Closes #19947

time:
2016-08-12T14:42:10Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
comments:
Remove dead code that promotes replica relocation target to primary (#19973)

If a primary fails, an active replica is promoted to primary. Once we do the promotion, however, we are sure that the active replica is not relocating anymore. The reason is that when the primary fails, we first remove/cancel all initializing replicas (also if they are relocation targets). This is the only safe thing to do anyhow, because promoting relocating replica to primary would also mean that the replica recovery of the replica relocation target is suddenly promoted to primary relocation, which the recovery code treats in a different way.

time:
2016-08-12T14:00:54Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
core/src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
comments:
Merge pull request #19929 from johtani/fix/stop_using_cached_components_in_analyze_api

Stop using cached component in _analyze API

time:
2016-08-12T13:33:43Z
class:
core/src/main/java/org/elasticsearch/index/SearchSlowLog.java
core/src/test/java/org/elasticsearch/index/SearchSlowLogTests.java
comments:
Merge pull request #19949 from jimferenczi/slow_log_search

Add shardId and node name in search slow log

time:
2016-08-12T13:32:40Z
class:
core/src/main/java/org/elasticsearch/index/SearchSlowLog.java
core/src/test/java/org/elasticsearch/index/SearchSlowLogTests.java
comments:
Add the shard ID and the node name in the output of the search slow log.
This change outputs '[nodeName] [indexName][shardId]' instead of [indexName/indexUUID]

closes #19735

time:
2016-08-12T13:26:20Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoServiceIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerNoopIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
qa/evil-tests/src/test/java/org/elasticsearch/tribe/TribeUnitTests.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/discovery/ClusterDiscoveryConfiguration.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Default max local storage nodes to one

This commit defaults the max local storage nodes to one. The motivation
for this change is that a default value greather than one is dangerous
as users sometimes end up unknowingly starting a second node and start
thinking that they have encountered data loss.

Relates #19964

time:
2016-08-12T12:54:45Z
class:
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
comments:
Stop using cached component in _analyze API

Add javadoc some methods

Closes #19827

time:
2016-08-12T10:22:13Z
class:
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchIT.java
comments:
Merge pull request #19972 from jimferenczi/dfs_explain

Fix explain output for dfs query

time:
2016-08-12T10:14:38Z
class:
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchIT.java
comments:
Fix explain output for dfs query

ContextIndexSearcher#explain ignores the dfs data to create the normalized weight.
This change fixes this discrepancy by using the dfs data to create the normalized weight when needed.

time:
2016-08-11T19:44:02Z
class:
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TasksIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestIT.java
core/src/test/java/org/elasticsearch/bwcompat/IpFieldBwCompatIT.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoServiceIT.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/settings/SettingsFilteringIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/gateway/RecoveryFromGatewayIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/SettingsListenerIT.java
core/src/test/java/org/elasticsearch/index/TransportIndexFailuresIT.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/query/plugin/CustomQueryParserIT.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogIT.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
core/src/test/java/org/elasticsearch/indices/IndicesLifecycleListenerIT.java
core/src/test/java/org/elasticsearch/indices/IndicesOptionsIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzerIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/RandomExceptionCircuitBreakerIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexRecoveryIT.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/template/IndexTemplateFilteringIT.java
core/src/test/java/org/elasticsearch/ingest/IngestClientIT.java
core/src/test/java/org/elasticsearch/ingest/IngestProcessorNotInstalledOnAllNodesIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/recovery/TruncatedRecoveryIT.java
core/src/test/java/org/elasticsearch/script/ScriptFieldIT.java
core/src/test/java/org/elasticsearch/script/StoredScriptsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoHashGridIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWithRandomIOExceptionsIT.java
core/src/test/java/org/elasticsearch/search/child/ParentFieldLoadingIT.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreIT.java
core/src/test/java/org/elasticsearch/search/functionscore/ExplainableScriptIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginIT.java
core/src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoBoundingBoxIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoPolygonIT.java
core/src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/sort/FieldSortIT.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderIT.java
core/src/test/java/org/elasticsearch/search/sort/SimpleSortIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/ContextSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchIT.java
core/src/test/java/org/elasticsearch/snapshots/AbstractSnapshotIntegTestCase.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/timestamp/SimpleTimestampIT.java
core/src/test/java/org/elasticsearch/update/UpdateByNativeScriptIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexTestCase.java
modules/transport-netty3/src/test/java/org/elasticsearch/ESNetty3IntegTestCase.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3PipeliningEnabledIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/ESNetty4IntegTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AbstractAzureComputeServiceTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryClusterFormationTests.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTestCase.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryClusterFormationTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoverTests.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingIT.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureIntegTestCase.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureRepositoryServiceIntegTestCase.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureWithThirdPartyIntegTestCase.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageBlobStoreRepositoryTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTestCase.java
plugins/store-smb/src/test/java/org/elasticsearch/index/store/AbstractAzureFsTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruptionIT.java
comments:
Remove ESIntegTestCase#pluginList

It was a useful method in 1.7 when javac's type inference wasn't as
good, but now we can just replace it with `Arrays.asList`.

time:
2016-08-11T19:15:11Z
class:
comments:
Fix typos in inner-hits documentation (#19910)

time:
2016-08-11T19:10:58Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/DeleteByQueryRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/UpdateByQueryRequest.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/DeleteByQueryRequestTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/UpdateByQueryRequestTests.java
comments:
Merge pull request #19961 from javanna/fix/reindex_repleaceable

update and delete by query requests to implement IndicesRequest.Replaceable

time:
2016-08-11T18:36:14Z
class:
comments:
update ingest date index name processor with runnable CONSOLE examples (#19935)

time:
2016-08-11T18:29:27Z
class:
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
comments:
fix typo and make parseIndexConstraints method static in FieldStatsRequest

time:
2016-08-11T17:07:39Z
class:
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
comments:
Remove //norelease from IndexWithShadowReplicasIT test that checks
asserts the indices directory is deleted on index deletion, as we
are no longer considering it a blocker for releasing.

Relates #17695

time:
2016-08-11T16:11:26Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/UpdateByQueryRequest.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/UpdateByQueryRequestTests.java
comments:
UpdateByQueryRequest to implement IndicesRequest.Replaceable rather than CompositeIndicesRequest

Update by query is a shortcut to search + index. UpdateByQueryRequest gets serialized on the transport layer only when the transport client is used. Given that the request supports wildcards and allows to set its indices, it should implement IndicesRequest.Repleaceable. implementing CompositeIndicesRequest makes little sense as the indices that the request works against depend entirely on the inner search request.

time:
2016-08-11T16:11:26Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/DeleteByQueryRequest.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/DeleteByQueryRequestTests.java
comments:
DeleteByQueryRequest to implement IndicesRequest.Replaceable

Delete by query is a shortcut to search + delete. DeleteByQueryRequest gets serialized on the transport layer only when the transport client is used. Given that the request supports wildcards and allows to set its indices, it should implement IndicesRequest.Repleaceable

time:
2016-08-11T15:23:22Z
class:
comments:
Fix handling of spaces for jvm.options on Windows

This commit fixes the handling of spaces in the path to the jvm.options
file on Windows. The issue is that the extraneous set of quotes were
included as part of the value of ES_JVM_OPTIONS thus confusing further
downstream commands.

Relates #19951

time:
2016-08-11T13:54:03Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/SimpleExecutableScript.java
plugins/lang-javascript/src/main/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineService.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineTests.java
comments:
Make reindex and lang-javascript compatible

Fixes two issues:
1. lang-javascript doesn't support `executable` with a `null` `vars`
parameters. The parameter is quite nullable.
2. reindex didn't support script engines who's `unwrap` method wasn't
a noop. This didn't come up for lang-groovy or lang-painless because
both of those `unwrap`s were noops. lang-javascript copys all maps that
it `unwrap`s.

This adds fairly low level unit tests for these fixes but dosen't add
an integration test that makes sure that reindex and lang-javascript
play well together. That'd make backporting this difficult and would
add a fairly significant amount of time to the build for a fairly rare
interaction. Hopefully the unit tests will be enough.

time:
2016-08-11T13:25:34Z
class:
comments:
[DOCS] Fix shard request cache docs

Docs have been changed to reflect the fact that shard request cache is now enabled by default

Closes #19695

time:
2016-08-11T12:55:06Z
class:
core/src/test/java/org/elasticsearch/action/support/master/IndexingMasterFailoverIT.java
core/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesIT.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
test/framework/src/main/java/org/elasticsearch/test/disruption/BridgePartition.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDelaysPartition.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisconnectPartition.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruption.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruptionIT.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkDisruptionTests.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkPartition.java
test/framework/src/main/java/org/elasticsearch/test/disruption/NetworkUnresponsivePartition.java
comments:
Make NetworkPartition disruption scheme configurable (#19534)

This commit separates the description of the links in the network that are to be disrupted from the failure that is to be applied to the links (disconnect/unresponsive/delay). Previously we had subclasses for the various kind of network disruption schemes combining on one hand failure mode (disconnect/unresponsive/delay) as well as the network links to cut (two partitions / bridge partitioning) into a single class.

time:
2016-08-11T12:46:12Z
class:
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
Mute test CompletionSuggestionTests.testToReduce

Relates to #19896

time:
2016-08-11T12:19:03Z
class:
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
comments:
Merge pull request #19945 from jimferenczi/ttl_version_lookup

Remove useless PK lookup in IndicesTTLService

time:
2016-08-11T10:40:49Z
class:
core/src/main/java/org/elasticsearch/search/fetch/version/VersionFetchSubPhase.java
comments:
Merge pull request #19944 from jimferenczi/version_lookup

VersionFetchSubPhase should not use Versions#loadDocIdAndVersion

time:
2016-08-11T10:36:31Z
class:
comments:
Update inner-hits.asciidoc

Typo

Closes #19775

time:
2016-08-11T10:30:22Z
class:
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
comments:
Remove useless PK lookup in IndicesTTLService

This is a follow up of https://github.com/elastic/elasticsearch/pull/19944#issuecomment-239119859
Since the docid is known we can directly access the version doc value.

time:
2016-08-11T09:39:01Z
class:
core/src/main/java/org/elasticsearch/search/fetch/version/VersionFetchSubPhase.java
comments:
VersionFetchSubPhase should not use Versions#loadDocIdAndVersion

Since we already know the docId, the PK lookup is useless and we can directly get the value from the numeric doc values.

time:
2016-08-11T09:05:38Z
class:
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
comments:
[TEST] Leave default ping timeouts on tests that don't simulate network failures

Reducing the ping timeouts on a test that does not simulate network failures can cause node disconnects within the test on a slow CI machine.
The test testSearchWithRelocationAndSlowClusterStateProcessing does not expect such disconnects, leading to shard relocation in the test to abort prematurely.

time:
2016-08-11T01:22:53Z
class:
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
comments:
Mark halting the virtual machine as privileged

Today in the uncaught exception handler, we attempt to halt the virtual
machine on fatal errors. Yet, halting the virtual machine requires
privileges which might not be granted to the caller when the exception
is thrown for example from a scripting engine. This means that if an
OutOfMemoryError or another fatal error is hit inside a script, the
virtual machine will not exit because the halt call will be denied for
securiry privileges. In this commit, we mark this halt call as trusted
so that the virtual machine can be halted if a fatal error is
encountered in a script.

Relates #19923

time:
2016-08-11T01:20:00Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessScriptEngineService.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/ScriptImpl.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/WhenThingsGoWrongTests.java
comments:
Merge pull request #19936 from jdconrad/errors

Catch OutOfMemory and StackOverflow errors in Painless

time:
2016-08-11T01:09:45Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessScriptEngineService.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/ScriptImpl.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/WhenThingsGoWrongTests.java
comments:
Catch OutOfMemory and StackOverflow errors in Painless since it's safe
to do so.

time:
2016-08-11T00:11:02Z
class:
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
comments:
remove dots in field names tests for mapping api

time:
2016-08-10T23:44:08Z
class:
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperParserTests.java
comments:
Merge pull request #19899 from rjernst/dots_in_mapper_names

Mappings: Support dots in field names in mapping parsing

time:
2016-08-10T22:41:23Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java
core/src/main/java/org/elasticsearch/common/lucene/uid/PerThreadIDAndVersionLookup.java
core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/analysis/CustomAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/IndexIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/FieldsVisitor.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/JustUidFieldsVisitor.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/SingleFieldsVisitor.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ArrayValueMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper2x.java
core/src/main/java/org/elasticsearch/index/mapper/CustomDocValuesField.java
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/DynamicTemplate.java
core/src/main/java/org/elasticsearch/index/mapper/EnabledAttributeMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyLongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/MapperUtils.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TermBasedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ParentIdQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryShardContext.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/support/NestedScope.java
core/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValueType.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/fetch/parent/ParentFieldSubFetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/version/VersionFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/slice/SliceBuilder.java
core/src/main/java/org/elasticsearch/search/sort/SortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/DirectSpellcheckerSettings.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMappings.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/GeoContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/AnalyzingCompletionLookupProvider.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/ContextBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/GeolocationContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/Correction.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LaplaceScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LinearInterpolatingScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/StupidBackoffScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/WordScorer.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggestionBuilder.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/common/lucene/uid/VersionLookupTests.java
core/src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
core/src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
core/src/test/java/org/elasticsearch/explain/ExplainActionIT.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTestCase.java
core/src/test/java/org/elasticsearch/index/fielddata/FieldDataCacheTests.java
core/src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ParentChildFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/plain/HalfFloatFielddataTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldMapperPositionIncrementGapTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/CamelCaseFieldNameTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapper2xTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompoundTypesTests.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CustomBoostMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/DoubleIndexingDocTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapperPlugin.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/FakeStringFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/FieldLevelBoostTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldNamesFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GenericStoreDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoEncodingTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IdFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/IndexFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IndexFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/JavaMultiFieldMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyByteFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDoubleFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyIntegerFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyIpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyLongFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyShortFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MapperServiceTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldCopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldsIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/NestedObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NullValueObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/NullValueTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ParentFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ParentFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/PathMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/PathMatchDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/RoutingFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/StoredNumericValuesTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringFieldMapperPositionIncrementGapTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringMappingUpgradeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TTLFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TimestampFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TimestampFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TypeFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/UidFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/UpdateMappingOnClusterIT.java
core/src/test/java/org/elasticsearch/index/mapper/UpdateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/VersionFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/internal/ParentFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/package-info.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ParentIdQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryShardContextTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramOffsetIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DateDerivativeIT.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/internal/DefaultSearchContextTests.java
core/src/test/java/org/elasticsearch/search/query/ExistsIT.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearch2xIT.java
comments:
Merge branch 'master' into dots_in_mapper_names

time:
2016-08-10T22:35:53Z
class:
comments:
Add rest put mapping test with dot in fieldname

time:
2016-08-10T21:13:15Z
class:
comments:
Add complete examples to ingest-geoip docs

Adds `// CONSOLE` and example responses to both make usage more clear
and to test the snippets.

Relates to #18160

time:
2016-08-10T20:47:21Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerTransportTests.java
comments:
Fixes netty4 module's CORS config to use defaults  (#19874)

Fixes netty4 CORS config to use defaults for `http.cors.allow-methods`
and `http.cors.allow-headers` when none are specified.

time:
2016-08-10T18:38:33Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
comments:
Merge pull request #19926 from javanna/enhancement/threadcontext_cleanup

Reduce ThreadContext's inner classes visibility

time:
2016-08-10T17:41:34Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
core/src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
comments:
Stop using cached component in _analyze API

Stop calling tokenizer/tokenFilters/chaFilter method of IndexService
Add some getAnalysisProvider methods
Change SynonymTokenFilterFactory constructor

Closes #19827

time:
2016-08-10T17:22:22Z
class:
core/src/main/java/org/elasticsearch/search/suggest/DirectSpellcheckerSettings.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/Correction.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LaplaceScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LinearInterpolatingScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/StupidBackoffScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/WordScorer.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggestionBuilder.java
comments:
Merge pull request #19920 from cbuescher/remove-SuggestUtil

Remove SuggestUtil helper class

time:
2016-08-10T17:07:22Z
class:
comments:
Update documentation after merge with master

time:
2016-08-10T17:05:22Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java
core/src/main/java/org/elasticsearch/common/lucene/uid/PerThreadIDAndVersionLookup.java
core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/analysis/CustomAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/IndexIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/FieldsVisitor.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/JustUidFieldsVisitor.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/SingleFieldsVisitor.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ArrayValueMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper2x.java
core/src/main/java/org/elasticsearch/index/mapper/CustomDocValuesField.java
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/DynamicTemplate.java
core/src/main/java/org/elasticsearch/index/mapper/EnabledAttributeMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyLongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/MapperUtils.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TermBasedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ParentIdQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryShardContext.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/support/NestedScope.java
core/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValueType.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/fetch/parent/ParentFieldSubFetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/version/VersionFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/slice/SliceBuilder.java
core/src/main/java/org/elasticsearch/search/sort/SortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMappings.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/GeoContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/AnalyzingCompletionLookupProvider.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/ContextBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/GeolocationContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/main/java/org/elasticsearch/snapshots/ConcurrentSnapshotExecutionException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/common/lucene/uid/VersionLookupTests.java
core/src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
core/src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
core/src/test/java/org/elasticsearch/explain/ExplainActionIT.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTestCase.java
core/src/test/java/org/elasticsearch/index/fielddata/FieldDataCacheTests.java
core/src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ParentChildFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/plain/HalfFloatFielddataTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldMapperPositionIncrementGapTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/CamelCaseFieldNameTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapper2xTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompoundTypesTests.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CustomBoostMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/DoubleIndexingDocTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapperPlugin.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/FakeStringFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/FieldLevelBoostTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldNamesFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GenericStoreDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoEncodingTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IdFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/IndexFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IndexFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/JavaMultiFieldMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyByteFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDoubleFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyIntegerFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyIpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyLongFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyShortFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MapperServiceTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldCopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldsIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/NestedObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NullValueObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/NullValueTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ParentFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ParentFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/PathMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/PathMatchDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/RoutingFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/StoredNumericValuesTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringFieldMapperPositionIncrementGapTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringMappingUpgradeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TTLFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TimestampFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TimestampFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TypeFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/UidFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/UpdateMappingOnClusterIT.java
core/src/test/java/org/elasticsearch/index/mapper/UpdateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/VersionFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/internal/ParentFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/package-info.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ParentIdQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryShardContextTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramOffsetIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DateDerivativeIT.java
core/src/test/java/org/elasticsearch/search/controller/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/internal/DefaultSearchContextTests.java
core/src/test/java/org/elasticsearch/search/query/ExistsIT.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggesterBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
comments:
Merge branch 'master' into fix/19924-attachment

time:
2016-08-10T16:31:16Z
class:
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
comments:
Adds content-length as number

If you run Elasticsearch with the ingest-attachment plugin:

```sh
gradle plugins:ingest-attachment:run
```

And then you use it on a document:

```js
 PUT _ingest/pipeline/attachment
 {
   "description" : "Extract attachment information",
   "processors" : [
     {
       "attachment" : {
         "field" : "data"
       }
     }
   ]
 }
 PUT my_index/my_type/my_id?pipeline=attachment
 {
   "data": "e1xydGYxXGFuc2kNCkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0DQpccGFyIH0="
 }
 GET my_index/my_type/my_id
```

 You were getting this back:

```js
 # PUT _ingest/pipeline/attachment
 {
   "acknowledged": true
 }

 # PUT my_index/my_type/my_id?pipeline=attachment
 {
   "_index": "my_index",
   "_type": "my_type",
   "_id": "my_id",
   "_version": 2,
   "result": "updated",
   "_shards": {
     "total": 2,
     "successful": 1,
     "failed": 0
   },
   "created": false
 }

 # GET my_index/my_type/my_id
 {
   "_index": "my_index",
   "_type": "my_type",
   "_id": "my_id",
   "_version": 2,
   "found": true,
   "_source": {
     "data": "e1xydGYxXGFuc2kNCkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0DQpccGFyIH0=",
     "attachment": {
       "content_type": "application/rtf",
       "language": "ro",
       "content": "Lorem ipsum dolor sit amet",
       "content_length": "28"
     }
   }
 }
```

With this commit you are now getting:

```
 # GET my_index/my_type/my_id
 {
   "_index": "my_index",
   "_type": "my_type",
   "_id": "my_id",
   "_version": 2,
   "found": true,
   "_source": {
     "data": "e1xydGYxXGFuc2kNCkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0DQpccGFyIH0=",
     "attachment": {
       "content_type": "application/rtf",
       "language": "ro",
       "content": "Lorem ipsum dolor sit amet",
       "content_length": 28
     }
   }
 }
```

Closes #19924

time:
2016-08-10T16:09:25Z
class:
comments:
Add complete examples to some ingest docs

These examples should make it more clear what the plugins do and they
test that the snippets actually work.

Relates to #18160

time:
2016-08-10T16:06:35Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
comments:
reduce ThreadContext's inner classes visibility

time:
2016-08-10T16:03:39Z
class:
core/src/main/java/org/elasticsearch/search/suggest/DirectSpellcheckerSettings.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
comments:
Renaming method according to review comments

time:
2016-08-10T15:51:11Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java
core/src/main/java/org/elasticsearch/common/lucene/uid/PerThreadIDAndVersionLookup.java
core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/analysis/CustomAnalyzerProvider.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/IndexIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/FieldsVisitor.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/JustUidFieldsVisitor.java
core/src/main/java/org/elasticsearch/index/fieldvisitor/SingleFieldsVisitor.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ArrayValueMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper2x.java
core/src/main/java/org/elasticsearch/index/mapper/CustomDocValuesField.java
core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/DynamicTemplate.java
core/src/main/java/org/elasticsearch/index/mapper/EnabledAttributeMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyDoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyLongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/MapperUtils.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TermBasedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ParentIdQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryShardContext.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/support/NestedScope.java
core/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeQuery.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValueType.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/fetch/parent/ParentFieldSubFetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/version/VersionFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/slice/SliceBuilder.java
core/src/main/java/org/elasticsearch/search/sort/SortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMappings.java
core/src/main/java/org/elasticsearch/search/suggest/completion/context/GeoContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/AnalyzingCompletionLookupProvider.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/ContextBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/GeolocationContextMapping.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/common/lucene/uid/VersionLookupTests.java
core/src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
core/src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
core/src/test/java/org/elasticsearch/explain/ExplainActionIT.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTestCase.java
core/src/test/java/org/elasticsearch/index/fielddata/FieldDataCacheTests.java
core/src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ParentChildFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/plain/HalfFloatFielddataTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldMapperPositionIncrementGapTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/AllFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BinaryFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/BooleanFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/CamelCaseFieldNameTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapper2xTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompletionFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/CompoundTypesTests.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/CustomBoostMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/DateFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentMapperParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/DoubleIndexingDocTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMapperPlugin.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/FakeStringFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/FieldLevelBoostTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldNamesFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GenericStoreDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoEncodingTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IdFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/IndexFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IndexFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/IpFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/JavaMultiFieldMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/KeywordFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyByteFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDateFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyDoubleFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyIntegerFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyIpFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyLongFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyNumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyShortFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/LegacyTokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MapperServiceTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldCopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/MultiFieldsIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/NestedObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NullValueObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/NullValueTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/NumberFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/ObjectMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ParentFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ParentFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/PathMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/PathMatchDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/RoutingFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/SourceFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/StoredNumericValuesTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringFieldMapperPositionIncrementGapTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/StringMappingUpgradeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TTLFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TextFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TimestampFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TimestampFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/TypeFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/UidFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/UpdateMappingOnClusterIT.java
core/src/test/java/org/elasticsearch/index/mapper/UpdateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/VersionFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/internal/ParentFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/package-info.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ParentIdQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryShardContextTests.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramOffsetIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DateDerivativeIT.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/internal/DefaultSearchContextTests.java
core/src/test/java/org/elasticsearch/search/query/ExistsIT.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearch2xIT.java
modules/lang-expression/src/main/java/org/elasticsearch/script/expression/ExpressionScriptEngineService.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ClientScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
plugins/mapper-attachments/src/main/java/org/elasticsearch/mapper/attachments/AttachmentMapper.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/DateAttachmentMapperTests.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/LanguageDetectionAttachmentMapperTests.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/MultifieldAttachmentMapperTests.java
plugins/mapper-murmur3/src/main/java/org/elasticsearch/index/mapper/murmur3/Murmur3FieldMapper.java
plugins/mapper-size/src/main/java/org/elasticsearch/index/mapper/size/SizeFieldMapper.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Collapse o.e.index.mapper packages. #19921

I also reduced the visibility of a couple classes and renamed/consolidated some
test classes for consistency, eg. removing the `Simple` prefix or using the
`<Type>FieldMapperTests` convention for testing field mappers.

time:
2016-08-10T14:42:58Z
class:
comments:
Reword expect header bug notice

This commit rewords the expect header bug notice to provide the precise
details for the bug arising. In particular, the bug does not impact any
request over 1024 bytes, but instead impacts any request with a body
that is sent in two requests, the first with an Expect: 100-continue
header. The size is irrelevant, and requests with bodies larger than
1024 bytes are okay as long as the Expect: 100-continue header is not
also sent.

Relates #19911

time:
2016-08-10T14:42:28Z
class:
comments:
Disable all annotation processors

Some unused annotation processors caused build-time failures. Instead,
we should just be explicit about which annotation processors we will use
(if any) with additional command-line flags.

Relates #19919

time:
2016-08-10T14:20:34Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggestionBuilder.java
comments:
Removing use of ParseFields where we have alternative in other classes already

time:
2016-08-10T14:20:33Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/Correction.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LaplaceScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LinearInterpolatingScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/StupidBackoffScorer.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/WordScorer.java
comments:
Moving join() helper function to WordScorer

time:
2016-08-10T14:20:29Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
comments:
Move analysis helper methods to DirectCandidateGenerator