time:
2015-07-28T13:07:06Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractInternalHDRPercentiles.java
comments:
Aggregations: Fixes serialization of HDRHistogram in percentiles aggregations

Previously we would write the entire ByteBuffer to the stream to serialise the HDRHistogram even if it was not all needed. Now we only write the bytes that are actually written to in the ByteBuffer.

time:
2015-07-28T12:24:50Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/EmptyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/LimitQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryParser.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BaseTermQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ExistsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FilteredQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/LimitQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/MatchAllQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/MissingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SimpleQueryStringBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTest.java
comments:
[TEST] remove createExpectedQuery from BaseQueryTestCase

We currently test the toQuery method by comparing its return value with the output of createExpectedQuery. This seemed at first like a good deep test for the lucene generated queries, but ends up causing a lot of code duplication between tests and prod code, which smells like this test is not that useful after all.

This commit removes the requirement for createExpectedQuery, we test a bit less the lucene generated queries, but we do still have a testToQuery method in BaseQueryTestCase. This test acts as smoke test to verify that there are no issues with our toQuery method implementation for each query: it verifies that two equal queries should result in the same lucene query. It also verifies that changing the boost value of a query affects the result of the toQuery.

Part of the previous createExpectedQuery can be moved to assertLuceneQuery using normal assertions, we do it when it makes sense only though.

This commit also adds support for boost and queryName to SpanMultiTermQueryParser and SpanMultiTermQueryBuilder, plus it removes no-op setters for queryName and boost from QueryFilterBuilder. Instead we simply declare in our test infra that query filter doesn't support boost and queryName and we disable tests aroudn these fields in that specific case. Boost and queryName support is also moved down to the QueryBuilder interface.

Closes #12473

time:
2015-07-28T09:28:45Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/index/cache/request/RequestCacheStats.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
core/src/main/java/org/elasticsearch/search/warmer/IndexWarmersMetaData.java
core/src/test/java/org/elasticsearch/common/io/FileSystemUtilsTests.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesTests.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
plugins/cloud-azure/src/test/java/org/elasticsearch/repositories/azure/AzureSnapshotRestoreITest.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-28T09:17:47Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesTests.java
comments:
[Test] Muted all HDRPercentilesTests and HDRPercentileRanksTests

time:
2015-07-27T21:46:59Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
comments:
Update BulkProcessor.java

I suggest updating the BulkProcessor so that it prevents users from building a BulkProcessor with a null client.  If the client is null, then the class should throw an exception with a message that describes the cause of the exception.  Earlier today, when I passed a null client to the builder() method, later received an exception, and attempted to get the exception's message in my afterBulk() listener (e.g. e.getMessage()), the message was null.  It took me a while to pinpoint the cause of the problem.

time:
2015-07-27T20:23:32Z
class:
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
_all: Stop NPE querying _all when it doesn't exist

This can happen in two ways:
1. The _all field is disabled.
2. There are documents in the index, the _all field is enabled, but there are
no fields in any of the documents.

In both of these cases we now rewrite the query to a MatchNoDocsQuery which
should be safe because there isn't anything to match.

Closes #12439

time:
2015-07-27T20:09:25Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
comments:
Internal: IndicesStore shouldn't try to delete index after deleting a shard

When a node discovers shard content on disk which isn't used, we reach out to all other nodes that supposed to have the shard active. Only once all of those have confirmed the shard active, the shard has no unassigned copies *and* no cluster state change have happened in the mean while, do we go and delete the shard folder.

Currently, after removing a shard, the IndicesStores checks the indices services if that has no more shard active for this index and if so, it tries to delete the entire index folder (unless on master node, where we keep the index metadata around). This is wrong as both the check and the protections in IndicesServices.deleteIndexStore make sure that there isn't any shard *in use* from that index. However, it may be the we erroneously delete other unused shard copies on disk, without the proper safety guards described above.

Normally, this is not a problem as the missing copy will be recovered from another shard copy on another node (although a shame). However, in extremely rare cases involving multiple node failures/restarts where all shard copies are not available (i.e., shard is red) there are race conditions which can cause all shard copies to be deleted.

Instead, we should change the decision to clean up an index folder to based on checking the index directory for being empty and containing no shards.

time:
2015-07-27T19:20:50Z
class:
comments:
Merge pull request #11735 from pickypg/feature/use-gc-datestamps-11733

Add -XX:+PrintGCDateStamps when using GC Logs

time:
2015-07-27T19:17:54Z
class:
comments:
Add -XX:+PrintGCDateStamps when using GC Logs

Now that Elasticsearch requires Java 7 or later, it's safe to add `-XX:+PrintGCDateStamps` to get human readable times alongside JVM times.

time:
2015-07-27T17:52:51Z
class:
plugins/cloud-azure/src/test/java/org/elasticsearch/repositories/azure/AzureSnapshotRestoreITest.java
comments:
Add integration test for Azure snapshot repository bug

This commit adds an integration test that replicates the Azure snapshot repository bug in elastic/elasticsearch-cloud-azure#51.

Closes elastic/elasticsearch-cloud-azure#100

time:
2015-07-27T17:40:20Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksTests.java
comments:
[TEST] Mark 2 HDRPercentileRanks tests with AwaitsFix

time:
2015-07-27T17:37:58Z
class:
plugins/cloud-azure/src/test/java/org/elasticsearch/repositories/azure/AzureSnapshotRestoreITest.java
comments:
Use correct settings keys for setting container, base path and chunk size in Azure integration test

time:
2015-07-27T17:35:12Z
class:
comments:
[DOCS] update TESTING doc running from source

cc @dakrone

see also elasticsearch@48bc49c093516def7cad468d1d97d490d4f609e9

time:
2015-07-27T17:28:37Z
class:
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
comments:
Check for existence of snapshot index file before attempting delete

time:
2015-07-27T16:57:14Z
class:
comments:
[build] Update to maven-shade-plugin 2.4.1

```xml
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-shade-plugin</artifactId>
 <version>2.4.1</version>
</plugin>
```

Release Notes - Maven Shade Plugin - Version 2.4.1
-----------------

https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12317921&version=12332978

Bugs:

* [MSHADE-148] - Shade Plugin gets stuck in infinite loop building dependency reduced POM
* [MSHADE-194] - Reporting uses maven-invoker-plugin version 1.9 instead of 1.10

time:
2015-07-27T15:50:54Z
class:
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
comments:
Build: Split packages into submodules

This change creates a proper `distribution` modules in which we have today packaging for
all of our four current packages:

* zip
* tar.gz
* rpm
* deb

Licenes have moved into the distribution project as well. So have the config/ and the bin/ directory
from the core/ project.

The RPM package is now built, if rpmbuild exists.

The bats tests have been moved as well.

Also the zip distribution now executes the REST integration tests.

time:
2015-07-27T14:52:10Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
comments:
Remove Core Lib directory

time:
2015-07-27T14:49:47Z
class:
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
comments:
Revert "Revert "Consistently name Groovy scripts with the same content""

This reverts commit a33cfe4b11c55652eb04980664e0d2d973903f93.

time:
2015-07-27T14:42:47Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesTests.java
comments:
[TEST] muted HDRPercentilesTests.testScript_ExplicitSingleValued_WithParams

time:
2015-07-27T14:21:32Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/test/java/org/elasticsearch/common/io/FileSystemUtilsTests.java
comments:
Merge pull request #12484 from jpountz/fix/forbid_Files_isHidden

Forbid Files.isHidden.

time:
2015-07-27T14:13:04Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/test/java/org/elasticsearch/common/io/FileSystemUtilsTests.java
comments:
Forbid Files.isHidden.

As Robert pointed out on #12465, it has the undesirable property of relying on
the operating system. So it would be better to use a simple rule such as
checking whether the file name starts with a dot.

time:
2015-07-27T12:16:39Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasOrIndex.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/benchmark/aliases/AliasesBenchmark.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/ack/AckTests.java
core/src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge branch 'master' into feature/query-refactoring

	core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java

time:
2015-07-27T11:28:15Z
class:
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/index/cache/request/RequestCacheStats.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/warmer/IndexWarmersMetaData.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsTests.java
core/src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Left over from the `query_cache` to `request_cache` rename.

time:
2015-07-27T10:40:11Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesTests.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge pull request #11666 from brwe/meta-data-zen

[TEST] remove redundant tests and move to different suite

time:
2015-07-27T10:35:25Z
class:
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesTests.java
comments:
check if index is closed or was previously closed when gathering relevant indices to write meta state

When an index is opened it will not be assigned to a node but also not have closed state
anymore. Before we only checked if an index either is closed or assigned to the data node
and therefore the change from close->open was not written.

time:
2015-07-27T10:35:13Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsTests.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesTests.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
comments:
[TEST] remove redundant tests and move to different suite

Some of the test for meta data are redundant. Also, since they
somewhat test service disruptions (start master with empty
data folder) we might move them to DiscoveryWithServiceDisruptionsTests.
Also, this commit adds a test for
https://github.com/elastic/elasticsearch/issues/11665

time:
2015-07-27T10:12:20Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
comments:
Merge pull request #12430 from ruflin/ip_range-mask-fix

Fix cidr mask conversion issue for 0.0.0.0/0 and add tests #12005

time:
2015-07-27T09:35:19Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
comments:
Query DSL: don't cache type filter in DocumentMapper

If we cache the type filter and we e.g. set its boost which is now settable on all queries, the boost will change for all subsequent queries. We should rather create a new query every time.

time:
2015-07-27T08:39:04Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
comments:
Move index creation to test setup method

time:
2015-07-27T08:06:45Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
comments:
Merge pull request #12465 from xuzha/xu-skip-hidden

skip hidden files

time:
2015-07-27T07:11:04Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
comments:
Revert change to set longTo to "MAX_IP -1" and improve test suite to check for range

time:
2015-07-26T22:01:48Z
class:
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
comments:
No need to find replica copy when index is created
There is no need to try and go fetch replica copies for best allocation when the index is created

time:
2015-07-26T08:16:29Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
comments:
skip hidden files

time:
2015-07-25T19:29:15Z
class:
core/src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
comments:
Preserve the root cause when encountering an exception expecting to have reached the end of the setting stream

time:
2015-07-24T20:04:11Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/AliasOrIndex.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/benchmark/aliases/AliasesBenchmark.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
Cleaned up the data structures used in MetaData for alias and index lookups.

Major changes:
* Changed MetaData to holds alias and index lookup information into a single TreeMap instead of two separate maps.
* Moved the building of the alias / index lookup to the metadata builder.

time:
2015-07-24T17:52:00Z
class:
core/src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java
comments:
Merge pull request #12451 from jasontedor/fix/12382

Add explicit check that we have reached the end of the settings stream when parsing settings

time:
2015-07-24T17:19:37Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentile.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/Percentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesMethod.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractHDRPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractInternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/HDRPercentileRanksAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/HDRPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/AbstractInternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/AbstractTDigestPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/TDigestPercentileRanksAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/TDigestPercentilesAggregator.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/HDRPercentilesAggregationBenchmark.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TDigestPercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TDigestPercentilesTests.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-24T17:12:44Z
class:
core/src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java
comments:
Add explicit check that we have reached the end of the settings stream when parsing settings

Settings are currently parsed by looping over the tokens until an END_OBJECT token is reached. However, this does not mean that the end of
the settings stream was reached. This can occur, for example, when parsing a YAML settings file with inconsistent indentation. Currently
in this case, some settings will be silently ignored. This commit forces a check that we have in fact reached the end of the settings
stream.

Closes #12382

time:
2015-07-24T16:55:36Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentile.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/Percentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesMethod.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractHDRPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractInternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/HDRPercentileRanksAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/HDRPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/AbstractInternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/AbstractTDigestPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/TDigestPercentileRanksAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/TDigestPercentilesAggregator.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/HDRPercentilesAggregationBenchmark.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TDigestPercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TDigestPercentilesTests.java
comments:
Aggregations: Add HDRHistogram as an option in percentiles and percentile_ranks aggregations

HDRHistogram has been added as an option in the percentiles and percentile_ranks aggregation. It has one option `number_significant_digits` which controls the accuracy and memory size for the algorithm

Closes #8324

time:
2015-07-24T16:52:48Z
class:
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
comments:
Query DSL: assign result of validateInnerQuery in ConstantScoreQueryBuilder

time:
2015-07-24T16:50:34Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
comments:
Merge pull request #12447 from javanna/enhancement/dont_cache_type_query

Query DSL: don't cache type filter in DocumentMapper

time:
2015-07-24T16:37:17Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
comments:
Query DSL: don't cache type filter in DocumentMapper

If we cache the type filter and we e.g. set its boost which is now settable on all queries, the boost will change for all subsequent queries. We should rather create a new query every time.

time:
2015-07-24T16:17:36Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/OrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
comments:
Merge pull request #12444 from cbuescher/feature/query-refactoring-nullCheckCleanup

Query Refactoring: Move null-checks to validate

time:
2015-07-24T15:59:36Z
class:
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
comments:
Tests: Fix TermVectorsUnitTests to not rely on HashMap iteration order.

time:
2015-07-24T15:57:17Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/get/GetRequest.java
core/src/main/java/org/elasticsearch/action/get/MultiGetShardRequest.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/SingleShardRequest.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsShardRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/IndexSearcherWrapper.java
core/src/main/java/org/elasticsearch/index/engine/IndexSearcherWrappingService.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractAtomicOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexGeoPointFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DisabledIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentTypeListener.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardModule.java
core/src/main/java/org/elasticsearch/index/shard/ShadowIndexShard.java
core/src/main/java/org/elasticsearch/index/shard/ShardUtils.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTest.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/query/ExistsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/MissingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
core/src/test/java/org/elasticsearch/test/StackTraces.java
core/src/test/java/org/elasticsearch/test/junit/listeners/AssertionErrorThreadDumpPrinter.java
core/src/test/java/org/elasticsearch/transport/netty/KeyedLockTests.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-24T15:37:15Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Merge pull request #12424 from rmuir/plugin_java_version

make java.version mandatory for jvm plugins

time:
2015-07-24T15:36:25Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/OrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
comments:
Query Refactoring: Move null-checks from constructors and setters to validate

Following up to #12427, this PR does same changes, moving null-checks from construtors
and setters in query builder to the validate() method.

PR against query-refactoring branch

time:
2015-07-24T15:12:52Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/get/GetRequest.java
core/src/main/java/org/elasticsearch/action/get/MultiGetShardRequest.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/SingleShardRequest.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsShardRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/IndexSearcherWrapper.java
core/src/main/java/org/elasticsearch/index/engine/IndexSearcherWrappingService.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardModule.java
core/src/main/java/org/elasticsearch/index/shard/ShadowIndexShard.java
core/src/main/java/org/elasticsearch/index/shard/ShardUtils.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
core/src/test/java/org/elasticsearch/test/StackTraces.java
core/src/test/java/org/elasticsearch/test/junit/listeners/AssertionErrorThreadDumpPrinter.java
comments:
Merge branch 'master' into plugin_java_version

time:
2015-07-24T15:09:16Z
class:
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
comments:
Make sure filter is correctly parsed for multi-term vectors

This makes sure the `filter` parameter is correctly parsed in a multi-term
vector request when using `ids` and `parameters`.

Closes #12311
Closes #12312

time:
2015-07-24T14:29:51Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
comments:
Allocation: ThrottlingAllocationDecider should not counting relocating shards

The ThrottlingAllocationDecider is responsible to limit the number of incoming/local recoveries on a node. It therefore shouldn't count shards marked as relocating which represent the source of the recovery.

Closes #12409

time:
2015-07-24T13:52:18Z
class:
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java
core/src/main/java/org/elasticsearch/index/engine/IndexSearcherWrapper.java
core/src/main/java/org/elasticsearch/index/engine/IndexSearcherWrappingService.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardModule.java
core/src/main/java/org/elasticsearch/index/shard/ShadowIndexShard.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
comments:
Added IndexSearcherWrapper extension point.

This extension point allows one IndexSearcherWrapper instance to intercept the searcher from the Engine before it is used for a opertion.

time:
2015-07-24T13:45:39Z
class:
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
comments:
Merge pull request #12440 from cbuescher/feature/query-refactoring-constructorCleanup

Extended SpanFirstQueryBuilderTest

time:
2015-07-24T13:19:20Z
class:
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
comments:
Extended SpanFirstQueryBuilderTest

time:
2015-07-24T12:46:49Z
class:
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTest.java
comments:
Refactors WildcardQueryBuilder and Parser

Relates to #10217
Closes #12110

This PR is against the query-refactoring branch.

time:
2015-07-24T12:19:53Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
comments:
Merge pull request #12417 from cbuescher/remove-rangequery-context

Remove unused QueryParseContext argument in MappedFieldType#rangeQuery()

time:
2015-07-24T12:19:32Z
class:
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
comments:
Merge pull request #12423 from khiraiwa/patch-1

Interval time is different from the doc value.

time:
2015-07-24T12:16:54Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
comments:
Merge pull request #12427 from cbuescher/feature/query-refactoring-constructorCleanup

Moving null-checks from constructors to validate()

time:
2015-07-24T11:49:07Z
class:
core/src/main/java/org/elasticsearch/index/shard/ShardUtils.java
comments:
ShardUtils#getElasticsearchLeafReader() should use FilterLeafReader#getDelegate() instead of FilterLeafReader#unwrap

If there are multiple levels of filtered leaf readers then with the unwrap() method it immediately returns the most inner leaf reader and thus skipping of over any other filtered leaf reader that may be instance of ElasticsearchLeafReader. By using #getDelegate() method we can check each filter reader layer if it is instance of ElasticsearchLeafReader, so that we never skip over any wrapped filtered leaf reader and lose the shard id.

time:
2015-07-24T11:09:47Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Core: Adapt IndicesClusterStateService to use allocation ids

 Also, as set of utility methods was introduced on ShardRouting to do various types of matching with other shard routings, giving control about what exactly should be matched (same shard id, same allocation id, all but version and shard info etc.). This is useful here, but also prepares the grounds for the change needed in #12387 (making ShardRouting.equals be strict and perform exact equality).

Closes #12397

time:
2015-07-24T10:16:44Z
class:
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryParser.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTest.java
comments:
Refactors ScriptQueryBuilder and Parser

Relates to #10217
Closes #12115

This PR is against the query-refactoring branch.

time:
2015-07-24T10:13:03Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
comments:
Cancel replica recovery on another sync option copy found
When a replica is initializing from the primary, and we find a better node that has full sync id match, it is better to cancel the existing replica allocation and allocate it to the new node with sync id match (eventually)

time:
2015-07-24T10:08:48Z
class:
core/src/main/java/org/elasticsearch/index/query/TypeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TypeQueryParser.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTest.java
comments:
Refactors TypeQuery

Relates to #10217
Closes #12035

This PR is against the query-refactoring branch.

time:
2015-07-24T09:46:55Z
class:
core/src/main/java/org/elasticsearch/index/query/BaseTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTest.java
comments:
Refactors PrefixQuery

Relates to #10217
Closes #12032

This PR is against the query-refactoring branch.

time:
2015-07-24T09:13:39Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
comments:
Moving null-checks from constructors to validate()

time:
2015-07-24T08:08:28Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MissingFieldQueryExtension.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryParser.java
core/src/test/java/org/elasticsearch/index/query/MissingQueryBuilderTest.java
comments:
Refactoring of MissingQuery

Relates to #10217
Closes #12030

This PR is against the query-refactoring branch.

time:
2015-07-23T17:06:09Z
class:
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
comments:
Merge pull request #12419 from jaymode/fix_settings_classloader

Copy the classloader from the original settings when checking for prompts

time:
2015-07-23T16:53:27Z
class:
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
comments:
copy the classloader from the original settings when checking for prompts

Today, when a user provides settings and specifies a classloader to be used, the classloader gets
dropped when we copy the settings to check for prompt entries. This change copies the classloader
when replacing the prompt placeholders and adds a test to ensure the InternalSettingsPreparer
always retains the classloader.

Closes #12340

time:
2015-07-23T15:40:53Z
class:
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/query/support/QueryParsers.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTest.java
comments:
Refactoring of RegexpQuery

Relates to #10217
Closes #11896

This PR is against the query-refactoring branch.

time:
2015-07-23T15:37:55Z
class:
comments:
improve plugin file some more

time:
2015-07-23T15:29:43Z
class:
core/src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
core/src/test/java/org/elasticsearch/test/StackTraces.java
core/src/test/java/org/elasticsearch/test/junit/listeners/AssertionErrorThreadDumpPrinter.java
comments:
Dump stack traces of all threads on test failure due to AssertionError

Closes #12425

time:
2015-07-23T15:13:54Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
comments:
Add shadow indicator when using shadow replicas

time:
2015-07-23T15:10:39Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryWrappingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryParser.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
comments:
Merge pull request #12342 from cbuescher/feature/query-refactoring-spanor

Query refactoring: SpanOrQueryBuilder and Parser

time:
2015-07-23T14:58:52Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
make java.version mandatory for jvm plugins

JarHell has a low level check, but its more of a best effort one,
only checking if X-Compile-Target-JDK is set in the manifest. This
is the case for all lucene- and elasticsearch- generated jars, but
lets just be explicit for plugins.

time:
2015-07-23T14:58:42Z
class:
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
comments:
Interval time is different from the doc value.

I think the value is 30.

time:
2015-07-23T14:42:10Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/get/GetRequest.java
core/src/main/java/org/elasticsearch/action/get/MultiGetShardRequest.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/SingleShardRequest.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsShardRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
comments:
Removing TransportSingleCustomOperationAction in favour of TransportSingleShardAction to clean up code.

The TransportSingleCustomOperationAction `prefer_local` option has been removed as it isn't worth the effort.
The TransportSingleShardAction will execute the operation on the receiving node if a concrete list doesn't provide a list of candite shards routings to perform the operation on.

time:
2015-07-23T14:07:37Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentTypeListener.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
core/src/test/java/org/elasticsearch/transport/netty/KeyedLockTests.java
comments:
Merge pull request #12418 from jpountz/fix/parent_fielddata_caching

Fix fielddata handling for the `_parent` field.

time:
2015-07-23T12:31:42Z
class:
comments:
In the license checker, check for the existence of the specfied package before trying to unpack it

time:
2015-07-23T12:13:21Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentTypeListener.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
core/src/test/java/org/elasticsearch/transport/netty/KeyedLockTests.java
comments:
Fix fielddata handling for the `_parent` field.

Change #12371 broke fielddata on the `_parent` child for indices created before
2.0. This pull request adds back caching of the `_parent` fielddata for indices
created before 2.0 and cleans some related stuff. For instance
DocumentTypeListener doesn't need to take care of removed mappings anymore since
mappings can't be removed in 2.0.

time:
2015-07-23T12:00:03Z
class:
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
comments:
parent/child field data is an exception to the rule, because it is based on two fields...

time:
2015-07-23T12:00:03Z
class:
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractAtomicOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexGeoPointFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DisabledIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTest.java
comments:
field data: If a field doesn't exist in field info then always return a non cached empty atomic reader.

time:
2015-07-23T11:16:59Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Merge pull request #12408 from rmuir/adapt_pluginmanager

Adapt pluginmanager to the new world

time:
2015-07-23T11:16:24Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
improve exception messages

time:
2015-07-23T10:32:26Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FieldValueFactorFunction.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfoTest.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/plugins/lucene/current/CurrentLucenePlugin.java
core/src/test/java/org/elasticsearch/plugins/lucene/newer/NewerLucenePlugin.java
core/src/test/java/org/elasticsearch/plugins/lucene/old/OldLucenePlugin.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreFieldValueTests.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
plugins/cloud-aws/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTest.java
plugins/cloud-aws/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryITest.java
plugins/cloud-aws/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryUpdateSettingsITest.java
plugins/cloud-aws/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/cloud-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureTest.java
plugins/cloud-azure/src/test/java/org/elasticsearch/discovery/azure/AbstractAzureComputeServiceTest.java
plugins/cloud-azure/src/test/java/org/elasticsearch/repositories/azure/AbstractAzureRepositoryServiceTest.java
plugins/cloud-gce/src/test/java/org/elasticsearch/cloud/gce/AbstractGceTest.java
plugins/cloud-gce/src/test/java/org/elasticsearch/discovery/gce/GceComputeEngineTest.java
plugins/cloud-gce/src/test/java/org/elasticsearch/gce/itest/GceSimpleITest.java
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/DeleteByQueryTests.java
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/test/rest/DeleteByQueryRestTests.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-23T10:08:02Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
core/src/main/java/org/elasticsearch/index/search/geo/IndexedGeoBoundingBoxQuery.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
comments:
Remove unused QueryParseContext argument in MappedFieldType#rangeQuery()

The rangeQuery() method in MappedFieldType and some overwriting subtypes takes
a nullable QueryParseContext argument which is unused and can be deleted.
This is also useful for the current query parsing refactoring, since
we want to avoid passing the context object around unnecessarily.

time:
2015-07-23T10:06:06Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
comments:
Test: await fix on IndicesShardStoreRequestTests.testCorruptedShards

time:
2015-07-23T09:26:47Z
class:
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
comments:
Merge pull request #12386 from brwe/shard-active-test

[Test] make cluster state blocking more reliable in IndicesStoreIntegrationTests.indexCleanup()

time:
2015-07-23T09:26:15Z
class:
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
comments:
[Test] make cluster state blocking more reliable in IndicesStoreIntegrationTests.indexCleanup()

IndicesStoreIntegrationTests.indexCleanup() tests if the shard files on disk are actually removed
after relocation. In particular it tests the following:
Whenever a node deletes a shard because it was relocated somewhere else, it first
checks if enough other copies are started somewhere else. The node sends a
ShardActiveRequest to the nodes that should have a copy.
The nodes that receive this request check if the shard is in state STARTED in which case
they respond with true. If they have the shard in POST_RECOVERY they register a cluster state
observer that checks at each update if the shard has moved to STARTED and respond with true when
this happens.

To test that the cluster state observer mechanism actually works, the latter can be triggered by
blocking the cluster state processing when a recover starts and only unblocking it shortly
after the node receives the ShardActiveRequest.

This is more reliable than using random cluster state processing delays
because the random delays make it hard to reason about different timeouts
that can be reached.

closes #11989

time:
2015-07-23T05:47:39Z
class:
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
comments:
Simplify Replica Allocator
Simplify the codebase of replica allocator and add more unit tests for it

time:
2015-07-23T03:52:34Z
class:
comments:
remove obselete zips

time:
2015-07-23T03:38:36Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
fix test to not use zips

time:
2015-07-23T02:19:44Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
complete jar hell checks

time:
2015-07-23T01:52:36Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Use plugin descriptor file to cleanup pluginmanager logic and improve validation

time:
2015-07-22T17:15:57Z
class:
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
comments:
Revert "Consistently name Groovy scripts with the same content"

This reverts commit d902012835916179e0bb86890e7898cc30aef70a.

Reverting this temporarily to see if this fixes hitting an assert in the
JDK during Groovy's classloading

time:
2015-07-22T16:42:15Z
class:
comments:
skip this download/copy unless it will be used.

this makes less noise and disk space for the POM builds.

time:
2015-07-22T14:45:45Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/plugins/PluginInfo.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfoTest.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryTests.java
core/src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginInfoTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/plugins/lucene/current/CurrentLucenePlugin.java
core/src/test/java/org/elasticsearch/plugins/lucene/newer/NewerLucenePlugin.java
core/src/test/java/org/elasticsearch/plugins/lucene/old/OldLucenePlugin.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
plugins/cloud-aws/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTest.java
plugins/cloud-aws/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryITest.java
plugins/cloud-aws/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryUpdateSettingsITest.java
plugins/cloud-aws/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/cloud-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureTest.java
plugins/cloud-azure/src/test/java/org/elasticsearch/discovery/azure/AbstractAzureComputeServiceTest.java
plugins/cloud-azure/src/test/java/org/elasticsearch/repositories/azure/AbstractAzureRepositoryServiceTest.java
plugins/cloud-gce/src/test/java/org/elasticsearch/cloud/gce/AbstractGceTest.java
plugins/cloud-gce/src/test/java/org/elasticsearch/discovery/gce/GceComputeEngineTest.java
plugins/cloud-gce/src/test/java/org/elasticsearch/gce/itest/GceSimpleITest.java
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/DeleteByQueryTests.java
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/test/rest/DeleteByQueryRestTests.java
comments:
Refactor pluginservice

Closes #12367

Squashed commit of the following:

commit 9453c411798121aa5439c52e95301f60a022ba5f
Merge: 3511a9c 828d8c7
Author: Robert Muir <rmuir@apache.org>
Date:   Wed Jul 22 08:22:41 2015 -0400

    Merge branch 'master' into refactor_pluginservice

commit 3511a9c616503c447de9f0df9b4e9db3e22abd58
Author: Ryan Ernst <ryan@iernst.net>
Date:   Tue Jul 21 21:50:15 2015 -0700

    Remove duplicated constant

commit 4a9b5b4621b0ef2e74c1e017d9c8cf624dd27713
Author: Ryan Ernst <ryan@iernst.net>
Date:   Tue Jul 21 21:01:57 2015 -0700

    Add check that plugin must specify at least site or jvm

commit 19aef2f0596153a549ef4b7f4483694de41e101b
Author: Ryan Ernst <ryan@iernst.net>
Date:   Tue Jul 21 20:52:58 2015 -0700

    Change plugin "plugin" property to "classname"

commit 07ae396f30ed592b7499a086adca72d3f327fe4c
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 23:36:05 2015 -0400

    remove test with no methods

commit 550e73bf3d0f94562f4dde95239409dc5a24ce25
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 23:31:58 2015 -0400

    fix loading to use classname

commit 04463aed12046da0da5cac2a24c3ace51a79f799
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 23:24:19 2015 -0400

    rename to classname

commit 9f3afadd1caf89448c2eb913757036da48758b2d
Author: Ryan Ernst <ryan@iernst.net>
Date:   Tue Jul 21 20:18:46 2015 -0700

    moved PluginInfo and refactored parsing from properties file

commit df63ccc1b8b7cc64d3e59d23f6c8e827825eba87
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 23:08:26 2015 -0400

    fix test

commit c7febd844be358707823186a8c7a2d21e37540c9
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 23:03:44 2015 -0400

    remove test

commit 017b3410cf9d2b7fca1b8653e6f1ebe2f2519257
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 22:58:31 2015 -0400

    fix test

commit c9922938df48041ad43bbb3ed6746f71bc846629
Merge: ad59af4 01ea89a
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 22:37:28 2015 -0400

    Merge branch 'master' into refactor_pluginservice

commit ad59af465e1f1ac58897e63e0c25fcce641148a7
Author: Areek Zillur <areek.zillur@elasticsearch.com>
Date:   Tue Jul 21 19:30:26 2015 -0400

    [TEST] Verify expected number of nodes in cluster before issuing shardStores request

commit f0f5a1e087255215b93656550fbc6bd89b8b3205
Author: Lee Hinman <lee@writequit.org>
Date:   Tue Jul 21 11:27:28 2015 -0600

    Ignore EngineClosedException during translog fysnc

    When performing an operation on a primary, the state is captured and the
    operation is performed on the primary shard. The original request is
    then modified to increment the version of the operation as preparation
    for it to be sent to the replicas.

    If the request first fails on the primary during the translog sync
    (because the Engine is already closed due to shadow primaries closing
    the engine on relocation), then the operation is retried on the new primary
    after being modified for the replica shards. It will then fail due to the
    version being incorrect (the document does not yet exist but the request
    expects a version of "1").

    Order of operations:

    - Request is executed against primary
    - Request is modified (version incremented) so it can be sent to replicas
    - Engine's translog is fsync'd if necessary (failing, and throwing an exception)
    - Modified request is retried against new primary

    This change ignores the exception where the engine is already closed
    when syncing the translog (similar to how we ignore exceptions when
    refreshing the shard if the ?refresh=true flag is used).

commit 4ac68bb1658688550ced0c4f479dee6d8b617777
Author: Shay Banon <kimchy@gmail.com>
Date:   Tue Jul 21 22:37:29 2015 +0200

    Replica allocator unit tests
    First batch of unit tests to verify the behavior of replica allocator

commit 94609fc5943c8d85adc751b553847ab4cebe58a3
Author: Jason Tedor <jason@tedor.me>
Date:   Tue Jul 21 14:04:46 2015 -0400

    Correctly list blobs in Azure storage to prevent snapshot corruption and do not unnecessarily duplicate Lucene segments in Azure Storage

    This commit addresses an issue that was leading to snapshot corruption for snapshots stored as blobs in Azure Storage.

    The underlying issue is that in cases when multiple snapshots of an index were taken and persisted into Azure Storage, snapshots subsequent
    to the first would repeatedly overwrite the snapshot files. This issue does render useless all snapshots except the final snapshot.

    The root cause of this is due to String concatenation involving null. In particular, to list all of the blobs in a snapshot directory in
    Azure the code would use the method listBlobsByPrefix where the prefix is null. In the listBlobsByPrefix method, the path keyPath + prefix
    is constructed. However, per 5.1.11, 5.4 and 15.18.1 of the Java Language Specification, the reference null is first converted to the string
    "null" before performing the concatenation. This leads to no blobs being returned and therefore the snapshot mechanism would operate as if
    it were writing the first snapshot of the index. The fix is simply to check if prefix is null and handle the concatenation accordingly.

    Upon fixing this issue so that subsequent snapshots would no longer overwrite earlier snapshots, it was discovered that the snapshot metadata
    returned by the listBlobsByPrefix method was not sufficient for the snapshot layer to detect whether or not the Lucene segments had already
    been copied to the Azure storage layer in an earlier snapshot. This led the snapshot layer to unnecessarily duplicate these Lucene segments
    in Azure Storage.

    The root cause of this is due to known behavior in the CloudBlobContainer.getBlockBlobReference method in the Azure API. Namely, this method
    does not fetch blob attributes from Azure. As such, the lengths of all the blobs appeared to the snapshot layer to be of length zero and
    therefore they would compare as not equal to any new blobs that the snapshot layer is going to persist. To remediate this, the method
    CloudBlockBlob.downloadAttributes must be invoked. This will fetch the attributes from Azure Storage so that a proper comparison of the
    blobs can be performed.

    Closes elastic/elasticsearch-cloud-azure#51, closes elastic/elasticsearch-cloud-azure#99

commit cf1d481ce5dda0a45805e42f3b2e0e1e5d028b9e
Author: Lee Hinman <lee@writequit.org>
Date:   Mon Jul 20 08:41:55 2015 -0600

    Unit tests for `nodesAndVersions` on shared filesystems

    With the `recover_on_any_node` setting, these unit tests check that the
    correct node list and versions are returned.

commit 3c27cc32395c3624f7c794904d9ea4faf2eccbfb
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 14:15:59 2015 -0400

    don't fail junit4 integration tests if there are no tests.

    instead fail the failsafe plugin, which means the external cluster will still get shut down

commit 95d2756c5a8c21a157fa844273fc83dfa3c00aea
Author: Alexander Reelsen <alexander@reelsen.net>
Date:   Tue Jul 21 17:16:53 2015 +0200

    Testing: Fix help displaying tests under windows

    The help files are using a unix based file separator, where as
    the test relies on the help being based on the file system separator.

    This commit fixes the test to remove all `\r` characters before
    comparing strings.

    The test has also been moved into its own CliToolTestCase, as it does
    not need to be an integration test.

commit 944f06ea36bd836f007f8eaade8f571d6140aad9
Author: Clinton Gormley <clint@traveljury.com>
Date:   Tue Jul 21 18:04:52 2015 +0200

    Refactored check_license_and_sha.pl to accept a license dir and package path

    In preparation for the move to building the core zip, tar.gz, rpm, and deb as separate modules, refactored check_license_and_sha.pl to:

    * accept a license dir and path to the package to check on the command line
    * to be able to extract zip, tar.gz, deb, and rpm
    * all packages except rpm will work on Windows

commit 2585431e8dfa5c82a2cc5b304cd03eee9bed7a4c
Author: Chris Earle <pickypg@users.noreply.github.com>
Date:   Tue Jul 21 08:35:28 2015 -0700

    Updating breaking changes

    - field names cannot be mapped with `.` in them
    - fixed asciidoc issue where the list was not recognized as a list

commit de299b9d3f4615b12e2226a1e2eff5a38ecaf15f
Author: Shay Banon <kimchy@gmail.com>
Date:   Tue Jul 21 13:27:52 2015 +0200

    Replace primaryPostAllocated flag and use UnassignedInfo
    There is no need to maintain additional state as to if a primary was allocated post api creation on the index routing table, we hold all this information already in the UnassignedInfo class.
    closes #12374

commit 43080bff40f60bedce5bdbc92df302f73aeb9cae
Author: Alexander Reelsen <alexander@reelsen.net>
Date:   Tue Jul 21 15:45:05 2015 +0200

    PluginManager: Fix bin/plugin calls in scripts/bats test

    The release and smoke test python scripts used to install
    plugins in the old fashion.

    Also the BATS testing suite installed/removed plugins in that
    way. Here the marvel tests have been removed, as marvel currently
    does not work with the master branch.

    In addition documentation has been updated as well, where it was
    still missing.

commit b81ccba48993bc13c7678e6d979fd96998499233
Author: Boaz Leskes <b.leskes@gmail.com>
Date:   Tue Jul 21 11:37:50 2015 +0200

    Discovery: make sure NodeJoinController.ElectionCallback is always called from the update cluster state thread

    This is important for correct handling of the joining thread. This causes assertions to trip in our test runs. See http://build-us-00.elastic.co/job/es_g1gc_master_metal/11653/ as an example

    Closes #12372

commit 331853790bf29e34fb248ebc4c1ba585b44f5cab
Author: Boaz Leskes <b.leskes@gmail.com>
Date:   Tue Jul 21 15:54:36 2015 +0200

    Remove left over no commit from TransportReplicationAction

    It asks to double check thread pool rejection. I did and don't see problems with it.

commit e5724931bbc1603e37faa977af4235507f4811f5
Author: Alexander Reelsen <alexander@reelsen.net>
Date:   Tue Jul 21 15:31:57 2015 +0200

    CliTool: Various PluginManager fixes

    The new plugin manager parser was not called correctly in the scripts.
    In addition the plugin manager now creates a plugins/ directory in case
    it does not exist.

    Also the integration tests called the plugin manager in the deprecated way.

commit 7a815a370f83ff12ffb12717ac2fe62571311279
Author: Alexander Reelsen <alexander@reelsen.net>
Date:   Tue Jul 21 13:54:18 2015 +0200

    CLITool: Port PluginManager to use CLITool

    In order to unify the handling and reuse the CLITool infrastructure
    the plugin manager should make use of this as well.

    This obsolets the -i and --install options but requires the user
    to use `install` as the first argument of the CLI.

    This is basically just a port of the existing functionality, which
    is also the reason why this is not a refactoring of the plugin manager,
    which will come in a separate commit.

commit 7f171eba7b71ac5682a355684b6da703ffbfccc7
Author: Martijn van Groningen <martijn.v.groningen@gmail.com>
Date:   Tue Jul 21 10:44:21 2015 +0200

    Remove custom execute local logic in TransportSingleShardAction and TransportInstanceSingleOperationAction and rely on transport service to execute locally. (forking thread etc.)

    Change TransportInstanceSingleOperationAction to have shardActionHandler to, so we can execute locally without endless spinning.

commit 0f38e3eca6b570f74b552e70b4673f47934442e1
Author: Ryan Ernst <ryan@iernst.net>
Date:   Tue Jul 21 17:36:12 2015 -0700

    More readMetadata tests and pickiness

commit 880b47281bd69bd37807e8252934321b089c9f8e
Author: Ryan Ernst <ryan@iernst.net>
Date:   Tue Jul 21 14:42:09 2015 -0700

    Started unit tests for plugin service

commit cd7c8ddd7b8c4f3457824b493bffb19c156c7899
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 07:21:07 2015 -0400

    fix tests

commit 673454f0b14f072f66ed70e32110fae4f7aad642
Author: Robert Muir <rmuir@apache.org>
Date:   Tue Jul 21 06:58:25 2015 -0400

    refactor pluginservice

time:
2015-07-22T14:26:15Z
class:
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
comments:
Adding utility method to SpanTermQueryBuilderTest that outputs certain amount of queries with same fieldname

time:
2015-07-22T14:24:14Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
comments:
Remove empty check in doXContent, parser or validate will take care of this

time:
2015-07-22T14:24:14Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryParser.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
comments:
Added comments, some simplification to test

time:
2015-07-22T14:24:14Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryWrappingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SpanOrQueryBuilderTest.java
comments:
Query refactoring: SpanNearQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new toQuery() method analogous to other recent query refactorings.

Relates to #10217

time:
2015-07-22T14:23:28Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
comments:
Merge pull request #12396 from cbuescher/feature/query-refactoring-spanwithin

Query refactoring: SpanWithinQueryBuilder and Parser

time:
2015-07-22T14:22:02Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTest.java
comments:
Query refactoring: SpanWithinQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new toQuery() method analogous to other recent query refactorings.

Relates to #10217

time:
2015-07-22T13:56:25Z
class:
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTest.java
comments:
Fix edge case for SpanMultiTermQueryBuilderTest

time:
2015-07-22T12:51:42Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
Merge pull request #12365 from cbuescher/feature/query-refactoring-spannot

Query refactoring: SpanNotQueryBuilder and Parser

time:
2015-07-22T12:50:21Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
Query refactoring: SpanNotQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new doToQuery() method analogous to other recent query refactorings.

Relates to #10217
Closes #12365

time:
2015-07-22T12:37:13Z
class:
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
comments:
Merge pull request #12371 from jpountz/fix/mapper_fielddata_dependency

Remove the dependecy on IndexFielddataService from MapperService.

time:
2015-07-22T09:55:41Z
class:
core/src/main/java/org/elasticsearch/common/lucene/search/function/FieldValueFactorFunction.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreFieldValueTests.java
comments:
Merge pull request #12328 from alexclare/issue-12327

Fix malformed query generation

time:
2015-07-22T08:38:56Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/InstanceShardOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DisableAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
core/src/main/java/org/elasticsearch/common/http/client/HttpDownloadHelper.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/main/java/org/elasticsearch/plugins/PluginManagerCliParser.java
core/src/test/java/org/elasticsearch/action/IndicesRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ShardReplicationTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestBase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/common/cli/CliToolTestCase.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerCliTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
core/src/test/java/org/elasticsearch/test/cluster/TestClusterService.java
plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-22T08:37:34Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryWrappingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryParser.java
core/src/test/java/org/elasticsearch/index/query/RandomQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTest.java
comments:
Merge pull request #12182 from cbuescher/feature/query-refactoring-spanmultiterm

Query refactoring: SpanMultiTermQueryBuilder and Parser

time:
2015-07-22T08:36:15Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryWrappingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryParser.java
core/src/test/java/org/elasticsearch/index/query/RandomQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTest.java
comments:
Query refactoring: SpanMultiTermQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new toQuery() method analogous to other recent query refactorings.

Relates to #10217
Closes #12182

time:
2015-07-21T23:30:26Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
comments:
[TEST] Verify expected number of nodes in cluster before issuing shardStores request

time:
2015-07-21T21:09:40Z
class:
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
comments:
Ignore EngineClosedException during translog fysnc

When performing an operation on a primary, the state is captured and the
operation is performed on the primary shard. The original request is
then modified to increment the version of the operation as preparation
for it to be sent to the replicas.

If the request first fails on the primary during the translog sync
(because the Engine is already closed due to shadow primaries closing
the engine on relocation), then the operation is retried on the new primary
after being modified for the replica shards. It will then fail due to the
version being incorrect (the document does not yet exist but the request
expects a version of "1").

Order of operations:

- Request is executed against primary
- Request is modified (version incremented) so it can be sent to replicas
- Engine's translog is fsync'd if necessary (failing, and throwing an exception)
- Modified request is retried against new primary

This change ignores the exception where the engine is already closed
when syncing the translog (similar to how we ignore exceptions when
refreshing the shard if the ?refresh=true flag is used).

time:
2015-07-21T20:47:04Z
class:
plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
comments:
Merge pull request #12380 from jasontedor/fix/elasticsearch-cloud-azure-51

Correctly list blobs in Azure Storage to prevent snapshot corruption and do not unnecessarily duplicate Lucene segments in Azure Storage

time:
2015-07-21T20:37:40Z
class:
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
comments:
Replica allocator unit tests
First batch of unit tests to verify the behavior of replica allocator

time:
2015-07-21T20:33:33Z
class:
plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
comments:
Correctly list blobs in Azure storage to prevent snapshot corruption and do not unnecessarily duplicate Lucene segments in Azure Storage

This commit addresses an issue that was leading to snapshot corruption for snapshots stored as blobs in Azure Storage.

The underlying issue is that in cases when multiple snapshots of an index were taken and persisted into Azure Storage, snapshots subsequent
to the first would repeatedly overwrite the snapshot files. This issue does render useless all snapshots except the final snapshot.

The root cause of this is due to String concatenation involving null. In particular, to list all of the blobs in a snapshot directory in
Azure the code would use the method listBlobsByPrefix where the prefix is null. In the listBlobsByPrefix method, the path keyPath + prefix
is constructed. However, per 5.1.11, 5.4 and 15.18.1 of the Java Language Specification, the reference null is first converted to the string
"null" before performing the concatenation. This leads to no blobs being returned and therefore the snapshot mechanism would operate as if
it were writing the first snapshot of the index. The fix is simply to check if prefix is null and handle the concatenation accordingly.

Upon fixing this issue so that subsequent snapshots would no longer overwrite earlier snapshots, it was discovered that the snapshot metadata
returned by the listBlobsByPrefix method was not sufficient for the snapshot layer to detect whether or not the Lucene segments had already
been copied to the Azure storage layer in an earlier snapshot. This led the snapshot layer to unnecessarily duplicate these Lucene segments
in Azure Storage.

The root cause of this is due to known behavior in the CloudBlobContainer.getBlockBlobReference method in the Azure API. Namely, this method
does not fetch blob attributes from Azure. As such, the lengths of all the blobs appeared to the snapshot layer to be of length zero and
therefore they would compare as not equal to any new blobs that the snapshot layer is going to persist. To remediate this, the method
CloudBlockBlob.downloadAttributes must be invoked. This will fetch the attributes from Azure Storage so that a proper comparison of the
blobs can be performed.

Closes elastic/elasticsearch-cloud-azure#51, closes elastic/elasticsearch-cloud-azure#99

time:
2015-07-21T20:17:51Z
class:
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
comments:
Unit tests for `nodesAndVersions` on shared filesystems

With the `recover_on_any_node` setting, these unit tests check that the
correct node list and versions are returned.

time:
2015-07-21T18:49:50Z
class:
comments:
Merge pull request #12381 from rmuir/fail_if_no_tests

don't fail junit4 integration tests if there are no tests.

time:
2015-07-21T18:15:59Z
class:
comments:
don't fail junit4 integration tests if there are no tests.

instead fail the failsafe plugin, which means the external cluster will still get shut down

time:
2015-07-21T17:54:21Z
class:
comments:
Merge pull request #12377 from clintongormley/license_check_all_packages

Refactored check_license_and_sha.pl to accept a license dir and package path

time:
2015-07-21T16:53:55Z
class:
core/src/test/java/org/elasticsearch/plugins/PluginManagerCliTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Testing: Fix help displaying tests under windows

The help files are using a unix based file separator, where as
the test relies on the help being based on the file system separator.

This commit fixes the test to remove all `\r` characters before
comparing strings.

The test has also been moved into its own CliToolTestCase, as it does
not need to be an integration test.

time:
2015-07-21T16:04:52Z
class:
comments:
Refactored check_license_and_sha.pl to accept a license dir and package path

In preparation for the move to building the core zip, tar.gz, rpm, and deb as separate modules, refactored check_license_and_sha.pl to:

* accept a license dir and path to the package to check on the command line
* to be able to extract zip, tar.gz, deb, and rpm
* all packages except rpm will work on Windows

time:
2015-07-21T15:35:28Z
class:
comments:
Updating breaking changes

- field names cannot be mapped with `.` in them- fixed asciidoc issue where the list was not recognized as a list

time:
2015-07-21T15:00:07Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DisableAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/action/support/replication/ShardReplicationTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestBase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
comments:
Replace primaryPostAllocated flag and use UnassignedInfo
There is no need to maintain additional state as to if a primary was allocated post api creation on the index routing table, we hold all this information already in the UnassignedInfo class.
closes #12374

time:
2015-07-21T14:17:59Z
class:
comments:
PluginManager: Fix bin/plugin calls in scripts/bats test

The release and smoke test python scripts used to install
plugins in the old fashion.

Also the BATS testing suite installed/removed plugins in that
way. Here the marvel tests have been removed, as marvel currently
does not work with the master branch.

In addition documentation has been updated as well, where it was
still missing.

time:
2015-07-21T14:11:37Z
class:
core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/test/cluster/TestClusterService.java
comments:
Discovery: make sure NodeJoinController.ElectionCallback is always called from the update cluster state thread

This is important for correct handling of the joining thread. This causes assertions to trip in our test runs. See http://build-us-00.elastic.co/job/es_g1gc_master_metal/11653/ as an example

Closes #12372

time:
2015-07-21T13:54:36Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
comments:
Remove left over no commit from TransportReplicationAction

It asks to double check thread pool rejection. I did and don't see problems with it.

time:
2015-07-21T13:39:58Z
class:
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
comments:
Remove the dependecy on IndexFielddataService from MapperService.

This dependency was used in order for mapping updates that change the fielddata
format to take effect immediately. And the way it worked was by clearing the
cache of fielddata instances that were already loaded. However, we do not need
to cache the already loaded (logical) fielddata instances, they are cheap to
regenerate. Note that the fielddata _caches_ are still kept around so that we
don't keep on rebuilding costly (physical) fielddata values.

time:
2015-07-21T13:31:57Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
CliTool: Various PluginManager fixes

The new plugin manager parser was not called correctly in the scripts.
In addition the plugin manager now creates a plugins/ directory in case
it does not exist.

Also the integration tests called the plugin manager in the deprecated way.

time:
2015-07-21T12:15:39Z
class:
core/src/main/java/org/elasticsearch/common/http/client/HttpDownloadHelper.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/main/java/org/elasticsearch/plugins/PluginManagerCliParser.java
core/src/test/java/org/elasticsearch/common/cli/CliToolTestCase.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
CLITool: Port PluginManager to use CLITool

In order to unify the handling and reuse the CLITool infrastructure
the plugin manager should make use of this as well.

This obsolets the -i and --install options but requires the user
to use `install` as the first argument of the CLI.

This is basically just a port of the existing functionality, which
is also the reason why this is not a refactoring of the plugin manager,
which will come in a separate commit.

time:
2015-07-21T11:53:16Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/IPv4RangeBuilder.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/IPv4RangeTests.java
comments:
Fix cidr mask conversion issue for 0.0.0.0/0 and add tests

time:
2015-07-21T11:45:42Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/support/single/instance/InstanceShardOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/test/java/org/elasticsearch/action/IndicesRequestTests.java
comments:
Remove custom execute local logic in TransportSingleShardAction and TransportInstanceSingleOperationAction and rely on transport service to execute locally. (forking thread etc.)

Change TransportInstanceSingleOperationAction to have shardActionHandler to, so we can execute locally without endless spinning.

time:
2015-07-21T09:30:26Z
class:
core/src/main/java/org/elasticsearch/index/IndexService.java
comments:
Logging: Corrected potential confusing log message

time:
2015-07-21T08:58:58Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorsService.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreResponseTest.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/BinaryDVFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/binary/BinaryMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
core/src/test/java/org/elasticsearch/index/mapper/camelcase/CamelCaseFieldNameTests.java
core/src/test/java/org/elasticsearch/index/mapper/compound/CompoundTypesTests.java
core/src/test/java/org/elasticsearch/index/mapper/copyto/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperIntegrationTests.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ip/SimpleIpMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/lucene/DoubleIndexingDocTest.java
core/src/test/java/org/elasticsearch/index/mapper/lucene/StoredNumericValuesTest.java
core/src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
core/src/test/java/org/elasticsearch/index/mapper/object/NullValueObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
core/src/test/java/org/elasticsearch/index/mapper/update/UpdateMappingTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeFormatTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeTimezoneTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/indices/mapping/SimpleGetFieldMappingsTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
core/src/test/java/org/elasticsearch/test/TestSearchContext.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-21T08:24:49Z
class:
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperIntegrationTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
core/src/test/java/org/elasticsearch/index/mapper/update/UpdateMappingTests.java
comments:
Test: fix tests referring to _index

time:
2015-07-21T07:31:38Z
class:
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorsService.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/BinaryDVFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/binary/BinaryMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
core/src/test/java/org/elasticsearch/index/mapper/camelcase/CamelCaseFieldNameTests.java
core/src/test/java/org/elasticsearch/index/mapper/compound/CompoundTypesTests.java
core/src/test/java/org/elasticsearch/index/mapper/copyto/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ip/SimpleIpMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/lucene/DoubleIndexingDocTest.java
core/src/test/java/org/elasticsearch/index/mapper/lucene/StoredNumericValuesTest.java
core/src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
core/src/test/java/org/elasticsearch/index/mapper/object/NullValueObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeFormatTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeTimezoneTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Merge pull request #12352 from rjernst/fix/index-name-in-mapper-service

Remove index name from mapping parser

time:
2015-07-21T07:30:00Z
class:
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
comments:
Merge pull request #12356 from rjernst/fix/12329

Remove ability to configure _index

time:
2015-07-21T07:29:34Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreResponseTest.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTest.java
core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/indices/mapping/SimpleGetFieldMappingsTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
core/src/test/java/org/elasticsearch/test/TestSearchContext.java
comments:
Merge branch 'master' into fix/12329

time:
2015-07-21T07:27:27Z
class:
comments:
Merge pull request #12357 from rjernst/fix/12317

Update time_zone specification

time:
2015-07-21T07:22:53Z
class:
comments:
Docs: Update time_zone specification

closes #12317

time:
2015-07-21T07:01:50Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreResponseTest.java
comments:
Test: move IndicesShardStoreRequestTests to the right package

time:
2015-07-21T06:58:50Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
comments:
Logging: shard store shouldn't log the entire cluster state under trace, but just its version.

If we want the entire CS, we can put the cluster.service on trace

time:
2015-07-21T06:54:35Z
class:
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
comments:
Mappings: Remove ability to configure _index

The `_index` field is now a completely virtual field thanks
to #12027. It is no longer necessary to index the actual value
of the index name.

closes #12329

time:
2015-07-21T05:37:44Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/test/java/org/elasticsearch/index/fielddata/BinaryDVFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/binary/BinaryMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
core/src/test/java/org/elasticsearch/index/mapper/camelcase/CamelCaseFieldNameTests.java
core/src/test/java/org/elasticsearch/index/mapper/compound/CompoundTypesTests.java
core/src/test/java/org/elasticsearch/index/mapper/copyto/CopyToMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/BooleanFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/ip/SimpleIpMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/lucene/DoubleIndexingDocTest.java
core/src/test/java/org/elasticsearch/index/mapper/lucene/StoredNumericValuesTest.java
core/src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
core/src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
core/src/test/java/org/elasticsearch/index/mapper/object/NullValueObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeFormatTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeTimezoneTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Remove old DocumentMapper.parse method

time:
2015-07-21T03:52:07Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
comments:
[TEST] add missing ensureYellow to IndicesShardStoreRequestTests.testBasic

time:
2015-07-21T00:50:07Z
class:
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorsService.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
comments:
Mappings: Remove index name from mapping parser

The index name was passed along through many levels of mapping parsing,
just so that it could be used for _index. However, the index name
is really metadata that should exist alongside things like type and
id in SourceToParse.

This change moves index name to SourceToParse, and eliminates it from the
DocumentMapperParser.

time:
2015-07-21T00:27:36Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/env/Environment.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Remove Environment.homeFile()

Today we grant read+write+delete access to any files underneath the home.
But we have to remove this, if we want to have improved security of files
underneath elasticsearch.

time:
2015-07-20T21:38:47Z
class:
core/src/test/java/org/elasticsearch/indices/mapping/SimpleGetFieldMappingsTests.java
comments:
test: enable get field mapping tests

time:
2015-07-20T21:12:30Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
comments:
[TEST] use official API to read cluster state and enable debug logging

time:
2015-07-20T20:38:53Z
class:
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
comments:
Test: testTimeoutCleanup use assertBusy while checking timer queue

time:
2015-07-20T19:54:54Z
class:
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/test/TestSearchContext.java
comments:
Merge pull request #12346 from jasontedor/fix/12345

Use time with nanosecond resolution calculated at the executing node to measure the time that contexts are held open

time:
2015-07-20T19:16:16Z
class:
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
comments:
Test: testShardActiveElseWhere shouldn't force cluster state publishing

The test is supposed to fool a node, making it think all it's shards are allocated else where. The test verifies the node doesn't delete its shards. The current test submitted this "fake" CS to the master, causing it to published which in turn caused confusion on other nodes and test failures.

 See http://build-us-00.elastic.co/job/es_core_master_oracle_6/990/testReport/junit/org.elasticsearch.indices.store/IndicesStoreIntegrationTests/testShardActiveElseWhere/

time:
2015-07-20T18:46:24Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
comments:
[TEST] Better floating point comparisons

time:
2015-07-20T16:42:13Z
class:
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/test/TestSearchContext.java
comments:
Use time with nanosecond resolution calculated at the executing node to measure the time that contexts are held open

Closes #12345

time:
2015-07-20T15:35:39Z
class:
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryTests.java
comments:
test: increased logging

time:
2015-07-20T15:13:57Z
class:
comments:
Merge pull request #12344 from rmuir/2.1.16

Update randomizedtesting to 2.1.16

time:
2015-07-20T15:02:50Z
class:
comments:
Update randomizedtesting to 2.1.16

time:
2015-07-20T13:43:31Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
comments:
Simplify handling of ignored unassigned shards
Fold ignored unassigned to a UnassignedShards and have simpler handling of them. Also remove the trapy way of adding an ignored unassigned shards today directly to the list, and have dedicated methods for it.

This change also removes the useless moving of unassigned shards to the end, since anyhow we first, sort those unassigned shards, and second, we now have persistent "store exceptions" that should not cause "dead letter" shard allocation.

time:
2015-07-20T12:04:24Z
class:
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/test/ElasticsearchAllocationTestCase.java
comments:
Initial Refactor Gateway Allocator
Break it into more manageable code by separating allocation primaries and allocating replicas. Start adding basic unit tests for primary shard allocator.

time:
2015-07-20T10:52:32Z
class:
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-20T10:23:12Z
class:
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
comments:
Test: firstAllocationFailureTwoNodes used hard coded node reference

The test starts two nodes and two shards and expects the primary shard to be allocated on the first node. Very rarely this is not the case.

time:
2015-07-20T10:20:57Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/apache/lucene/queryparser/classic/QueryParserSettings.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/ResourceNotFoundException.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/DocumentRequest.java
core/src/main/java/org/elasticsearch/action/NoShardAvailableActionException.java
core/src/main/java/org/elasticsearch/action/RoutingMissingException.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/TransportGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportNodesSnapshotsStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/get/TransportGetIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/recovery/TransportRecoveryAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/get/TransportGetSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplatesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/get/TransportUpgradeStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/get/TransportGetWarmersAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/indexedscripts/delete/TransportDeleteIndexedScriptAction.java
core/src/main/java/org/elasticsearch/action/indexedscripts/get/TransportGetIndexedScriptAction.java
core/src/main/java/org/elasticsearch/action/indexedscripts/put/TransportPutIndexedScriptAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateShardRequest.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchCountAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryAndFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryThenFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryAndFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryThenFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchScanAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
core/src/main/java/org/elasticsearch/action/suggest/TransportSuggestAction.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeReadAction.java
core/src/main/java/org/elasticsearch/action/support/master/info/TransportClusterInfoAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/dfs/TransportDfsOnlyAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java
core/src/main/java/org/elasticsearch/client/Requests.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/Preference.java
core/src/main/java/org/elasticsearch/cluster/routing/RestoreSource.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
core/src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/cluster/settings/Validator.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/io/PathUtils.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lucene/store/ByteArrayIndexInput.java
core/src/main/java/org/elasticsearch/common/lucene/store/IndexOutputOutputStream.java
core/src/main/java/org/elasticsearch/common/unit/Fuzziness.java
core/src/main/java/org/elasticsearch/common/util/URIPattern.java
core/src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java
core/src/main/java/org/elasticsearch/common/xcontent/FromXContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/Environment.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayMetaState.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/index/AlreadyExpiredException.java
core/src/main/java/org/elasticsearch/index/IndexException.java
core/src/main/java/org/elasticsearch/index/IndexNotFoundException.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/engine/EngineException.java
core/src/main/java/org/elasticsearch/index/engine/FlushingRecoveryCounter.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorException.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryParsingException.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TermQueryParser.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
core/src/main/java/org/elasticsearch/index/shard/IllegalIndexShardStateException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRecoveryException.java
core/src/main/java/org/elasticsearch/index/shard/ShardNotFoundException.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecoveryService.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotException.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
core/src/main/java/org/elasticsearch/index/store/FsDirectoryService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/TranslogException.java
core/src/main/java/org/elasticsearch/indices/AliasFilterParsingException.java
core/src/main/java/org/elasticsearch/indices/IndexAlreadyExistsException.java
core/src/main/java/org/elasticsearch/indices/IndexClosedException.java
core/src/main/java/org/elasticsearch/indices/IndexCreationException.java
core/src/main/java/org/elasticsearch/indices/IndexPrimaryShardNotAllocatedException.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/InvalidAliasNameException.java
core/src/main/java/org/elasticsearch/indices/InvalidIndexNameException.java
core/src/main/java/org/elasticsearch/indices/TypeMissingException.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreFormat.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/ChecksumBlobStoreFormat.java
core/src/main/java/org/elasticsearch/repositories/blobstore/LegacyBlobStoreFormat.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/rest/action/RestActionModule.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesNotFoundException.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/shards/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/script/CompiledScript.java
core/src/main/java/org/elasticsearch/script/NativeScriptEngineService.java
core/src/main/java/org/elasticsearch/script/ScriptEngineService.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionExecutableScript.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionScriptEngineService.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionSearchScript.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
core/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
comments:
Merge branch 'master' into feature/query-refactoring

 Conflicts:
	core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
	core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java

time:
2015-07-20T10:04:37Z
class:
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
comments:
add await fix firstAllocationFailureTwoNodes

time:
2015-07-20T09:23:04Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Merge pull request #12331 from jasontedor/feature/12330

Add scroll stats to cat API

time:
2015-07-20T08:51:03Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
comments:
ThreadPools: schedule a timeout check after adding command to queue

Our thread pools have support for timeout on a task. To support this, a special background task is schedule to run at timeout. That background task fires and check if the main task is still in the executor queue and then cancels it if needed. Currently we schedule this background task before adding the main task to the queue. If the timeout is very small (in tests we often use numbers like 2 ms)  the background task can fire before the main one is added to the queue causing the timeout to be missed.

See http://build-us-00.elastic.co/job/es_g1gc_master_metal/11780/testReport/junit/org.elasticsearch.cluster/ClusterServiceTests/testTimeoutUpdateTask/

Closes #12319

time:
2015-07-20T08:31:31Z
class:
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTest.java
core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
comments:
Allocation: use recently added allocation ids for shard started/failed

 On top of that:
 1) A relocation target shards' allocation id is changed to include the allocation id of the source shard under relocatingId (similar to shard routing semantics)
 2) The logic around state change for finalize shard relocation is simplified - one simple start the target shard (we previously had unused logic around relocating state)

Closes #12299

time:
2015-07-19T23:26:27Z
class:
comments:
Docs: Refactored the mapping meta-fields docs

time:
2015-07-19T18:12:42Z
class:
core/src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
comments:
Remove unused imports

time:
2015-07-19T17:41:46Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Add scroll stats to cat API

Adds scroll stats at the node, shard and index levels to the cat API.

Closes #12330

time:
2015-07-19T15:42:12Z
class:
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreFieldValueTests.java
comments:
Test behavior of explicit Modifier.NONE

time:
2015-07-19T04:49:39Z
class:
core/src/main/java/org/elasticsearch/common/lucene/search/function/FieldValueFactorFunction.java
comments:
Fix malformed query generation

time:
2015-07-18T12:13:26Z
class:
comments:
Docs: Fixed the date math expression on filtered query

time:
2015-07-18T10:08:46Z
class:
comments:
Docs: Incorrect file name for shard stores

time:
2015-07-18T10:03:59Z
class:
comments:
Docs: Indices shards stores page wasn't included in the indices APIs

time:
2015-07-17T19:13:30Z
class:
comments:
Merge pull request #12307 from rmuir/maven_run

Remove broken `exec` build target, replace with something better.

time:
2015-07-17T19:00:37Z
class:
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/cluster/settings/Validator.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryParser.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
core/src/test/java/org/elasticsearch/search/geo/GeoPolygonTests.java
core/src/test/java/org/elasticsearch/test/search/MockSearchService.java
securemock/src/main/java/org/elasticsearch/mock/Mockito.java
comments:
Merge branch 'master' into maven_run

time:
2015-07-17T17:57:17Z
class:
comments:
 #12256 Improve JVM Arch Detection

Notify the user if the JVM architecture could not be detected, instead of silently defaulting to 32-bit. Also add a max heap parameter. On machines with RAM sizes in the order of 64GB plus, the initial heap could be multi-gigabyte. This can lead to an out of memory error when checking for the version.

time:
2015-07-17T16:44:55Z
class:
securemock/src/main/java/org/elasticsearch/mock/Mockito.java
comments:
Merge pull request #12313 from jaymode/securemock

remove securemock from repository

time:
2015-07-17T15:51:08Z
class:
comments:
Update license SHA1 file for Netty 3.10.3.Final

time:
2015-07-17T15:41:27Z
class:
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryParser.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapperTests.java
core/src/test/java/org/elasticsearch/search/geo/GeoPolygonTests.java
comments:
[GEO] Update ShapeBuilder and GeoPolygonQueryParser to accept unclosed GeoJSON

While the GeoJSON spec does say a polygon is represented as an array of LinearRings (where a LinearRing is defined as a 'closed' array of points), the coerce parameter provides users with flexibility to have ES automatically close polygons. This addresses situations like those integrated with twitter (where GeoJSON polygons are not closed) such that our users do not have to write extra code to close the polygon. This code change adds the optional coerce parameter to the GeoShapeFieldMapper.

closes #11131

time:
2015-07-17T15:36:57Z
class:
comments:
Changed 1.x version to 1.7

time:
2015-07-17T14:06:03Z
class:
comments:
Update threadpool.asciidoc

Updated formula for default search thread poolCloses #12308

time:
2015-07-17T13:34:26Z
class:
comments:
Regenerate 1.6.1 and 1.7.1 backward indices to include the `bool` field.

time:
2015-07-17T13:23:16Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/cluster/settings/Validator.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/test/java/org/elasticsearch/test/search/MockSearchService.java
comments:
Merge pull request #12211 from jasontedor/features/12149

Add global search timeout setting

time:
2015-07-17T13:11:40Z
class:
comments:
update documentation with release 2.7.0

time:
2015-07-17T12:29:19Z
class:
comments:
test: added 1.6.1 and 1.7.0 bwcompat indices

time:
2015-07-17T11:00:00Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
added 1.7.1 and 1.6.2 versions

time:
2015-07-17T10:43:23Z
class:
comments:
Merge pull request #12306 from rodaine/patch-1

Correct default date format

time:
2015-07-17T09:35:33Z
class:
comments:
Update Netty to version 3.10.3.Final

There a version mismatch between master (previously 3.10.0.Final) and 1.7 branch (3.10.3.Final)

time:
2015-07-17T09:32:36Z
class:
core/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
Tests: removed  comment from SearchWhileRelocatingTests

time:
2015-07-17T04:03:33Z
class:
comments:
Remove broken `exec` build target, replace with something better.

Currently this target is "yet another way" to run elasticsearch,
which we can't maintain. It also has the problem that it doesnt
ensure its running on the latest source code, doesn't configure
any scratch space properly, won't work with securitymanager, list
goes on.

Even if we made it work, it would break every day, since its untested.

Instead, `mvn package -Drun -DskipTests` will run packaging, and then
startup bin/elasticsearch (like integration tests, but in foreground).

It also enables debugger socket on port 8000, for people that like
IDE debuggers and not system.out.println.

Its a little slower to get started because of all the shading/RPM/DEB
building going on in `package` but that is just what it is right now
until that stuff is moved out.

time:
2015-07-17T04:01:53Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
comments:
[TEST] remove redundant import

time:
2015-07-17T04:00:47Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
comments:
[TEST] take into account when master node is stopped

time:
2015-07-17T02:50:39Z
class:
comments:
Correct default date format

`strictDateOptionalDate` => `strictDateOptionalTime`

time:
2015-07-17T02:49:30Z
class:
comments:
move tophints configuration to the correct place

time:
2015-07-17T02:46:41Z
class:
comments:
tophints is optional here, it might not exist

time:
2015-07-17T02:27:23Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
comments:
quiet flaky test

time:
2015-07-17T02:12:00Z
class:
comments:
Don't try to verify if we are skipping integ tests (e.g. don't have any, explicitly disabled, etc)

time:
2015-07-17T02:00:20Z
class:
core/src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
Merge pull request #12303 from rmuir/verify-reproduce-with

fix REPRODUCE WITH for integration tests

time:
2015-07-17T01:45:20Z
class:
core/src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
comments:
fix REPRODUCE WITH for integration tests

time:
2015-07-17T01:23:10Z
class:
comments:
Merge pull request #12302 from rmuir/junit4_integ

Use junit4 for running integration tests, too

time:
2015-07-17T00:49:16Z
class:
comments:
protect logic under skipTests for stupid pom packaging

time:
2015-07-16T23:49:54Z
class:
comments:
wow maven you suck really bad...

time:
2015-07-16T23:43:33Z
class:
comments:
Use junit4 for running integration tests, too
failsafe uses surefire, which sucks. It also mean integ tests act alien right now.
I would rather have the consistency, e.g. things formatted the same way, running integ tests under security manager, etc.

time:
2015-07-16T22:57:04Z
class:
comments:
[TEST] fix test bug

time:
2015-07-16T22:28:07Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java
core/src/main/java/org/elasticsearch/client/Requests.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/rest/action/RestActionModule.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/shards/RestIndicesShardStoresAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreResponseTest.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreBackwardCompatibilityTests.java
core/src/test/java/org/elasticsearch/snapshots/SnapshotBackwardsCompatibilityTest.java
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
A new `_shard_stores` API provides store information for shard copies of indices.
Store information reports on which nodes shard copies exist, the shard
copy version, indicating how recent they are, and any exceptions
encountered while opening the shard index or from earlier engine failure.

closes #10952

time:
2015-07-16T21:45:33Z
class:
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
comments:
Consistently name Groovy scripts with the same content

When adding a script to the Groovy classloader, the script name is used
as the class identifier in the classloader. This means that in order not
to break JVM Classloader convention, that script must always be
available by that name. As a result, modifying a script with the same
content over and over causes it to be loaded with a different name (due
to the incrementing integer).

This is particularly bad when something like chef or puppet replaces the
on-disk script file with the same content over and over every time a
machine is converged.

This change makes the script name the SHA1 hash of the script itself,
meaning that replacing a script with the same text will use the same
script name.

Resolves #12212

time:
2015-07-16T16:56:13Z
class:
securemock/src/main/java/org/elasticsearch/mock/Mockito.java
comments:
remove securemock from repository

The securemock has a new library, located at https://github.com/elastic/securemock

time:
2015-07-16T16:41:25Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
comments:
Fix serialization of IndexFormatTooNewException and IndexFormatTooOldException

This is essentially an ugly hack to get us by until a proper solution is possible with Lucene 5.3

Closes #12277

time:
2015-07-16T16:25:21Z
class:
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
comments:
PrefixQueryParser takes a String as value like its Builder

Relates #12032
Closes #12204

time:
2015-07-16T16:24:36Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
comments:
String.join() is not available pre-Java8

time:
2015-07-16T16:21:39Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
comments:
QueryString ignores maxDeterminizedStates when creating a WildcardQuery

This patch backports https://issues.apache.org/jira/browse/LUCENE-6677

Merges 3ede4c469922308d43fba9ebc63e397ffd6997fe from 1.x

time:
2015-07-16T15:59:08Z
class:
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
comments:
RegexpQueryParser takes a String as value like its Builder

Relates #11896
Closes #12200

time:
2015-07-16T15:44:32Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgUnitTests.java
comments:
Merge pull request #12280 from polyfractal/bugfix/movavg_validation

Aggregations: Add better validation of moving_avg model settings

time:
2015-07-16T15:41:30Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgUnitTests.java
comments:
Aggregations: Add better validation of moving_avg model settings

time:
2015-07-16T15:25:23Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/Preference.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
comments:
Add _replica and _replica_first as search preference.

Just like specifying `?preference=_primary`, this adds the ability to
specify `?preference=_replica` or `?preference=_replica_first` on
requests that support it.

Resolves #12222

time:
2015-07-16T15:23:27Z
class:
core/src/main/java/org/elasticsearch/transport/TransportService.java
comments:
Transport: Tracer should exclude "cluster:monitor/nodes/liveness" by default

This action is a liveness test added in #8763 . It should be excluded, just like the fault detection logic or things become overly chatty.

Closes #12291

time:
2015-07-16T15:06:45Z
class:
comments:
Revert "REST: Fixed msearch and mpercolate structured exception tests"

This reverts commit f20b730eca8019335fbe9fef76fc35295dd4aa66.

time:
2015-07-16T13:27:07Z
class:
comments:
REST: Fixed msearch and mpercolate structured exception tests

time:
2015-07-16T12:40:06Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
comments:
Merge pull request #12288 from martijnvg/upgrade_groovy

upgrade groovy from 2.4.0 to 2.4.4

time:
2015-07-16T12:23:49Z
class:
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
core/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Merge pull request #12284 from jpountz/fix/failure_assertions

Do not assert that all shards were successful in tests.

time:
2015-07-16T11:56:32Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java
comments:
upgraded groovy from 2.4.0 to 2.4.4

time:
2015-07-16T09:18:55Z
class:
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
core/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Do not assert that all shards were successful in tests.

Most of our tests call assertSearchResponse which checks whether all shards
were successful. However this is usually not necessary given that all shards
that received documents should be available given the way our indexing works.
The only shards that might not be available are those that did not index
any documents. So removing this assertion would allow us to remove most
ensureGreen/ensureYellow calls while still being able to assert on the content
of the search response since all data have been taken into account.

For now I only removed the ensureYellow/Green calls from SearchQueryTests in
order to not de-stabilize the build, but eventually we should remove most of
them.

time:
2015-07-16T08:47:18Z
class:
core/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
comments:
add awaitFix the entire MinimumMasterNodesTests class. multiple tests are failing...

time:
2015-07-16T01:18:16Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/cluster/settings/Validator.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/test/java/org/elasticsearch/test/search/MockSearchService.java
comments:
Add global search timeout setting

This commit adds a dynamically updatable cluster-level search timeout setting.

Closes #12149

time:
2015-07-15T22:52:56Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/RestoreSource.java
core/src/main/java/org/elasticsearch/common/lucene/store/ByteArrayIndexInput.java
core/src/main/java/org/elasticsearch/common/lucene/store/IndexOutputOutputStream.java
core/src/main/java/org/elasticsearch/common/xcontent/FromXContentBuilder.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecoveryService.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreFormat.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/ChecksumBlobStoreFormat.java
core/src/main/java/org/elasticsearch/repositories/blobstore/LegacyBlobStoreFormat.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/Snapshot.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotMissingException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/common/lucene/store/ByteArrayIndexInputTests.java
core/src/test/java/org/elasticsearch/snapshots/BlobStoreFormatTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Add checksum to snapshot metadata files

This commit adds checksum to snapshot files that store global and index based metadata as well as shard information.

Closes #11589

time:
2015-07-15T19:45:52Z
class:
comments:
Merge pull request #12249 from areek/fix/12228

Clarify docs for transpositions setting in completion suggestercloses #12228

time:
2015-07-15T19:43:51Z
class:
comments:
Clarify docs for transpositions setting in completion suggester

closes #12228

time:
2015-07-15T19:25:43Z
class:
comments:
integration tests should use the baseVersion when copying artifacts

time:
2015-07-15T16:38:25Z
class:
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/discovery/ClusterDiscoveryConfiguration.java
comments:
Merge pull request #12271 from jaymode/test_zen_port_range

restrict the test unicast zen discovery to the port range of the JVM

time:
2015-07-15T16:27:48Z
class:
core/src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
comments:
Fix issues due to missing refresh after indexing test documents in SearchStatsTests.testOpenContexts

time:
2015-07-15T16:11:38Z
class:
comments:
Merge pull request #12270 from s1monw/publish_s3

Deploy artifacts to S3 as well as sonatype when running a release

time:
2015-07-15T16:10:09Z
class:
comments:
Merge pull request #12272 from clintongormley/index_priority_docs

Docs: Documented index prioritization

time:
2015-07-15T16:05:42Z
class:
comments:
Docs: Documented index prioritization

time:
2015-07-15T15:42:41Z
class:
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/discovery/ClusterDiscoveryConfiguration.java
comments:
restrict the test unicast zen discovery to the port range of the JVM

Today, the unicast zen test configuration will try to find a open port starting at the internal test cluster's
base port and continuing for 1000 ports. The internal test cluster class assigns a port range of 100 ports
to each JVM. This means that the unicast zen test configuration will try ports in the range for another JVM
and can lead to port conflicts. This change uses the same value for both so that the unicast configuration
does not go into another JVM's port range.

time:
2015-07-15T15:14:34Z
class:
comments:
Deploy artifacts to S3 as well as sonatype when running a release

This change allows when running a release build with:

```
 mvn -Prelease deploy
```

To deploy all artifacts to S3 as well as to sonatype at the same time.
Both sources will be consistent in terms of content and no further action
is required to publish our artifacts including .rpm, .deb, .zip, .tar.gz, .jar
etc. on to out S3 download service. Albeit this changes the structure of our
downloads to pretty much matching the maven repository layout, this makes
releaseing core as well as the plugins extremely simple. This will allow to
remove most of our python script used for release and it will automatically
allow to release and integrate new modules without further interaction.

This also allows us to bascially streamline our release process on CI such that
CI builds can simply run maven deploy which is all we do during a release.

With this commit only the git related modifications like tagging, version bumping
on our pom files and publishing RPM and .deb in their dedicated repository is left
for the python script.

With this change our artifact are available as follows:

```
http://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/elasticsearch/2.0.0-beta1/elasticsearch-2.0.0-beta1.deb
http://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/elasticsearch/2.0.0-beta1/elasticsearch-2.0.0-beta1.zip
http://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/elasticsearch/2.0.0-beta1/elasticsearch-2.0.0-beta1.rpm
```

Plugins are deployed to URLs like this:

```
http://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/plugin/elasticsearch-analysis-icu/2.0.0-beta1/elasticsearch-analysis-icu-2.0.0-beta1.zip
```

All artifacts like .jar as well as their checksums and gpg signatures are also available next to it.

time:
2015-07-15T15:08:25Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/AllocationId.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
comments:
Unique allocation id
Add a unique allocation id for a shard, helping to uniquely identify a specific allocation taking place to a node.
A special case is relocation, where a transient relocationId is kept around to make sure the target initializing shard (when using RoutingNodes) is using it for its id, and when relocation is done, the transient relocationId becomes the actual id of it.
closes #12242

time:
2015-07-15T14:57:53Z
class:
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceTests.java
comments:
[TEST] Remove @AwaitsFix from testRamAccountingTermsEnum()

This test has stabilized with recent ES changes.

time:
2015-07-15T14:53:34Z
class:
comments:
Merge pull request #12267 from ycombinator/threadpool-doc

Adding more information to scaling threadpools documentation

time:
2015-07-15T14:25:22Z
class:
core/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
comments:
add await fix to multipleNodesShutdownNonMasterNodes

time:
2015-07-15T14:09:14Z
class:
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceTests.java
comments:
[TEST] Remove @AwaitsFix from testMemoryBreaker()

Simplifies the test to make it not fail

time:
2015-07-15T13:30:11Z
class:
comments:
Adding more documentation on scaling threadpools

time:
2015-07-15T13:28:28Z
class:
comments:
Docs fix- added performance note about plain highlighter

Closes #11442

time:
2015-07-15T12:55:04Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTest.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
comments:
Carry over shard exception failure to master node
Don't loose the shard exception failure when sending a shard failrue to the master node

time:
2015-07-15T11:22:23Z
class:
comments:
Merge pull request #12264 from peschlowp/patch-6

Update match-query.asciidoc

time:
2015-07-15T07:39:15Z
class:
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Allow shards to be allocated if leftover shard from different index exists.

If an index name is reused but a leftover shard still exists on any node
we fail repeatedly to allocate the shard since we now check the index UUID
before reusing data. This commit allows to recover even if there is such a
leftover shard by deleting the leftover shard.

Closes #10677

time:
2015-07-15T05:43:49Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingServiceTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryUnitTest.java
core/src/test/java/org/elasticsearch/test/cluster/TestClusterService.java
comments:
Discovery: wait on incoming joins before electing local node as master

During master election each node pings in order to discover other nodes and validate the liveness of existing nodes. Based on this information the node either discovers an existing master or, if enough nodes are found (based on `discovery.zen.minimum_master_nodes>>) a new master will be elected.

Currently, the node that is elected as master will currently update it the cluster state to indicate the result of the election. Other nodes will submit a join request to the newly elected master node. Instead of immediately processing the election result, the elected master
node should wait for the incoming joins from other nodes, thus validating the elections result is properly applied. As soon as enough nodes have sent their joins request (based on the `minimum_master_nodes` settings) the cluster state is modified.

Note that if `minimum_master_nodes` is not set, this change has no effect.

Closes #12161

time:
2015-07-15T04:30:26Z
class:
comments:
skip this target too, to not confuse POM builds

time:
2015-07-15T04:18:37Z
class:
comments:
Merge pull request #12252 from rmuir/refactor_integ

Refactor integration tests

time:
2015-07-15T03:37:04Z
class:
comments:
Refactor integration tests

1. tests don't have a bogus test dependency on zips anymore,
   instead we handle this in pre-integration-test. This reduces
   lots of confusion for e.g. mvn clean test.
2. refactor integ logic so that core/ and plugin/ share it.
   previously they were duplicates but the above change simplifies life.
   it also makes it easier for doing more interesting stuff

time:
2015-07-15T01:35:42Z
class:
comments:
Merge pull request #12248 from rmuir/systemassertions

enable system assertions

time:
2015-07-15T01:25:32Z
class:
comments:
enable system assertions

time:
2015-07-15T00:44:31Z
class:
comments:
Merge pull request #12247 from rmuir/remove_shadow_eclipse_build

remove shadow eclipse build

time:
2015-07-15T00:31:12Z
class:
comments:
remove shadow m2e build

time:
2015-07-14T23:05:39Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
comments:
Add index name to the upgrade exception

time:
2015-07-14T22:38:26Z
class:
core/src/main/java/org/elasticsearch/common/io/PathUtils.java
core/src/main/java/org/elasticsearch/common/util/URIPattern.java
core/src/main/java/org/elasticsearch/env/Environment.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/test/java/org/elasticsearch/bwcompat/RestoreBackwardsCompatTests.java
core/src/test/java/org/elasticsearch/common/util/URIPatternTests.java
core/src/test/java/org/elasticsearch/env/EnvironmentTests.java
core/src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
core/src/test/java/org/elasticsearch/test/rest/ElasticsearchRestTestCase.java
comments:
Add url repository whitelist

Require urls for URL repository to be listed in repositories.url.allowed_urls setting. This change ensures that only authorized URLs can be accessed by elasticsearch

time:
2015-07-14T20:50:47Z
class:
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchBwcTests.java
core/src/test/java/org/elasticsearch/search/child/ParentFieldLoadingBwcTest.java
comments:
test: removed AwaitsFix annotation as the associated issue is fixed and the failures don't reproduce any more

time:
2015-07-14T20:03:20Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/test/java/org/elasticsearch/get/GetActionTests.java
core/src/test/java/org/elasticsearch/mget/SimpleMgetTests.java
core/src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
comments:
Merge pull request #12240 from s1monw/m_structured_response

Render structured exceptions in mget / mpercolate

time:
2015-07-14T19:42:21Z
class:
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
comments:
more fine-grained jython hack that also plays with java 9

time:
2015-07-14T19:01:14Z
class:
comments:
Merge pull request #12243 from rmuir/enforcer

Use enforcer:display-info to print version info

time:
2015-07-14T19:00:40Z
class:
comments:
Merge pull request #12227 from s1monw/release_profile

Add a release profile to the parent pom.xml

time:
2015-07-14T18:48:20Z
class:
comments:
Use enforcer:display-info to print version info

Currently this is done with ant tasks, but this is simpler and
designed for this purpose.

time:
2015-07-14T18:05:35Z
class:
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchTests.java
comments:
parent/child: Removed AwaitsFix annotation

Closes #9461

time:
2015-07-14T17:42:12Z
class:
comments:
enable enforcer plugin

time:
2015-07-14T16:14:09Z
class:
comments:
Docs: Use "js" instead of "json" and "sh" instead of "shell" for source highlighting

time:
2015-07-14T16:01:03Z
class:
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
comments:
Add permissions to all classpath elements in BootstrapForTesting

The previous strategy (target/xxx + .m2/repository) is obviously broken for multi-module
builds.

Includes hack for crazy jython, which "finds its own jar" then looks for a Lib/ beside it

time:
2015-07-14T15:52:28Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/test/java/org/elasticsearch/get/GetActionTests.java
core/src/test/java/org/elasticsearch/mget/SimpleMgetTests.java
core/src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
comments:
Render structured exceptions in mget / mpercolate

Instead of rendering only the exception message this commit
adds structured exception rendering to mget and mpercolate

time:
2015-07-14T15:33:47Z
class:
comments:
Asciidoc fix to API Conventions

time:
2015-07-14T15:10:29Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/apache/lucene/queryparser/classic/QueryParserSettings.java
core/src/main/java/org/elasticsearch/common/unit/Fuzziness.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/test/java/org/elasticsearch/common/unit/FuzzinessTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Don't allow fuzziness specified as a  and require edits [0,2]

Lucene deprecated this in 4.0 and we only try best effort to support it.
Folks should only use edit distance rather than some length based
similarity. Yet the formular is simple enough such that users can
still do it in the client if they really need to.

Closes #10638

time:
2015-07-14T15:08:26Z
class:
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
comments:
[TEST] Don't rely on iteration oder in tests

Closes #12238

time:
2015-07-14T14:41:11Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregationBuilder.java
core/src/test/java/org/elasticsearch/script/expression/ExpressionScriptTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/TopHitsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractNumericTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AvgTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/CardinalityTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MaxTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MinTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/PercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/PercentilesTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/SumTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
comments:
Aggregation: Removed Old Script Java API from metrics aggregations

The old script syntax has been removed from the Java API but the metrics aggregations were missed. This change removes the old script API from the ValuesSourceMetricsAggregationBuilder and removes the relevant test methods for the metrics aggregations.

time:
2015-07-14T14:31:49Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/ResourceNotFoundException.java
core/src/main/java/org/elasticsearch/action/NoShardAvailableActionException.java
core/src/main/java/org/elasticsearch/action/RoutingMissingException.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/index/AlreadyExpiredException.java
core/src/main/java/org/elasticsearch/index/IndexException.java
core/src/main/java/org/elasticsearch/index/IndexNotFoundException.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/engine/EngineException.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorException.java
core/src/main/java/org/elasticsearch/index/query/QueryParsingException.java
core/src/main/java/org/elasticsearch/index/shard/IllegalIndexShardStateException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRecoveryException.java
core/src/main/java/org/elasticsearch/index/shard/ShardNotFoundException.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotException.java
core/src/main/java/org/elasticsearch/index/store/FsDirectoryService.java
core/src/main/java/org/elasticsearch/index/translog/TranslogException.java
core/src/main/java/org/elasticsearch/indices/AliasFilterParsingException.java
core/src/main/java/org/elasticsearch/indices/IndexAlreadyExistsException.java
core/src/main/java/org/elasticsearch/indices/IndexClosedException.java
core/src/main/java/org/elasticsearch/indices/IndexCreationException.java
core/src/main/java/org/elasticsearch/indices/IndexPrimaryShardNotAllocatedException.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/InvalidAliasNameException.java
core/src/main/java/org/elasticsearch/indices/InvalidIndexNameException.java
core/src/main/java/org/elasticsearch/indices/TypeMissingException.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesNotFoundException.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotUtils.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/get/GetIndexTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorClusterSettingsTests.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/benchmark/recovery/ReplicaRecoveryBenchmark.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityTests.java
core/src/test/java/org/elasticsearch/cluster/SimpleClusterStateTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolverTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/indices/IndicesOptionsIntegrationTests.java
core/src/test/java/org/elasticsearch/indices/exists/types/TypesExistsTests.java
core/src/test/java/org/elasticsearch/indices/flush/SyncedFlushSingleNodeTest.java
core/src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
core/src/test/java/org/elasticsearch/indices/state/SimpleIndexStateTests.java
core/src/test/java/org/elasticsearch/script/ScriptIndexSettingsTest.java
core/src/test/java/org/elasticsearch/test/TestCluster.java
core/src/test/java/org/elasticsearch/test/store/MockFSDirectoryService.java
core/src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/DeleteByQueryTests.java
comments:
Generify Index and Shard exceptions

Today we have a intermediate hierarchy for shard and index exceptions
which makes it hard to introduce generic exceptions like ResourceNotFoundException
intoduced in this commit. This commit breaks up the hierarchy by adding index and shard
as a special internal header that gets rendered for every exception that fills that header.
This commit removes dedicated exceptions like `IndexMissingException` or
`IndexShardMissingException` in favour of `ResourceNotFoundException`

time:
2015-07-14T14:05:48Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
comments:
Simplify assignToNode to only do initializing
The method really only should do the move from unassigned to initializing, all the other moves have explicit methods like relocate

time:
2015-07-14T12:36:03Z
class:
comments:
Merge pull request #12223 from awislowski/patch-1

Update index.asciidoc

time:
2015-07-14T12:35:31Z
class:
core/src/main/java/org/elasticsearch/action/percolate/PercolateShardRequest.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Merge pull request #12215 from martijnvg/percolator/filter_by_now

Support filtering percolator queries by date using `now`

time:
2015-07-14T12:34:11Z
class:
comments:
[DOCS] More updates to script parameters section of breaking changes doc

time:
2015-07-14T12:33:37Z
class:
comments:
[DOCS] updates to script parameters section of braking changes doc

time:
2015-07-14T10:35:32Z
class:
core/src/main/java/org/elasticsearch/action/percolate/PercolateShardRequest.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
percolator: Support filtering percolator queries by date using `now`

Closes #12185

time:
2015-07-14T10:04:16Z
class:
comments:
Add a release profile to the parent pom.xml

This commit adds a release profile that runs additional checks like:
  * check for `norelease` in the source
  * check for `AwaitsFix` annotations
  * deploys only if all reactor builds where successful
  * signs all artifacts with the GPG key provided (required for release)
  * builds the RPM together with the zip, tar.gz and .deb during package phase

Note this is WIP of replacing major functionality of the release pythong script but
won't work by itself.

time:
2015-07-14T09:31:16Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Default delayed allocation timeout to 1m from 0
Change the default delayed allocation timeout from 0 (no delayed allocation) to 1m. The value came from a test of having a node with 50 shards being indexed into (so beefy translog requiring flush on shutdown), then shutting it down and starting it back up and waiting for it to join the cluster. This took, on a slow machine, about 30s.
The value is conservatively low and does not try to address a virtual machine / OS restart for now, in order to not have the affect of node going away and users being concerned that shards are not being allocated to the rest of the cluster as a result of that. The setting can always be changed in order to increase the delayed allocation if needed.
closes #12166

time:
2015-07-14T09:15:44Z
class:
comments:
Merge pull request #12224 from awislowski/patch-2

Doc: fix github source link in resiliency pageCloses #12224

time:
2015-07-14T08:32:20Z
class:
comments:
[TEST] Don't use replicas to stabelize assertion.

This test asserts that the first recovery result is of type SNAPSHOT.
This assertion might not be true depending on the rendering order if
a replica is recovered quick enough. This commit disables replicas and
their recovery since it's not the purpose of this test.

time:
2015-07-14T08:31:10Z
class:
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Merge pull request #12214 from martijnvg/percolator/_parent_field/npe

Fix NPE when percolating a document that has a _parent field configured in its mapping

time:
2015-07-14T08:14:15Z
class:
comments:
fix github source link

time:
2015-07-14T08:01:16Z
class:
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
percolator: Don't throw NPE when percolating a document that has a _parent field configured in its mapping

Closes #12192

time:
2015-07-14T07:35:15Z
class:
comments:
Update index.asciidoc

time:
2015-07-14T01:46:09Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Merge pull request #12221 from rmuir/version_hell

fail plugins on version mismatch

time:
2015-07-14T01:01:39Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
fail plugins on version mismatch

time:
2015-07-14T00:09:06Z
class:
comments:
tests: explicitly disable security manager for maven integration tests

time:
2015-07-13T22:37:34Z
class:
comments:
Merge pull request #12219 from rjernst/fix/integ-test-exceptions

Tests: Explicitly use newer junit runner for maven integ tests

time:
2015-07-13T22:33:02Z
class:
comments:
Tests: Explicitly use newer junit runner for maven integ tests

The older runner (junit 4.0?) hides exceptions in static initialization
(and runs the tests anyways!). With this change, the actual cause
of the recent windows integ test failures with security manager
are shown.

time:
2015-07-13T20:40:18Z
class:
comments:
Removed duplication in parent pom

Found 2 definition for  `maven-install-plugin`

time:
2015-07-13T18:31:11Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
comments:
Add MetaData.clusterUUID to ClusterState.toXContent

The MetaData.clusterUUID is guaranteed to be unique across clusters and is handy (which may or may not have the same human readable cluster name).

Closes #11832

time:
2015-07-13T18:26:37Z
class:
core/src/main/java/org/elasticsearch/Version.java
core/src/test/java/org/elasticsearch/VersionTests.java
comments:
updated the elasticsearch versioning format

Moving to from `X.Y.Z.beta1`/`X.Y.Z.RC1` to `X.Y.Z-beta1`/`X.Y.Z-rc1`

time:
2015-07-13T18:15:54Z
class:
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/VersionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ShardReplicationTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffPublishingTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTest.java
core/src/test/java/org/elasticsearch/gateway/MetaDataStateFormatTest.java
core/src/test/java/org/elasticsearch/gateway/RecoveryFromGatewayTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/ShardPathTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Rename MetaData.uuid -> MetaData.clusterUUID and IndexMetaData.uuid-> IndexMetaData.indexUUID

As explained in #11831, we currently have uuid fields on the cluster state, meta data and index metadata. The latter two are persistent across changes are being effectively used as a persistent uuid for this cluster and a persistent uuid for an index. The first (ClusterState.uuid) is ephemeral and changes with every change to the cluster state. This is confusing,

We settled on having the following, new names:

-> ClusterState.uuid -> stateUUID (transient)
-> MetaData.uuid -> clusterUUID (persistent)
-> IndexMetaData.uuid -> indexUUID (persistent).

Closes #11914
Closes #11831

time:
2015-07-13T15:40:35Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Throw LockObtainFailedException exception when we can lock index directory

Today we throw ElasticsearchException if we can't lock the index. This can cause
problems since some places where we have logic to deal with IOException on shard
deletion won't schedule a retry if we can't lock the index dir for removal. This
is the case on shadow replicas for instance if a shared FS is used. The result
of this is that the delete of an index is never acked.

time:
2015-07-13T15:35:50Z
class:
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
comments:
Fix rewrite set twice in WildcardQueryParser

Closes #12207

time:
2015-07-13T10:29:50Z
class:
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasTests.java
comments:
[TEST] ensure exceptions won't cause test to hang

time:
2015-07-13T09:34:34Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
comments:
Only clear open search ctx if the index is delete or closed via API

A change in #12116 introduces closing / cleaning of search ctx even if
the index service was closed due to a relocation of it's last shard. This
is not desired since in that case it's fine to serve the pending requests from
the relocated shard. This commit adds an extra check to ensure that the index is
either removed (delete) or closed via API.

time:
2015-07-13T09:21:35Z
class:
core/src/main/java/org/elasticsearch/index/engine/FlushingRecoveryCounter.java
comments:
remove dead code

time:
2015-07-13T07:59:30Z
class:
core/src/main/java/org/elasticsearch/index/query/TermQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Term Query: Be more strict during parsing

The term query parser was too lenient during parsing and allowed to specify
more than one field, even though this expected to filter only for a single field.

This commit returns an exception if a query has been specified more than once.

Closes #12184

time:
2015-07-12T23:49:01Z
class:
comments:
Merge pull request #12194 from aleph-zero/fix/12193

jsr166e was left out of shaded jar

time:
2015-07-12T11:26:21Z
class:
comments:
Merge pull request #12136 from tylerjl/docs/upgrade_guide_plugins

[DOCS] Mention plugin version compatibility in upgrade guide

time:
2015-07-11T22:12:23Z
class:
comments:
jsr166e was left out of shaded jar

The classes in com.twitter.jsr166e were not getting included in the
shaded jar due to a missing configuration line.

Closes #12193

time:
2015-07-11T05:12:01Z
class:
comments:
Merge pull request #12190 from rmuir/enforce_plugin_name

enforce plugins are installed with correct name, and install correctly in tests

time:
2015-07-11T02:30:28Z
class:
comments:
Minor fix to a failing REST test due to the prior check-in.

time:
2015-07-11T01:27:48Z
class:
core/src/main/java/org/elasticsearch/script/CompiledScript.java
core/src/main/java/org/elasticsearch/script/NativeScriptEngineService.java
core/src/main/java/org/elasticsearch/script/ScriptEngineService.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionExecutableScript.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionScriptEngineService.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionSearchScript.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java
core/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
core/src/test/java/org/elasticsearch/script/ScriptModesTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/script/expression/ExpressionScriptTests.java
core/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTest.java
plugins/lang-javascript/src/main/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineService.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptEngineTests.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptMultiThreadedTest.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/SimpleBench.java
plugins/lang-python/src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/PythonScriptEngineTests.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/PythonScriptMultiThreadedTest.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/SimpleBench.java
comments:
Add script type and script name to error messages

Modified ScriptEngineService to pass in a CompiledScript object
with newly added name and type member variables.
This can in turn be used to give better scripting error messages
with the type of script used and the name of the script.

Required slight modifications to the caching mechanism.

Note that this does not enforce good behavior in that plugins will
have to write exceptions that also output the name of the script
in order to be effective. There was no way to wrap the script
methods in a try/catch block properly further up the chain because
many have script-like objects passed back that can be run at a
later time.

closes #6653
closes #11449

time:
2015-07-10T23:20:25Z
class:
comments:
enforce plugins are installed with correct name, and install correctly in integ tests

time:
2015-07-10T23:01:18Z
class:
comments:
[DOCS] Fix link to serial_diff docs

time:
2015-07-10T22:26:19Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffTests.java
comments:
Merge pull request #11196 from polyfractal/feature/aggs_2_0_diff

Aggregations: add serial differencing pipeline aggregation

time:
2015-07-10T22:22:01Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffTests.java
comments:
Aggregations: add serial differencing pipeline aggregation

time:
2015-07-10T18:48:26Z
class:
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpChannelTests.java
comments:
Merge pull request #11890 from jaymode/cors

change CORS allow origin default to allow no origins

time:
2015-07-10T17:15:56Z
class:
comments:
Merge pull request #12183 from erichard/patch-1

Fix documentation typo

time:
2015-07-10T16:58:28Z
class:
comments:
[DOCS] Simple patch to make creating aliases with glob patterns clearer

This PR is a simple doc patch to explicitly mention with an example of
how to create an alias using a glob pattern.  This comes up from
time-to-time with our customers and in the community and although
mentioned in the documentation already, is not obvious.

Also mention that the alias will not auto-update as indices matching the
glob change.

Closes #12175
Closes #12176

time:
2015-07-10T16:47:21Z
class:
comments:
Docfix: ignore_above uses string length, not utf-8

ignore_above is used to guard against the lucene limitation
that a term cannot exceed 32766 bytes.

However, the implementation just used the character count, which
doesn't take into account the fact that some characters have
multi-byte utf-8 encodings.

This commit updates the docs to make this relationship clear.

Closes #11563

time:
2015-07-10T15:42:53Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
comments:
change visibility

time:
2015-07-10T15:12:51Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
fix npe

time:
2015-07-10T14:50:51Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
comments:
Merge pull request #12150 from martijnvg/aliases/remove_strict_filter_parsing

Don't require fields in alias filters to exist in the mapping

time:
2015-07-10T13:52:30Z
class:
comments:
Docs: Updated the source field docs to remove deprecation of includes/excludes

Also provide warnings about why disabling source is probably something
you don't want to do

Closes #12141

time:
2015-07-10T13:18:28Z
class:
core/src/main/java/org/elasticsearch/action/DocumentRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/TransportGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportNodesSnapshotsStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/exists/TransportAliasesExistAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/get/TransportGetAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/exists/indices/TransportIndicesExistsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/exists/types/TransportTypesExistsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/get/TransportGetIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/recovery/TransportRecoveryAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/get/TransportGetSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplatesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/get/TransportUpgradeStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/get/TransportGetWarmersAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/indexedscripts/delete/TransportDeleteIndexedScriptAction.java
core/src/main/java/org/elasticsearch/action/indexedscripts/get/TransportGetIndexedScriptAction.java
core/src/main/java/org/elasticsearch/action/indexedscripts/put/TransportPutIndexedScriptAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchCountAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryAndFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryThenFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryAndFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryThenFetchAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchScanAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
core/src/main/java/org/elasticsearch/action/suggest/TransportSuggestAction.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeReadAction.java
core/src/main/java/org/elasticsearch/action/support/master/info/TransportClusterInfoAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/dfs/TransportDfsOnlyAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayMetaState.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/action/support/TransportActionFilterChainTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ShardReplicationTests.java
core/src/test/java/org/elasticsearch/client/node/NodeClientHeadersTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolverTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/routing/AliasResolveRoutingTests.java
plugins/delete-by-query/src/main/java/org/elasticsearch/action/deletebyquery/TransportDeleteByQueryAction.java
comments:
Internal: refactored MetaData to split the concrete index name resolution to IndexNameExpressionResolver.

Changes in a nutshell:
* All expression logic is now encapsulated by ExpressionResolver interface.
* MetaData#convertFromWildcards() gets replaced by WildcardExpressionResolver.
* All of the indices expansion methods are being moved from MetaData class to the new IndexNameExpressionResolver class.
* All single index expansion optimisations are removed.

The logic for resolving a concrete index name from an expression has been moved from MetaData to IndexExpressionResolver. The logic has been cleaned up and simplified were was possible without breaking bwc.

Also the notion of aliasOrIndex has been changed to index expression.

The IndexNameExpressionResolver translates index name expressions into concrete indices. The list of index name expressions are first delegated to the known ExpressionResolverS. An ExpressionResolver is responsible for translating if possible an expression into another expression (possibly but not required this can be concrete indices or aliases) otherwise the expressions are left untouched. Concretely this means converting wildcard expressions into concrete indices or aliases, but in the future other implementations could convert expressions based on different rules.

To prevent many overloading of methods, DocumentRequest extends now from IndicesRequest. All implementation of DocumentRequest already did implement IndicesRequest indirectly.

time:
2015-07-10T12:43:47Z
class:
comments:
Allow rpm to be build as part of package phase

This allows the creation of the RPM artifact as part of the
maven package phase. The result of this is that we get checksum and
name correction for-free as it's all build an installed into the m2
repository. This also publishes the RPM together with .deb to the mvn
mirror.

Note: this will only build the RPM as part of the package phase if
`-Dpackage.rpm=true` since the binaries to build the RPM are not
availabel on all platforms.

time:
2015-07-10T12:27:53Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
comments:
Free all pending search contexts if index is closed or removed

Today we only clear search contexts for deleted indies. Yet, we should
do the same for closed indices to ensure they can be reopened quickly.

Closes #12116

time:
2015-07-10T12:09:31Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/metrics/ValuesSourceMetricsAggregationBuilder.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractNumericTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AvgTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/CardinalityTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MaxTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MinTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/PercentileRanksTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/PercentilesTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/SumTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ValueCountTests.java
comments:
Aggregations: Adds new script API to ValuesSourceMetricsAggregationBuilder

A method for the new Script API were missing in the ValuesSourceMetricsAggregationBuilder. This change adds the missing method and deprecates the old Script API methods

time:
2015-07-10T11:30:31Z
class:
comments:
Calculate artifact checksums in maven

Today we calculate the checksums in a python scritp to do the release.
We can also do this way simpler in maven using an ant task.

time:
2015-07-10T08:55:43Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
comments:
Treat path object as a simple value objects instead of Iterable in XContentBuilder, using toString() to create String representation.

This addresses #11771

time:
2015-07-10T08:25:15Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfoTest.java
comments:
[test] list of plugins should have well-defined order

We now return list of plugins sorted by name.

Closes #12174.

time:
2015-07-10T05:49:31Z
class:
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTest.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
comments:
Allocation: Shard Started messages should be matched using an exact match

When a node sends a shard started message to the master, the master goes through the routing table looking for the shard to start. At the moment we validate the indexUUID, the node the shard is assigned to and the fact that the shard is initializing. This check goes wrong if a relocating replica shard finishes recovery just at the moment the source node  leaves the cluster. In this case the master will cancel the recovery and will likely assign a new initializing replica to the same target node. In this case the message from the relocation recovery can activate the new replica wrongfully.

Also, the logic for decided whether an incoming shard started message will be applied was split between ShardStateAction and the AllocationService.
This commit does the following:
1) Let ShardStateAction only filter basic stuff like index existence and indexUUID.
2) Move the trickier shard started matching logic to the AllocationService and make it stricter
3) Unify ShardStateAction filtering logic for both shard started and shard failed.
4) Add unit tests for all of the above.

For an example test failure see: http://build-us-00.elastic.co/job/es_core_16_centos/388/

Closes #11999

time:
2015-07-10T05:02:13Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
fix broken usage of path api

time:
2015-07-09T20:38:15Z
class:
comments:
appease maven warnings about using ${version} in pom

time:
2015-07-09T19:47:17Z
class:
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryTests.java
comments:
[TEST] Assert against minCompatVersion instead of a static string

time:
2015-07-09T19:41:48Z
class:
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
comments:
silence symlink test on windows

time:
2015-07-09T19:24:32Z
class:
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/VersionTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingBackwardCompatibilityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesTests.java
core/src/test/java/org/elasticsearch/codecs/CodecTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
comments:
Make 2.0.0.beta1-SNAPSHOT the current version.

Today everything is tight to having the next version as the latest.
In order to work towards 2.0.0.beta1 we need to fix all the usage of
2.0.0-SNAPSHOT to reflect the version we will release soon.
Usually we do this on the release branch but to simplify things I wanna
keep this on master for now and move to 2.1.0-SNAPSHOT on master once
we created a 2.0 branch.

Closes #12148

time:
2015-07-09T17:52:52Z
class:
comments:
Fix REST test for cat.nodes (Windows load average OS stats return -1.00)

time:
2015-07-09T17:05:02Z
class:
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
comments:
Adapt to changed method name

time:
2015-07-09T16:59:31Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsWriter.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
core/src/main/java/org/elasticsearch/index/query/WrapperQueryParser.java
core/src/main/java/org/elasticsearch/index/query/support/QueryParsers.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/os/JmxOsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/main/java/org/elasticsearch/monitor/process/JmxProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/SimulatedAnealingMinimizer.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsParseElement.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ShardReplicationTests.java
core/src/test/java/org/elasticsearch/benchmark/monitor/os/OsProbeBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/monitor/process/ProcessProbeBenchmark.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/bwcompat/RestoreBackwardsCompatTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoServiceTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestBase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractStringFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ParentChildFieldDataTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/snapshots/blobstore/FileInfoTest.java
core/src/test/java/org/elasticsearch/indices/flush/SyncedFlushUnitTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
core/src/test/java/org/elasticsearch/monitor/process/ProcessProbeTests.java
core/src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/TopHitsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgUnitTests.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsTests.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
core/src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
core/src/test/java/org/elasticsearch/test/ExternalTestCluster.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/ICUIntegrationTests.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/SimpleSmartChineseIntegrationTests.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/SimplePolishIntegrationTests.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptSearchTests.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/PythonScriptSearchTests.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-09T16:56:31Z
class:
comments:
[DOCS] Clarify that non-_site plugins likely need upgrading

time:
2015-07-09T16:02:33Z
class:
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/test/java/org/elasticsearch/bwcompat/RestoreBackwardsCompatTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Snapshot info should contain version of elasticsearch that created the snapshot

This information was stored with the snapshot but wasn't available on the interface. Knowing the version of elasticsearch that created the snapshot can be useful to determine the minimal version of the cluster that is required in order to restore this snapshot.

Closes #11980

time:
2015-07-09T15:50:41Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java
comments:
strip elasticsearch- and es- from any plugin name

#12158 only partially fixed #12143 by removing the prefix from official plugin names. This change
removes the prefixes from any plugin names.

time:
2015-07-09T15:48:48Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
Merge pull request #12156 from cbuescher/feature/query-refactoring-spannear

Query refactoring: SpanNearQueryBuilder and Parser

time:
2015-07-09T15:35:48Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNearQueryBuilderTest.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
Query refactoring: SpanNearQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new toQuery() method analogous to other recent query refactorings.

Relates to #10217

time:
2015-07-09T15:28:20Z
class:
comments:
Docs: Update scripting.asciidoc

removed underscore for "_doc" to "doc"

Closes #12088

time:
2015-07-09T15:26:17Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java
comments:
Merge pull request #12158 from jaymode/plugin_name_prefix

remove elasticsearch- from name of official plugins

time:
2015-07-09T15:09:12Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java
comments:
remove elasticsearch- from name of official plugins

This change fixes the plugin manager to trim `elasticsearch-` and `es-` prefixes from plugin names
for our official plugins. This restores the old behavior prior to #11805.

Closes #12143

time:
2015-07-09T14:50:48Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Merge pull request #12157 from rmuir/plugin_permissions

Fix pluginmanager permissions for bin/ scripts

time:
2015-07-09T14:39:58Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Fix pluginmanager permissions for bin/ scripts

Today it will remove all permissions and only set execute bit:

    ---x--x--x

Instead we should preserve existing permissions, and just add
read and execute to whatever is there.

Closes #12142

time:
2015-07-09T13:57:17Z
class:
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
core/src/test/java/org/elasticsearch/test/ExternalTestCluster.java
comments:
Merge pull request #12155 from jaymode/external_test_cluster_settings

allow settings to be passed to client for external test cluster

time:
2015-07-09T13:27:47Z
class:
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
core/src/test/java/org/elasticsearch/test/ExternalTestCluster.java
comments:
allow settings to be passed to client for external test cluster

This change allows custom settings to be passed to the client for the external test cluster,
which is necessary when additional settings need to be passed to the client in order to
properly communicate with the external test cluster.

time:
2015-07-09T13:07:42Z
class:
comments:
Merge pull request #11800 from arcz/master

Fix indentation in deb init script

time:
2015-07-09T10:07:49Z
class:
comments:
added breaking docs

time:
2015-07-09T10:02:49Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
comments:
aliases: Don't require fields used in alias filters to exist

time:
2015-07-09T09:56:23Z
class:
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsTests.java
comments:
test: make sure the inner hits are in the expected order

time:
2015-07-09T09:44:17Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
comments:
Merge pull request #12147 from kimchy/remove_double_elect

Remove double call to elect primaries

time:
2015-07-09T09:29:41Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
comments:
Remove double call to elect primaries
There is no need to call the elect logic twice, we used to need it, but no longer since we handle dangling replicas for unassigned primaries properly

time:
2015-07-09T08:19:03Z
class:
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/WrapperQueryParser.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsParseElement.java
core/src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/TopHitsTests.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsTests.java
comments:
inner_hits: Properly support named queries for both nested and parent child inner hits.

Before inner_hits existed named queries has support to also verify if inner queries of nested query matched with returned documents. This logic was broken and became obsolete from the moment inner hits get released. #10694 fixed named queries for nested docs in the top_hits agg, but it didn't fix the named query support for nested inner hits. This commit fixes that and on top of this also adds support for parent/child inner hits.

time:
2015-07-09T07:10:29Z
class:
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
[TEST] Add missing ensureYellow() calls to SearchQueryTests.

time:
2015-07-09T07:01:34Z
class:
comments:
Merge pull request #12131 from jakommo/master

Fixed typos in examples on common-terms-query.asciidoc. JSON was inva…

time:
2015-07-09T06:55:52Z
class:
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractStringFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ParentChildFieldDataTests.java
core/src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
comments:
Merge pull request #12127 from jpountz/fix/sort_merge

Clean up handling of missing values when merging shard results on the coordinating node.

time:
2015-07-09T06:12:54Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
comments:
Merge pull request #12139 from israelekpo/patch-1

BulkRequestBuilder.add() has typo in JavaDoc.

time:
2015-07-09T04:39:28Z
class:
comments:
Make integ tests antfile a property, so it can be changed

time:
2015-07-09T02:34:12Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
comments:
BulkRequestBuilder.add() has typo in JavaDoc.

Closes #12138

time:
2015-07-08T23:32:38Z
class:
comments:
[DOCS] Mention plugin version compatibility in upgrade guide

time:
2015-07-08T22:56:29Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
comments:
Fix value of HoltWinters seasonality param in builder

Should be `type`, not `seasonalityType`

time:
2015-07-08T22:04:36Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgUnitTests.java
comments:
[TESTS] Fix bad math in moving_avg unit tests

time:
2015-07-08T20:45:24Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/SimulatedAnealingMinimizer.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
comments:
Merge pull request #11881 from polyfractal/feature/movavg_optim2

Aggregations: add cost minimizer to tune moving_avg parameters

time:
2015-07-08T20:20:34Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/SimulatedAnealingMinimizer.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java
comments:
Aggregations: add cost minimizer to moving_avg aggregation

time:
2015-07-08T19:24:14Z
class:
comments:
fix spelling and add to migration docs

time:
2015-07-08T19:09:43Z
class:
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/test/java/org/elasticsearch/index/snapshots/blobstore/FileInfoTest.java
comments:
Add validation of snapshot FileInfo during parsing

Making sure that the file info that we read from the snapshot is still sane.

time:
2015-07-08T18:03:58Z
class:
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
comments:
do not prompt for node name twice

We allow setting the node's name a few different ways: the `name` system
property, the setting `name`, and the setting `node.name`. There is an order
of preference to these settings that gets applied, which can copy values from the
system property or `node.name` setting to the `name` setting. When setting
only `node.name` to one of the prompt placeholders, the user would be
prompted twice as the value of `node.name` is copied to `name` prior to
prompting for input. Additionally, the value entered by the user for `node.name`
would not be used and only the value entered for `name` would be used.

This fix changes the behavior to only prompt once when `node.name is set` and
`name` is not set. This is accomplished by waiting until all values have been
prompted and replaced, then the logic for determining the node's name is
executed.

Closes #11564

time:
2015-07-08T18:00:37Z
class:
comments:
Revert "[TEST] Add REST awaitsFix for bulk fields test"

This reverts commit 799e8019804658e3632a1bc718c801c501e94e15.

time:
2015-07-08T17:59:34Z
class:
comments:
[TEST] Add REST awaitsFix for bulk fields test

Relates to #12133

time:
2015-07-08T17:55:24Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
comments:
Fix parsing of the `fields` parameter of bulk requests.

time:
2015-07-08T17:34:38Z
class:
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
comments:
The test getSwap in OsProbeTests shouldn't fail on a machine with no swap

In some cases the swap size can be reported as 0.

time:
2015-07-08T17:22:03Z
class:
comments:
Merge pull request #11538 from Collaborne/docs-sort-sr-typo

Fix a typo in the documentation: six_hun -> "narrower"

time:
2015-07-08T16:43:08Z
class:
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsWriter.java
comments:
Only load term statistics if required

time:
2015-07-08T16:25:32Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
comments:
Merge pull request #12114 from jasontedor/feature/11527

Add support for retrieving fields in bulk updatesThis commit adds support to retrieve fields when using the bulk update API. This functionality was previously available for the update APIbut not for the bulk update API.Closes #11527

time:
2015-07-08T16:21:03Z
class:
comments:
Fix grammar

Added 'to' on line 79 to make consistent and fix grammar.

time:
2015-07-08T16:06:20Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
comments:
Add support for retrieving fields in bulk updates

This commit adds support to retrieve fields when using the bulk update API. This functionality was previously available for the update API
but not for the bulk update API.

Closes #11527

time:
2015-07-08T15:58:27Z
class:
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
comments:
Merge pull request #12130 from rjernst/fix/doc-mapper-in-engine

Remove mapper references from Engines

time:
2015-07-08T15:48:10Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/os/JmxOsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/test/java/org/elasticsearch/benchmark/monitor/os/OsProbeBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/monitor/process/ProcessProbeBenchmark.java
core/src/test/java/org/elasticsearch/monitor/os/OsProbeTests.java
comments:
Update OS stats

time:
2015-07-08T15:47:04Z
class:
comments:
Fixed typos in examples on common-terms-query.asciidoc. JSON was invalid before

time:
2015-07-08T15:45:11Z
class:
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
comments:
Internal: Remove mapper references from Engines

This was previously necessary with MapperAnalyzer, but there are no more uses.

time:
2015-07-08T15:03:18Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
comments:
Merge pull request #8352 from jpountz/fix/match_rewrite

Minor fixes to the `match` query.

time:
2015-07-08T14:51:41Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
comments:
Minor fixes to the `match` query.

Fixed documentation since the default rewrite method for fuzzy queries is to
select top terms, fixed usage of the fuzzy rewrite method, and removed unused
`rewrite` parameter.

Close #6932

time:
2015-07-08T14:50:13Z
class:
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
core/src/main/java/org/elasticsearch/index/query/support/QueryParsers.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Merge pull request #12129 from jpountz/enhancement/expose_blended_rewrite

Expose Lucene's new TopTermsBlendedFreqScoringRewrite.

time:
2015-07-08T14:41:10Z
class:
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
comments:
Replacing now unsupported dot-notation in object field mappings in base test setup

We still want one mapping with an object with two inner fields for e.g. testing one
code path in ExistsQueryBuilder. Using the dot notation for field names was
forbidden with recent changes from master coming in.

time:
2015-07-08T14:17:27Z
class:
comments:
[build] explicitly add http-client dependency

As discussed in the PR https://github.com/elastic/elasticsearch/pull/12036#issuecomment-119584570

time:
2015-07-08T14:01:47Z
class:
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
core/src/main/java/org/elasticsearch/index/query/support/QueryParsers.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Expose Lucene's new TopTermsBlendedFreqScoringRewrite.

This rewrite method is interesting because it computes scores as if all terms
had the same frequencies, which avoids disappointments with ranking when a fuzzy
query ranks typos first given that they are less frequent than the correct term.

time:
2015-07-08T13:37:24Z
class:
comments:
[build] cloud-aws doesn't register s3 repos anymore

Reported in https://github.com/elastic/elasticsearch/issues/11647#issuecomment-118523861

> btw, I think you broke some plugins on Master, cloud-aws doesn't register s3 repos anymore.

```
org.elasticsearch.common.inject.CreationException: Guice creation errors:

1) Error injecting constructor, java.lang.NoClassDefFoundError: org/apache/http/protocol/HttpContext
  at org.elasticsearch.repositories.s3.S3Repository.<init>(Unknown Source)
  while locating org.elasticsearch.repositories.s3.S3Repository
  while locating org.elasticsearch.repositories.Repository

1 error
	at org.elasticsearch.common.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:344)
	at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:178)
	at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)
	at org.elasticsearch.common.inject.InjectorImpl.createChildInjector(InjectorImpl.java:140)
	at org.elasticsearch.common.inject.ModulesBuilder.createChildInjector(ModulesBuilder.java:69)
	at org.elasticsearch.repositories.RepositoriesService.createRepositoryHolder(RepositoriesService.java:404)
	at org.elasticsearch.repositories.RepositoriesService.registerRepository(RepositoriesService.java:368)
	at org.elasticsearch.repositories.RepositoriesService.access$100(RepositoriesService.java:55)
	at org.elasticsearch.repositories.RepositoriesService$1.execute(RepositoriesService.java:110)
	at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:378)
	at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:209)
	at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:179)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.NoClassDefFoundError: org/apache/http/protocol/HttpContext
	at com.amazonaws.AmazonWebServiceClient.<init>(AmazonWebServiceClient.java:129)
	at com.amazonaws.services.s3.AmazonS3Client.<init>(AmazonS3Client.java:432)
	at com.amazonaws.services.s3.AmazonS3Client.<init>(AmazonS3Client.java:414)
	at org.elasticsearch.cloud.aws.InternalAwsS3Service.getClient(InternalAwsS3Service.java:153)
	at org.elasticsearch.cloud.aws.InternalAwsS3Service.client(InternalAwsS3Service.java:82)
	at org.elasticsearch.repositories.s3.S3Repository.<init>(S3Repository.java:125)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
	at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:56)
	at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)
	at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)
	at org.elasticsearch.common.inject.FactoryProxy.get(FactoryProxy.java:54)
	at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)
	at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)
	at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)
	at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)
	at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)
	at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:201)
	at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)
	at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:858)
	at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)
	at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)
	... 13 more
Caused by: java.lang.ClassNotFoundException: org.apache.http.protocol.HttpContext
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	... 37 more
```

Closes #12034.

time:
2015-07-08T13:22:43Z
class:
comments:
[test] fix missing REST specs

Something went wrong with my last commit.

Fixing it here.

time:
2015-07-08T13:19:26Z
class:
plugins/lang-python/src/test/java/org/elasticsearch/script/python/PythonScriptSearchTests.java
comments:
[python] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

Also follow up of #12091

time:
2015-07-08T13:19:26Z
class:
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/JavaScriptScriptSearchTests.java
comments:
[Javascript] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

Also follow up of #12091

time:
2015-07-08T13:19:26Z
class:
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/SimplePolishIntegrationTests.java
comments:
[Stempel] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

Also follow up of #12091

time:
2015-07-08T13:19:26Z
class:
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/SimpleSmartChineseIntegrationTests.java
comments:
[Smartcn] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

Also follow up of #12091

time:
2015-07-08T13:19:26Z
class:
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/ICUIntegrationTests.java
comments:
[ICU] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

Also follow up of #12091

Tests can use more than one JVM

We don't need anymore to set the number of jvm to run tests as we moved IT to Rest Tests
For all plugins but cloud plugins which will require another way for running integration tests.

time:
2015-07-08T13:12:45Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/process/JmxProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/test/java/org/elasticsearch/benchmark/monitor/process/ProcessProbeBenchmark.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/monitor/process/ProcessProbeTests.java
comments:
Process Stats: remove sigar specific stats from APIs and add JMX implementation

time:
2015-07-08T12:48:35Z
class:
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
core/src/test/java/org/elasticsearch/index/fielddata/AbstractStringFieldDataTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ParentChildFieldDataTests.java
core/src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
comments:
Clean up handling of missing values when merging shard results on the coordinating node.

Today shards are responsible for producing one sort value per document, which
is later used on the coordinating node to resolve the global top documents.
However, this is problematic on string fields with
`missing: _first, order: desc` or `missing: _last, order: asc` given that there
is no such thing as a string that compares greater than any other string. Today
we use a string containing a single code point which is the maximum allowed code
point but this is a hack: instead we should inform the coordinating node that
the document had no value and let it figure out how it should be sorted
depending on whether missing values should be sorted first or last.

Close #9155

time:
2015-07-08T12:36:26Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoServiceTests.java
comments:
Cleanup ShardRoutingState uses and hide implementation details of ClusterInfo

time:
2015-07-08T12:15:28Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ShardReplicationTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthResponsesTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/TestShardRouting.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestBase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/indices/flush/SyncedFlushUnitTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
comments:
Consolidate ShardRouting construction
Simplify and consolidate ShardRouting construction. Make sure that there is really only one place it gets created, when a shard is first created in unassigned state, and from there on, it is either copy constructed or built internally as a target for relocation.
This change helps make sure within our codebase data carries over by the ShardRouting is not lost as the shard goes through transitions, and can help simplify the addition of more data on it (like uuid).
For testing, a centralized TestShardRouting allows to create testable versions of ShardRouting, that are not needed to be as strict as the non test codebase. This can be cleanup more later on, but it is a good start.
closes #12125

time:
2015-07-08T11:11:25Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollScanAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/common/joda/Joda.java
core/src/main/java/org/elasticsearch/common/lucene/search/XMoreLikeThis.java
core/src/main/java/org/elasticsearch/common/settings/Settings.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AtomicArray.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/PriorityComparator.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
core/src/main/java/org/elasticsearch/index/search/stats/SearchStats.java
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/MonitorService.java
core/src/main/java/org/elasticsearch/monitor/fs/FsInfo.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/fs/JmxFsProbe.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkInfo.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkService.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkStats.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/having/BucketSelectorBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/having/BucketSelectorParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/having/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/main/java/org/joda/time/format/StrictISODateTimeFormat.java
core/src/test/java/org/elasticsearch/NamingConventionTests.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesTests.java
core/src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsTests.java
core/src/test/java/org/elasticsearch/document/BulkTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketSelectorTests.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsUnitTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
core/src/test/java/org/elasticsearch/stresstest/leaks/GenericStatsLeak.java
core/src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/disruption/BlockClusterStateProcessing.java
core/src/test/java/org/elasticsearch/test/disruption/LongGCDisruption.java
core/src/test/java/org/elasticsearch/test/disruption/NetworkPartition.java
core/src/test/java/org/elasticsearch/test/disruption/NoOpDisruptionScheme.java
core/src/test/java/org/elasticsearch/test/disruption/ServiceDisruptionScheme.java
core/src/test/java/org/elasticsearch/test/disruption/SingleNodeDisruption.java
core/src/test/java/org/elasticsearch/test/disruption/SlowClusterStateProcessing.java
core/src/test/java/org/elasticsearch/test/rest/RestIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
plugins/analysis-icu/src/main/java/org/elasticsearch/indices/analysis/IcuIndicesAnalysis.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/AnalysisICURestIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/AnalysisKuromojiRestIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/KuromojiIntegrationTests.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/AnalysisPhoneticRestIT.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/SimplePhoneticIntegrationTests.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/AnalysisSmartChineseRestIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
plugins/cloud-aws/src/test/java/org/elasticsearch/cloud/aws/CloudAWSRestIT.java
plugins/cloud-azure/src/test/java/org/elasticsearch/cloud/azure/CloudAzureRestIT.java
plugins/cloud-gce/src/test/java/org/elasticsearch/cloud/gce/CloudGCERestIT.java
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/test/rest/DeleteByQueryRestIT.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavaScriptRestIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonScriptRestIT.java
comments:
Merge branch 'master' into feature/query-refactoring

 Conflicts:
	core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
	core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
	core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
	core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java

time:
2015-07-08T08:58:37Z
class:
core/src/main/java/org/elasticsearch/index/query/FilteredQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FilteredQueryParser.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/FilteredQueryBuilderTest.java
comments:
Merge pull request #11885 from MaineC/feature/filter-query-builder-refactoring

Refactors FilteredQueryBuilder.Relates to #10217

time:
2015-07-08T08:56:23Z
class:
core/src/main/java/org/elasticsearch/index/query/FilteredQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FilteredQueryParser.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/FilteredQueryBuilderTest.java
comments:
Separates JSON parsing from Lucene query creation, adds support for streaming, hashCode and equals as well as unit tests.

Relates to #10217

time:
2015-07-08T08:41:03Z
class:
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
comments:
Fix FuzzyQuery to properly handle Object, number, dates or String.

This makes FuzzyQueryBuilder and Parser take an Object as a value using the
same logic as termQuery, so that numbers, dates or Strings would be properly
handled.

Relates #11865
Closes #12020

time:
2015-07-08T08:17:43Z
class:
comments:
[phonetic] move integration tests to REST tests

Fix for #12095

time:
2015-07-08T08:04:18Z
class:
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/SimplePhoneticIntegrationTests.java
comments:
[phonetic] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

Also follow up of #12091

time:
2015-07-08T08:02:24Z
class:
core/src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
comments:
[TEST] Only sanitly check time values in stats

Testing the actual time value even with lowerbounds is very tricky
and fails very often. We should really just sanity check the values.

time:
2015-07-08T07:29:21Z
class:
comments:
Docs: fix wrong title level

time:
2015-07-08T06:58:13Z
class:
comments:
Merge pull request #12117 from rmuir/windows_integ_tests

Get integration tests working on windows.

time:
2015-07-08T06:40:00Z
class:
comments:
Get integration tests working on windows.

We also run our license checker in `mvn verify`, but there
are problems with checksum calculation on windows there, so I've
disabled the license checker on windows to prevent those false fails.

time:
2015-07-08T04:56:09Z
class:
comments:
Merge pull request #12112 from rmuir/fixtophints

Fix tophints noise.

time:
2015-07-08T04:45:02Z
class:
comments:
Fix tophints noise.

previously this was done wrong, junit4 ant tasks were brought into
the test classpath. This created jar hell for tests, and also encouraged
people to use _internal_ stuff like its bundled guava in tests.

also the task was set to be lenient and ignore errors. And we were
passing in a messload of unnecessary classpaths to run this. It
only needs the module classpath: the explicit ant dependencies we declare.

time:
2015-07-08T04:36:47Z
class:
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Merge pull request #12089 from rjernst/refactor/field-mapper-collapse

Remove AbstractFieldMapper

time:
2015-07-08T04:24:37Z
class:
comments:
Merge pull request #12111 from rmuir/printPID

print PID when starting ES in integ tests too.

time:
2015-07-08T04:10:25Z
class:
comments:
Use extract-pid when killing, too

time:
2015-07-08T04:04:27Z
class:
comments:
print PID when starting ES in integ tests too.

time:
2015-07-08T03:19:14Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Merge pull request #12109 from rjernst/fix/jar-hell-path

Change JarHell to operate on Path instead of URL

time:
2015-07-08T03:14:23Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Internal: Change JarHell to operate on Path instead of URL

This converts the tracking of jars and classes in JarHell to use
Path objects, instead of URL. This makes for nicer printing
of the underlying path when an error does occur.

time:
2015-07-08T03:10:18Z
class:
comments:
isolate integ tests a little better.

They are mostly just ES clients, but we can set tempdir and the usual
stuff to contain them better.

time:
2015-07-08T02:44:15Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Fix JarHell check to properly convert URL to Path so it can be compared
to java.home

time:
2015-07-08T01:05:06Z
class:
comments:
Merge pull request #12107 from rmuir/harden_integration_tests

Harden integration tests setup/teardown more

time:
2015-07-08T00:14:50Z
class:
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Merge branch 'master' into harden_integration_tests

time:
2015-07-08T00:13:56Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
comments:
Default fuzzy transpositions to true

This commit defaults fuzzy_transpositions on fuzzy queries to true. This means that by default, tranpositions will now count as a single
edit.

Closes #9278

time:
2015-07-08T00:11:50Z
class:
comments:
harden logic around integ test workspace and process mgmt

there is more to do here, but this is already a lot more robust.

* don't clean workspace in teardown, it might be useful for debugging if stuff fails.
* kill ES/clean workspace in setup, so things always work even in the case of ^C
* use pidfile to kill
* fail if kill errors
* refactor a bit more logic here

time:
2015-07-07T23:58:31Z
class:
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Merge pull request #12106 from rjernst/tests/jar-hell

Tests: Add unit tests for JarHell

time:
2015-07-07T23:54:03Z
class:
core/src/test/java/org/elasticsearch/bootstrap/JarHellTests.java
comments:
Tests: Add unit tests for JarHell

time:
2015-07-07T23:15:38Z
class:
comments:
Merge pull request #12104 from rmuir/harden_integration_tests

Integ setup should unzip org.elasticsearch:elasticsearch:zip

time:
2015-07-07T23:04:46Z
class:
comments:
Integ setup should unzip org.elasticsearch:elasticsearch:zip

This property is set by maven, and unlike the current hack, during
a multimodule build will be set to the correct thing.

Otherwise today sometimes we run integ tests with outdated ES
artifacts, which makes for incredibly confusing failures.

Closes #12101

time:
2015-07-07T22:15:48Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
comments:
Merge pull request #12102 from rmuir/bouncy

Allow use of bouncycastle

time:
2015-07-07T21:43:35Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
comments:
Allow use of bouncycastle

time:
2015-07-07T21:35:16Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
comments:
remove temporary leniency

time:
2015-07-07T21:20:03Z
class:
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
comments:
Simplify CacheKey used for scripts

Replaced the CacheKey class with a static method that returns a String.
The class was overkill.

closes #12092

time:
2015-07-07T21:11:29Z
class:
comments:
wait for yellow in integration tests. closes #12099

time:
2015-07-07T21:00:04Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/monitor/fs/FsInfo.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java
comments:
Merge branch 'master' of github.com:elasticsearch/elasticsearch

time:
2015-07-07T20:50:15Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/monitor/fs/FsInfo.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java
comments:
Renaming FsStats to FsInfo

time:
2015-07-07T20:48:18Z
class:
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Currently when an engine is failed, it is marked as corrupted regardless of
the failure type. This change marks the engine as corrupted only when the failure
is caused by an actual index corrruption. When an engine is failed for other
reasons, the engine is only closed without removing the shard state.

closes #11788

time:
2015-07-07T20:37:07Z
class:
src/test/java/org/elasticsearch/index/mapper/attachment/test/unit/VariousDocTest.java
comments:
improve doc tests, exposes a previously existing problem with encrypted
pdfs that was hidden

time:
2015-07-07T20:36:43Z
class:
comments:
fix jarhell

time:
2015-07-07T20:16:39Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java
core/src/main/java/org/elasticsearch/monitor/fs/FsStats.java
core/src/main/java/org/elasticsearch/monitor/fs/JmxFsProbe.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java
comments:
FS Stats: remove sigar specific stats from APIs:
- fs.*.disk_reads
- fs.*.disk_writes
- fs.*.disk_io_op
- fs.*.disk_read_size_in_bytes
- fs.*.disk_write_size_in_bytes
- fs.*.disk_io_size_in_bytes
- fs.*.disk_queue
- fs.*.disk_service_time

time:
2015-07-07T20:13:12Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Merge pull request #12093 from rmuir/no_fucking_way

Give a better exception when a jar contains same classfile twice.

time:
2015-07-07T19:40:15Z
class:
comments:
[DOCS] Update section about gap_policy

time:
2015-07-07T19:16:42Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/MonitorService.java
core/src/main/java/org/elasticsearch/monitor/network/JmxNetworkProbe.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkInfo.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkProbe.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkService.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkStats.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/MockDiskUsagesTests.java
core/src/test/java/org/elasticsearch/stresstest/leaks/GenericStatsLeak.java
comments:
Remove network stats & info

time:
2015-07-07T18:58:16Z
class:
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
comments:
Make MultiTermQueryBuilder an interface again

This PR is against the query-refactoring branch.

Closes #12074

time:
2015-07-07T17:27:17Z
class:
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/AnalysisPhoneticRestIT.java
plugins/cloud-aws/src/test/java/org/elasticsearch/cloud/aws/CloudAWSRestIT.java
plugins/cloud-azure/src/test/java/org/elasticsearch/cloud/azure/CloudAzureRestIT.java
plugins/cloud-gce/src/test/java/org/elasticsearch/cloud/gce/CloudGCERestIT.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavaScriptRestIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonScriptRestIT.java
comments:
Merge pull request #12091 from clintongormley/plugin_rest_tests

Plugin rest tests for analysis-phonetic, cloud-*, and lang-*
It appears twice now as it was already added.


time:
2015-07-07T17:26:54Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Give a better exception when a jar contains same classfile twice.

And ignore the known issue with xmlbeans for now... though it may
cause us issues ultimately: https://issues.apache.org/jira/browse/XMLBEANS-499

time:
2015-07-07T17:26:31Z
class:
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavaScriptRestIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonScriptRestIT.java
comments:
Added rest tests for language plugins

time:
2015-07-07T17:26:31Z
class:
plugins/cloud-aws/src/test/java/org/elasticsearch/cloud/aws/CloudAWSRestIT.java
plugins/cloud-azure/src/test/java/org/elasticsearch/cloud/azure/CloudAzureRestIT.java
plugins/cloud-gce/src/test/java/org/elasticsearch/cloud/gce/CloudGCERestIT.java
comments:
Added rest tests for cloud plugins

time:
2015-07-07T17:26:31Z
class:
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/AnalysisPhoneticRestIT.java
comments:
Added rest tests for analysis-phonetic plugin

time:
2015-07-07T16:27:40Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java
comments:
Simplify Plugin Manager for official plugins

Plugin Manager can now use another simplified form when a user wants to install an official plugin hosted at elasticsearch download service.

The form we use is:

```sh
bin/plugin install pluginname
```

As plugins share now the same version as elasticsearch, we can automatically guess what is the exact current version of the plugin manager script.

Also, download service will now use `/org.elasticsearch.plugins/pluginName/pluginName-version.zip` URL path to download a plugin.

If the older form is provided (`user/plugin/version` or `user/plugin`), we will still use:

 * elasticsearch download service at `/user/plugin/plugin-version.zip`
 * maven central with groupIp=user, artifactId=plugin and version=version
 * github with user=user, repoName=plugin and tag=version
 * github with user=user, repoName=plugin and branch=master if no version is set

Note that community plugin providers can use other download services by using `--url` option.

If you try to use the new form with a non core elasticsearch plugin, the plugin manager will reject
it and will give you all known core plugins.

```
Usage:
    -u, --url     [plugin location]   : Set exact URL to download the plugin from
    -i, --install [plugin name]       : Downloads and installs listed plugins [*]
    -t, --timeout [duration]          : Timeout setting: 30s, 1m, 1h... (infinite by default)
    -r, --remove  [plugin name]       : Removes listed plugins
    -l, --list                        : List installed plugins
    -v, --verbose                     : Prints verbose messages
    -s, --silent                      : Run in silent mode
    -h, --help                        : Prints this help message

 [*] Plugin name could be:
     elasticsearch-plugin-name    for Elasticsearch 2.0 Core plugin (download from download.elastic.co)
     elasticsearch/plugin/version for elasticsearch commercial plugins (download from download.elastic.co)
     groupId/artifactId/version   for community plugins (download from maven central or oss sonatype)
     username/repository          for site plugins (download from github master)

Elasticsearch Core plugins:
 - elasticsearch-analysis-icu
 - elasticsearch-analysis-kuromoji
 - elasticsearch-analysis-phonetic
 - elasticsearch-analysis-smartcn
 - elasticsearch-analysis-stempel
 - elasticsearch-cloud-aws
 - elasticsearch-cloud-azure
 - elasticsearch-cloud-gce
 - elasticsearch-delete-by-query
 - elasticsearch-lang-javascript
 - elasticsearch-lang-python
```

time:
2015-07-07T16:20:32Z
class:
comments:
Merge pull request #12084 from rmuir/more_robust

make integ testing a bit more picky

time:
2015-07-07T15:43:38Z
class:
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsTests.java
core/src/test/java/org/elasticsearch/action/termvectors/TermVectorsUnitTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Mappings: Remove AbstractFieldMapper

AbstractFieldMapper is the only direct base class of FieldMapper.
This change moves all AbstractFieldMapper functionality into
FieldMapper, since there is no need for 2 levels of abstraction.

time:
2015-07-07T15:40:54Z
class:
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/KuromojiIntegrationTests.java
comments:
[kuromoji] move integration tests to REST tests

We can keep only unit tests in plugins instead of starting each time a local node and running tests against it.

time:
2015-07-07T15:35:03Z
class:
core/src/main/java/org/elasticsearch/search/SearchService.java
comments:
Failure during the fetch phase of scan should invoke the failed fetch phase handler.

This commit fixes an issue where during a failure in the fetch phase of a scan the wrong failure handler was invoked.

Closes #12086

time:
2015-07-07T15:34:04Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
comments:
Merge pull request #12068 from rjernst/fix/mapper-names-conflict

Mappings: Enforce field names do not contain dot

time:
2015-07-07T14:54:33Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
comments:
Fix compile

time:
2015-07-07T14:46:24Z
class:
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsTests.java
comments:
test: check node count on all nodes before checking if cluster state is the same on all nodes

time:
2015-07-07T14:21:40Z
class:
comments:
make integ testing a bit more picky

time:
2015-07-07T14:20:45Z
class:
core/src/main/java/org/elasticsearch/index/search/stats/SearchStats.java
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsUnitTests.java
comments:
Count scans in search stats and add metrics for scrolls

Each scroll on a scan causes a query to be executed. This commit adds support for these indirect queries to count against the search stats.
Additionally, this commit adds three new search stats: scroll_count, scroll_time_in_millis, and scroll_current. scroll_count tracks the
number of completed scrolls. scroll_time_in_millis tracks the total time that scrolls were held open. scroll_current tracks the number of
scrolls currently open.

Closes #9109

time:
2015-07-07T14:08:10Z
class:
comments:
Docs: Fixed bad links

time:
2015-07-07T13:37:38Z
class:
comments:
Merge pull request #11955 from clintongormley/translog_docs

Docs: Updated the translog docs to reflect the new behaviour/settings

time:
2015-07-07T12:56:06Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Plugins: Ensure logging configuration is loaded in plugin manager

This prevents log4j warnings printed out, when installing a plugin
due to the JarHell class using an ESLogger.

Closes #12064

time:
2015-07-07T12:26:46Z
class:
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
comments:
Properly fix the default regex flag to ALL for RegexpQueryBuilder and Parser

Relates to #11896
Closes #12067

time:
2015-07-07T12:16:31Z
class:
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/disruption/BlockClusterStateProcessing.java
core/src/test/java/org/elasticsearch/test/disruption/LongGCDisruption.java
core/src/test/java/org/elasticsearch/test/disruption/NetworkPartition.java
core/src/test/java/org/elasticsearch/test/disruption/NoOpDisruptionScheme.java
core/src/test/java/org/elasticsearch/test/disruption/ServiceDisruptionScheme.java
core/src/test/java/org/elasticsearch/test/disruption/SingleNodeDisruption.java
core/src/test/java/org/elasticsearch/test/disruption/SlowClusterStateProcessing.java
comments:
Tests: Faster recovery from simulated disurptions

In testing infra, one can simulate node GCs, network issues and other problems by adding a disruption to the test cluster. Those disruption are automatically removed after the test is done. At the moment each disruption indicates how long it will take the cluster to heal once the disruption is removed and the test cluster waits for this amount of time. However, more often than not this is an upper bound, causing a much longer wait than needed. Instead we should push the responsibility of healing to the disruption it self, where we can be smarter about what we wait for.

Closes #12071

time:
2015-07-07T12:06:07Z
class:
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
comments:
Revert "fix RegexpQueryBuilder#maxDeterminizedStates"

This reverts commit b7e26fae3ff9779caec251b7490d71eeaa297161.

time:
2015-07-07T11:44:05Z
class:
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
comments:
fix RegexpQueryBuilder#maxDeterminizedStates

Value was improperly set to `true`.

Relates to #11896

time:
2015-07-07T10:04:16Z
class:
core/src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
comments:
[test] awaitBusy: add a ceiling to max sleep time

When using `awaitBusy`, sometimes, you might not want to double time between two runs in an infinitive manner.

For example, let's say it will probably take 30 seconds to run a test.
When doubling all the time, you will most likely wait for a bigger time than needed:

|iteration|ms           |s            |duration (ms)|duration (s)|
|-----------|-------------|-----------|-----------|-----------|
|1|1|0,001|1|0,001|
|2|2|0,002|3|0,003|
|3|4|0,004|7|0,007|
|4|8|0,008|15|0,015|
|5|16|0,016|31|0,031|
|6|32|0,032|63|0,063|
|7|64|0,064|127|0,127|
|8|128|0,128|255|0,255|
|9|256|0,256|511|0,511|
|10|512|0,512|1023|1,023|
|11|1024|1,024|2047|2,047|
|12|2048|2,048|4095|4,095|
|13|4096|4,096|8191|8,191|
|14|8192|8,192|16383|16,383|
|15|16384|16,384|32767|32,767|
|16|32768|32,768|65535|65,535|
|17|65536|65,536|131071|131,071|
|18|131072|131,072|262143|262,143|
|19|262144|262,144|524287|524,287|
|20|524288|524,288|1048575|1048,575|
|21|1048576|1048,576|2097151|2097,151|

For example here, if the task is successful after 35 seconds, we will most likely have to wait for 32s more before the Predicate is run again.

With this patch, the maximum sleep time is now set to 1 second.

time:
2015-07-07T09:58:28Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
comments:
Merge pull request #12073 from cbuescher/feature/query-refactoring-spanfirst

Query refactoring: SpanFirstQueryBuilder and Parser

time:
2015-07-07T09:58:15Z
class:
core/src/main/java/org/elasticsearch/index/query/EmptyQueryBuilder.java
comments:
Merge pull request #12072 from cbuescher/feature/query-refactoring-fixemptyqb

Query Refactoring: Make EmptyQueryBuilder implement QueryBuilder directly

time:
2015-07-07T08:51:16Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/having/BucketSelectorBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/having/BucketSelectorParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/having/BucketSelectorPipelineAggregator.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketSelectorTests.java
comments:
Aggregations: Pipeline Aggregation to filter buckets based on a script

This pipeline aggregation runs a script on each bucket in the parent aggregation to determine whether the bucket is kept in the final aggregation tree. If the script returns true the bucket is retained, if it returns false the bucket is dropped

time:
2015-07-07T08:41:10Z
class:
core/src/main/java/org/elasticsearch/index/query/EmptyQueryBuilder.java
comments:
Query Refactoring: Make EmptyQueryBuilder implement QueryBuilder directly

By extending AbstractQueryBuilder, EmptyQueryBuilder had setters for boost and
queryname which defeats its original purpose of beeing a stand-in
singleton for empty queries. By directly implementing QueryBuilder (and
temporarily also extending ToXContentToBytes) this is prevented

time:
2015-07-07T07:34:37Z
class:
core/src/main/java/org/elasticsearch/common/joda/Joda.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/RootObjectMapper.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/main/java/org/joda/time/format/StrictISODateTimeFormat.java
core/src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
comments:
Dates: More strict parsing of ISO dates

If you are using the default date or the named identifiers of dates,
the current implementation was allowed to read a year with only one
digit. In order to make this more strict, this fixes a year to be at
least 4 digits. Same applies for month, day, hour, minute, seconds.

Also the new default is `strictDateOptionalTime` for indices created
with Elasticsearch 2.0 or newer.

In addition a couple of not exposed date formats have been exposed, as they
have been mentioned in the documentation.

Closes #6158

time:
2015-07-07T07:29:29Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/test/java/org/elasticsearch/document/BulkTests.java
comments:
Merge pull request #12060 from cbuescher/fix/9821

Fix: Use correct OpType on Failure in BulkItemResponse

time:
2015-07-07T07:13:28Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTest.java
comments:
Query refactoring: SpanFirstQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new toQuery() method analogous to other recent query refactorings.

Relates to #10217

time:
2015-07-07T06:38:11Z
class:
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
comments:
Add symlink permissions test

time:
2015-07-07T05:41:10Z
class:
plugins/analysis-icu/src/main/java/org/elasticsearch/indices/analysis/IcuIndicesAnalysis.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/AnalysisICURestIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/AnalysisKuromojiRestIT.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/AnalysisSmartChineseRestIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
comments:
Merge pull request #12070 from rmuir/analysis_rest_tests

add integration tests for analysis plugins

time:
2015-07-07T05:27:25Z
class:
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
comments:
add stempel integration tests

time:
2015-07-07T05:24:50Z
class:
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
comments:
[TEST] Wait for test thread to join before

time:
2015-07-07T05:14:39Z
class:
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/AnalysisSmartChineseRestIT.java
comments:
Add integration tests for smart chinese

time:
2015-07-07T04:51:52Z
class:
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/AnalysisKuromojiRestIT.java
comments:
add kuromoji integration tests

time:
2015-07-07T04:15:49Z
class:
plugins/analysis-icu/src/main/java/org/elasticsearch/indices/analysis/IcuIndicesAnalysis.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/AnalysisICURestIT.java
comments:
Add rest tests for analysis-icu

time:
2015-07-07T01:22:06Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
comments:
Mappings: Enforce field names do not contain dot

Field names containing dots can cause problems. For example, @jpountz
made this recreation which cause no error, but can result in a
serialization exception if the type already exists:
https://gist.github.com/jpountz/8c66817e00a322b81f85

But this is not just a potential conflict. It also has larger problems,
since only the leaf mapper is created. The intermediate "foo" object
field would not exist if only "foo.bar" was in the mappings.

This change forbids the use of dots in field names. It also
fixes an issue with passing through the update_all_types setting,
which was always set to true whenever a type already existed (!).

I do not think we should worry about backwards compatibility here. This
should be a hard break (and added to the migration plugin).

time:
2015-07-06T21:19:55Z
class:
comments:
[build] Update to Apache Maven PMD Plugin 3.5

http://maven.apache.org/plugins/maven-pmd-plugin/

You should specify the version in your project's plugin configuration:

```xml
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-pmd-plugin</artifactId>
 <version>3.5</version>
</plugin>
```

Release Notes - Apache Maven PMD Plugin - Version 3.5
---------------

Bug

* [MPMD-208] Warning about deprecated Rule name when using rulesets/maven.xml
* [MPMD-205] Javascript violations won't fail the build

Improvement

* [MPMD-211] Upgrade plexus-resources from 1.0-alpha-7 to 1.1
* [MPMD-209] Upgrade to PMD 5.3.2
* [MPMD-206] Make the sourceDirectories configurable

New Feature

* [MPMD-207] Support Javascript and JSP for CPD

time:
2015-07-06T20:56:32Z
class:
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
comments:
Don't use forbidden API in test

time:
2015-07-06T20:51:34Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/gateway/PriorityComparator.java
core/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Add basic recovery prioritization to GatewayAllocator

This commit adds logic to prefer shards with higher priority
or from newer indicse to be allocated first if they are unallocated post API.

This commit allows users to set `index.priority` to a non-negative integer to
prioritize index recovery for certain indices. This setting is dynamically updateable
and defaults to `0`. If two indices have the same priority this change takes the creation
date into account to prioritize shards from newer indices which is important in the time-based
indices usecase.

Closes #11787

time:
2015-07-06T20:03:56Z
class:
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/test/rest/DeleteByQueryRestIT.java
comments:
Merge pull request #12061 from rmuir/plugin-integration-tests

Add integration test harness for plugins

time:
2015-07-06T19:57:41Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
comments:
Upsert does not use ttl value

When running an upsert which defines a ttl value, the ttl value is set to null and ignored.

Related to #3256#issuecomment-64963409

time:
2015-07-06T19:49:57Z
class:
comments:
don't try to run tests for packaging=pom

time:
2015-07-06T19:15:15Z
class:
comments:
Merge branch 'master' into plugin-integration-tests

Conflicts:
	core/pom.xml

time:
2015-07-06T19:13:50Z
class:
plugins/delete-by-query/src/test/java/org/elasticsearch/plugin/deletebyquery/test/rest/DeleteByQueryRestIT.java
comments:
Get delete by query rest tests running

time:
2015-07-06T18:20:54Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/test/java/org/elasticsearch/document/BulkTests.java
comments:
Fix: Use correct OpType on Failure in BulkItemResponse

When a bulk request fails on a Delete or Update request, the BulkItemResponse
reports incorrect "index" operation in the response. This PR fixes this
for the case of closed indices as reported in #9821 but also for
other failures and adds tests for the two cases covered.

Closes #9821

time:
2015-07-06T18:19:28Z
class:
comments:
factor out this helper

time:
2015-07-06T18:16:28Z
class:
comments:
Fix snapshot-related REST integration tests

time:
2015-07-06T17:59:16Z
class:
comments:
Factor integration tests logic to separate build file

time:
2015-07-06T17:34:32Z
class:
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollScanAction.java
core/src/main/java/org/elasticsearch/common/lucene/search/XMoreLikeThis.java
core/src/main/java/org/elasticsearch/common/settings/Settings.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AtomicArray.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
comments:
Merge branch 'master' into plugin-integration-tests

time:
2015-07-06T17:33:28Z
class:
core/src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollScanAction.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AtomicArray.java
comments:
scroll: Append the shard top docs in such a way that ArrayIndexOutOfBoundsException is impossible to occur.
also added AtomicArray#setOnce() method to be sure that we fail if an shard response has already been set

time:
2015-07-06T17:32:46Z
class:
comments:
don't pull outdated/old packages.

time:
2015-07-06T17:21:09Z
class:
core/src/main/java/org/elasticsearch/common/settings/Settings.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
comments:
Merge pull request #12014 from rjernst/remove/mapper-doc-values

Completely move doc values and fielddata settings to field types

time:
2015-07-06T17:20:19Z
class:
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
comments:
Fix fake field mapper to not pass null for defaultfieldtype

time:
2015-07-06T17:13:11Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
comments:
Merge pull request #12057 from cbuescher/feature/query-refactoring-spancontaining

Query refactoring: SpanContainingQueryBuilder and Parser

time:
2015-07-06T17:02:53Z
class:
core/src/main/java/org/elasticsearch/common/settings/Settings.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
comments:
Addressed PR comments

time:
2015-07-06T16:44:16Z
class:
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
comments:
Changed creation of test query

time:
2015-07-06T16:29:30Z
class:
comments:
integration tests need the zip

time:
2015-07-06T16:08:06Z
class:
core/src/main/java/org/elasticsearch/common/lucene/search/XMoreLikeThis.java
comments:
XMoreLikeThis: fix potentially unpositioned enum

time:
2015-07-06T15:54:33Z
class:
comments:
[build] Update maven-invoker-plugin to 2.0.0

Release Notes - Apache Maven Invoker Plugin - Version 2.0.0

https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12317525&version=12332831

Important Note:

This Release is intended for the bug fix MINVOKER-187 and in this relationship
is was necessary to upgrade the JDK minimum to JDK 1.6. This was the reason for
the version upgrade to 2.0.0.

Bug:

* [MINVOKER-187] - Cloned IT project must be writable

Improvement:

* [MINVOKER-192] - Using fluido skin

time:
2015-07-06T15:29:33Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryParser.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTest.java
comments:
Query refactoring: SpanContainingQueryBuilder and Parser

Moving the query building functionality from the parser to the builders
new toQuery() method analogous to other recent query refactorings.

Relates to #10217

time:
2015-07-06T15:23:34Z
class:
core/src/test/java/org/elasticsearch/NamingConventionTests.java
comments:
Merge branch 'master' of https://github.com/elastic/elasticsearch

time:
2015-07-06T15:20:30Z
class:
core/src/test/java/org/elasticsearch/NamingConventionTests.java
comments:
fix test to allow integration tests

time:
2015-07-06T15:17:07Z
class:
comments:
[maven] change groupId / artifactId

When we generate our project, we can get something like:

```
├── dev-tools
├── elasticsearch
├── elasticsearch-parent
├── elasticsearch-plugin
├── plugin
│   ├── elasticsearch-analysis-icu
│   ├── elasticsearch-analysis-kuromoji
│   ├── elasticsearch-analysis-phonetic
│   ├── elasticsearch-analysis-smartcn
│   ├── elasticsearch-analysis-stempel
│   ├── elasticsearch-cloud-aws
│   ├── elasticsearch-cloud-azure
│   ├── elasticsearch-cloud-gce
│   ├── elasticsearch-delete-by-query
│   ├── elasticsearch-lang-javascript
│   └── elasticsearch-lang-python
├── rest-api-spec
└── securemock
```

I propose here to use a common naming for artifacts: start always with `elasticsearch-`.
Also, move `elasticsearch-plugin` to `org.elasticsearch.plugin` groupId.

So we could have:

```
├── elasticsearch
├── elasticsearch-dev-tools
├── elasticsearch-parent
├── elasticsearch-rest-api-spec
├── elasticsearch-securemock
├── plugin
│   ├── elasticsearch-analysis-icu
│   ├── elasticsearch-analysis-kuromoji
│   ├── elasticsearch-analysis-phonetic
│   ├── elasticsearch-analysis-smartcn
│   ├── elasticsearch-analysis-stempel
│   ├── elasticsearch-cloud-aws
│   ├── elasticsearch-cloud-azure
│   ├── elasticsearch-cloud-gce
│   ├── elasticsearch-delete-by-query
│   ├── elasticsearch-lang-javascript
│   ├── elasticsearch-lang-python
│   └── elasticsearch-plugin
```

time:
2015-07-06T14:58:06Z
class:
comments:
Merge pull request #12052 from cbuescher/docs-strategy-filtered

Docs: Delete unsupported `strategy` parameter in filtered-query.asciidoc

time:
2015-07-06T14:16:54Z
class:
core/src/test/java/org/elasticsearch/test/rest/RestIT.java
comments:
Merge pull request #12026 from rmuir/integ_tests

add integration test harness to maven build

time:
2015-07-06T13:47:37Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/fs/SigarFsProbe.java
core/src/main/java/org/elasticsearch/monitor/network/SigarNetworkProbe.java
core/src/main/java/org/elasticsearch/monitor/os/SigarOsProbe.java
core/src/main/java/org/elasticsearch/monitor/process/SigarProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/sigar/SigarService.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
core/src/test/java/org/elasticsearch/benchmark/mapping/ManyMappingsBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/recovery/ReplicaRecoveryBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/GlobalOrdinalsBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/SubAggregationSearchCollectModeBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/TermsAggregationSearchAndIndexingBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/TermsAggregationSearchBenchmark.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/monitor/SigarTests.java
core/src/test/java/org/elasticsearch/search/morelikethis/MoreLikeThisTests.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-06T13:27:38Z
class:
core/src/test/java/org/elasticsearch/search/morelikethis/MoreLikeThisTests.java
comments:
[TEST] fix testMoreLikeThisArtificialDocs

Ensure that the indexed doc hasn't all its fields empty and that the
artificial doc requested is always routed to the shard having that doc.

time:
2015-07-06T13:00:13Z
class:
comments:
Update filtered-query.asciidoc

time:
2015-07-06T11:04:22Z
class:
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
comments:
[TEST] NettyTransportMultiPortTests now checks selected random ports are free before using them

time:
2015-07-06T09:55:28Z
class:
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryTests.java
comments:
Search enhancement: adds a special case for the “_index” field which allows queries to test the name of the index. Adding this capability means we can deprecate the specialist indices query.
IndexFieldMapper is changed to make the term query factories produce match_all or match_none queries based on tests on the index name.

Closes #3316

time:
2015-07-06T09:02:09Z
class:
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
comments:
BoolQueryBuilder#hasClauses to take into account filterClauses too

time:
2015-07-06T09:00:54Z
class:
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
comments:
BoolQueryBuilder#hasClauses to take into account filterClauses too

time:
2015-07-05T18:24:46Z
class:
comments:
Added build and test labels to es release notes script

time:
2015-07-05T16:24:06Z
class:
comments:
Merge pull request #11983 from cdosborn/patch-1

Grammar fix to match query docs

time:
2015-07-03T20:06:42Z
class:
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
comments:
ZenDiscovery: #11960 failed to remove eager reroute from node join

It is removed now :)

Closes #12019

time:
2015-07-03T16:20:35Z
class:
comments:
use external test cluster for integration tests

time:
2015-07-03T13:49:17Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/monitor/MonitorModule.java
core/src/main/java/org/elasticsearch/monitor/fs/SigarFsProbe.java
core/src/main/java/org/elasticsearch/monitor/network/SigarNetworkProbe.java
core/src/main/java/org/elasticsearch/monitor/os/SigarOsProbe.java
core/src/main/java/org/elasticsearch/monitor/process/SigarProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/sigar/SigarService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java
core/src/test/java/org/elasticsearch/benchmark/mapping/ManyMappingsBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/recovery/ReplicaRecoveryBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/GlobalOrdinalsBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/SubAggregationSearchCollectModeBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/TermsAggregationSearchAndIndexingBenchmark.java
core/src/test/java/org/elasticsearch/benchmark/search/aggregations/TermsAggregationSearchBenchmark.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/monitor/SigarTests.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Remove sigar completely

time:
2015-07-03T11:51:11Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
comments:
Don't special-case on ElasticsearchWrapperException in toXContent

the specialization can cause stack overflows if an exception is a
ElasticsearchWrapperException as well as a ElasticsearchException.
This commit just relies on the unwrap logic now to find the cause and only
renders if we the rendering exception is the cause otherwise forwards
to the generic exception rendering.

Closes #11994

time:
2015-07-03T10:10:20Z
class:
core/src/main/java/org/elasticsearch/common/settings/Settings.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
comments:
Mappings: Completely move doc values and fielddata settings to field types

While MappedFieldType contains settings for doc values and fielddata,
AbstractFieldMapper had special logic in its constructor that
required setting these on the field type from there. This change
removes those settings from the AbstractFieldMapper constructor.
As a result, defaultDocValues(), defaultFieldType() and
defaultFieldDataType() are no longer needed.

time:
2015-07-03T09:59:16Z
class:
comments:
fix silly smoke_test_plugin bugs when ES actually succeeds in starting with the installed plugins

time:
2015-07-03T08:10:54Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryParser.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/HasRestHeaders.java
core/src/main/java/org/elasticsearch/rest/RestResponse.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ElectMasterServiceTest.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingTests.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Merge branch 'master' into feature/query-refactoring

time:
2015-07-03T08:04:22Z
class:
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
comments:
Removed forcedDateParser from hashCode() and equals() as it holds no value when it comes to equality.

time:
2015-07-03T07:55:29Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryParser.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryParser.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryParser.java
core/src/main/java/org/elasticsearch/index/query/EmptyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterParser.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/OrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/indices/query/IndicesQueriesRegistry.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RandomQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Merge pull request #11915 from cbuescher/feature/query-refactoring-emptyquerybuilder

Query Refactoring: Make parsing nested queries always return query builder

time:
2015-07-03T07:26:48Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryParser.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryParser.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryParser.java
core/src/main/java/org/elasticsearch/index/query/EmptyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterParser.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/OrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/indices/query/IndicesQueriesRegistry.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RandomQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Query Refactoring: Make sure that parsing nested queries always returns an query builder

Currently parsing inner queries can return `null` which leads to unnecessary complicated
null checks further up the query hierarchy. By introducing a special EmptyQueryBuilder
that can be used to signal that this query clause should be ignored upstream where possible,
we can avoid additional null checks in parent query builders and still allow for this query
to be ignored when creating the lucene query later.

This new builder returns `null` when calling its `toQuery()` method, so at this point
we still need to handle it, but having an explicit object for the intermediate query
representation makes it easier to differentiate between cases where inner query clauses are
empty (legal) or are not set at all (illegal).

Also added check for empty inner builder list to BoolQueryBuilder and OrQueryBuilder.
Removed setters for positive/negatice query in favour of constructor with
mandatory non-null arguments in BoostingQueryBuilder.

Closes #11915

time:
2015-07-03T06:58:44Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/HasRestHeaders.java
core/src/main/java/org/elasticsearch/rest/RestResponse.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
comments:
Promote headers to first class citizens on exceptions

This commit merges the pre-existing special exception that
allowed to associate headers with exceptions and the elasticsaerch
base class `ElasticsearchException` This allows for more generic use
of exceptions where plugins can associate meta-data with any elasticsearch
base exception to control behavior etc.

This also addds a generic SecurityException to allow plugins to pass on
information based on the RestStatus.

time:
2015-07-03T06:12:01Z
class:
core/src/test/java/org/elasticsearch/test/rest/RestIT.java
comments:
Add simple integ testing infra

time:
2015-07-02T20:20:12Z
class:
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryTests.java
comments:
Test: force local transport in ZenDiscoveryTests.testHandleNodeJoin_incompatibleMinVersion

Otherwise we ignore the join request due to a transport address mismatch instead of failing it.

time:
2015-07-02T18:53:24Z
class:
comments:
Merge pull request #12001 from rmuir/no_dont_do_that

Don't add CWD to classpath when ES_CLASSPATH isn't set.

time:
2015-07-02T18:51:21Z
class:
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
core/src/test/java/org/elasticsearch/discovery/zen/ElectMasterServiceTest.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingTests.java
comments:
zen: Don't join master nodes or accept join requests of old and too new nodes.

If the version of a node is lower than the minimum supported version or higher than the maximum supported version, a node shouldn't be allowed to join and nodes should join that elected master node

Closes #11924

time:
2015-07-02T18:37:18Z
class:
comments:
fix rest tests to not depend on short name access of mappings

time:
2015-07-02T17:53:30Z
class:
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryParser.java
comments:
fix compile error after bad merge

time:
2015-07-02T17:38:30Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Merge pull request #11977 from rjernst/pr/mapper-names

Move short name access out of field type

time:
2015-07-02T17:27:39Z
class:
comments:
blind stab at windows

time:
2015-07-02T17:16:20Z
class:
comments:
Don't add CWD to classpath when ES_CLASSPATH isn't set.

time:
2015-07-02T13:29:48Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchType.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/common/ParseField.java
core/src/main/java/org/elasticsearch/common/ParseFieldMatcher.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NotQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/script/ScriptScoreFunctionParser.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/template/RestRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/script/AbstractScriptParser.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptParameterParser.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsParametersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristicParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/AbstractTermsParametersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParametersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/BucketHelpers.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/main/java/org/elasticsearch/search/aggregations/support/GeoPointParser.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceParser.java
core/src/main/java/org/elasticsearch/search/fetch/script/ScriptFieldsParseElement.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortParser.java
core/src/main/java/org/elasticsearch/search/sort/SortParseElement.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestParser.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestParser.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggestParser.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientNodesServiceTests.java
core/src/test/java/org/elasticsearch/script/ScriptParameterParserTest.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgUnitTests.java
core/src/test/java/org/elasticsearch/test/TestSearchContext.java
comments:
Merge branch 'master' into feature/query-refactoring

Conflicts:
	core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryParser.java
	core/src/main/java/org/elasticsearch/index/query/NotQueryParser.java
	core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
	core/src/main/java/org/elasticsearch/index/query/ScriptQueryParser.java

time:
2015-07-02T13:27:26Z
class:
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTest.java
comments:
[TEST] fix lucene query comparison in RangeQueryBuilderTest

The expected query needs to use BytesRef to represent the from and to, otherwise we try to compare BytesRef with String and that returns false.

time:
2015-07-02T12:30:01Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/exists/TransportExistsAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchType.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/common/ParseField.java
core/src/main/java/org/elasticsearch/common/ParseFieldMatcher.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NotQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/script/ScriptScoreFunctionParser.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
core/src/main/java/org/elasticsearch/percolator/PercolateContext.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/template/RestRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/script/AbstractScriptParser.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptParameterParser.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsParametersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristicParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/AbstractTermsParametersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsParametersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/BucketHelpers.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/main/java/org/elasticsearch/search/aggregations/support/GeoPointParser.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceParser.java
core/src/main/java/org/elasticsearch/search/fetch/script/ScriptFieldsParseElement.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortParser.java
core/src/main/java/org/elasticsearch/search/sort/SortParseElement.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestParser.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestParser.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggestParser.java
core/src/test/java/org/elasticsearch/script/ScriptParameterParserTest.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgUnitTests.java
core/src/test/java/org/elasticsearch/test/TestSearchContext.java
comments:
Internal: make sure ParseField is always used in combination with parse flags

Removed ParseField#match variant that accepts the field name only, without parse flags. Such a method is harmful as it defaults to empty parse flags, meaning that no deprecation exceptions will be thrown in strict mode, which defeats the purpose of using ParseField. Unfortunately such a method was used in a lot of places were the parse flags weren't easily accessible (outside of query parsing), and in a lot of other places just by mistake.

Parse flags have been introduced now as part of SearchContext and mappers where needed. There are a few places (e.g. java api requests) where it is not possible to retrieve them as they depend on the index settings, in that case we explicitly pass in EMPTY_FLAGS for now, but this has to be seen as an exception.

Closes #11859

time:
2015-07-02T12:12:11Z
class:
comments:
Merge pull request #11993 from ozlerhakan/patch-1

Add Mongolastic into Misc

time:
2015-07-02T11:20:51Z
class:
comments:
Docs: Save debian repository to it's own sources.list file

Best to put repo definitions in a separate file from that of the core OS's sources.list.

Closes #11953

time:
2015-07-02T11:11:00Z
class:
core/src/test/java/org/elasticsearch/client/transport/TransportClientNodesServiceTests.java
comments:
[TEST] Remove timeout - it's not needed in this test

time:
2015-07-02T10:20:17Z
class:
core/src/main/java/org/elasticsearch/index/query/ScriptQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/script/ScriptScoreFunctionParser.java
core/src/main/java/org/elasticsearch/script/AbstractScriptParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceParser.java
comments:
Change TODO comments for removing old Script API to 3.0

time:
2015-07-02T10:05:11Z
class:
comments:
Add Mongolastic into Misc

time:
2015-07-02T09:51:32Z
class:
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
comments:
adapt changes from upstream

time:
2015-07-02T09:46:47Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchParseException.java
core/src/main/java/org/elasticsearch/ElasticsearchTimeoutException.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/IndexConstraint.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/client/Client.java
core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocationCommands.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/joda/DateMathParser.java
core/src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
core/src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/InetSocketTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/common/unit/MemorySizeValue.java
core/src/main/java/org/elasticsearch/common/unit/RatioValue.java
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/index/IndexException.java
core/src/main/java/org/elasticsearch/index/aliases/IndexAliasesService.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/QueryParsingException.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScoreFunctionParser.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/action/RestActionModule.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/template/RestRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/fieldstats/RestFieldStatsAction.java
core/src/main/java/org/elasticsearch/search/SearchException.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreamContext.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/InternalIPv4Range.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristicParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/InternalAvg.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/InternalMax.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/InternalMin.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/InternalSum.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/InternalValueCount.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/InternalBucketMetricValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/InternalDerivative.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValueType.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceConfig.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceParser.java
core/src/main/java/org/elasticsearch/search/fetch/source/FetchSourceParseElement.java
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/lookup/LeafFieldsLookup.java
core/src/main/java/org/elasticsearch/search/sort/GeoDistanceSortParser.java
core/src/main/java/org/elasticsearch/search/suggest/context/ContextBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/context/ContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/context/GeolocationContextMapping.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardFailure.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/fieldstats/FieldStatsRequestTest.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsIntegrationTests.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
core/src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalValuesMapperIntegrationTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/RegisterExternalTypes.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeFormatTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeTimezoneTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/FiltersTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptTests.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
core/src/test/java/org/elasticsearch/validate/RenderSearchTemplateTests.java
core/src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Merge branch 'master' into feature/query-refactoring

Conflicts:
	core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java

time:
2015-07-02T08:36:11Z
class:
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
comments:
Merge pull request #11988 from jpountz/fix/zlib_skip_underlying

Transport: Do not make the buffer skip while a stream is open.

time:
2015-07-02T08:24:06Z
class:
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationTests.java
comments:
[TEST] mute IndicesStoreIntegrationTests.indexCleanup

time:
2015-07-02T07:58:47Z
class:
comments:
Update CONTRIBUTING.md

time:
2015-07-02T07:30:28Z
class:
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
comments:
Transport: Do not make the buffer skip while a stream is open.

This commit changes MessageChannelHandler to not skip the underlying
ChannelBuffer while a StreamInput is open on top of it. In case eg. compression
is enabled, this prevents failures due to the fact that the decompressed
stream input expects a certain structure that it can't verify if the position
of the underlying buffer is changed.

time:
2015-07-02T05:54:30Z
class:
comments:
[doc] fix master build

The `:ref:` link in java-api doc is connected to `current` version which is at this time `1.6`.
This commit patch this.

That being said, we might have to change it again once master will become `current` doc.

time:
2015-07-01T21:58:07Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
comments:
Merge pull request #11982 from rmuir/grr_bad_defaults

really ban exitVM with security policy

time:
2015-07-01T21:08:38Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchParseException.java
core/src/main/java/org/elasticsearch/ElasticsearchTimeoutException.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateRequest.java
core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocationCommands.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilder.java
core/src/main/java/org/elasticsearch/common/joda/DateMathParser.java
core/src/main/java/org/elasticsearch/common/settings/loader/XContentSettingsLoader.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/common/unit/MemorySizeValue.java
core/src/main/java/org/elasticsearch/common/unit/RatioValue.java
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/index/IndexException.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParsingException.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScoreFunctionParser.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
core/src/main/java/org/elasticsearch/percolator/PercolatorService.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/template/RestRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristicParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/fetch/source/FetchSourceParseElement.java
core/src/main/java/org/elasticsearch/search/lookup/LeafFieldsLookup.java
core/src/main/java/org/elasticsearch/search/sort/GeoDistanceSortParser.java
core/src/main/java/org/elasticsearch/search/suggest/context/ContextBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/context/ContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/context/GeolocationContextMapping.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardFailure.java
core/src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
comments:
Parameterized exception messages

Added dynamic arguments to `ElasticsearchException`, `ElasticsearchParseException` and `ElasticsearchTimeoutException`.

This helps keeping the exception messages clean and readable and promotes consistency around wrapping dynamic args with `[` and `]`.

This is just the start, we need to propagate this to all exceptions deriving from `ElasticsearchException`. Also, work started on standardizing on lower case logging & exception messages. We need to be consistent here...

 - Uses the same `LoggerMessageFormat` as used by our logging infrastructure.

time:
2015-07-01T20:19:11Z
class:
comments:
[doc] Reorganize and clean Java documentation

This commit reorganizes the docs to make Java API docs looking more like the REST docs.
Also, with 2.0.0, FilterBuilders don't exist anymore but only QueryBuilders.

Also, all docs api move now to docs/java-api/docs dir as for REST doc.

Remove removed queries/filters
-----

* Remove Constant Score Query with filter
* Remove Fuzzy Like This (Field) Query (flt and flt_field)
* Remove FilterBuilders

Move filters to queries
-----

* Move And Filter to And Query
* Move Bool Filter to Bool Query
* Move Exists Filter to Exists Query
* Move Geo Bounding Box Filter to Geo Bounding Box Query
* Move Geo Distance Filter to Geo Distance Query
* Move Geo Distance Range Filter to Geo Distance Range Query
* Move Geo Polygon Filter to Geo Polygon Query
* Move Geo Shape Filter to Geo Shape Query
* Move Has Child Filter by Has Child Query
* Move Has Parent Filter by Has Parent Query
* Move Ids Filter by Ids Query
* Move Limit Filter to Limit Query
* Move MatchAll Filter to MatchAll Query
* Move Missing Filter to Missing Query
* Move Nested Filter to Nested Query
* Move Not Filter to Not Query
* Move Or Filter to Or Query
* Move Range Filter to Range Query
* Move Ids Filter to Ids Query
* Move Term Filter to Term Query
* Move Terms Filter to Terms Query
* Move Type Filter to Type Query

Add missing queries
-----

* Add Common Terms Query
* Add Filtered Query
* Add Function Score Query
* Add Geohash Cell Query
* Add Regexp Query
* Add Script Query
* Add Simple Query String Query
* Add Span Containing Query
* Add Span Multi Term Query
* Add Span Within Query

Reorganize the documentation
-----

* Organize by full text queries
* Organize by term level queries
* Organize by compound queries
* Organize by joining queries
* Organize by geo queries
* Organize by specialized queries
* Organize by span queries
* Move Boosting Query
* Move DisMax Query
* Move Fuzzy Query
* Move Indices Query
* Move Match Query
* Move Mlt Query
* Move Multi Match Query
* Move Prefix Query
* Move Query String Query
* Move Span First Query
* Move Span Near Query
* Move Span Not Query
* Move Span Or Query
* Move Span Term Query
* Move Template Query
* Move Wildcard Query

Add some missing pages
----

* Add multi get API
* Add indexed-scripts link

Also closes #7826
Related to https://github.com/elastic/elasticsearch/pull/11477#issuecomment-114745934

time:
2015-07-01T19:40:46Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Security.java
comments:
really ban exitVM with security policy

time:
2015-07-01T19:37:27Z
class:
comments:
[build] include in plugins only needed jars

Follow up for https://github.com/elastic/elasticsearch-analysis-kuromoji/issues/61

We don't shade anymore elasticsearch dependencies, so plugins might include jars in the distribution ZIP file which might not be needed anymore.

For example, `elasticsearch-cloud-aws` comes with:

```
Archive:  cloud-aws/target/releases/elasticsearch-cloud-aws-2.0.0-SNAPSHOT.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
  1920788  05-18-15 09:42   aws-java-sdk-ec2-1.9.34.jar
   503963  05-18-15 09:42   aws-java-sdk-core-1.9.34.jar
   232771  01-19-15 09:24   commons-codec-1.6.jar
   915096  01-19-15 09:24   jackson-databind-2.3.2.jar
   252288  05-18-15 09:42   aws-java-sdk-kms-1.9.34.jar
    62050  01-19-15 09:24   commons-logging-1.1.3.jar
   282269  10-31-14 13:19   httpcore-4.3.2.jar
    35058  01-19-15 09:24   jackson-annotations-2.3.0.jar
   229998  05-29-15 12:28   jackson-core-2.5.3.jar
   589289  01-19-15 09:24   joda-time-2.7.jar
   562858  05-18-15 09:42   aws-java-sdk-s3-1.9.34.jar
   590533  10-31-14 13:19   httpclient-4.3.5.jar
    44854  06-12-15 19:22   elasticsearch-cloud-aws-2.0.0-SNAPSHOT.jar
 --------                   -------
  6221815                   13 files
```

A lot of those files are already distributed with elasticsearch itself so classes are available within the classloader.

We mark all es core dependencies as provided in plugins.
We also remove `groupId` as already defined in parent pom.
And we remove non needed licenses files as some jars are not included anymore in plugins.

Closes #11647.

time:
2015-07-01T19:20:54Z
class:
core/src/main/java/org/elasticsearch/index/aliases/IndexAlias.java
core/src/main/java/org/elasticsearch/index/aliases/IndexAliasesService.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/search/SearchException.java
core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
core/src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeFormatTests.java
core/src/test/java/org/elasticsearch/index/query/IndexQueryParserFilterDateRangeTimezoneTests.java
core/src/test/java/org/elasticsearch/percolator/PercolatorTests.java
core/src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
aliases: Parse aliases at search time and never cache parsed alias filters

The work around for resolving `now` doesn't need to be used for aliases, becuase alias filters are parsed at search time. However it can't be removed, because the percolator relies on it.

Parent/child can be specified again in alias filters, this now works again because alias filters are parsed at search time. Parent/child will also use the late query parse work around, to make sure to do the final preparations when the search context is around. This allows the aliases api to validate the parent/child queries without failing because there is no search context.

Closes #10485

time:
2015-07-01T18:53:20Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
comments:
Merge pull request #11979 from rmuir/nosystem

Don't jarhell check system jars

time:
2015-07-01T18:29:57Z
class:
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
comments:
let IDEs have jar hell in tests

time:
2015-07-01T18:06:53Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Add java.home to debug logging

time:
2015-07-01T17:26:00Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Don't jarhell check system jars

time:
2015-07-01T17:08:42Z
class:
core/src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
comments:
Merge pull request #11954 from martijnvg/percolator/stats/typo

Change `percolator.getTime` -> `percolator.time`

time:
2015-07-01T17:05:05Z
class:
core/src/test/java/org/elasticsearch/index/query/SimpleQueryStringBuilderTest.java
comments:
[TEST] assign flags in SimpleQueryStringBuilderTest

time:
2015-07-01T17:04:18Z
class:
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringParser.java
comments:
Simple query string: minor changes

time:
2015-07-01T16:46:52Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/Murmur3FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeLookupTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionPostingsFormatTest.java
comments:
Mappings: Move short name access out of field type

Eventually, the field type should not need any names, because there
will be only one name which leads to finding it (the full name, which is
also the index name). However, the short or "simple" name (using java
terminology for class names) is needed just in a couple places, for
serialization.

This change moves the simple name out of MappedFieldType.Names, into
Mapper, and makes Mapper and FieldMapper abstract classes.

time:
2015-07-01T16:13:14Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalValuesMapperIntegrationTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/RegisterExternalTypes.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
comments:
Merge pull request #11962 from rjernst/pr/root-mappers-rename

Rename "root" mappers to "metadata" mappers

time:
2015-07-01T15:48:40Z
class:
core/src/main/java/org/apache/lucene/queryparser/classic/ExistsFieldQueryExtension.java
core/src/main/java/org/apache/lucene/queryparser/classic/MissingFieldQueryExtension.java
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryParser.java
core/src/main/java/org/elasticsearch/index/query/BaseTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryParser.java
core/src/main/java/org/elasticsearch/index/query/BoostableQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryParser.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterParser.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryParser.java
core/src/main/java/org/elasticsearch/index/query/FilteredQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FilteredQueryParser.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryParser.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
core/src/main/java/org/elasticsearch/index/query/LimitQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/LimitQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MatchAllQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchAllQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MissingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NotQueryParser.java
core/src/main/java/org/elasticsearch/index/query/OrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/OrQueryParser.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
core/src/main/java/org/elasticsearch/index/query/QueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryWrappingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringParser.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryParser.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermQueryParser.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TypeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TypeQueryParser.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BaseTermQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ExistsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/LimitQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/MatchAllQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/SimpleQueryStringBuilderTest.java
core/src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Query refactoring: unify boost and query name

Following the discussion in #11744, move boost and query _name to base class AbstractQueryBuilder with their getters and setters. Unify their serialization code and equals/hashcode handling in the base class too. This guarantess that every query supports both _name and boost and nothing needs to be done around those in subclasses besides properly parsing the fields in the parsers and printing them out as part of the doXContent method in the builders. More specifically, these are the performed changes:

- Introduced printBoostAndQueryName utility method in AbstractQueryBuilder that subclasses can use to print out _name and boost in their doXContent method.

- readFrom and writeTo are now final methods that take care of _name and boost serialization. Subclasses have to implement doReadFrom and doWriteTo instead.

- toQuery is a final method too that takes care of properly applying _name and boost to the lucene query. Subclasses have to implement doToQuery instead. The query returned will have boost and queryName applied automatically.

- Removed BoostableQueryBuilder interface, given that every query is boostable after this change. This won't have any negative effect on filters, as the boost simply gets ignored in that case.

- Extended equals and hashcode to handle queryName and boost automatically as well.

- Update the query test infra so that queryName and boost are tested automatically, and whenever they are forgotten in parser or doXContent tests fail, so this makes things a lot less error-prone

- Introduced DEFAULT_BOOST constant to make sure we don't repeat 1.0f all the time for default boost values.

SpanQueryBuilder is again a marker interface only. The convenient toQuery that allowed us to override the return type to SpanQuery cannot be supported anymore due to a clash with the toQuery implementation from AbstractQueryBuilder. We have to go back to castin lucene Query to SpanQuery when dealing with span queries unfortunately.

Note that this change touches not only the already refactored queries but also the untouched ones, by making sure that we parse _name and boost whenever we need to and that we print them out as part of QueryBuilder#doXContent. This will result in printing out the default boost all the time rather than skipping it in non refactored queries, something that we would have changed anyway as part of the query refactoring.

The following are the queries that support boost now while previously they didn't (parser now parses it and builder prints it out): and, exists, fquery, geo_bounding_box, geo_distance, geo_distance_range, geo_hash_cell, geo_polygon, indices, limit, missing, not, or, script, type.

The following are the queries that support _name now while previously they didn't (parser now parses it and builder prints it out): boosting, constant_score, function_score, limit, match_all,  type.

Range query parser supports now _name at the same level as boost too (_name is still supported on the outer object though for bw comp).

There are two exceptions that despite have getters and setters for queryName and boost don't really support boost and queryName: query filter and span multi term query. The reason for this is that they only support a single inner object which is another query that they wrap, no other elements.

Relates to #11744
Closes #10776
Closes #11974

time:
2015-07-01T14:04:36Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Add debug logging in case classpath is crazy

time:
2015-07-01T11:57:54Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
comments:
Carry on rest status if exceptions are not serializable

Today we loose the RestStatus code for non-serializable exceptions.
This can be tricky if they are supposed to signal certain situations
like authentication errors etc. This commit adds support for carrying on
the exceptions in the NotSerializableExceptoinWrapper

time:
2015-07-01T10:05:26Z
class:
comments:
docs: Fix field stats docs.

time:
2015-07-01T09:44:04Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersParser.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/FiltersTests.java
comments:
Aggregations: Adds other bucket to filters aggregation

The filters aggregation now has an option to add an 'other' bucket which will, when turned on, contain all documents which do not match any of the defined filters. There is also an option to change the name of the 'other' bucket from the default of '_other_'

Closes #11289

time:
2015-07-01T09:18:18Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptTests.java
comments:
Aggregations: Makes SKIP Gap Policy work correctly for Bucket Script aggregation

This change means that when the skip gap policy is used, the bucket script aggregation will skip executing the script on a bucket if any of the required bucket_paths are missing for the bucket. No aggregation will be added to the bucket, and the aggregation will move to the next bucket.

time:
2015-07-01T09:03:38Z
class:
comments:
Postrm script should not fail

This commit changes the postrm script so that it prints error messages instead of failing & exiting when the deletion of a directory failed while removing a RPM/DEB package.

Closes #11373

time:
2015-07-01T08:51:43Z
class:
comments:
Docs: Use consistent plural form of index

Indices or indexes; but please not a hodgepodge of both.

Closes #11966

time:
2015-07-01T08:17:45Z
class:
comments:
Docs: Update filter-aggregation.asciidoc

Closes #11782

time:
2015-07-01T07:57:03Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreamContext.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ipv4/InternalIPv4Range.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/InternalAvg.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/InternalMax.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/InternalMin.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggegator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/InternalSum.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/InternalValueCount.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/InternalBucketMetricValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativeParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/InternalDerivative.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgParser.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValueType.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceConfig.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceParser.java
comments:
Aggregations: Makes ValueFormat and ValueFormatter never null

This allows a lot of null checks to be removed where we were always falling back to the ValueFormat.RAW anyway. Now the format is set to ValueFormat.RAW when no alternative is suitable.

Closes #10594

time:
2015-07-01T07:32:39Z
class:
comments:
Docs: Update post-filter.asciidoc

Removing useless comma

Closes #11912

time:
2015-07-01T07:08:53Z
class:
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
comments:
Recovery: Fix wrong reused file bytes in Recovery API reports

Simple snapshot.restore test case that also exposes the bug mentioned in #11876

Fix #11876
Closes #11965

time:
2015-07-01T06:47:03Z
class:
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/IndexConstraint.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java
core/src/main/java/org/elasticsearch/rest/action/fieldstats/RestFieldStatsAction.java
core/src/test/java/org/elasticsearch/action/fieldstats/FieldStatsRequestTest.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsIntegrationTests.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
comments:
field stats: added index constraints

Field stats index constraints allows to omit all field stats for indices that don't match with the constraint. An index
constraint can exclude indices' field stats based on the `min_value` and `max_value` statistic. This option is only
useful if the `level` option is set to `indices`.

For example index constraints can be useful to find out the min and max value of a particular property of your data in
a time based scenario. The following request only returns field stats for the `answer_count` property for indices
holding questions created in the year 2014:

curl -XPOST 'http://localhost:9200/_field_stats?level=indices' -d '{
   "fields" : ["answer_count"] <1>
   "index_constraints" : { <2>
      "creation_date" : { <3>
         "min_value" : { <4>
            "gte" : "2014-01-01T00:00:00.000Z",
         },
         "max_value" : {
            "lt" : "2015-01-01T00:00:00.000Z"
         }
      }
   }
}'

Closes #11187

time:
2015-07-01T06:34:47Z
class:
core/src/test/java/org/elasticsearch/plugins/PluginManagerTests.java
comments:
Mute testInstallPluginWithElasticsearchDownloadService & testInstallPluginWithMavenCentral

Example failure: http://build-us-00.elastic.co/job/es_core_master_oracle_6/519/testReport/

time:
2015-07-01T04:00:12Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Merge pull request #11963 from rmuir/prevent_hell

detect jar hell before installing a plugin

time:
2015-07-01T03:59:45Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
cleanup uwe's unzip code

time:
2015-07-01T00:08:15Z
class:
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
comments:
Improve repository verification failure message

Closes #11922

time:
2015-06-30T21:02:45Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
comments:
Carry on headers if unknow exception is a WithRestHeadersException

time:
2015-06-30T21:02:45Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
comments:
Serialize AlreadyClosedException first before it's superclass

time:
2015-06-30T20:42:01Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
detect jar hell before installing a plugin

time:
2015-06-30T20:31:17Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/RootMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMetadataMapper.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalValuesMapperIntegrationTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/RegisterExternalTypes.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
comments:
Mappings: Rename "root" mappers to "metadata" mappers

"Root" is a very confusing term for meta field mappers. This change
renames "RootMapper" to "MetadataFieldMapper" and simplifies
how metadata mappers are setup.

It also requires that metadata mappers are now a FieldMapper
(MetadataFieldMapper extends from AbstractFieldMapper). The only
use of a root mapper that wasn't a field mapper was the theoretical
"external" root mapper (just a test mapper). But it doesn't make
sense to not have an actual field, and this falls inline with
the hopefully eventual collapsing of AbstractFieldMapper/FieldMapper/Mapper.

time:
2015-06-30T20:09:29Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Discovery: reroute after node join is processed

 - shard listing actions underpinning shard allocation do not have access to that new node yet (causing errors during shard allocation see #11923
 - the very first cluster state published to a node already has shard assignments to it. This surfaced other issues we are working to fix separately

 This commit changes the reroute to be done post processing the initial join cluster state to side step these issues while we work on a longer term solution.

Closes #11960
@bleskes i believe this change is breaking lots of discovery plugins as it's a new mandatory function to the interface. Could there be a more compatible way?

Hi @mkliu, 

We don’t provide any BWC guarantee on the internal interfaces/mechanics. That said we do try to make things easy/maintain BWC where we can. This change is so minor that it’s very easy to upgrade any plugin code, so I think it’s OK?

> On 23 Jul 2015, at 02:59, mkliu notifications@github.com wrote:
> 
> @bleskes i believe this change is breaking lots of discovery plugins as it's a new mandatory function to the interface. Could there be a more compatible way?
> 
> —
> Reply to this email directly or view it on GitHub.

@bleskes I put a new issue: https://github.com/elastic/elasticsearch/issues/12428 and i'll let you guys decide :)


time:
2015-06-30T19:03:54Z
class:
comments:
fix smoke_test_plugins.py: install the .zip under releases, not the .jar

time:
2015-06-30T18:59:47Z
class:
core/src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/InetSocketTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
comments:
Cut over to writeable for TransportAddress

This will allow us to move away from reflection hacks to serialize
transport exceptions.

time:
2015-06-30T18:34:24Z
class:
comments:
Merge pull request #11957 from mikemccand/smoke_test_plugins

Add simple plugins smoke testerCloses #11935

time:
2015-06-30T18:14:45Z
class:
comments:
first cut

time:
2015-06-30T17:08:31Z
class:
comments:
Docs: Updated the translog docs to reflect the new behaviour/settings in master

Closes #11287

time:
2015-06-30T16:45:43Z
class:
comments:
[TEST] Fix location of render_search_template.json

time:
2015-06-30T16:44:58Z
class:
core/src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
comments:
percolator: `getTime` -> `time`

time:
2015-06-30T15:57:23Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/RenderSearchTemplateResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/client/Client.java
core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/rest/action/RestActionModule.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/template/RestRenderSearchTemplateAction.java
core/src/test/java/org/elasticsearch/validate/RenderSearchTemplateTests.java
comments:
Search Templates: Adds API endpoint to render search templates as a response

Closes #6821

time:
2015-06-30T15:38:31Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchGenerationException.java
core/src/main/java/org/elasticsearch/ElasticsearchNullPointerException.java
core/src/main/java/org/elasticsearch/ElasticsearchParseException.java
core/src/main/java/org/elasticsearch/ElasticsearchTimeoutException.java
core/src/main/java/org/elasticsearch/action/FailedNodeException.java
core/src/main/java/org/elasticsearch/action/NoShardAvailableActionException.java
core/src/main/java/org/elasticsearch/action/NoSuchNodeException.java
core/src/main/java/org/elasticsearch/action/PrimaryMissingActionException.java
core/src/main/java/org/elasticsearch/action/RoutingMissingException.java
core/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/TimestampParsingException.java
core/src/main/java/org/elasticsearch/action/UnavailableShardsException.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
core/src/main/java/org/elasticsearch/action/search/ReduceSearchPhaseException.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/client/transport/NoNodeAvailableException.java
core/src/main/java/org/elasticsearch/cluster/IncompatibleClusterStateVersionException.java
core/src/main/java/org/elasticsearch/cluster/block/ClusterBlock.java
core/src/main/java/org/elasticsearch/cluster/block/ClusterBlockException.java
core/src/main/java/org/elasticsearch/cluster/metadata/ProcessClusterEventTimeoutException.java
core/src/main/java/org/elasticsearch/cluster/metadata/SnapshotId.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/routing/IllegalShardRoutingStateException.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingException.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTableValidation.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingValidationException.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/common/Base64.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobStoreException.java
core/src/main/java/org/elasticsearch/common/breaker/CircuitBreakingException.java
core/src/main/java/org/elasticsearch/common/io/ThrowableObjectInputStream.java
core/src/main/java/org/elasticsearch/common/io/ThrowableObjectOutputStream.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/settings/NoClassSettingsException.java
core/src/main/java/org/elasticsearch/common/settings/SettingsException.java
core/src/main/java/org/elasticsearch/common/text/Text.java
core/src/main/java/org/elasticsearch/common/transport/InetSocketTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
core/src/main/java/org/elasticsearch/common/util/concurrent/EsRejectedExecutionException.java
core/src/main/java/org/elasticsearch/common/util/concurrent/UncategorizedExecutionException.java
core/src/main/java/org/elasticsearch/discovery/MasterNotDiscoveredException.java
core/src/main/java/org/elasticsearch/env/FailedToResolveConfigException.java
core/src/main/java/org/elasticsearch/gateway/GatewayException.java
core/src/main/java/org/elasticsearch/http/BindHttpException.java
core/src/main/java/org/elasticsearch/http/HttpException.java
core/src/main/java/org/elasticsearch/http/HttpInfo.java
core/src/main/java/org/elasticsearch/index/AlreadyExpiredException.java
core/src/main/java/org/elasticsearch/index/Index.java
core/src/main/java/org/elasticsearch/index/IndexException.java
core/src/main/java/org/elasticsearch/index/IndexShardAlreadyExistsException.java
core/src/main/java/org/elasticsearch/index/IndexShardMissingException.java
core/src/main/java/org/elasticsearch/index/engine/CloseEngineException.java
core/src/main/java/org/elasticsearch/index/engine/CreateFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/DeleteByQueryFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/DeleteFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/DocumentAlreadyExistsException.java
core/src/main/java/org/elasticsearch/index/engine/DocumentMissingException.java
core/src/main/java/org/elasticsearch/index/engine/DocumentSourceMissingException.java
core/src/main/java/org/elasticsearch/index/engine/EngineAlreadyStartedException.java
core/src/main/java/org/elasticsearch/index/engine/EngineClosedException.java
core/src/main/java/org/elasticsearch/index/engine/EngineCreationFailureException.java
core/src/main/java/org/elasticsearch/index/engine/EngineException.java
core/src/main/java/org/elasticsearch/index/engine/FlushFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/FlushNotAllowedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/ForceMergeFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/IndexFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/RecoveryEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RefreshFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RollbackFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RollbackNotAllowedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/SnapshotFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/VersionConflictEngineException.java
core/src/main/java/org/elasticsearch/index/mapper/MapperCompressionException.java
core/src/main/java/org/elasticsearch/index/mapper/MapperException.java
core/src/main/java/org/elasticsearch/index/mapper/MapperParsingException.java
core/src/main/java/org/elasticsearch/index/mapper/MergeMappingException.java
core/src/main/java/org/elasticsearch/index/mapper/StrictDynamicMappingException.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorException.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
core/src/main/java/org/elasticsearch/index/query/QueryParsingException.java
core/src/main/java/org/elasticsearch/index/shard/IllegalIndexShardStateException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardClosedException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardCreationException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardNotRecoveringException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardNotStartedException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRecoveringException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRecoveryException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRelocatedException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardStartedException.java
core/src/main/java/org/elasticsearch/index/shard/ShardId.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreFailedException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotFailedException.java
core/src/main/java/org/elasticsearch/index/store/StoreException.java
core/src/main/java/org/elasticsearch/index/translog/TranslogCorruptedException.java
core/src/main/java/org/elasticsearch/index/translog/TranslogException.java
core/src/main/java/org/elasticsearch/index/translog/TruncatedTranslogException.java
core/src/main/java/org/elasticsearch/indices/AliasFilterParsingException.java
core/src/main/java/org/elasticsearch/indices/IndexAlreadyExistsException.java
core/src/main/java/org/elasticsearch/indices/IndexClosedException.java
core/src/main/java/org/elasticsearch/indices/IndexCreationException.java
core/src/main/java/org/elasticsearch/indices/IndexMissingException.java
core/src/main/java/org/elasticsearch/indices/IndexPrimaryShardNotAllocatedException.java
core/src/main/java/org/elasticsearch/indices/IndexTemplateAlreadyExistsException.java
core/src/main/java/org/elasticsearch/indices/IndexTemplateMissingException.java
core/src/main/java/org/elasticsearch/indices/InvalidAliasNameException.java
core/src/main/java/org/elasticsearch/indices/InvalidIndexNameException.java
core/src/main/java/org/elasticsearch/indices/InvalidIndexTemplateException.java
core/src/main/java/org/elasticsearch/indices/InvalidTypeNameException.java
core/src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
core/src/main/java/org/elasticsearch/indices/TypeMissingException.java
core/src/main/java/org/elasticsearch/indices/recovery/DelayRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/IgnoreRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryFailedException.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkInfo.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
core/src/main/java/org/elasticsearch/node/NodeClosedException.java
core/src/main/java/org/elasticsearch/percolator/PercolateException.java
core/src/main/java/org/elasticsearch/repositories/RepositoryException.java
core/src/main/java/org/elasticsearch/repositories/RepositoryMissingException.java
core/src/main/java/org/elasticsearch/repositories/RepositoryVerificationException.java
core/src/main/java/org/elasticsearch/rest/HasRestHeaders.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptException.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionScriptCompilationException.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionScriptExecutionException.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptCompilationException.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptExecutionException.java
core/src/main/java/org/elasticsearch/search/SearchContextException.java
core/src/main/java/org/elasticsearch/search/SearchContextMissingException.java
core/src/main/java/org/elasticsearch/search/SearchException.java
core/src/main/java/org/elasticsearch/search/SearchParseException.java
core/src/main/java/org/elasticsearch/search/SearchShardTarget.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationExecutionException.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationInitializationException.java
core/src/main/java/org/elasticsearch/search/aggregations/InvalidAggregationPathException.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilderException.java
core/src/main/java/org/elasticsearch/search/dfs/DfsPhaseExecutionException.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/search/query/QueryPhaseExecutionException.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestBuilderException.java
core/src/main/java/org/elasticsearch/search/warmer/IndexWarmerMissingException.java
core/src/main/java/org/elasticsearch/snapshots/ConcurrentSnapshotExecutionException.java
core/src/main/java/org/elasticsearch/snapshots/InvalidSnapshotNameException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotCreationException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotMissingException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotRestoreException.java
core/src/main/java/org/elasticsearch/transport/ActionNotFoundTransportException.java
core/src/main/java/org/elasticsearch/transport/ActionTransportException.java
core/src/main/java/org/elasticsearch/transport/BindTransportException.java
core/src/main/java/org/elasticsearch/transport/ConnectTransportException.java
core/src/main/java/org/elasticsearch/transport/FailedCommunicationException.java
core/src/main/java/org/elasticsearch/transport/NodeDisconnectedException.java
core/src/main/java/org/elasticsearch/transport/NodeNotConnectedException.java
core/src/main/java/org/elasticsearch/transport/NodeShouldNotConnectException.java
core/src/main/java/org/elasticsearch/transport/NotSerializableTransportException.java
core/src/main/java/org/elasticsearch/transport/ReceiveTimeoutTransportException.java
core/src/main/java/org/elasticsearch/transport/RemoteTransportException.java
core/src/main/java/org/elasticsearch/transport/ResponseHandlerFailureTransportException.java
core/src/main/java/org/elasticsearch/transport/ResponseHandlerNotFoundTransportException.java
core/src/main/java/org/elasticsearch/transport/SendRequestTransportException.java
core/src/main/java/org/elasticsearch/transport/TransportException.java
core/src/main/java/org/elasticsearch/transport/TransportInfo.java
core/src/main/java/org/elasticsearch/transport/TransportSerializationException.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/client/AbstractClientHeadersTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeTests.java
core/src/test/java/org/elasticsearch/common/util/CancellableThreadsTest.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
core/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
comments:
Merge branch 'master' into feature/query-refactoring

Conflicts:
	core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
	core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
	core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java

time:
2015-06-30T13:51:48Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
comments:
FileName is optional in StacktraceElement

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Carry on stacktrace and suppressed exceptions if exception is not serializable

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
comments:
add more essential exceptions

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
comments:
add IOOB to supported exceptions

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/common/Base64.java
comments:
remove leftover ObjectOutputStream references

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
comments:
serialize as not-serializable if exception is not registered

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
comments:
Cleanup non-serializable code

time:
2015-06-30T12:51:44Z
class:
core/src/main/java/org/elasticsearch/action/RoutingMissingException.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/common/breaker/CircuitBreakingException.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/index/engine/CreateFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/IndexFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/RecoveryEngineException.java
core/src/main/java/org/elasticsearch/index/mapper/MergeMappingException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/percolator/PercolateException.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
core/src/main/java/org/elasticsearch/search/SearchContextException.java
core/src/main/java/org/elasticsearch/search/SearchException.java
core/src/main/java/org/elasticsearch/search/warmer/IndexWarmerMissingException.java
core/src/test/java/org/elasticsearch/ExceptionRegistrationTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
comments:
add dedicated unittests for exceptions that have a writeTo method (custom serialization)

time:
2015-06-30T12:51:43Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
comments:
simplify exception reading / writing - now use a named exception for unknonw exceptions

time:
2015-06-30T12:51:43Z
class:
core/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginsInfo.java
core/src/main/java/org/elasticsearch/cluster/block/ClusterBlock.java
core/src/main/java/org/elasticsearch/cluster/metadata/SnapshotId.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTableValidation.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/text/Text.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java
core/src/main/java/org/elasticsearch/common/unit/SizeValue.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/http/HttpInfo.java
core/src/main/java/org/elasticsearch/index/Index.java
core/src/main/java/org/elasticsearch/index/shard/ShardId.java
core/src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkInfo.java
core/src/main/java/org/elasticsearch/monitor/network/NetworkStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsInfo.java
core/src/main/java/org/elasticsearch/monitor/os/OsStats.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessInfo.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
core/src/main/java/org/elasticsearch/search/SearchShardTarget.java
core/src/main/java/org/elasticsearch/transport/TransportInfo.java
comments:
Don't implement Serializable in core classes

We can't add this to forbidden API since literally everything implements this.
Any API that would for instance use a String would not compile anymore.

time:
2015-06-30T12:51:43Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchGenerationException.java
core/src/main/java/org/elasticsearch/ElasticsearchNullPointerException.java
core/src/main/java/org/elasticsearch/ElasticsearchParseException.java
core/src/main/java/org/elasticsearch/ElasticsearchTimeoutException.java
core/src/main/java/org/elasticsearch/action/FailedNodeException.java
core/src/main/java/org/elasticsearch/action/NoShardAvailableActionException.java
core/src/main/java/org/elasticsearch/action/NoSuchNodeException.java
core/src/main/java/org/elasticsearch/action/PrimaryMissingActionException.java
core/src/main/java/org/elasticsearch/action/RoutingMissingException.java
core/src/main/java/org/elasticsearch/action/TimestampParsingException.java
core/src/main/java/org/elasticsearch/action/UnavailableShardsException.java
core/src/main/java/org/elasticsearch/action/search/ReduceSearchPhaseException.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/client/transport/NoNodeAvailableException.java
core/src/main/java/org/elasticsearch/cluster/IncompatibleClusterStateVersionException.java
core/src/main/java/org/elasticsearch/cluster/block/ClusterBlockException.java
core/src/main/java/org/elasticsearch/cluster/metadata/ProcessClusterEventTimeoutException.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/routing/IllegalShardRoutingStateException.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingException.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingValidationException.java
core/src/main/java/org/elasticsearch/common/Base64.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobStoreException.java
core/src/main/java/org/elasticsearch/common/breaker/CircuitBreakingException.java
core/src/main/java/org/elasticsearch/common/io/ThrowableObjectInputStream.java
core/src/main/java/org/elasticsearch/common/io/ThrowableObjectOutputStream.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/settings/NoClassSettingsException.java
core/src/main/java/org/elasticsearch/common/settings/SettingsException.java
core/src/main/java/org/elasticsearch/common/transport/InetSocketTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
core/src/main/java/org/elasticsearch/common/util/concurrent/EsRejectedExecutionException.java
core/src/main/java/org/elasticsearch/common/util/concurrent/UncategorizedExecutionException.java
core/src/main/java/org/elasticsearch/discovery/MasterNotDiscoveredException.java
core/src/main/java/org/elasticsearch/env/FailedToResolveConfigException.java
core/src/main/java/org/elasticsearch/gateway/GatewayException.java
core/src/main/java/org/elasticsearch/http/BindHttpException.java
core/src/main/java/org/elasticsearch/http/HttpException.java
core/src/main/java/org/elasticsearch/index/AlreadyExpiredException.java
core/src/main/java/org/elasticsearch/index/IndexException.java
core/src/main/java/org/elasticsearch/index/IndexShardAlreadyExistsException.java
core/src/main/java/org/elasticsearch/index/IndexShardMissingException.java
core/src/main/java/org/elasticsearch/index/engine/CloseEngineException.java
core/src/main/java/org/elasticsearch/index/engine/CreateFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/DeleteByQueryFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/DeleteFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/DocumentAlreadyExistsException.java
core/src/main/java/org/elasticsearch/index/engine/DocumentMissingException.java
core/src/main/java/org/elasticsearch/index/engine/DocumentSourceMissingException.java
core/src/main/java/org/elasticsearch/index/engine/EngineAlreadyStartedException.java
core/src/main/java/org/elasticsearch/index/engine/EngineClosedException.java
core/src/main/java/org/elasticsearch/index/engine/EngineCreationFailureException.java
core/src/main/java/org/elasticsearch/index/engine/EngineException.java
core/src/main/java/org/elasticsearch/index/engine/FlushFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/FlushNotAllowedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/ForceMergeFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/IndexFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RecoveryEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RefreshFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RollbackFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/RollbackNotAllowedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/SnapshotFailedEngineException.java
core/src/main/java/org/elasticsearch/index/engine/VersionConflictEngineException.java
core/src/main/java/org/elasticsearch/index/mapper/MapperCompressionException.java
core/src/main/java/org/elasticsearch/index/mapper/MapperException.java
core/src/main/java/org/elasticsearch/index/mapper/MapperParsingException.java
core/src/main/java/org/elasticsearch/index/mapper/MergeMappingException.java
core/src/main/java/org/elasticsearch/index/mapper/StrictDynamicMappingException.java
core/src/main/java/org/elasticsearch/index/percolator/PercolatorException.java
core/src/main/java/org/elasticsearch/index/query/QueryParsingException.java
core/src/main/java/org/elasticsearch/index/shard/IllegalIndexShardStateException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardClosedException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardCreationException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardNotRecoveringException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardNotStartedException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRecoveringException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRecoveryException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardRelocatedException.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardStartedException.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreFailedException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotException.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotFailedException.java
core/src/main/java/org/elasticsearch/index/store/StoreException.java
core/src/main/java/org/elasticsearch/index/translog/TranslogCorruptedException.java
core/src/main/java/org/elasticsearch/index/translog/TranslogException.java
core/src/main/java/org/elasticsearch/index/translog/TruncatedTranslogException.java
core/src/main/java/org/elasticsearch/indices/AliasFilterParsingException.java
core/src/main/java/org/elasticsearch/indices/IndexAlreadyExistsException.java
core/src/main/java/org/elasticsearch/indices/IndexClosedException.java
core/src/main/java/org/elasticsearch/indices/IndexCreationException.java
core/src/main/java/org/elasticsearch/indices/IndexMissingException.java
core/src/main/java/org/elasticsearch/indices/IndexPrimaryShardNotAllocatedException.java
core/src/main/java/org/elasticsearch/indices/IndexTemplateAlreadyExistsException.java
core/src/main/java/org/elasticsearch/indices/IndexTemplateMissingException.java
core/src/main/java/org/elasticsearch/indices/InvalidAliasNameException.java
core/src/main/java/org/elasticsearch/indices/InvalidIndexNameException.java
core/src/main/java/org/elasticsearch/indices/InvalidIndexTemplateException.java
core/src/main/java/org/elasticsearch/indices/InvalidTypeNameException.java
core/src/main/java/org/elasticsearch/indices/TypeMissingException.java
core/src/main/java/org/elasticsearch/indices/recovery/DelayRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/IgnoreRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverFilesRecoveryException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryFailedException.java
core/src/main/java/org/elasticsearch/node/NodeClosedException.java
core/src/main/java/org/elasticsearch/percolator/PercolateException.java
core/src/main/java/org/elasticsearch/repositories/RepositoryException.java
core/src/main/java/org/elasticsearch/repositories/RepositoryMissingException.java
core/src/main/java/org/elasticsearch/repositories/RepositoryVerificationException.java
core/src/main/java/org/elasticsearch/rest/HasRestHeaders.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/AliasesMissingException.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptException.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionScriptCompilationException.java
core/src/main/java/org/elasticsearch/script/expression/ExpressionScriptExecutionException.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptCompilationException.java
core/src/main/java/org/elasticsearch/script/groovy/GroovyScriptExecutionException.java
core/src/main/java/org/elasticsearch/search/SearchContextException.java
core/src/main/java/org/elasticsearch/search/SearchContextMissingException.java
core/src/main/java/org/elasticsearch/search/SearchException.java
core/src/main/java/org/elasticsearch/search/SearchParseException.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationExecutionException.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationInitializationException.java
core/src/main/java/org/elasticsearch/search/aggregations/InvalidAggregationPathException.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilderException.java
core/src/main/java/org/elasticsearch/search/dfs/DfsPhaseExecutionException.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/search/query/QueryPhaseExecutionException.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestBuilderException.java
core/src/main/java/org/elasticsearch/search/warmer/IndexWarmerMissingException.java
core/src/main/java/org/elasticsearch/snapshots/ConcurrentSnapshotExecutionException.java
core/src/main/java/org/elasticsearch/snapshots/InvalidSnapshotNameException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotCreationException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotMissingException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotRestoreException.java
core/src/main/java/org/elasticsearch/transport/ActionNotFoundTransportException.java
core/src/main/java/org/elasticsearch/transport/ActionTransportException.java
core/src/main/java/org/elasticsearch/transport/BindTransportException.java
core/src/main/java/org/elasticsearch/transport/ConnectTransportException.java
core/src/main/java/org/elasticsearch/transport/FailedCommunicationException.java
core/src/main/java/org/elasticsearch/transport/NodeDisconnectedException.java
core/src/main/java/org/elasticsearch/transport/NodeNotConnectedException.java
core/src/main/java/org/elasticsearch/transport/NodeShouldNotConnectException.java
core/src/main/java/org/elasticsearch/transport/NotSerializableTransportException.java
core/src/main/java/org/elasticsearch/transport/ReceiveTimeoutTransportException.java
core/src/main/java/org/elasticsearch/transport/RemoteTransportException.java
core/src/main/java/org/elasticsearch/transport/ResponseHandlerFailureTransportException.java
core/src/main/java/org/elasticsearch/transport/ResponseHandlerNotFoundTransportException.java
core/src/main/java/org/elasticsearch/transport/SendRequestTransportException.java
core/src/main/java/org/elasticsearch/transport/TransportException.java
core/src/main/java/org/elasticsearch/transport/TransportSerializationException.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ElasticsearchExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionRegistrationTests.java
core/src/test/java/org/elasticsearch/client/AbstractClientHeadersTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeTests.java
core/src/test/java/org/elasticsearch/common/util/CancellableThreadsTest.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
comments:
Ban java serialization

We had several problems with Java Serializatin in the past. At some point
in the Java 1.7.x series JDKs where not compatible anymore when java
serialization (ObjectStream) was used to exchange objects. In elasticsearch
we used this to serialize exceptions across the wire which caused several problems
with incompatible JDKs. While causing lot of trouble this essentially prevented
users from moving forward and upgrade their JVMs. To prevent these kind of issues
this commit removes the dependency on java serialization entirely and bans the
usage of ObjectOutputStream and ObjectInputStream entirely.

Yet, we can't fully serialize all exception anymore such that this commit
is best effort and adds hand written serialization to all elasticsearch exceptions
as well to a selected set of JDK and Lucene exceptions. (see StreamOutput#writeThrowable /
StreamInput.readThrowable). Stacktraces should be preserved for all exceptions while
several names might be replaced with ElasticsearchException if there is no mapping for
the given exception.

time:
2015-06-30T12:24:25Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/AndQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BaseTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FQueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryParser.java
core/src/main/java/org/elasticsearch/index/query/NotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/OrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryFilterBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryValidationException.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/test/java/org/elasticsearch/index/query/AndQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FQueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/NotQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/OrQueryBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/QueryFilterBuilderTest.java
core/src/test/java/org/elasticsearch/index/query/RandomQueryBuilder.java
comments:
Query refactoring: validate inner queries whenever supported

Added validation for all inner queries that any already refactored query may hold. Added also tests around this. At the end of the refactoring validate will be called by SearchRequest#validate during TransportSearchAction execution, which will call validate against the top level query builder that will need to go and validate its data plus all of its inner queries, and so on.

Closes #11889

time:
2015-06-30T12:22:20Z
class:
comments:
Release: Build two RPMS, signed and unsigned

In order to support older RPM based distributions like CentOS5,
we should have one RPM available, which is not signed.

This commit creates an unsigned RPM first, then moves it over to
target/releases during the build, then builds a signed RPM.

The unsigned one is uploaded via S3, where as the signed one is
used for the repositories.

In addition, you can now build an RPM without having to specify
any gpg credentials due to offloading this into a maven profile
that is only activated when specifying `rpm.sign` property.

Closes #11587

time:
2015-06-30T11:54:26Z
class:
comments:
Merge pull request #11921 from clintongormley/delayed_alloc_docs

Docs: Documented delayed allocation settings

time:
2015-06-30T11:53:04Z
class:
comments:
Docs: Documented delayed allocation settings

Relates to: #11712

time:
2015-06-30T11:33:40Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Decode URL.getPath before resolving a real file

URL with spaces are URL-Encoded and need to be decoded before
they can be used to open files etc.

time:
2015-06-30T11:25:27Z
class:
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
comments:
AwaitFix testTracerLog

time:
2015-06-30T10:16:22Z
class:
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
comments:
Merge pull request #11928 from szroland/#11897

Create Snapshot: remove _create from POST path to match PUTCloses #11928

time:
2015-06-30T09:30:50Z
class:
comments:
[DOCS] marked pipeline aggregator documentation as Experimental

time:
2015-06-30T09:29:48Z
class:
comments:
Merge pull request #11927 from clintongormley/license_check_usage

Build: If SHA files have changed, explain how to update them in the license check exception

time:
2015-06-30T09:29:35Z
class:
comments:
Build: If SHA files have changed, explain how to update them in the license check exception

time:
2015-06-30T09:04:32Z
class:
core/src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
comments:
Merge pull request #11929 from martijnvg/percolator/drop__own_qpc_cache

The query parse context should be fetched from the IndexQueryParseService

time:
2015-06-30T08:52:34Z
class:
core/src/main/java/jsr166e/DoubleAdder.java
core/src/main/java/jsr166e/DoubleMaxUpdater.java
core/src/main/java/jsr166e/LongAdder.java
core/src/main/java/jsr166e/LongMaxUpdater.java
core/src/main/java/jsr166e/Striped64.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/common/metrics/CounterMetric.java
core/src/main/java/org/elasticsearch/common/metrics/EWMA.java
core/src/main/java/org/elasticsearch/common/metrics/MeanMetric.java
core/src/main/java/org/elasticsearch/common/metrics/MeterMetric.java
core/src/main/java/org/elasticsearch/index/cache/IndexCache.java
core/src/main/java/org/elasticsearch/index/cache/query/QueryCacheModule.java
core/src/main/java/org/elasticsearch/index/cache/query/QueryCacheStats.java
core/src/main/java/org/elasticsearch/index/cache/query/index/IndexQueryCache.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/ShadowIndexShard.java
core/src/main/java/org/elasticsearch/index/translog/TranslogReader.java
core/src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapTests.java
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
core/src/test/java/org/elasticsearch/client/node/NodeClientHeadersTests.java
core/src/test/java/org/elasticsearch/common/collect/CopyOnWriteHashMapTests.java
core/src/test/java/org/elasticsearch/common/lucene/index/FreqTermsEnumTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryStateTest.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsTests.java
core/src/test/java/org/elasticsearch/plugins/PluginLuceneCheckerTests.java
core/src/test/java/org/elasticsearch/plugins/PluginServiceTests.java
core/src/test/java/org/elasticsearch/script/expression/ExpressionScriptTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptTests.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchTests.java
core/src/test/java/org/elasticsearch/search/scriptfilter/ScriptQuerySearchTests.java
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
core/src/test/java/org/elasticsearch/test/ExternalTestCluster.java
core/src/test/java/org/elasticsearch/test/InternalTestCluster.java
core/src/test/java/org/elasticsearch/test/XContentTestUtils.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportTests.java
securemock/src/main/java/org/elasticsearch/mock/Mockito.java
comments:
Merge branch 'master' into feature/query-refactoring

 Conflicts:
	core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java

time:
2015-06-30T07:00:59Z
class:
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
comments:
Merge pull request #11768 from jpountz/fix/stream_eos

Make sure messages are fully read even in case of EOS markers.

time:
2015-06-30T06:17:45Z
class:
core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
core/src/test/java/org/elasticsearch/test/ExternalTestCluster.java
comments:
Testing: Fix running of rest tests against external cluster

The TransportClient specified in the ExternalCluster was missing a
`path.home` setting and thus would not start.

time:
2015-06-30T06:16:18Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
Merge pull request #11936 from rmuir/jdkhell

jar hell check should fail, if jars require higher java version

time:
2015-06-30T05:49:27Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
jar hell check should fail, if jars require higher java version

time:
2015-06-30T04:58:44Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/client/node/NodeClientHeadersTests.java
core/src/test/java/org/elasticsearch/common/collect/CopyOnWriteHashMapTests.java
core/src/test/java/org/elasticsearch/common/lucene/index/FreqTermsEnumTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/test/XContentTestUtils.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportTests.java
comments:
Merge pull request #11932 from rmuir/jarhell

Fail startup (and tests) on jar hell

time:
2015-06-30T04:55:11Z
class:
comments:
fix licensing

time:
2015-06-30T04:16:39Z
class:
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
comments:
tests: fix test bugs

time:
2015-06-30T04:12:40Z
class:
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
comments:
detect jar hell in tests better and fix more stuff

time:
2015-06-30T03:13:45Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/JarHell.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorTests.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
core/src/test/java/org/elasticsearch/client/node/NodeClientHeadersTests.java
core/src/test/java/org/elasticsearch/common/collect/CopyOnWriteHashMapTests.java
core/src/test/java/org/elasticsearch/common/lucene/index/FreqTermsEnumTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogTests.java
core/src/test/java/org/elasticsearch/test/XContentTestUtils.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportTests.java
comments:
Fail startup (and tests) on jar hell

time:
2015-06-29T22:32:09Z
class:
core/src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
comments:
percolator: The query parse context should be fetched from the IndexQueryParseService

instead of maintaining a thread local cache in the PercolatorQueriesRegistry.
Before PercolatorQueriesRegistry had its own cache, because all the queries had to forcefully opt out of caching. Nowadays in master small segments are never cached by the query cache, so the reason for the dedicated cache is no longer valid.

time:
2015-06-29T21:21:25Z
class:
core/src/test/java/org/elasticsearch/bootstrap/SecurityTests.java
comments:
tests: simple tests for things we should kick out
