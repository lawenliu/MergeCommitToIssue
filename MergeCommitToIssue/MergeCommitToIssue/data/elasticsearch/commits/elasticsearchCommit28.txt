time:
2013-11-19T14:02:08Z
class:
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java
comments:
Making SearchRequest in PutWarmerRequest mandatory & validated

The search request inside of a put warmer request was nullable, but actually we have to have that request in the transport action.
Validation and appropriate test added.

Closes #4196

time:
2013-11-19T13:33:41Z
class:
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
comments:
DateFieldMapper.merge() can change date format and include_in_all

In order to be able to add an additional date to a date field mapper,
the merge operation has to support this.

Closes #3727

time:
2013-11-19T10:26:45Z
class:
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
comments:
Fixed small test bug.

time:
2013-11-18T23:03:36Z
class:
src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
comments:
Move ?pretty=false handling to the builder instead of mutating the map
hello @dakrone in this case maybe we should add a call to lfAtEnd() to be consistent with what is done in the builder when the pretty param is set to true?


time:
2013-11-18T19:22:54Z
class:
src/main/java/org/elasticsearch/index/query/BaseFilterBuilder.java
src/main/java/org/elasticsearch/index/query/BaseQueryBuilder.java
src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FilterBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisFieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisQueryBuilder.java
src/main/java/org/elasticsearch/index/query/GeoBoundingBoxFilterBuilder.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisFieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
src/main/java/org/elasticsearch/index/query/QueryBuilder.java
src/main/java/org/elasticsearch/index/query/QueryBuilderException.java
src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java
comments:
Update FilterBuilder and QueryBuilder interfaces

Make the FilterBuilder interface consistent with the QueryBuilder
interface and replace usage of QueryBuilderException with
ElasticSearchIllegalArgumentException.

time:
2013-11-18T14:39:15Z
class:
src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
comments:
Handle pretty=false and missing line feed for pretty=true which is the default for main REST action

time:
2013-11-18T11:58:55Z
class:
src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
comments:
Added test for PR #4157 (deep pagination in a small index)

time:
2013-11-18T11:40:13Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
comments:
Size docIdsToLoad appropriately in SearchService

Closes #4156

time:
2013-11-18T10:42:29Z
class:
src/test/java/org/elasticsearch/update/UpdateByNativeScriptTests.java
comments:
Added test for Update API via native scripts

Motivation was to have a test ready as well as something other people could have a look at.

time:
2013-11-18T09:40:09Z
class:
src/main/java/org/elasticsearch/river/RiversService.java
comments:
Added catch EsRejectedExecutionException when trying to reschedule river start

time:
2013-11-18T09:26:08Z
class:
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
comments:
Don't take static memory of test base classes into account when checking for static leftovers.

time:
2013-11-18T08:46:04Z
class:
src/main/java/org/elasticsearch/common/util/BloomFilter.java
comments:
Update BloomFilter

Allow the user to configure the number of hash functions as well as add
support for serializing/deserializing the bloom filter from a stream.
Add a hashCode to the bloom filter.

time:
2013-11-15T18:05:46Z
class:
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Re-enable snapshot/restore tests that were failing on windows

time:
2013-11-15T17:58:12Z
class:
src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
src/test/java/org/elasticsearch/common/io/streams/BytesStreamsTests.java
src/test/java/org/elasticsearch/script/ScriptFieldTests.java
comments:
Allow native scripts to set the value of a script field to primitive arrays

Script fields could not be set to int[] and float[] by native
scripts because StreamInput and StreamOutput could not handle
them.

closes #4175

time:
2013-11-15T02:37:02Z
class:
comments:
First pass at cat docs.

time:
2013-11-15T01:13:57Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Add load average to _cat/nodes.

time:
2013-11-15T01:13:55Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestHelpAction.java
comments:
Add _cat/help (halp!)

time:
2013-11-15T01:10:41Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Add full_id param to support displaying entire node ID.

time:
2013-11-15T01:10:40Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Drop the heap and RAM used from _cat/nodes and add the RAM percentage.

In this view you never care about the actual heap used bytes; you only
want to know that your max is set to what you meant and what
percentage you're currently using.

Closes #4151.

time:
2013-11-15T01:10:36Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/info/PluginInfo.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/common/inject/Provides.java
src/main/java/org/elasticsearch/common/inject/internal/ProviderMethod.java
src/main/java/org/elasticsearch/index/VersionType.java
src/main/java/org/elasticsearch/index/codec/postingsformat/ElasticSearch090PostingsFormat.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Fix misspellings.

time:
2013-11-15T00:05:13Z
class:
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Improve snapshot/restore test speed

time:
2013-11-14T21:59:17Z
class:
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesResponse.java
src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
src/main/java/org/elasticsearch/cluster/ClusterModule.java
src/main/java/org/elasticsearch/cluster/action/index/NodeAliasesUpdatedAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Refactored indices aliases api to make use of the new recently introduced generic ack mechanism

Closes #4114

time:
2013-11-14T21:48:11Z
class:
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
fix failed compilation under jdk 6
Oh man, this was a nice one, thanks @kimchy !


time:
2013-11-14T18:22:55Z
class:
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
comments:
Fix possible NPE in snapshot/restore during node shutdown

time:
2013-11-14T17:43:08Z
class:
src/main/java/org/elasticsearch/index/query/IndicesFilterParser.java
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
comments:
Added support for _name parameter in indices filter

Closes #4166

time:
2013-11-14T17:37:55Z
class:
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
comments:
Trimmed down MatchedQueriesTests

time:
2013-11-14T16:25:34Z
class:
src/main/java/org/elasticsearch/index/query/IndicesFilterParser.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Minor improvements to indices filter and query & updated docs

Slightly simplified indices filter and query parsers code
Trimmed down tests where possible
Why `TODO`?
Same comments applies in `IndicesQueryParser`.
No other comments, nice reduction!

Because we don't like the fact that the order of the fields matters and we would like to fix this one day, although there is no way for now :)

As for the code reduction, I played around a bit and that's what I achieved, I did it myself as I wasn't sure it would have worked out.


time:
2013-11-14T16:24:49Z
class:
src/main/java/org/elasticsearch/index/query/IndicesFilterBuilder.java
src/main/java/org/elasticsearch/index/query/IndicesFilterParser.java
src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Indices query/filter skip parsing altogether for irrelevant indices when possible

Closes #2416

time:
2013-11-14T14:54:03Z
class:
src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
multi_match query supports fields as single string and array

The multi_match query accepted only an array in the fields parameter. This patch allows to use a single string as well.

Also added tests for parsing in both cases.

Closes #4164

time:
2013-11-14T14:37:01Z
class:
src/main/java/org/elasticsearch/common/util/BloomFilter.java
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormat.java
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormatProvider.java
src/main/java/org/elasticsearch/index/codec/postingsformat/ElasticSearch090PostingsFormat.java
src/main/java/org/elasticsearch/index/codec/postingsformat/PostingFormats.java
src/test/java/org/elasticsearch/benchmark/bloom/BloomBench.java
comments:
move bloom filter class to a more common package

time:
2013-11-14T12:49:37Z
class:
comments:
Include inner classes in the test package as well

time:
2013-11-14T12:15:26Z
class:
src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
comments:
remove deprecated method usage with jackson

time:
2013-11-14T04:21:17Z
class:
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
comments:
Fix possible race condition during snapshot deletion

time:
2013-11-14T04:21:16Z
class:
src/main/java/org/elasticsearch/common/blobstore/url/AbstractURLBlobContainer.java
comments:
Fix file handle leak in URLBlobContainer

time:
2013-11-13T16:26:24Z
class:
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
comments:
Make SimpleNodeSampler populate the list of connected nodes using the information returned from the cluster

This is to allow people to introspect things like data settings and attributes. Also makes it consistent with the sniff sampler.

Closes #4162

time:
2013-11-13T14:53:57Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Move [0.90.7] to a release

time:
2013-11-13T11:41:23Z
class:
comments:
use dedicated release log in order to build lucene & es releases in parallel

time:
2013-11-13T10:54:48Z
class:
src/main/java/org/elasticsearch/common/lucene/search/XBooleanFilter.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
comments:
Fixed bug in bool filter where it doesn't emit docs as hits while they are hits.

There is an optimization that executes bit based (slow) filters in the end. Matched docs could be unset if they didn't match with any of these filters. The bug was that also iterator based (fast) filters should be checked.
This change checks all should filters in the end part (if must or must_not clauses exists), so it can now correctly unset matched docs. The current bool filters requires that at least one should clause must match for docs to be match regardless of any other clauses.

Closes #4130
we must check clauseIterator, but not it-iterator


time:
2013-11-12T18:34:14Z
class:
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
comments:
Make mock repository blocking tests more deterministic and reproducible

time:
2013-11-12T17:30:46Z
class:
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
comments:
Add random filter that compares XBooleanFilter with BooleanQuery while respective the min_should_match = 1 that the filter applies

time:
2013-11-12T14:05:42Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
comments:
Release semaphore if client call throws and exception

Closes #4153
This change fixes the deadlock nicely, but if an Exception is thrown from client.bulk(request, listener) shouldn't it get reported via the BulkProcessor listener?  It looks like only InterruptedException is explicitly handled.

There should be some kind of guarantee that for each call to beforeBulk() there is a corresponding call to afterBulk().  With the change as is, sometimes Exceptions are reported via the listener and sometimes they are thrown up the stack.

@matt-preston I don't think we should call that after bulk with any exception to be honest I don't think we should call it with interrupt either but that is for bw compat I guess. I think we can fix that in a different issue. The interrupt here must be caught otherwise we need to add it to the interface so I agree we should remove the call altogether! 

one think I disagree is that this change introduced this behavior. this has been like that before!

+1 on figuring it out in a different change, this one is important to fix the release logic

OK, good points.  I was relying on afterBulk() being called symmetrically with beforeBulk() to create a wrapper for BulkProcessor that has a blocking close method - one that blocks until the last batch and all other in-flight batches completes before returning.  

It's very easy to write such a wrapper using the listener methods and a collection of batch executionIds, but only if afterBulk() is guaranteed to be called for each beforeBulk() - pretty impossible otherwise as the executionId is not available outside BulkProcessor.execute().

I can open a new issue to discuss this feature

+1 on a new feature

Thanks, new issue added: https://github.com/elasticsearch/elasticsearch/issues/4158


time:
2013-11-12T10:54:55Z
class:
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ShardsAllocatorModuleTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/gateway/none/RecoverAfterNodesTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerIntegrationTests.java
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
src/test/java/org/elasticsearch/recovery/SimpleRecoveryTests.java
src/test/java/org/elasticsearch/routing/AliasRoutingTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/facet/terms/ShardSizeTermsFacetTests.java
src/test/java/org/elasticsearch/search/facet/terms/UnmappedFieldsTermsFacetsTests.java
src/test/java/org/elasticsearch/search/facet/termsstats/ShardSizeTermsStatsFacetTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/search/timeout/SearchTimeoutTests.java
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/termvectors/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/MultiTermVectorsTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchThreadFilter.java
src/test/java/org/elasticsearch/test/ElasticsearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/NodeSettingsSource.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/update/UpdateTests.java
src/test/java/org/elasticsearch/versioning/ConcurrentDocumentOperationTests.java
comments:
Cleanup test framework in order to release it as a jar file

This commit adds javadocs and removed unused methods from central
classes like ElasticsearchIntegrationTest. It also changes visibility
of many methods and classes that are only needed inside the test infrastructure.
You are missing the inner classes files. Add the following line:

``` xml
                                <include>org/apache/lucene/util/AbstractRandomizedTest$*.class</include>
```

I don't know if you can choose to simply use `org/apache/lucene/util/AbstractRandomizedTest*.class` (instead of two lines), or even the simplest `org/apache/lucene/util/*` (as there is currently only one .java file in the folder).

@ofavre thanks! good catch... this entire packageing has still problems due to shading but we will sort it out. I pushed a fix with the two lines I like explicity stuf here

Indeed, `guava` and `lucene-test-framework` are needed as a dependencies, whereas they should be included (and possibly not shaded) as dependencies in the `test-jar`.


time:
2013-11-12T09:19:41Z
class:
src/main/java/org/elasticsearch/common/xcontent/XContentType.java
comments:
[Javadoc] Fix copy/paste comment on YAML type

time:
2013-11-12T01:57:50Z
class:
src/main/java/org/elasticsearch/common/blobstore/fs/AbstractFsBlobContainer.java
comments:
Failure in onComplete method of AbstractFsBlobContainer#readBlob should trigger onFailure

time:
2013-11-11T19:42:43Z
class:
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Randomize the number of snapshots in deleteSnapshotTest

time:
2013-11-11T19:41:53Z
class:
src/main/java/org/elasticsearch/common/blobstore/fs/AbstractFsBlobContainer.java
comments:
Fix file handle leak in readBlob method of AbstractFsBlobContainer

time:
2013-11-11T15:05:36Z
class:
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
comments:
Disable snapshot/restore tests that fail on windows with     AwaitsFix while working on the fix

time:
2013-11-11T13:40:48Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Fixed NPE if matched parent docs is higher than short_circuit_cutoff.
Closes #4135

time:
2013-11-11T13:27:52Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdReaderTypeCache.java
comments:
Upgraded to hppc version 0.5.3

time:
2013-11-11T08:57:45Z
class:
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
comments:
Wipe snapshot repos after and before tests

On windows tests sometimes fail since files can not be deleted due
to existing repos still holding on to the files. The test
framework is picky about that since it could be a bug and fails
the test if a temp file can not be deleted.

time:
2013-11-11T07:54:24Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
comments:
IndexShardGatewayService should not call post_recovery if shard is in STARTED state.

At the end recovery, the IndexShardGatewayService will double check the gateway has moved the shard to POST_RECOVERY and if not, do it it self.
The shard state could have already move to started, causing the post_recovery call to throw an exception and the entire shard recovery to fail.

This can happened if, after the gateway moved the shard to POST_RECOVERY:
1) master sent a new cluster state indicating shard is initializing
2) IndicesClusterStateService#applyInitializingShard will send a shard started event
3) Master will mark shard as started and this will be processed quickly and move the shard to STARTED.

Closes #4147

time:
2013-11-10T23:26:56Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/DeleteRepositoryResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/GetRepositoriesResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/get/TransportGetRepositoriesAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/PutRepositoryResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotRequest.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotResponse.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/TransportGatewaySnapshotAction.java
src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/package-info.java
src/main/java/org/elasticsearch/client/ClusterAdminClient.java
src/main/java/org/elasticsearch/client/IndicesAdminClient.java
src/main/java/org/elasticsearch/client/Requests.java
src/main/java/org/elasticsearch/client/support/AbstractClusterAdminClient.java
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/RepositoryMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/RestoreMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/SnapshotId.java
src/main/java/org/elasticsearch/cluster/metadata/SnapshotMetaData.java
src/main/java/org/elasticsearch/cluster/routing/ImmutableShardRouting.java
src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
src/main/java/org/elasticsearch/cluster/routing/MutableShardRouting.java
src/main/java/org/elasticsearch/cluster/routing/RestoreSource.java
src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/EvenShardsCountAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecidersModule.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/SnapshotInProgressAllocationDecider.java
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
src/main/java/org/elasticsearch/common/Classes.java
src/main/java/org/elasticsearch/common/blobstore/url/AbstractURLBlobContainer.java
src/main/java/org/elasticsearch/common/blobstore/url/URLBlobStore.java
src/main/java/org/elasticsearch/common/blobstore/url/URLImmutableBlobContainer.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardRepository.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreException.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardRestoreFailedException.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotAndRestoreService.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotException.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotFailedException.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotModule.java
src/main/java/org/elasticsearch/index/snapshots/IndexShardSnapshotStatus.java
src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshot.java
src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardSnapshots.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/repositories/RepositoriesModule.java
src/main/java/org/elasticsearch/repositories/RepositoriesService.java
src/main/java/org/elasticsearch/repositories/Repository.java
src/main/java/org/elasticsearch/repositories/RepositoryException.java
src/main/java/org/elasticsearch/repositories/RepositoryMissingException.java
src/main/java/org/elasticsearch/repositories/RepositoryModule.java
src/main/java/org/elasticsearch/repositories/RepositoryName.java
src/main/java/org/elasticsearch/repositories/RepositoryNameModule.java
src/main/java/org/elasticsearch/repositories/RepositorySettings.java
src/main/java/org/elasticsearch/repositories/RepositoryTypesRegistry.java
src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreSnapshot.java
src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
src/main/java/org/elasticsearch/repositories/fs/FsRepositoryModule.java
src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
src/main/java/org/elasticsearch/repositories/uri/URLRepositoryModule.java
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/delete/RestDeleteRepositoryAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/get/RestGetRepositoriesAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/delete/RestDeleteSnapshotAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/get/RestGetSnapshotsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/restore/RestRestoreSnapshotAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/gateway/snapshot/RestGatewaySnapshotAction.java
src/main/java/org/elasticsearch/snapshots/ConcurrentSnapshotExecutionException.java
src/main/java/org/elasticsearch/snapshots/InvalidSnapshotNameException.java
src/main/java/org/elasticsearch/snapshots/RestoreInfo.java
src/main/java/org/elasticsearch/snapshots/RestoreService.java
src/main/java/org/elasticsearch/snapshots/Snapshot.java
src/main/java/org/elasticsearch/snapshots/SnapshotCreationException.java
src/main/java/org/elasticsearch/snapshots/SnapshotException.java
src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
src/main/java/org/elasticsearch/snapshots/SnapshotMissingException.java
src/main/java/org/elasticsearch/snapshots/SnapshotRestoreException.java
src/main/java/org/elasticsearch/snapshots/SnapshotShardFailure.java
src/main/java/org/elasticsearch/snapshots/SnapshotState.java
src/main/java/org/elasticsearch/snapshots/SnapshotUtils.java
src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
src/test/java/org/elasticsearch/snapshots/AbstractSnapshotTests.java
src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/RepositoriesTests.java
src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java
src/test/java/org/elasticsearch/snapshots/SnapshotUtilsTests.java
src/test/java/org/elasticsearch/snapshots/mockstore/BlobStoreWrapper.java
src/test/java/org/elasticsearch/snapshots/mockstore/ImmutableBlobContainerWrapper.java
src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
src/test/java/org/elasticsearch/snapshots/mockstore/MockRepositoryModule.java
comments:
Initial implementation of Snapshot/Restore API

Closes #3826

time:
2013-11-10T21:59:19Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
fixed a broken trace logging line.

time:
2013-11-10T20:11:07Z
class:
src/main/java/org/elasticsearch/Version.java
src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
comments:
Added heap_max(_in_bytes) and heap_used_percent to JVM node stats.

 Closes #4145

time:
2013-11-10T20:02:06Z
class:
src/main/java/org/elasticsearch/river/cluster/RiverClusterService.java
src/main/java/org/elasticsearch/river/routing/RiversRouter.java
comments:
Schedule retry if the river type is available but the _meta document isn't

With #3782 we changed the execution order of dynamic mapping updates and index operations. We now first send the mapping update to the master node, and then we index the document. This makes sense but caused issues with rivers as they are started due to the cluster changed event that is triggered on the master node right after the mapping update has been applied, but in order for the river to be started its _meta document needs to be available, which is not the case anymore as the index operation most likely hasn't happened yet. As a result in most of the cases rivers don't get started.
What we want to do is retry a few times if the _meta document wasn't found, so that the river gets started anyway.

Closes #4089, #3840

time:
2013-11-10T20:02:06Z
class:
src/test/java/org/elasticsearch/river/RiverTests.java
src/test/java/org/elasticsearch/river/TestRiver.java
src/test/java/org/elasticsearch/river/TestRiverModule.java
comments:
Add river creation test

time:
2013-11-10T20:01:01Z
class:
src/main/java/org/elasticsearch/river/River.java
comments:
Added docs for River start and close methods

Closes #3787

time:
2013-11-10T19:43:00Z
class:
src/main/java/org/elasticsearch/search/suggest/completion/CompletionTokenStream.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionTokenStreamTest.java
comments:
Lazily fill CharTermAttribute if needed in CompletionTokenStream

This adds a delegate to CharTermAttributeImpl to be compatible
with the Percolator that needs a CharTermAttribute. Yet compared
to CharTermAttributImpl we only fill the BytesRef with UTF-8 since
we already have it and only if we need to convert to UTF-16 we do it.

Closes #4028

time:
2013-11-09T18:42:43Z
class:
comments:
[DOCS] Update store docs to indicate mmapfs is now the default on 64-bit Linux

time:
2013-11-09T18:37:17Z
class:
src/main/java/org/elasticsearch/index/store/IndexStoreModule.java
comments:
Change default store impl to mmapfs on 64bit Linux.
Fixes #4134

time:
2013-11-09T14:41:24Z
class:
comments:
upgrade to Netty 3.8.0

time:
2013-11-09T13:54:50Z
class:
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
comments:
close transport client to wait for ongoing samples
the transport client should not be executing at the same time as sampling happens, so connection open/close logic will be properly maintained

time:
2013-11-08T22:56:44Z
class:
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/broadcast/BroadcastActionsTests.java
src/test/java/org/elasticsearch/cluster/ClusterHealthTests.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/NoMasterNodeTests.java
src/test/java/org/elasticsearch/cluster/SimpleDataNodesTests.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/UpdateSettingsValidationTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ShardsAllocatorModuleTests.java
src/test/java/org/elasticsearch/cluster/allocation/SimpleAllocationTests.java
src/test/java/org/elasticsearch/cluster/shards/ClusterSearchShardsTests.java
src/test/java/org/elasticsearch/codecs/CodecTests.java
src/test/java/org/elasticsearch/consistencylevel/WriteConsistencyLevelTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/count/simple/SimpleCountTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/discovery/DiscoveryTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
src/test/java/org/elasticsearch/flt/FuzzyLikeThisActionTests.java
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/LocalGatewayIndexStateTests.java
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/none/RecoverAfterNodesTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/index/IndexRequestBuilderTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerIntegrationTests.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
src/test/java/org/elasticsearch/index/fielddata/FieldDataFilterIntegrationTests.java
src/test/java/org/elasticsearch/indexing/IndexActionTests.java
src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionTests.java
src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java
src/test/java/org/elasticsearch/indices/cache/CacheTests.java
src/test/java/org/elasticsearch/indices/exists/types/TypesExistsTests.java
src/test/java/org/elasticsearch/indices/leaks/IndicesLeaksTests.java
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleGetFieldMappingsTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleGetMappingsTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
src/test/java/org/elasticsearch/indices/state/CloseIndexDisableCloseAllTests.java
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
src/test/java/org/elasticsearch/indices/state/SimpleIndexStateTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/mget/SimpleMgetTests.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoTests.java
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/percolator/PercolatorFacetsTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
src/test/java/org/elasticsearch/plugin/ResponseHeaderPluginTests.java
src/test/java/org/elasticsearch/plugin/SitePluginTests.java
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
src/test/java/org/elasticsearch/recovery/RelocationTests.java
src/test/java/org/elasticsearch/recovery/SimpleRecoveryTests.java
src/test/java/org/elasticsearch/routing/AliasResolveRoutingTests.java
src/test/java/org/elasticsearch/routing/AliasRoutingTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresTests.java
src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/compress/SearchSourceCompressTests.java
src/test/java/org/elasticsearch/search/customscore/CustomScoreSearchTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/facet/terms/ShardSizeTermsFacetTests.java
src/test/java/org/elasticsearch/search/facet/terms/UnmappedFieldsTermsFacetsTests.java
src/test/java/org/elasticsearch/search/facet/termsstats/ShardSizeTermsStatsFacetTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginTests.java
src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionTests.java
src/test/java/org/elasticsearch/search/geo/GeoBoundingBoxTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceFacetTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationTests.java
src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/indicesboost/SimpleIndicesBoostSearchTests.java
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
src/test/java/org/elasticsearch/search/msearch/SimpleMultiSearchTests.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
src/test/java/org/elasticsearch/search/scan/SearchScanScrollingTests.java
src/test/java/org/elasticsearch/search/scan/SearchScanTests.java
src/test/java/org/elasticsearch/search/scriptfilter/ScriptFilterSearchTests.java
src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/search/source/SourceFetchingTests.java
src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/search/timeout/SearchTimeoutTests.java
src/test/java/org/elasticsearch/similarity/SimilarityTests.java
src/test/java/org/elasticsearch/termvectors/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
src/test/java/org/elasticsearch/test/transport/AssertingLocalTransport.java
src/test/java/org/elasticsearch/threadpool/SimpleThreadPoolTests.java
src/test/java/org/elasticsearch/timestamp/SimpleTimestampTests.java
src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
src/test/java/org/elasticsearch/update/UpdateTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
src/test/java/org/elasticsearch/versioning/ConcurrentDocumentOperationTests.java
src/test/java/org/elasticsearch/versioning/SimpleVersioningTests.java
comments:
s/AbstractIntegrationTest/ElasticsearchIntegrationTest

time:
2013-11-08T22:14:56Z
class:
comments:
Just filter test jar and not the main jar file

time:
2013-11-08T19:29:51Z
class:
comments:
[DOCS] Fix link to statsd plugin

Fixes #4128

time:
2013-11-08T14:08:31Z
class:
comments:
Package test-framework as individual jar

This commit causes all classes under 'org.elasticsearch.test.*'
to be included in a 'elasticsearch-${version}-test.jar' that can be
inclued by 3rd party projects or plugins via:

```
 <dependency>
    <groupId>org.elasticsearch</groupId>
    <artifactId>elasticsearch</artifactId>
    <version>${elasticsearch.version}</version>
    <type>test-jar</type>
    <scope>test</scope>
 </dependency>
```

time:
2013-11-08T13:35:22Z
class:
comments:
fix issues with JAVA_OPTS/ES_JAVA_OPTS in service.bat

fix handling of non-empty JAVA_OPTS
remove usage of if/else that can be tripped by parenthesis in the variable
fixes #4127
closes #4086

(cherry picked from commit fb44e9aef76026f2269f1fdc8832a44f8c76ec8f)

time:
2013-11-08T12:52:17Z
class:
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
comments:
In ctor of GeoPointFieldMapper, geohash_prefix now implicitly enables geohash option
Also improved docs for geopoint type and geohash_cell filte

Closes #3951

time:
2013-11-08T10:31:42Z
class:
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
src/main/java/org/elasticsearch/search/highlight/HighlighterContext.java
src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Added support for external query in postings highlighter

It is now possible to highlight an external query using the postings highlighter, relates to #3630

Closes #4121

time:
2013-11-08T10:22:43Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
comments:
Unable to create a nested filtered alias on a dataless master
fixes #4112

time:
2013-11-08T09:55:05Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
comments:
_default_ mapping not applied when using separate master/data nodes
fixes #4124

time:
2013-11-08T09:34:14Z
class:
comments:
Add wabisabi to Scala clients.

time:
2013-11-08T08:59:30Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
comments:
Reduce number of docs in test for #4093 - 30 docs are enough to trigger the bug

time:
2013-11-07T16:19:52Z
class:
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Used the actual index_name when making highlighting using the postings highlighter

Previously the field name specified in the search request was used, which isn't correct in case a custom index_name has been used for a field or the "path":"just_name" has been used in the mapping.

 Closes #4116

time:
2013-11-07T16:09:18Z
class:
comments:
[DOCS] Fixed the fielddata regex example on core mapping

time:
2013-11-07T15:57:18Z
class:
comments:
[DOCS] Changed all store:yes/no to store:true/false
which is how this setting is stored internally

time:
2013-11-07T14:58:41Z
class:
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Fix missing affectation in SimpleChildQuerySearchTests.testParentChildQueriesCanHandleNoRelevantTypesInIndex()

time:
2013-11-07T14:44:33Z
class:
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Trimmed down HighlighterSearchTests

Used common assertHighlight and concise mapping whenever possible
More indexRandom too

time:
2013-11-07T14:44:33Z
class:
src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Fixed fetch subphase to not recreate the HitContext for each hit, so that the object cache stays the same

Fixed also bug in the fast vector highlighter which was raised by enabling the object cache, due to null FieldQuery (NPE) in case the objects are taken from the cache

Added tests to check if there are issues when highlighting multiple fields at the same time

Closes #4106

time:
2013-11-07T13:44:05Z
class:
src/test/java/org/elasticsearch/stresstest/client/ClientFailover.java
src/test/java/org/elasticsearch/stresstest/fullrestart/FullRestartStressTest.java
src/test/java/org/elasticsearch/stresstest/gcbehavior/FilterCacheGcStress.java
src/test/java/org/elasticsearch/stresstest/get/GetStressTest.java
src/test/java/org/elasticsearch/stresstest/get/MGetStress1.java
src/test/java/org/elasticsearch/stresstest/indexing/BulkIndexingStressTest.java
src/test/java/org/elasticsearch/stresstest/indexing/ConcurrentIndexingVersioningStressTest.java
src/test/java/org/elasticsearch/stresstest/leaks/GenericStatsLeak.java
src/test/java/org/elasticsearch/stresstest/leaks/JvmStatsLeak.java
src/test/java/org/elasticsearch/stresstest/manyindices/ManyIndicesRemoteStressTest.java
src/test/java/org/elasticsearch/stresstest/manyindices/ManyIndicesStressTest.java
src/test/java/org/elasticsearch/stresstest/manyindices/ManyNodesManyIndicesRecoveryStressTest.java
src/test/java/org/elasticsearch/stresstest/refresh/RefreshStressTest1.java
src/test/java/org/elasticsearch/stresstest/rollingrestart/QuickRollingRestartStressTest.java
src/test/java/org/elasticsearch/stresstest/rollingrestart/RollingRestartStressTest.java
src/test/java/org/elasticsearch/stresstest/search1/ConcurrentSearchSerializationTests.java
src/test/java/org/elasticsearch/stresstest/search1/ParentChildStressTest.java
src/test/java/org/elasticsearch/stresstest/search1/Search1StressTest.java
comments:
Move stresstests out of o.e.test

time:
2013-11-07T13:41:17Z
class:
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/test/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/junit/annotations/Network.java
src/test/java/org/elasticsearch/test/junit/annotations/TestLogging.java
src/test/java/org/elasticsearch/test/junit/listeners/LoggingListener.java
src/test/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
comments:
Move o.e.junit to o.e.test.junit

time:
2013-11-07T13:39:33Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/store/MockDirectoryHelper.java
src/test/java/org/elasticsearch/test/store/MockFSDirectoryService.java
src/test/java/org/elasticsearch/test/store/MockFSIndexStore.java
src/test/java/org/elasticsearch/test/store/MockFSIndexStoreModule.java
src/test/java/org/elasticsearch/test/store/MockRamDirecorySerivce.java
src/test/java/org/elasticsearch/test/store/MockRamIndexStore.java
src/test/java/org/elasticsearch/test/store/MockRamIndexStoreModule.java
comments:
Move MockDirectories into o.e.test.store

time:
2013-11-07T13:37:01Z
class:
src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java
comments:
Move IndexFieldDataServiceTests into corresponding package

time:
2013-11-07T13:26:22Z
class:
comments:
[TEST] Fixed suggestion tests for 1.0.0.Beta1
Results order has changed because the standard analyzer no
longer removes stopwords

time:
2013-11-07T13:25:24Z
class:
comments:
[TEST] Renamed _percolator to .percolator

time:
2013-11-07T09:29:23Z
class:
src/main/java/org/elasticsearch/index/fielddata/AbstractAtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/BytesValues.java
src/main/java/org/elasticsearch/index/fielddata/DoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterBytesValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterDoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterLongValues.java
src/main/java/org/elasticsearch/index/fielddata/GeoPointValues.java
src/main/java/org/elasticsearch/index/fielddata/LongValues.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/SortMode.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericAtomicFieldData.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/LongFieldDataTests.java
comments:
Guarantee sorted order for [Double|Long|Bytes]Values

Values returned by [Double|Long|Bytes]Values are sorted today which
is guaranteed by the underlying Lucene index. Several implementations can
make use of this property but the interfaces don't guarantee this behavior.
This commit adds the guarantees and makes use of them in several places.

Note: This change might require sorting for 3rd party implemenations of these
interaces.

time:
2013-11-07T08:44:53Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
comments:
Reduce number of documents in RobinEngineIntegrationTest to prevent memory peaks triggering OOM

time:
2013-11-07T08:44:19Z
class:
comments:
Set MaxDirectMemorySize for tests to have consistent upper bounds

time:
2013-11-07T00:06:57Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
comments:
External method to set rootTypeParsers in DocumentMapperParser incorrect
fixes #4113

time:
2013-11-06T21:09:00Z
class:
src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferDirectory.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Improve stability of RobinEngineIntegrationTest by reducing direct memory usage of the test env

time:
2013-11-06T19:44:01Z
class:
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/SegmentsStats.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/indices/NodeIndicesStats.java
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
comments:
Index Stats: Add support for segments stats
closes #4101

time:
2013-11-06T15:19:50Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
move to [1.0.0.Beta2] SNAP

time:
2013-11-06T15:19:32Z
class:
comments:
prepare for next development iteration

time:
2013-11-06T15:09:25Z
class:
comments:
prepare release elasticsearch-cloud-azure-1.0.0.alpha1

time:
2013-11-06T15:05:20Z
class:
src/main/java/org/elasticsearch/cloud/azure/AzureComputeServiceImpl.java
comments:
Fix after review: no need to ask for SERVICE_NAME twice

time:
2013-11-06T14:32:43Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
release [1.0.0.Beta1]

time:
2013-11-06T13:00:28Z
class:
src/main/java/org/apache/lucene/index/XIndexWriter.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
comments:
Apply fix for LUCENE-5330 pruning the IndexWriter queue to get rid of pending event

Closes #4093

time:
2013-11-06T11:55:49Z
class:
comments:
prepare for next development iteration

time:
2013-11-06T11:55:49Z
class:
comments:
prepare release elasticsearch-analysis-smartcn-1.7.0

time:
2013-11-06T11:55:48Z
class:
comments:
Update to Elasticsearch 0.90.6 / Lucene 4.5.1
Closes #5.

time:
2013-11-06T11:52:25Z
class:
comments:
prepare for next development iteration

time:
2013-11-06T11:52:25Z
class:
comments:
prepare release elasticsearch-analysis-kuromoji-1.6.0

time:
2013-11-06T11:52:25Z
class:
comments:
Update to Elasticsearch 0.90.6 / Lucene 4.5.1
Closes #10.

time:
2013-11-06T11:50:54Z
class:
comments:
prepare for next development iteration

time:
2013-11-06T11:50:54Z
class:
comments:
prepare release elasticsearch-analysis-stempel-1.8.0

time:
2013-11-06T11:50:54Z
class:
comments:
Update to Elasticsearch 0.90.6 / Lucene 4.5.1
Closes #10.

time:
2013-11-06T11:48:53Z
class:
comments:
prepare for next development iteration

time:
2013-11-06T11:48:53Z
class:
comments:
prepare release elasticsearch-analysis-phonetic-1.7.0

time:
2013-11-06T11:48:53Z
class:
comments:
Update to Elasticsearch 0.90.6 / Lucene 4.5.1
Closes #13.

time:
2013-11-06T11:43:50Z
class:
comments:
prepare for next development iteration

time:
2013-11-06T11:43:50Z
class:
comments:
prepare release elasticsearch-analysis-icu-1.12.0

time:
2013-11-06T11:43:50Z
class:
comments:
Update to Elasticsearch 0.90.6 / Lucene 4.5.1
Closes #12.

time:
2013-11-06T09:58:40Z
class:
src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
comments:
Use same caching strategy for STANDARD and DEFAULT analyzer

time:
2013-11-06T09:30:32Z
class:
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Improved highlight *manyDocs tests (fvh and postings) to have random refreshes, flushes and optimizes using indexRandom

time:
2013-11-06T08:54:30Z
class:
src/main/java/org/elasticsearch/cloud/azure/AzureComputeService.java
src/main/java/org/elasticsearch/cloud/azure/AzureComputeServiceImpl.java
src/main/java/org/elasticsearch/cloud/azure/AzureModule.java
src/main/java/org/elasticsearch/cloud/azure/Instance.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscovery.java
src/main/java/org/elasticsearch/discovery/azure/AzureUnicastHostsProvider.java
src/main/java/org/elasticsearch/plugin/cloud/azure/CloudAzurePlugin.java
src/test/java/AzureSimpleTest.java
src/test/java/org/elasticsearch/azure/itest/AzureSimpleITest.java
src/test/java/org/elasticsearch/azure/test/AzureAbstractTest.java
src/test/java/org/elasticsearch/azure/test/AzureComputeServiceAbstractMock.java
src/test/java/org/elasticsearch/azure/test/AzureComputeServiceSimpleMock.java
src/test/java/org/elasticsearch/azure/test/AzureComputeServiceTwoNodesMock.java
src/test/java/org/elasticsearch/azure/test/AzureInstanceXmlParserTest.java
src/test/java/org/elasticsearch/azure/test/AzureSimpleTest.java
src/test/java/org/elasticsearch/azure/test/AzureTwoStartedNodesTest.java
comments:
Preparing release for 1.0.0-Alpha

time:
2013-11-06T00:20:27Z
class:
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Fixed doc_id used in combination with context.searcher(), needs to be topLevelId rather than just docId

Improved test to catch this problem calling refresh more frequently and having the word to highlight in different positions in the text

Closes #4103

time:
2013-11-06T00:10:58Z
class:
src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
comments:
NPE when closing XContentBuilder and using 'pretty' query parameter
fixes #4100

time:
2013-11-05T22:55:13Z
class:
comments:
Make RPM building mandatory

If RPM tools are not installed the release tool now fails with an
appropriate message. The tool now also fails if any of the required
artifacts is not present.

time:
2013-11-05T20:40:48Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestCatAction.java
comments:
Add /_cat endpoint

time:
2013-11-05T20:07:21Z
class:
src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerTests.java
src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/termvectors/AbstractTermVectorTests.java
comments:
Change 'standart' analyzer to use emtpy stopword list by default.

The 'default' / 'standard' analyzer can be a trappy default sicne it filters
english stopwords by default. Yet a default should not be dedicated to a certain language
since elasticsearch is used in many different scenarios where a standard analysis chain
with specialization to english full-text might be rather counter productive.

This commit changes the 'standard' analyzer to use an empty stopword list for indices
that are created from 1.0.0.Beta1 version onwards but will maintain backwards compatibiliy
for older indices.

Closes #3775

time:
2013-11-05T20:04:27Z
class:
src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java
comments:
better support for single value to settings builder where the type gets lost
relates to #4097

time:
2013-11-05T19:02:59Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/test/java/org/elasticsearch/benchmark/percolator/PercolatorStressBenchmark.java
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/percolator/PercolatorFacetsTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
comments:
Dist. Percolation: Use .percolator instead of _percolator for type name
Use .percolator as the internal (hidden) type name for percolators within the index. Seems nicer name to represent "hidden" types within an index.
closes #4090

time:
2013-11-05T17:03:21Z
class:
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
comments:
Fix `indices.recovery.concurrent_small_file_streams` not being dynamically settable

Fixes #4094

time:
2013-11-05T15:11:36Z
class:
comments:
Add optional RPM building, signing and uploading to release script

time:
2013-11-05T12:28:47Z
class:
comments:
[TEST] Fixed bad indentation on realtime_refresh tests

time:
2013-11-05T10:54:25Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/index/mapper/overridetype/OverrideTypeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleGetMappingsTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Throw an exception if a type's mapping root node is not equal to the type in question.

Also, fix all the problems it brought up in tests.
Removed OverrideTypeMappingTests as it is no longer relevant.
Better naming for the default percolator mapping and change it's content use _default_ as root node.

Closes #4038

time:
2013-11-05T10:24:31Z
class:
comments:
[TEST] Create the index with `number_of_replicas: 0` for "Realtime Refresh" tests

time:
2013-11-05T10:17:59Z
class:
comments:
[API] Changed `fields` parameter to required in "Get Field Mapping" API

Also reworded `include_defaults` description.

time:
2013-11-05T09:34:44Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
Remove unreleased versions from master & fix 0.90.6 Lucene Version

time:
2013-11-05T09:05:34Z
class:
comments:
[TEST] Removed the `skip` in the common test "setup" definition

Until the issue with skipping tests en masse is resolved, let's use individual `skip` statements,
as supported in current YAML runners.

time:
2013-11-05T08:47:02Z
class:
comments:
[TEST] Fixed incorrect `skip` behaviour in the "Get Field Mapping" API tests

time:
2013-11-05T03:05:37Z
class:
src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java
comments:
Optimize concrete index resolution in TransportMoreLikeThisAction

time:
2013-11-05T03:05:37Z
class:
src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
comments:
Resolve aliases on redirects inside TransportMoreLikeThisAction

fixes #4045

time:
2013-11-04T20:23:22Z
class:
comments:
Added doc file processing to update coming/added references

We use 'coming[x.y.z]' in our ref docs which needs to be updated
when doing a release to 'added[x.y.z]' This commit adds support
for replacing the references where applicable during preparing the release.

time:
2013-11-04T17:38:44Z
class:
comments:
[DOCS] Added documentation for the keep word token filter

time:
2013-11-04T17:32:50Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
comments:
Remove Index Reader warmer introduced in 0.90.6
It create the following challenges:
- it automatically load all the norms for all fields. This should be an opt in feature similar to the new loading feature in field data. Will open a separate issue for it.
- It automatically loads all doc values for all fields (if they have it), overriding effectively the loading option of field data when its backed by doc values.

closes #4078

time:
2013-11-04T17:18:36Z
class:
comments:
Added simplified range syntax to query string docs

time:
2013-11-04T15:49:07Z
class:
src/main/java/org/elasticsearch/index/analysis/KeepWordFilterFactory.java
src/test/java/org/elasticsearch/index/analysis/KeepFilterFactoryTests.java
comments:
Keep word filter through an error if `keep_word_path` was specified.

Closes #4073

time:
2013-11-04T15:10:58Z
class:
comments:
Improve top level documentation for building releases

time:
2013-11-04T13:55:55Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
move to [0.90.7] SNAP

time:
2013-11-04T13:30:31Z
class:
comments:
Fix typo in mvn command for running with multiple JVMs

time:
2013-11-04T13:08:59Z
class:
comments:
Added tool to build a complete Elasticsearch release.

This tool builds a release and runs several checks to make sure the
release is in a reasonable shape (smoke test). From a top level
perspective it runs the following steps:

 * clean the build environment `mvn clean`
 * check if a Java 6 JDK is available
 * run the tests with network and local
 * generates the checksums for the binary packages
 * uploads the binary packages to Amazon S3
 * runs a 'mvn deploy' to publish the maven artifacts

The script will create an intermediate branch from a given 'release
branch' updates all versions based on the version we are currently
releasing. Updates the 'pom.xml' file as well as the 'Version.java'
class. Once this is done it commits the changes and rebase with the
branch we want to release from, merges the changes from the intermediate
branch and pushes to the given remote repository including the release
tag.

time:
2013-11-04T11:55:22Z
class:
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Added support for highlighting multi term queries using the postings highlighter

Closes #4042

time:
2013-11-04T11:36:45Z
class:
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
comments:
Fix possible NPE in ClusterState.toString()

ClusterState.toString() can throw NPE if at least on index template exists in the cluster state.

time:
2013-11-04T10:47:14Z
class:
comments:
[DOC] Added a link to the official Ruby client to the "Clients" page

time:
2013-11-04T10:46:36Z
class:
comments:
[DOCS] Added a basic information about the official Ruby client to documentation

time:
2013-11-04T10:05:55Z
class:
comments:
[DOCS] Add some documentation about the performance of  `_source` usage in scripts.

time:
2013-11-04T02:55:54Z
class:
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/script/ScriptService.java
src/main/java/org/elasticsearch/watcher/AbstractResourceWatcher.java
src/main/java/org/elasticsearch/watcher/FileChangesListener.java
src/main/java/org/elasticsearch/watcher/FileWatcher.java
src/main/java/org/elasticsearch/watcher/ResourceWatcher.java
src/main/java/org/elasticsearch/watcher/ResourceWatcherModule.java
src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
src/test/java/org/elasticsearch/watcher/FileWatcherTest.java
comments:
Initial implementation of ResourceWatcherService

Closes #4062

time:
2013-11-03T20:31:42Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/index/store/Store.java
comments:
use immutable open map to list the files in store

time:
2013-11-03T15:50:22Z
class:
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
comments:
More detailed logging  for FullRollingRestartTests.testFullRollingRestart

set indices.cluster  & cluster.service to TRACE

time:
2013-11-03T13:34:29Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
comments:
add keys/values to ImmutableOpenMap

time:
2013-11-03T13:23:58Z
class:
src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java
src/main/java/org/elasticsearch/index/store/Store.java
comments:
verify operations on store dir are executed when its open
call ensureOpen and properly set the open flag
also, better handling of failures and error message during listAll in local recovery

time:
2013-11-03T01:30:19Z
class:
src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
comments:
URI routing parameter support with multi search API
Support URI level routing parameter for the multi search API, that will act as the default routing (unless explicitly set).
closes #4058

time:
2013-11-03T01:16:09Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
comments:
URI routing parameter does not work with Bulk API
closes #4053

time:
2013-11-02T12:21:06Z
class:
comments:
[TEST] Test for get_field_mapping was calling get_mapping

time:
2013-11-02T08:16:25Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Add missing .get() call to actually execute the update setting in RecoveryWhileUnderLoadTests

time:
2013-11-02T02:38:22Z
class:
src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPingTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingTests.java
comments:
cleanup DiscoveryNodes#Builder construction
have a better method name, and only allow to create a copy of the builder based on existing nodes when constructing the builder

time:
2013-11-02T01:52:01Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/gateway/GatewayService.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalAllocateDangledIndices.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
comments:
cleanup ClusterState#Builder construction
have a better method name, and only allow to create a copy of the builder based on existing cluster state when constructing the builder

time:
2013-11-02T01:13:25Z
class:
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java
src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
comments:
have IndexMetaData Builder pattern similar to other state builders

time:
2013-11-02T00:27:51Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
src/main/java/org/elasticsearch/cluster/routing/RoutingBuilders.java
src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/gateway/GatewayService.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalAllocateDangledIndices.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
comments:
cleanup RoutingTable#Builder construction
have a better method name, and only allow to create a copy of the builder based on existing routing table when constructing the builder

time:
2013-11-02T00:04:33Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataDeleteIndexService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/gateway/GatewayService.java
src/main/java/org/elasticsearch/gateway/local/LocalGateway.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalAllocateDangledIndices.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java
src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
comments:
cleanup MetaData#Builder construction
have a better method name, and only allow to create a copy of the builder based on existing meta data when constructing the builder

time:
2013-11-01T23:04:12Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
comments:
fix test to not rely on execution of processed / ack order

also, make sure the order is consistent (as much as possible) when calling ack to processed

time:
2013-11-01T22:33:54Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
_cat/nodes improvements.

* Handle info/stats null possibilities if cluster is in duress.

* Shorten node id.

time:
2013-11-01T21:42:51Z
class:
comments:
Ignore project tmp dir.

time:
2013-11-01T21:37:23Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
comments:
Add _cat/health.

% curl localhost:9200/_cat/health\?v=1\&ts=0
cluster  status nodeTotal nodeData shards pri relo init unassign
kluster green          1        1     20  20    0    0        0

% curl localhost:9200/_cat/health\?ts=0
kluster green 1 1 20 20 0 0 0

% curl localhost:9200/_cat/health\?v=1
epoch      time     cluster  status nodeTotal nodeData shards pri relo init unassign
1383341092 16:24:52 kluster green          1        1     20  20    0    0        0

% curl localhost:9200/_cat/health
1383341119 16:25:19 kluster green 1 1 20 20 0 0 0

Closes #4050.

time:
2013-11-01T21:37:22Z
class:
src/main/java/org/elasticsearch/common/Table.java
src/main/java/org/elasticsearch/common/table/TimestampedTable.java
comments:
Add TimestampedTable subclass.

time:
2013-11-01T21:37:22Z
class:
src/main/java/org/elasticsearch/rest/action/support/RestTable.java
comments:
Disable RestTable headers by default.

time:
2013-11-01T21:16:24Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Stableize recoverWhileRelocating by expanding replicas at the end

time:
2013-11-01T19:53:24Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
comments:
protect ImmutableOpenMap builder from using the built map after build has been called

time:
2013-11-01T18:44:25Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
comments:
remove unneeded check...

time:
2013-11-01T17:24:45Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
Fixed ack behaviour when no ack is expected from any node or timeout is set to 0

We now return acknowledged true when no wait is needed (mustAck always returns false). We do wait for the master node to complete its actions though. Previously it would try to timeout and hang due to a CountDown#fastForward call when the internal counter is set to 0

We now return acknowledged false without starting the timeout thread when the timeout is set 0, as starting the wait and immediately stopping the thread seems pointless.

Added coverage for ack in ClusterServiceTests

time:
2013-11-01T17:20:25Z
class:
src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
src/main/java/org/elasticsearch/index/analysis/FieldNameAnalyzer.java
src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java
src/main/java/org/elasticsearch/index/mapper/FieldMappersLookup.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
comments:
Introduce a new ImmutableOpenMap
this map is a "true" immutable map, encapsulating an open impl, and has a builder that allows it to be built easily.
the builder has the optimization of using clone if its being built based on an existing immutable map.
I think we don't need this check?

Maybe we should have a mechanism to ensure no mutator of this builder is called after build() has been called (for example by nulling out map)?

yea, I was thinking about it as well..., will require a check on each method...., worth it?

right...

make it an assert that is fine but I think we should just check and throw a real exception?

so check on the build() call? cause if we really want to check, we need to check on each mutator in the Builder as well?

I think an assert on every mutator should be enough

ended up solving it in a simple manner, just nullify the map when build is called


time:
2013-11-01T14:45:31Z
class:
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
Improved acknowledgement test for cluster reroute with dry_run flag

Usually acknowledged true means that all nodes have digested the change and are in sync. When no changes are made, there is no need to push a new cluster state, no need to wait for ack either, but can't guarantee that all nodes are in sync.

When using cluster reroute with dryRun flag no changes are made, this test was based on the wrong assumption that acknowledged meant all nodes were in sync, which is not the case here.

Changed the test to only read the cluster state from the master, to check that nothing changed there after processing the cluster state update.

time:
2013-11-01T12:53:39Z
class:
comments:
[DOC] Improve documentation on search stats groups

Document the ability to return all search statistics groups and provide examples of returning search statistics for groups.

time:
2013-11-01T10:47:22Z
class:
src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
src/test/java/org/elasticsearch/test/store/mock/MockDirectoryHelper.java
comments:
Randomize exceptions when file is deleted while still open.

This somehow emulates a behavior on windows but we should test the
other code paths as well.

time:
2013-11-01T10:44:07Z
class:
comments:
[DOCS] Fixed percolate docs errors

time:
2013-11-01T10:17:16Z
class:
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
src/test/java/org/elasticsearch/action/percolate/MultiPercolatorRequestTests.java
comments:
Fixed bug (NPE) in mpercolate api, defaults from percolating existing documents where also applied for the regular percolate api, these defaults were none existing (null).

time:
2013-11-01T10:09:17Z
class:
src/main/java/org/elasticsearch/rest/action/percolate/RestMultiPercolateAction.java
comments:
The mpercolate api rest endpoint should also support http get.

time:
2013-10-31T19:58:52Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
comments:
Removed needless concreteIndices call, already called in doExecute and set to the request object

time:
2013-10-31T19:18:00Z
class:
comments:
[DOCS] Typo on shingle tokenfilter

time:
2013-10-31T15:28:44Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
comments:
Fixed delete mapping to return acknowledged false when ack times out

time:
2013-10-31T15:20:29Z
class:
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdReaderTypeCache.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Fixed concurrency issue in simple id cache. The lget() of a map can only be used if the map isn't shared.

time:
2013-10-31T14:54:37Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
comments:
better timeout handling waiting for primary to be active for indexing
take into account the correct delta timeout when scheduling it, since now we can retry again after removing a listener

time:
2013-10-31T13:36:24Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
comments:
use Math.max rather than an if statement

time:
2013-10-31T13:25:28Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Evilize RecoveryWhileUnderLoadTests a bit more

time:
2013-10-31T13:23:58Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
improve moving from post_recovery to started
we need to move to started from post recovery on cluster level changes, we need to make sure we handle a global state change of relocating, which can happen (and not pass through started)

time:
2013-10-31T10:40:01Z
class:
comments:
add reference for ember-data-elasticsearch-kit to integrations page

time:
2013-10-31T10:07:52Z
class:
src/main/java/org/elasticsearch/index/analysis/FieldNameAnalyzer.java
src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/FieldMappersLookup.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
comments:
Improve new field mapping introduction performance
Improve the introduction of new fields into the concrete parsed mappings by not relying on immutable maps and copying over entries, but instead using open maps (which will also use less memory), and using clone to perform the copy on write logic

time:
2013-10-31T09:10:35Z
class:
src/main/java/org/elasticsearch/index/fielddata/AbstractAtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicGeoPointFieldData.java
src/main/java/org/elasticsearch/index/fielddata/BytesValues.java
src/main/java/org/elasticsearch/index/fielddata/DoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterBytesValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterDoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterLongValues.java
src/main/java/org/elasticsearch/index/fielddata/GeoPointValues.java
src/main/java/org/elasticsearch/index/fielddata/LongValues.java
src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/FloatValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/GeoDistanceComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/SortMode.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DenseDoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/plain/DenseLongValues.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/NumericDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/TermsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/longs/TermsLongFacetExecutor.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractNumericFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/LongFieldDataTests.java
comments:
Simplify FieldData API

Removing #getValue and #hasValue to have a simple and consistent API
for multiple values.

time:
2013-10-31T09:02:03Z
class:
comments:
upgrade randomized testing to 2.0.12

time:
2013-10-31T08:12:57Z
class:
src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
RegexpQueryBuilder now implements MultiTermQueryBuilder

This allows the RegexpQueryBuilder to be used in span queries

Added tests for all span multi term queries.
Also updated the documentation and removed mentioning of numeric range
queries for span queries (they have to be terms).

Closes #3392

time:
2013-10-31T00:26:32Z
class:
comments:
Updated "version_type" to match delete.json

time:
2013-10-30T21:16:55Z
class:
comments:
Fixed method name, and the doc url

time:
2013-10-30T20:36:55Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
comments:
The +index pattern without a wildcard in the index list is handled inconsistently

Fixes #3979

time:
2013-10-30T20:36:55Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Fix bug in TransportShardReplicationOperationAction retry mechanism

This issue was causing some index requests against shards in POST_RECOVERY state to hang.

time:
2013-10-30T20:35:41Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Add ES version to _cat/nodes.

time:
2013-10-30T18:50:29Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
comments:
Add heap used percentage to _cat/nodes.

Closes #4020.

time:
2013-10-30T18:19:35Z
class:
comments:
Added spec + tests for the GetFieldMapping API

Introduced in https://github.com/elasticsearch/elasticsearch/issues/3941

time:
2013-10-30T17:38:31Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
comments:
Add node name & ip to _cat/recovery.

Closes #4016.

time:
2013-10-30T15:16:36Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
src/main/java/org/elasticsearch/client/IndicesAdminClient.java
src/main/java/org/elasticsearch/client/support/AbstractIndicesAdminClient.java
src/main/java/org/elasticsearch/common/collect/MapBuilder.java
src/main/java/org/elasticsearch/index/codec/CodecService.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DocValuesFormatService.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DocValuesFormats.java
src/main/java/org/elasticsearch/index/codec/postingsformat/PostingFormats.java
src/main/java/org/elasticsearch/index/codec/postingsformat/PostingsFormatService.java
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/multifield/MultiFieldMapper.java
src/main/java/org/elasticsearch/index/similarity/Similarities.java
src/main/java/org/elasticsearch/index/similarity/SimilarityLookupService.java
src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleGetFieldMappingsTests.java
comments:
Add a GetFieldMapping API

This new API allows to get the mapping for a specific set of fields rather than get the whole index mapping and traverse it.
The fields to be retrieved can be specified by their full path, index name and field name and will be resolved in this order.
In case multiple field match, the first one will be returned.

Since we are now generating the output (rather then fall back to the stored mapping), you can specify `include_defaults`=true on the request to have default values returned.

Closes #3941

time:
2013-10-30T15:09:45Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
comments:
Add _cat/allocation/{nodes}.

Visualizes how shards distribute across the cluster.

% curl localhost:9200/_cat/allocation
shards diskUsed diskAvail diskRatio ip        node
     2   85.6gb   379.4gb     22.6% 127.0.0.1 MacTaggert, Moira
     2   85.6gb   379.4gb     22.6% 127.0.0.1 Jarvis, Edwin

% curl localhost:9200/_cat/allocation/Jar\*
shards diskUsed diskAvail diskRatio ip        node
     2   85.6gb   379.4gb     22.6% 127.0.0.1 Jarvis, Edwin

time:
2013-10-30T14:53:31Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
indices cluster state service should execute as one of the first listeners
its preferable to execute the indices cluster state service as quickly as possible, as one of the first listeners, so it will apply the cluster state to the local state
potentially, it should even execute before it state is "visible" (through the state call), but that's another change...

time:
2013-10-30T12:59:03Z
class:
comments:
[DOCS] Added a version flag to percolation

time:
2013-10-30T12:57:18Z
class:
comments:
[DOCS] Fixed a typo

time:
2013-10-30T12:47:31Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/indices/IndexAlreadyExistsException.java
comments:
throw index already exists failure when it exists as alias on creation
make sure to throw the already exists exception, so when indexing into an alias, and it has not propagated yet through the cluster state, it will end up being ignored if it already exists

time:
2013-10-30T11:08:54Z
class:
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
comments:
minor improvement to FullRollingRestartTests failure output

time:
2013-10-30T10:48:00Z
class:
src/main/java/org/elasticsearch/index/fielddata/AbstractAtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicGeoPointFieldData.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefOrdValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefValComparator.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericAtomicFieldData.java
src/main/java/org/elasticsearch/index/percolator/QueriesLoaderCollector.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/facet/terms/strings/FieldsTermsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringOrdinalsFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/TermsStatsStringFacetExecutor.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTest.java
comments:
Add back hashed BytesValues optimization that got lost in a previous commit.

Some FieldData consumers require hash values per byte. We provide an optimization
that allows to cache the hashes internally if the consumer knows that they are needed
this optimization got lost in a previous commit. This commit adds them back and folds
the dedicated method into AtomicFieldData#getBytesValues(true|false)

time:
2013-10-30T10:42:57Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
Also resend shard started message if shard state is in POST_RECOVERY and master thinks it's initializing.

Closes #4009

time:
2013-10-30T01:09:43Z
class:
src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
src/test/java/org/elasticsearch/plugin/ResponseHeaderPluginTests.java
src/test/java/org/elasticsearch/plugin/SitePluginTests.java
comments:
explicitly enable http when running plugin tests

add an option to force a setting when building a node, overriding if its explicitly set as system property

time:
2013-10-29T13:49:07Z
class:
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
comments:
Added getters for fs.path, fs.mount and fs.dev in node stats api

Closes #4004

time:
2013-10-29T12:58:06Z
class:
comments:
[DOCS] Extending setup as a service documentation

* Tell people to use ES_JAVA_OPTS for es.node.name or similar parameters
* Showing a simple way to install Oracle JDK on ubuntu/debian

Closes #3999

time:
2013-10-29T12:11:34Z
class:
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Improving test stability for CompletionTests

Randomized testing caught an issue showing that the test should
flush after indexing a document, as always the same document is
indexed.

time:
2013-10-29T10:45:59Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterUpdateSettingsAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationTests.java
comments:
Added support for acknowledgements to update cluster settings api

As a side note, the internal reroute call is now part of the ack mechanism. That means that if the response contains acknowledged flag, the internal reroute that was eventually issued was acknowledged too. Also, even if the request is not acknowledged, the reroute is issued before returning, which means that there is no need to manually call reroute afterwards to make sure the new settings are immediately applied.

Closes #3995

time:
2013-10-29T10:45:59Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
src/main/java/org/elasticsearch/rest/AcknowledgedRestResponseActionListener.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/reroute/RestClusterRerouteAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
Added support for acknowledgements to cluster reroute api

Closes #3985

time:
2013-10-29T10:45:59Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/DeleteMappingResponse.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/delete/RestDeleteMappingAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
comments:
Added support for node acknowledgements in delete mapping api

Closes #3984

time:
2013-10-29T10:45:59Z
class:
src/main/java/org/elasticsearch/action/admin/indices/settings/TransportUpdateSettingsAction.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/settings/UpdateSettingsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerResponse.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequestBuilder.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedResponse.java
src/main/java/org/elasticsearch/action/support/master/MasterNodeOperationRequestBuilder.java
src/main/java/org/elasticsearch/cluster/ack/ClusterStateUpdateListener.java
src/main/java/org/elasticsearch/cluster/ack/ClusterStateUpdateRequest.java
src/main/java/org/elasticsearch/cluster/ack/ClusterStateUpdateResponse.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
src/test/java/org/elasticsearch/cluster/ack/AckTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Added support for acknowledgement in update index settings api

Added support for serialization based on version to AcknowledgedResponse. Useful in api that don't support yet the acknowledged flag in the response.
Moved also ack warmer tests to more specific AckTests class

Close #3983

time:
2013-10-29T10:45:58Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
comments:
Added ack call when the cluster state has not changed

The missing call could cause a cluster state update to hang in case there is no change no apply

time:
2013-10-29T10:10:31Z
class:
src/test/java/org/elasticsearch/threadpool/SimpleThreadPoolTests.java
comments:
Fixed test cluster scope to be able to run it multiple times if needed

time:
2013-10-29T03:37:11Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
comments:
Fix String.format to use Locale.ROOT in RestRecoveryAction

time:
2013-10-28T20:05:55Z
class:
src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
comments:
mget API should support global routing parameter

mget API support `_routing` field but not `routing` parameter.

Reproduction here:

```sh
curl -XDELETE "http://localhost:9200/test/"; echo
curl -XPUT "http://localhost:9200/test/" -d'{
   "settings": {
      "number_of_replicas": 0,
      "number_of_shards": 5
   }
}'; echo

curl -XPUT 'http://localhost:9200/test/order/1-1?routing=key1' -d '{
   "productName":"doc 1"
}'; echo
curl -XPUT 'http://localhost:9200/test/order/1-2?routing=key1' -d '{
   "productName":"doc 2"
}'; echo
curl -XPUT 'http://localhost:9200/test/order/1-3?routing=key1&refresh=true' -d '{
   "productName":"doc 3"
}'; echo

curl -XPOST 'http://localhost:9200/test/order/_mget?pretty' -d '{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "order",
            "_id" : "1-1",
            "_routing" : "key1"
        },
        {
            "_index" : "test",
            "_type" : "order",
            "_id" : "1-2",
            "_routing" : "key1"
        },
        {
            "_index" : "test",
            "_type" : "order",
            "_id" : "1-3",
            "_routing" : "key1"
        }
    ]
}'; echo

curl -XPOST 'http://localhost:9200/test/order/_mget?pretty&routing=key1' -d '{
	"ids": [
		"1-1",
		"1-2",
		"1-3"
	]
}'; echo
```

Closes #3996.

time:
2013-10-28T19:43:02Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
comments:
Add the 'recovery' _cat API endpoint

This addes the _cat/recovery/{index} API endpoint, which displays
information about the status of recovering shards. An example of the
output:

index shard node                   target    recovered     %
test2 0     Fwo7c_6MSdWM0uM1Ho4t-g 147304414  19236101 13.1%
test  0     Fwo7c_6MSdWM0uM1Ho4t-g 145891423 119640535 82.0%

Fixes #3969

time:
2013-10-28T17:46:46Z
class:
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerTests.java
comments:
Making unit test future proof by using old version, in case versions change

time:
2013-10-28T17:11:35Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/index/analysis/AnalysisModule.java
src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
src/main/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerProviderFactory.java
src/main/java/org/elasticsearch/indices/analysis/IndicesAnalysisService.java
src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
src/test/java/org/elasticsearch/index/analysis/AnalysisModuleTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerIntegrationTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerProviderFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerTests.java
src/test/java/org/elasticsearch/index/mapper/MapperTestUtils.java
comments:
Add version to prebuilt analyzers

This patch takes the version of the created index into account when a
prebuilt analyzer is created.
So, if an index was created with 0.90.4, then the prebuilt analyzers
will be the same than on the 0.90.4 release.

One reason for this feature is the possibility to change pre built
analyzers like the standard one.

The patch tries to reuse analyzers as mutch as possible. So even if
version X.Y.Z and X.Y.A use the same lucene analyzers, the same instance
is reused in order to prevent overcreation of lucene analyzer instances.

Closes #3790

time:
2013-10-28T14:48:31Z
class:
src/main/java/org/elasticsearch/common/joda/DateMathParser.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/test/java/org/elasticsearch/common/joda/DateMathParserTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
comments:
rename and document "index.mapping.date.parse_upper_inclusive" setting for date fields

The setting causes the upper bound for a range query/filter to be rounded up,
therefore the name `round_ceil` seems to make more sense.

Also this commit removes the redundant fourth parameter to DateMathParser.parse(..)
which was never used.
was:    parse(String text, long now, boolean roundUp, boolean upperInclusive)
is now: parse(String text, long now, boolean roundCeil)

closes #3914

time:
2013-10-28T12:12:09Z
class:
src/main/java/org/apache/lucene/search/XLuceneConstantScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/Lucene.java
src/main/java/org/elasticsearch/common/lucene/search/EmptyScorer.java
src/main/java/org/elasticsearch/common/lucene/search/MatchNoDocsQuery.java
src/main/java/org/elasticsearch/common/lucene/search/MoreLikeThisQuery.java
src/main/java/org/elasticsearch/common/lucene/search/MultiPhrasePrefixQuery.java
src/main/java/org/elasticsearch/common/lucene/search/Queries.java
src/main/java/org/elasticsearch/common/lucene/search/XConstantScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/search/XFilteredQuery.java
src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java
src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/query/ConstantScoreQueryParser.java
src/main/java/org/elasticsearch/index/query/IdsQueryParser.java
src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/main/java/org/elasticsearch/index/search/MatchQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
src/main/java/org/elasticsearch/search/facet/query/QueryFacetExecutor.java
src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
src/test/java/org/elasticsearch/index/cache/filter/FilterCacheTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Make ContextIndexSearcher delegate more method calls to Engine.searcher().

When running tests, Engine.searcher() is going to be an AssertingIndexSearcher
so we definitely don't want to discard it. This commit fixes it as well as the
bugs it found.

Closes #3987

time:
2013-10-28T10:09:48Z
class:
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
comments:
Assert on failures in QueryRescorerTests

time:
2013-10-28T08:54:54Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
comments:
Added a ClusterHealthResponse.toString implementation for better error reporting in FullRollingRestartTests timeout failures.

time:
2013-10-26T20:19:05Z
class:
src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
src/main/java/org/elasticsearch/search/fetch/source/FetchSourceParseElement.java
comments:
Use XContentParser.isBooleanValue to detect all boolean values for the `_source` parameter for both _mget and _search

 Closes #3981

time:
2013-10-26T20:15:35Z
class:
src/main/java/org/elasticsearch/common/Booleans.java
src/main/java/org/elasticsearch/common/xcontent/XContentParser.java
src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
src/test/java/org/elasticsearch/common/BooleansTests.java
comments:
Added Booleans.isBoolean to allow detecting whether a char sequence contains a boolean value. Added XContentParser.isBooleanValue to allow testing if current value is of boolean nature.

Boolean values:
boolean type values
numeric (0 == false)
one of the following strings: "true","false","on","off","yes","no","0","1"

time:
2013-10-26T11:09:37Z
class:
comments:
[TEST] Corrected YAML syntax in mget/70_source_filtering
and broke it up into multiple tests which are easier to debug

time:
2013-10-25T20:04:44Z
class:
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
comments:
Don't use TransportClient on FullClusterRestartTests

There seems to be an issue with this test since it shuts down random
nodes and TransportClients seem to be confused due to that. For
now we disable them to figure out if this is the cause of the sporadic
timeouts.

time:
2013-10-25T18:14:12Z
class:
comments:
Remove unescessary newline continuation

Newline continuation causes some yaml parsers to interpret the
hash as a string instead of a proper hash

time:
2013-10-25T17:05:20Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
Re-apply pull-request #3956 now that the CLA has been signed.

time:
2013-10-25T14:38:50Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
CompletionFieldMapper: Return error if weight is no integer

In order to make sure that people do not get confused, if they
index a float as weight, it makes more sense to reject it instead of
silently parsing it to an integer and using it.

The CompletionFieldMapper now checks for the type of the number which
is being read and throws and exception if the number is something else
than int or long.

Closes #3977

time:
2013-10-25T12:31:28Z
class:
src/main/java/org/elasticsearch/rest/AbstractRestResponseActionListener.java
src/main/java/org/elasticsearch/rest/AcknowledgedRestResponseActionListener.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
comments:
Unify REST responses for Acknowledged[Request|Response]

All Rest handlers that use AcknowledgedResponse look identical. Since
we gonna have more of them in the future we can abstract the logic away.

time:
2013-10-24T22:49:17Z
class:
src/main/java/org/elasticsearch/index/search/MultiMatchQuery.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Fixed NPE in multi_match query when using lenient and field weight

Closes #3797

time:
2013-10-24T22:18:32Z
class:
comments:
Fix nonsensical sentence in standard analyzer documentation so that it is more understandable

time:
2013-10-24T21:38:00Z
class:
src/main/java/org/apache/lucene/search/postingshighlight/CustomPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/CustomPostingsHighlighter.java
src/main/java/org/apache/lucene/search/postingshighlight/Snippet.java
src/main/java/org/apache/lucene/search/postingshighlight/XDefaultPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/XPassageFormatter.java
src/main/java/org/apache/lucene/search/postingshighlight/XPostingsHighlighter.java
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
src/main/java/org/elasticsearch/search/highlight/HighlightModule.java
src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
src/main/java/org/elasticsearch/search/highlight/HighlightUtils.java
src/main/java/org/elasticsearch/search/highlight/HighlighterContext.java
src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java
src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java
src/test/java/org/apache/lucene/search/postingshighlight/CustomPassageFormatterTests.java
src/test/java/org/apache/lucene/search/postingshighlight/CustomPostingsHighlighterTests.java
src/test/java/org/apache/lucene/search/postingshighlight/XPostingsHighlighterTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Added third highlighter type based on lucene postings highlighter

Requires field index_options set to "offsets" in order to store positions and offsets in the postings list.
Considerably faster than the plain highlighter since it doesn't require to reanalyze the text to be highlighted: the larger the documents the better the performance gain should be.
Requires less disk space than term_vectors, needed for the fast_vector_highlighter.
Breaks the text into sentences and highlights them. Uses a BreakIterator to find sentences in the text. Plays really well with natural text, not quite the same if the text contains html markup for instance.
Treats the document as the whole corpus, and scores individual sentences as if they were documents in this corpus, using the BM25 algorithm.

Uses forked version of lucene postings highlighter to support:
- per value discrete highlighting for fields that have multiple values, needed when number_of_fragments=0 since we want to return a snippet per value
- manually passing in query terms to avoid calling extract terms multiple times, since we use a different highlighter instance per doc/field, but the query is always the same

The lucene postings highlighter api is  quite different compared to the existing highlighters api, the main difference being that it allows to highlight multiple fields in multiple docs with a single call, ensuring sequential IO.
The way it is introduced in elasticsearch in this first round is a compromise trying not to change the current highlight api, which works per document, per field. The main disadvantage is that we lose the sequential IO, but we can always refactor the highlight api to work with multiple documents.

Supports pre_tag, post_tag, number_of_fragments (0 highlights the whole field), require_field_match, no_match_size, order by score and html encoding.

Closes #3704

time:
2013-10-24T19:45:12Z
class:
src/test/java/org/elasticsearch/percolator/PercolatorFacetsTests.java
comments:
Use at least one query to prevent division by zero in PercolatorFacetsTests

time:
2013-10-24T17:44:45Z
class:
src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java
comments:
remove trove import from mvel script

all subclasses of trove maps have been removed in 088e05b368

time:
2013-10-24T16:37:44Z
class:
src/main/java/org/apache/lucene/queries/ExtendedCommonTermsQuery.java
src/main/java/org/elasticsearch/index/cache/docset/simple/SimpleDocSetCache.java
src/main/java/org/elasticsearch/index/cache/filter/FilterCache.java
src/main/java/org/elasticsearch/index/cache/filter/none/NoneFilterCache.java
src/main/java/org/elasticsearch/index/cache/filter/weighted/WeightedFilterCache.java
src/main/java/org/elasticsearch/index/cache/id/IdCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java
src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
comments:
Upgrade to Lucene 4.5.1

time:
2013-10-24T12:38:32Z
class:
comments:
[DOCS] rephrased docs for highlight no_match_size parameter

(removed 0.90.6 coming tag as it's needed only in 0.90 branch)

time:
2013-10-24T12:38:32Z
class:
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Minor changes to no_match_size highlight parameter and highlight tests (#1171)

- Randomly store the field to highlight
- Updated test to use common assertions
- Restored previously commented out testCommonTermsQuery

time:
2013-10-24T12:38:32Z
class:
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
src/main/java/org/elasticsearch/search/highlight/HighlighterParseElement.java
src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java
src/main/java/org/elasticsearch/search/highlight/SearchContextHighlight.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Highlighting can return excerpt with no highlights

You can configure the highlighting api to return an excerpt of a field
even if there wasn't a match on the field.

The FVH makes excerpts from the beginning of the string to the first
boundary character after the requested length or the boundary_max_scan,
whichever comes first.  The Plain highlighter makes excerpts from the
beginning of the string to the end of the last token before the requested
length.

Closes #1171

time:
2013-10-24T12:28:17Z
class:
comments:
add detection of JRE server (JRE on Windows Server)

fixes #3928

(cherry picked from commit a176ffda6fd97b6efbce6cc4f02a824bf5a10a17)

time:
2013-10-24T12:27:32Z
class:
comments:
add stop timeout and start mode for windows service.bat

fixes #3938
fixes #3962

(cherry picked from commit f1d6ccc5845ca8f93177c0de3da59a2f37f67818)

time:
2013-10-24T12:01:43Z
class:
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerResponse.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedResponse.java
comments:
Use abstract classes as super typs for Acknowledge operations

Currently we have a marker interface for Acknowledged[Request|Response],
this makes not much sense since we duplicate the code in each subclass
or class that implements the interface. We can simply use abstract
classes and have it implemented only once.

time:
2013-10-24T08:33:56Z
class:
src/main/java/org/elasticsearch/index/fielddata/AbstractAtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicGeoPointFieldData.java
src/main/java/org/elasticsearch/index/fielddata/BytesValues.java
src/main/java/org/elasticsearch/index/fielddata/DoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterBytesValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterDoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/FilterLongValues.java
src/main/java/org/elasticsearch/index/fielddata/GeoPointValues.java
src/main/java/org/elasticsearch/index/fielddata/LongValues.java
src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefOrdValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/GeoDistanceComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/SortMode.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/DocIdOrdinals.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/EmptyOrdinals.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinals.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/Ordinals.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/SinglePackedOrdinals.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DenseDoubleValues.java
src/main/java/org/elasticsearch/index/fielddata/plain/DenseLongValues.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/EmptyByteValuesWithOrdinals.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericAtomicFieldData.java
src/main/java/org/elasticsearch/index/percolator/QueriesLoaderCollector.java
src/main/java/org/elasticsearch/index/search/NumericRangeFieldDataFilter.java
src/main/java/org/elasticsearch/index/search/geo/GeoDistanceFilter.java
src/main/java/org/elasticsearch/index/search/geo/GeoDistanceRangeFilter.java
src/main/java/org/elasticsearch/index/search/geo/GeoPolygonFilter.java
src/main/java/org/elasticsearch/index/search/geo/InMemoryGeoBoundingBoxFilter.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/facet/DoubleFacetAggregatorBase.java
src/main/java/org/elasticsearch/search/facet/LongFacetAggregatorBase.java
src/main/java/org/elasticsearch/search/facet/geodistance/GeoDistanceFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/geodistance/ValueGeoDistanceFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/range/KeyValueRangeFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/TermsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/longs/TermsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/HashedAggregator.java
src/main/java/org/elasticsearch/search/facet/terms/strings/HashedScriptAggregator.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringOrdinalsFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/TermsStatsStringFacetExecutor.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractNumericFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/LongFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinalsTests.java
comments:
Refactor FieldData iterations

This commit primarily folds [Double|Bytes|Long|GeoPoint]Values.Iter
into [Double|Bytes|Long|GeoPoint]Values. Iterations now don't require
a auxillary class (Iter) but instead driven by native for loops. All
[Double|Bytes|Long|GeoPoint]Values are stateful and provide `setDocId`
and `nextValue` methods to iterate over all values in a document.
This has several advantage:

 * The amout of specialized classes is reduced
 * Iteration is clearly stateful ie. Iters can't be confused to be local.
 * All iterations are size bounded which prevents runtime checks and
   allows JIT optimizations / loop un-rolling and most iterations are
   branch free.
 * Due to the bounded iteration the need for a `hasNext` method call
   is removed.
 * Value iterations feels more native.

This commit also adds consistent documentation and unifies the calcualtion
if SortMode is involved.

This commit also changes the runtime behavior of BytesValues#getValue() such that it
will never return `null` anymore. If a document has no value in a field
this method still returns a `BytesRef` with a `length` of 0. To identify
documents with no values #hasValue() or #setDocument(int) should be used.
The latter should be preferred if the value will be consumed in the case
the document has a value.

time:
2013-10-24T07:43:58Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
Revert "Fix for has_child can cause an infinite loop (100% CPU) when used in bool query."

Temporarily revert the commit while waiting for the CLA to be signed.

time:
2013-10-24T07:24:14Z
class:
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
comments:
Fix for has_child can cause an infinite loop (100% CPU) when used in bool query.

Closes #3955

time:
2013-10-24T04:14:02Z
class:
comments:
Added URL to indices.get_template to match previous change

Since the name is no longer required, added a supporting path to the paths array.

time:
2013-10-23T22:55:27Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkAction.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java
src/main/java/org/elasticsearch/transport/TransportRequestOptions.java
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
src/test/java/org/elasticsearch/benchmark/transport/BenchmarkNettyLargeMessages.java
comments:
Transport: Have a separate channel for recovery
Have a separate channel for recovery, so it won't overflow the "low" channel which is also used for bulk indexing.

Also, rename the channel names to be more descriptive. Change low to bulk (for bulk based operations, currently just bulk indexing), med to reg (for "regular" operations), and high to state (for state based communication). The new channel for recovery will be named recovery, and the ping channel will remain the same.

closes #3954

time:
2013-10-23T08:58:35Z
class:
src/test/java/org/elasticsearch/benchmark/search/facet/TermsFacetSearchBenchmark.java
comments:
Add doc values to TermsFacetSearchBenchmark.

time:
2013-10-23T01:04:22Z
class:
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
src/test/java/org/elasticsearch/search/scan/SearchScanScrollingTests.java
comments:
Java API: Setting track scores does not affect scan search type
When setting track scores, the scan search type will return the scores for each document. The Java API builder does not properly set this value (it only sets it if a sort in in place, which is not relevant for scan search type).

closes #3949

time:
2013-10-22T11:09:13Z
class:
comments:
Merge pull request #3940 from rboulton/patch-1

[Docs] Clean up wording in cluster health api doc

time:
2013-10-21T19:19:14Z
class:
src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java
src/main/java/org/elasticsearch/rest/action/support/RestXContentBuilder.java
comments:
externalize writing "raw" fields to helper method

time:
2013-10-21T14:11:09Z
class:
comments:
Fix markup

time:
2013-10-21T12:13:28Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/facet/InternalFacets.java
src/test/java/org/elasticsearch/percolator/PercolatorFacetsTests.java
comments:
Added facet support to the percolate api.
Closes #3851

time:
2013-10-21T11:37:50Z
class:
comments:
Clean up wording to reduce confusion

The description of the timeout parameter was worded misleadingly; it implied that the API would wait until the cluster reached the desired level and then stayed at that level for the timeout. I've tweaked the sentence to remove the risk of confusion.

time:
2013-10-21T08:40:21Z
class:
comments:
Merge pull request #9 from johtani/add_description

Add description and example

time:
2013-10-19T21:05:29Z
class:
comments:
Add description and example

time:
2013-10-18T16:03:31Z
class:
comments:
[DOCS] Reorganised the highlight_query docs and added a version flag

time:
2013-10-18T15:55:21Z
class:
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
comments:
Fix small typo in terms lookup tests mapping (count api tests)

time:
2013-10-18T15:55:21Z
class:
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Fix small typo in terms lookup tests mapping.

time:
2013-10-18T15:29:31Z
class:
comments:
Document strict dynamic type mapping.

time:
2013-10-18T14:25:00Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
comments:
Allow awareness attributes to be reset via the API

Currently we don't allow resetting the awareness
attribute via the API since it requires at least one
non-empty string to update the setting. This commit
allows resetting this using an empty string.

Closes #3931

time:
2013-10-18T13:29:53Z
class:
comments:
phrase_len is not called phrase_length

time:
2013-10-18T10:19:37Z
class:
src/main/java/org/elasticsearch/client/Client.java
src/main/java/org/elasticsearch/indices/recovery/StartRecoveryRequest.java
comments:
Fix teh typos in javadocs

time:
2013-10-17T14:06:44Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalAllocateDangledIndices.java
src/main/java/org/elasticsearch/transport/BaseTransportRequestHandler.java
src/main/java/org/elasticsearch/transport/TransportRequestHandler.java
src/main/java/org/elasticsearch/transport/local/LocalTransport.java
src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
comments:
Settings queue_size on index/bulk TP can cause rejection failures when executed over network
The #3526 fix was not complete, it handled cases of on node execution, but didn't properly handle cases where it was executed over the network, and forcing the execution of the replica operation when done over the wire.

This relates to #3854

closes #3929

time:
2013-10-17T09:54:36Z
class:
comments:
[DOCS] How to check max_file_descriptors

time:
2013-10-17T07:50:15Z
class:
comments:
Java API Documentation (0.90+) needs update for accessors in Facets docs
Closes #3921.
(cherry picked from commit a753c48)

time:
2013-10-17T07:26:43Z
class:
src/main/java/org/elasticsearch/search/facet/terms/TermsFacetParser.java
comments:
Terms facet will now throw a parsing exception if no field, fields or a script is supplied.

Previously you'd get an NPE. Also added extra exception when called with unknown parameters.
+1 !
Can we add a test for this though? Or maybe there is one already?


time:
2013-10-16T15:51:50Z
class:
comments:
Added a link to official Python client to the client list, fixed perl link

time:
2013-10-16T15:45:05Z
class:
comments:
Added brief overview of the python client to the guide

time:
2013-10-16T14:31:36Z
class:
comments:
[Docs] update reference to remove documentation about percolating during an index, bulk or update request.

time:
2013-10-16T12:12:19Z
class:
comments:
Added initial documentation for the redesigned percolator.

time:
2013-10-16T10:04:31Z
class:
comments:
[Docs] updated refrences to dynamic_date_formats

time:
2013-10-16T08:53:25Z
class:
comments:
[Docs] added document for the lenient option in match queries

time:
2013-10-15T16:29:44Z
class:
src/main/java/org/elasticsearch/action/index/IndexRequest.java
src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/get/ShardGetService.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java
src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryParser.java
src/test/java/org/elasticsearch/cluster/metadata/MappingMetaDataParserTests.java
src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
Prohibit indexing a document with parent for a type that doesn't have a `_parent` field configured and prohibit adding a _parent field to an existing mapping.

Closes #3848 #3849

time:
2013-10-15T15:47:51Z
class:
src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/common/util/concurrent/CountDown.java
src/test/java/org/elasticsearch/common/util/concurrent/CountDownTest.java
src/test/java/org/elasticsearch/search/scan/SearchScanScrollingTests.java
comments:
Added simple count down class that allows to be fast forwarded

Closes #3910

time:
2013-10-15T15:47:50Z
class:
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/delete/DeleteWarmerRequestTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Delete warmer api to support acknowledgements

Added support for acknowledgements in delete warmer api using the generic mechanism introduced in#3786

Closes #3833

time:
2013-10-15T15:47:50Z
class:
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerResponse.java
src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
src/main/java/org/elasticsearch/action/support/master/AcknowledgedResponse.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Put warmer api to support acknowledgements

Added support for acknowledgements in put warmer api using the generic mechanism introduced in #3786

Closes #3831

time:
2013-10-15T15:47:50Z
class:
src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
src/main/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandler.java
src/main/java/org/elasticsearch/discovery/ClusterStatePublishResponseHandler.java
src/main/java/org/elasticsearch/discovery/Discovery.java
src/main/java/org/elasticsearch/discovery/DiscoveryService.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
comments:
Added generic cluster state update ack mechanism

Added new AckedClusterStateUpdateTask interface that can be used to submit cluster state update tasks and allows actions to be notified back when a set of (configurable) nodes have acknowledged the cluster state update. Supports a configurable timeout, so that we wait for acknowledgement for a limited amount of time (will be provided in the request as it curently happens, default 10s).

Internally, a low level AckListener is created (InternalClusterService) and passed to the publish method, so that it can be notified whenever each node responds to the publish request. Once all the expected nodes have responded or the timeoeout has expired, the AckListener notifies the action which will return adding the proper acknowledged flag to the response.

Ideally, this new mechanism will gradually replace the existing ones based on custom endpoints and notifications (per api).

Closes #3786

time:
2013-10-15T15:27:05Z
class:
comments:
[Docs] Typo

time:
2013-10-15T15:22:34Z
class:
comments:
[Docs] Added a page for the Perl client

time:
2013-10-15T14:12:02Z
class:
src/main/java/org/elasticsearch/index/analysis/StopTokenFilterFactory.java
src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Add support for Lucene SuggestStopFilter

The suggest stop filter is an improved version of the stop filter, which
takes stopwords only into account if the last char of a query is a
whitespace. This allows you to keep stopwords, but to allow suggesting for
"a".

Example: Index document content "a word". You are now able to suggest for
"a" and get back results in the completion suggester, if the suggest stop
filter is used on the query side, but will not get back any results for
"a " as this is identified as a stopword.

The implementation allows to set the `remove_trailing` parameter for a
custom stop filter and thus use the suggest stop filter instead of the
standard stop filter.

time:
2013-10-15T11:30:56Z
class:
comments:
[DOCS] Added compound_on_flush docs and updated compound_format
docs to include note about accepting a float

time:
2013-10-15T10:25:07Z
class:
comments:
[DOCS] Added script.disable_dynamic to the scripting page

time:
2013-10-15T08:30:49Z
class:
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
src/main/java/org/elasticsearch/index/percolator/stats/ShardPercolateService.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
comments:
Added `num_queries` and `memory_size` stats to percolate stats.

Closes #3883

time:
2013-10-14T22:33:56Z
class:
comments:
removed a duplicate paragraphin config docs

time:
2013-10-14T20:59:52Z
class:
comments:
improve escaping of user paths

remove usage of if and () blocks as they clashed with user paths containing ()
postpone quotation of variables to prevent double escaping ("")
fix #3906

(cherry picked from commit 1cc095ec32a5b623f88c312f497ac5469887be97)

time:
2013-10-14T18:57:02Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
comments:
Reenable test after fix

time:
2013-10-14T12:56:59Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/CombineFunction.java
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
comments:
fix naming in function_score

    - "boost" should be "boost_factor"
    - "mult" should be "multiply"

Also, store combine function names in ImmutableMap instead of iterating
over all possible names each time.

closes #3872 for master

time:
2013-10-14T12:52:45Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Replaced hardcoded boolean value with correct parameter

Implemented changes suggested by review.

Closes #3898

time:
2013-10-14T12:51:08Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
comments:
index another doc in test and flush to force merge

time:
2013-10-14T12:48:41Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
comments:
Disable testSegmentsWithMergeFlag with AwaitsFix

time:
2013-10-14T12:09:38Z
class:
comments:
[DOCS] Note that cutoff_frequency doesn't handle stacked tokens gracefully

time:
2013-10-14T12:09:38Z
class:
src/main/java/org/elasticsearch/index/search/MatchQuery.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
Add match query support for stacked tokens

SynonymFilters produces token streams with stacked tokens such that
conjunction queries need to be parsed in a special way such that the
stacked tokens are added as an innner disjuncition.

Closes #3881

time:
2013-10-14T11:41:35Z
class:
comments:
[DOCS] Add doc for delimited payload token filter

time:
2013-10-14T11:41:32Z
class:
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java
src/main/java/org/elasticsearch/action/termvector/TermVectorWriter.java
comments:
fix bug in term vector api, payloads were not handled correctly when some where missing

The array holding the payloads (TermVectorFields.payloads) is reused for each token. If the
previous token had payloads but the current token had not, then the payloads of the previous
token were returned, because the payloads of the previous token were never invalidated.
For example, for a field only contained two tokens each occurring once, the first having a
payload and the second not, then for the second token, the payload of the first was returned.

closes #3873

time:
2013-10-14T11:41:30Z
class:
src/main/java/org/elasticsearch/index/analysis/AnalysisModule.java
src/main/java/org/elasticsearch/index/analysis/DelimitedPayloadTokenFilterFactory.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorTests.java
comments:
enable delimited payload token filter

closes #3859

time:
2013-10-14T11:41:25Z
class:
src/test/java/org/elasticsearch/termvectors/GetTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/TermVectorUnitTests.java
comments:
move tests to unit test

time:
2013-10-14T10:43:16Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
comments:
The `has_child` query's inner query now is wrapped in a filtered query with the child type as filter, this prevents other children from being returned as hit.
Extended the specialized simplified mapping source method to support metadata mapping fields. These fields can just specified as normal fields, but will automatically be placed as top level mapping field.

Closes #3818

time:
2013-10-14T09:04:48Z
class:
src/main/java/org/apache/lucene/index/TrackingConcurrentMergeScheduler.java
src/main/java/org/apache/lucene/index/TrackingSerialMergeScheduler.java
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java
src/main/java/org/elasticsearch/index/engine/Segment.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/merge/OnGoingMerge.java
src/main/java/org/elasticsearch/index/merge/scheduler/ConcurrentMergeSchedulerProvider.java
src/main/java/org/elasticsearch/index/merge/scheduler/MergeSchedulerProvider.java
src/main/java/org/elasticsearch/index/merge/scheduler/SerialMergeSchedulerProvider.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
comments:
Segments API: Support merge id on segments (groups segments being merged)
Return a merge_id element in each segment of the segments API, allowing to group segments that are being merged as part of a single merge and indicate which ones are being merged now.
closes #3904

time:
2013-10-14T08:55:10Z
class:
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
comments:
Randomly use Bulk in AbstractIntegrationTest#indexRandom

time:
2013-10-14T08:55:09Z
class:
src/main/java/org/elasticsearch/common/collect/Tuple.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
comments:
Retry blocking if async indexing is rejected due to queue size

Some tests use AbstractIntegrationTest#indexRandom which sometimes uses async
indexing. This can easily run into queue size based rejections on a slow
box. In that case we should retry blocked indexing.

time:
2013-10-14T08:02:29Z
class:
src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
src/main/java/org/elasticsearch/river/RiversService.java
comments:
Added missing builder.endObject calls

time:
2013-10-13T21:05:40Z
class:
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
comments:
Use smart client in busy waiting loop

This test fails since we use random transport clients. Let's see
if it stabelizes with a smart client in the loop and debug further
if it helps.

time:
2013-10-13T20:37:40Z
class:
src/test/java/org/apache/lucene/analysis/miscellaneous/TruncateTokenFilterTests.java
src/test/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilterTests.java
src/test/java/org/elasticsearch/ElasticSearchExceptionTests.java
src/test/java/org/elasticsearch/VersionTests.java
src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
src/test/java/org/elasticsearch/action/percolate/MultiPercolatorRequestTests.java
src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
src/test/java/org/elasticsearch/cluster/metadata/MappingMetaDataParserTests.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java
src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeFiltersTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsTests.java
src/test/java/org/elasticsearch/cluster/settings/SettingsValidatorTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
src/test/java/org/elasticsearch/common/compress/CompressedStringTests.java
src/test/java/org/elasticsearch/common/geo/GeoJSONShapeParserTests.java
src/test/java/org/elasticsearch/common/geo/ShapeBuilderTests.java
src/test/java/org/elasticsearch/common/io/StreamsTests.java
src/test/java/org/elasticsearch/common/io/streams/BytesStreamsTests.java
src/test/java/org/elasticsearch/common/io/streams/HandlesStreamsTests.java
src/test/java/org/elasticsearch/common/joda/DateMathParserTests.java
src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java
src/test/java/org/elasticsearch/common/lucene/search/MatchAllDocsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/MoreLikeThisQueryTests.java
src/test/java/org/elasticsearch/common/lucene/search/MultiPhrasePrefixQueryTests.java
src/test/java/org/elasticsearch/common/lucene/search/TermsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterLuceneTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
src/test/java/org/elasticsearch/common/lucene/store/InputStreamIndexInputTests.java
src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
src/test/java/org/elasticsearch/common/path/PathTrieTests.java
src/test/java/org/elasticsearch/common/regex/RegexTests.java
src/test/java/org/elasticsearch/common/settings/ImmutableSettingsTests.java
src/test/java/org/elasticsearch/common/settings/loader/JsonSettingsLoaderTests.java
src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeUnitTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
src/test/java/org/elasticsearch/common/unit/DistanceUnitTests.java
src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
src/test/java/org/elasticsearch/common/util/SlicedDoubleListTests.java
src/test/java/org/elasticsearch/common/util/SlicedLongListTests.java
src/test/java/org/elasticsearch/common/util/SlicedObjectListTests.java
src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java
src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
src/test/java/org/elasticsearch/common/xcontent/builder/BuilderRawFieldTests.java
src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
src/test/java/org/elasticsearch/common/xcontent/smile/JsonVsSmileTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentHelperTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentMapValuesTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/count/simple/SimpleCountTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/deps/jackson/JacksonLocationTests.java
src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
src/test/java/org/elasticsearch/deps/joda/TimeZoneRoundingTests.java
src/test/java/org/elasticsearch/deps/lucene/SimpleLuceneTests.java
src/test/java/org/elasticsearch/deps/lucene/VectorHighlighterTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPingTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/flt/FuzzyLikeThisActionTests.java
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
src/test/java/org/elasticsearch/index/IndexRequestBuilderTests.java
src/test/java/org/elasticsearch/index/VersionTypeTests.java
src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
src/test/java/org/elasticsearch/index/analysis/AnalysisModuleTests.java
src/test/java/org/elasticsearch/index/analysis/CJKFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/CharFilterTests.java
src/test/java/org/elasticsearch/index/analysis/CompoundAnalysisTests.java
src/test/java/org/elasticsearch/index/analysis/HunspellTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/KeepFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/LimitTokenCountFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/NGramTokenizerFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/NumericAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/PatternCaptureTokenFilterTests.java
src/test/java/org/elasticsearch/index/analysis/ShingleTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/StopAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
src/test/java/org/elasticsearch/index/analysis/WordDelimiterTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/commongrams/CommonGramsTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/cache/filter/FilterCacheTests.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/codec/CodecTests.java
src/test/java/org/elasticsearch/index/codec/postingformat/DefaultPostingsFormatTests.java
src/test/java/org/elasticsearch/index/deletionpolicy/SnapshotDeletionPolicyTests.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FieldDataFilterIntegrationTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinalsTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/SingleOrdinalsTests.java
src/test/java/org/elasticsearch/index/gateway/CommitPointsTests.java
src/test/java/org/elasticsearch/index/mapper/UidTests.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/index/mapper/analyzer/AnalyzerMapperTests.java
src/test/java/org/elasticsearch/index/mapper/boost/BoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
src/test/java/org/elasticsearch/index/mapper/camelcase/CamelCaseFieldNameTests.java
src/test/java/org/elasticsearch/index/mapper/completion/CompletionFieldMapperTests.java
src/test/java/org/elasticsearch/index/mapper/compound/CompoundTypesTests.java
src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamic/DynamicMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapperTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonAndGeohashMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/ip/SimpleIpMappingTests.java
src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
src/test/java/org/elasticsearch/index/mapper/object/NullValueObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/overridetype/OverrideTypeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
src/test/java/org/elasticsearch/index/mapper/path/PathMapperTests.java
src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/index/query/guice/IndexQueryParserModuleTests.java
src/test/java/org/elasticsearch/index/query/plugin/IndexQueryParserPlugin2Tests.java
src/test/java/org/elasticsearch/index/query/plugin/IndexQueryParserPluginTests.java
src/test/java/org/elasticsearch/index/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/index/search/geo/GeoHashUtilsTests.java
src/test/java/org/elasticsearch/index/search/geo/GeoUtilsTests.java
src/test/java/org/elasticsearch/index/similarity/SimilarityTests.java
src/test/java/org/elasticsearch/index/store/distributor/DistributorTests.java
src/test/java/org/elasticsearch/index/store/memory/SimpleByteBufferStoreTests.java
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/node/InternalNodeTests.java
src/test/java/org/elasticsearch/node/internal/InternalSettingsPerparerTests.java
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
src/test/java/org/elasticsearch/rest/util/RestUtilsTests.java
src/test/java/org/elasticsearch/script/NativeScriptTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/customscore/CustomScoreSearchTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginTests.java
src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceFacetTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationTests.java
src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/indicesboost/SimpleIndicesBoostSearchTests.java
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
src/test/java/org/elasticsearch/search/msearch/SimpleMultiSearchTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionPostingsFormatTest.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionTokenStreamTest.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/TermVectorUnitTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/test/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/ElasticsearchThreadFilter.java
src/test/java/org/elasticsearch/test/ElasticsearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchGeoAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchMatchers.java
src/test/java/org/elasticsearch/test/transport/AssertingLocalTransport.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/IndexFieldDataServiceTests.java
src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java
src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
src/test/java/org/elasticsearch/transport/netty/KeyedLockTests.java
src/test/java/org/elasticsearch/update/UpdateTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
src/test/java/org/elasticsearch/versioning/SimpleVersioningTests.java
comments:
s/ElasticSearch/Elasticsearch in src/test

time:
2013-10-13T18:33:22Z
class:
src/test/java/org/apache/lucene/analysis/miscellaneous/TruncateTokenFilterTests.java
src/test/java/org/elasticsearch/ElasticSearchExceptionTests.java
src/test/java/org/elasticsearch/VersionTests.java
src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
src/test/java/org/elasticsearch/action/percolate/MultiPercolatorRequestTests.java
src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
src/test/java/org/elasticsearch/action/suggest/SuggestActionTests.java
src/test/java/org/elasticsearch/cluster/metadata/MappingMetaDataParserTests.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java
src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeFiltersTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsTests.java
src/test/java/org/elasticsearch/cluster/settings/SettingsValidatorTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
src/test/java/org/elasticsearch/common/compress/CompressedStringTests.java
src/test/java/org/elasticsearch/common/geo/GeoJSONShapeParserTests.java
src/test/java/org/elasticsearch/common/geo/ShapeBuilderTests.java
src/test/java/org/elasticsearch/common/io/StreamsTests.java
src/test/java/org/elasticsearch/common/io/streams/BytesStreamsTests.java
src/test/java/org/elasticsearch/common/io/streams/HandlesStreamsTests.java
src/test/java/org/elasticsearch/common/joda/DateMathParserTests.java
src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java
src/test/java/org/elasticsearch/common/lucene/search/MatchAllDocsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/MoreLikeThisQueryTests.java
src/test/java/org/elasticsearch/common/lucene/search/MultiPhrasePrefixQueryTests.java
src/test/java/org/elasticsearch/common/lucene/search/TermsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterLuceneTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
src/test/java/org/elasticsearch/common/lucene/store/InputStreamIndexInputTests.java
src/test/java/org/elasticsearch/common/path/PathTrieTests.java
src/test/java/org/elasticsearch/common/settings/loader/JsonSettingsLoaderTests.java
src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeUnitTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
src/test/java/org/elasticsearch/common/unit/DistanceUnitTests.java
src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
src/test/java/org/elasticsearch/common/util/SlicedDoubleListTests.java
src/test/java/org/elasticsearch/common/util/SlicedLongListTests.java
src/test/java/org/elasticsearch/common/util/SlicedObjectListTests.java
src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
src/test/java/org/elasticsearch/common/xcontent/builder/BuilderRawFieldTests.java
src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
src/test/java/org/elasticsearch/common/xcontent/smile/JsonVsSmileTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentHelperTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentMapValuesTests.java
src/test/java/org/elasticsearch/deps/jackson/JacksonLocationTests.java
src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
src/test/java/org/elasticsearch/deps/joda/TimeZoneRoundingTests.java
src/test/java/org/elasticsearch/deps/lucene/SimpleLuceneTests.java
src/test/java/org/elasticsearch/deps/lucene/VectorHighlighterTests.java
src/test/java/org/elasticsearch/index/VersionTypeTests.java
src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
src/test/java/org/elasticsearch/index/analysis/AnalysisModuleTests.java
src/test/java/org/elasticsearch/index/analysis/CompoundAnalysisTests.java
src/test/java/org/elasticsearch/index/cache/filter/FilterCacheTests.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/codec/postingformat/DefaultPostingsFormatTests.java
src/test/java/org/elasticsearch/index/deletionpolicy/SnapshotDeletionPolicyTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/SingleOrdinalsTests.java
src/test/java/org/elasticsearch/index/gateway/CommitPointsTests.java
src/test/java/org/elasticsearch/index/mapper/UidTests.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/index/mapper/analyzer/AnalyzerMapperTests.java
src/test/java/org/elasticsearch/index/mapper/boost/BoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
src/test/java/org/elasticsearch/index/mapper/camelcase/CamelCaseFieldNameTests.java
src/test/java/org/elasticsearch/index/mapper/completion/CompletionFieldMapperTests.java
src/test/java/org/elasticsearch/index/mapper/compound/CompoundTypesTests.java
src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamic/DynamicMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapperTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonAndGeohashMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/ip/SimpleIpMappingTests.java
src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
src/test/java/org/elasticsearch/index/mapper/object/NullValueObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/overridetype/OverrideTypeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
src/test/java/org/elasticsearch/index/mapper/path/PathMapperTests.java
src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java
src/test/java/org/elasticsearch/index/query/guice/IndexQueryParserModuleTests.java
src/test/java/org/elasticsearch/index/query/plugin/IndexQueryParserPlugin2Tests.java
src/test/java/org/elasticsearch/index/query/plugin/IndexQueryParserPluginTests.java
src/test/java/org/elasticsearch/index/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/index/search/geo/GeoHashUtilsTests.java
src/test/java/org/elasticsearch/index/search/geo/GeoUtilsTests.java
src/test/java/org/elasticsearch/index/similarity/SimilarityTests.java
src/test/java/org/elasticsearch/index/store/distributor/DistributorTests.java
src/test/java/org/elasticsearch/index/store/memory/SimpleByteBufferStoreTests.java
src/test/java/org/elasticsearch/node/internal/InternalSettingsPerparerTests.java
src/test/java/org/elasticsearch/rest/util/RestUtilsTests.java
src/test/java/org/elasticsearch/script/NativeScriptTests.java
src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java
comments:
Subclass ElasticSearchTestCase across the board

All tests in the test package should subclass ESTestCase to benefit from
random time-zones and locale etc.

time:
2013-10-13T14:46:56Z
class:
comments:
[DOCS] Reorganised common API conventions

time:
2013-10-13T12:14:50Z
class:
comments:
[DOCS] Render common options on the same page

time:
2013-10-13T09:46:08Z
class:
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
comments:
test variations of multi field query string queries

time:
2013-10-12T23:27:37Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
comments:
Query String: Support multiple fields regexp queries
The query string query should apply regexp queries to execute on multiple fields as all the other queries.
closes #3901

time:
2013-10-12T19:51:37Z
class:
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
comments:
Set queue sizes by default on bulk/index thread pools
Now that we properly fixed the ability to set the queue size on the index / bulk thread pool, we should actually set them to a somehow reasonable value to protect from users potentially overflowing our system.

I suggest defaults to be 50 for bulk, and 200 for indexing.

Also, set the thread pool for get, which we should set (in a similar value to a "read" queue size we have today).
closes #3888

time:
2013-10-12T19:27:38Z
class:
src/main/java/org/elasticsearch/index/analysis/NamedAnalyzer.java
comments:
remove irrelevant comment now that we pass the reuse strategy

time:
2013-10-11T15:51:58Z
class:
src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java
comments:
Fix toXContent of GeoShapeQueryBuilder

A missing endObject() resulted in serialization errors.

Closes #3878

time:
2013-10-11T15:20:25Z
class:
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
comments:
Support date math for `origin` decay function parsing

The parser used the method that was supposed to be used for parsing on
the indexing side that never supported date math.

Closes #3892

time:
2013-10-11T13:03:38Z
class:
src/test/java/org/elasticsearch/junit/annotations/Network.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
Add integration test for PluginManager

We want to make sure that Plugin Manager still downloading plugins from internet.
New tests requires internet access (`@Network` annotation has been added).

By default, tests annotated with `@Network` are not launched.

If you need to run these tests, use `-Dtests.network=true` option.

Closes #3894.

time:
2013-10-11T12:40:50Z
class:
src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsMultiShardMultiNodeTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsMultiShardTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchTests.java
comments:
cleanup tests

time:
2013-10-11T10:29:44Z
class:
comments:
Added brackets to a do command.

time:
2013-10-11T10:29:17Z
class:
comments:
Normalizing the source filtering params of get_source with the rest of the API

time:
2013-10-11T10:25:21Z
class:
src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
comments:
Make the get source REST API source fetching query parameters consistent with other API

 The get source rest endpoint now uses _source_* parameters.
 Also it will now throw a validation error if you turn off source fetching.

Closes #3886

time:
2013-10-11T09:33:18Z
class:
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
comments:
Fix RobinEngineIntegrationTest - missed to explicitly create the index

time:
2013-10-11T07:24:52Z
class:
src/main/java/org/elasticsearch/common/joda/DateMathParser.java
src/test/java/org/elasticsearch/common/joda/DateMathParserTests.java
comments:
Support year units in date math expressions
According to http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-date-format.html, the date math expressions support M (month), w (week), h (hour), m (minute), and s (second) units. Why years are not supported? Please add support for year units.

Closes #3828.
Closes #3874.

time:
2013-10-11T07:01:39Z
class:
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
comments:
Use Locale.ROOT by default to parse dates instead of the system locale.

Closes #3852.

time:
2013-10-10T18:59:12Z
class:
comments:
[DOCS] Added more specific versions to the suggesters

time:
2013-10-10T17:01:32Z
class:
src/main/java/org/elasticsearch/cluster/settings/Validator.java
src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineIntegrationTest.java
comments:
Allow 'index.compound_on_flush' to be dyncamically changed

time:
2013-10-10T15:07:31Z
class:
src/main/java/org/elasticsearch/index/shard/IndexShardState.java
comments:
Serialization improvement

time:
2013-10-10T14:15:33Z
class:
src/main/java/org/elasticsearch/index/shard/IndexShardState.java
comments:
Fixed serialization error. POST_RECOVERY is now also serialized
I think you can just do `id < 0 && id >= ORDS.length` here?

Yes, we do this as long the the actual id values are in order inserted.

wait what? we use the index as the ord though otherwise this entire thing doesn't work no?


time:
2013-10-10T13:12:35Z
class:
src/main/java/org/elasticsearch/index/merge/policy/MergePolicyModule.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
comments:
Add Random MergePolicy via index templates in integration tests

This commit adds support for random merge policies set for every
index created in an AbstractIntegrationTest. It will either set
'logbyte', 'logdoc' or 'tiered' merge policy as well as a random
value for compound files.

time:
2013-10-10T12:02:33Z
class:
src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
comments:
In the delete by query also acquire a searcher when shard state is RECOVERING and POST_RECOVERING

time:
2013-10-10T11:30:08Z
class:
comments:
Add clear warnings that only the default codec, postings format and doc values format have backward compatibility warranties.

time:
2013-10-10T11:23:02Z
class:
comments:
Enable Random TransportClients in tests

time:
2013-10-10T09:23:08Z
class:
comments:
[DOCS] Moved "named filters/queries" up one level

time:
2013-10-10T09:20:13Z
class:
comments:
Fix small doc mistakes

time:
2013-10-10T09:16:39Z
class:
src/main/java/org/elasticsearch/action/index/IndexRequest.java
src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
src/test/java/org/elasticsearch/index/IndexRequestBuilderTests.java
comments:
Added IndexRequest#source(Object...) input validation

Added checks to IndexRequest#source(Object...) to ensure and even number
of parameters. This method otherwise throws an AIOOBException which is
confusing to users and doesn't report the root cause of the problem.

time:
2013-10-10T08:29:39Z
class:
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
comments:
moved AwaitsFix to class level

time:
2013-10-10T06:52:11Z
class:
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
comments:
Added an AwaitsFix to testDeleteAllOneIndex. Martijn is on it.

time:
2013-10-09T16:27:26Z
class:
src/main/java/org/elasticsearch/transport/TransportModule.java
src/main/java/org/elasticsearch/transport/local/LocalTransport.java
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticSearchAssertions.java
src/test/java/org/elasticsearch/test/transport/AssertingLocalTransport.java
src/test/java/org/elasticsearch/test/transport/AssertingLocalTransportModule.java
comments:
Add AssertingTransport that deploys basic BW-Compat serialization checks

time:
2013-10-09T16:26:26Z
class:
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
comments:
Fix GetIndexTemlatesRequest if serialized with includeAll and a old ES version

time:
2013-10-09T14:34:30Z
class:
src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java
src/main/java/org/elasticsearch/common/lucene/uid/Versions.java
src/main/java/org/elasticsearch/index/codec/CodecModule.java
src/main/java/org/elasticsearch/index/codec/CodecService.java
src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/AbstractDocValuesFormatProvider.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DefaultDocValuesFormatProvider.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DiskDocValuesFormatProvider.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DocValuesFormatProvider.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DocValuesFormatService.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/DocValuesFormats.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/MemoryDocValuesFormatProvider.java
src/main/java/org/elasticsearch/index/codec/docvaluesformat/PreBuiltDocValuesFormatProvider.java
src/main/java/org/elasticsearch/index/codec/postingsformat/PostingFormats.java
src/main/java/org/elasticsearch/index/codec/postingsformat/PostingsFormatService.java
src/main/java/org/elasticsearch/index/fielddata/AbstractAtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/FieldDataType.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
src/main/java/org/elasticsearch/index/fielddata/IndexNumericFieldData.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/ByteValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/ByteValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/FloatValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/IntValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/IntValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/ShortValuesComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/ShortValuesComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/BinaryDVIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DocValuesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/NumericDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/NumericDVIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVNumericIndexFieldData.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/Mapper.java
src/main/java/org/elasticsearch/index/mapper/MapperBuilders.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BinaryFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/FloatFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/IntegerFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/LongFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/ShortFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/TypeParsers.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/IndexFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/RoutingFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SizeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/VersionFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java
src/main/java/org/elasticsearch/index/merge/policy/IndexUpgraderMergePolicy.java
src/main/java/org/elasticsearch/index/percolator/QueriesLoaderCollector.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/test/java/org/elasticsearch/benchmark/fielddata/LongFieldDataBenchmark.java
src/test/java/org/elasticsearch/codecs/CodecTests.java
src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
src/test/java/org/elasticsearch/index/codec/CodecTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTest.java
src/test/java/org/elasticsearch/index/fielddata/LongFieldDataTests.java
src/test/java/org/elasticsearch/index/mapper/MapperTestUtils.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
src/test/java/org/elasticsearch/index/search/nested/ByteNestedSortingTests.java
src/test/java/org/elasticsearch/index/search/nested/IntegerNestedSortingTests.java
src/test/java/org/elasticsearch/index/search/nested/ShortNestedSortingTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/IndexFieldDataServiceTests.java
comments:
Doc values integration.

This commit allows for using Lucene doc values as a backend for field data,
moving the cost of building field data from the refresh operation to indexing.
In addition, Lucene doc values can be stored on disk (partially, or even
entirely), so that memory management is done at the operating system level
(file-system cache) instead of the JVM, avoiding long pauses during major
collections due to large heaps.

So far doc values are supported on numeric types and non-analyzed strings
(index:no or index:not_analyzed). Under the hood, it uses SORTED_SET doc values
which is the only type to support multi-valued fields. Since the field data API
set is a bit wider than the doc values API set, some operations are not
supported:
 - field data filtering: this will fail if doc values are enabled,
 - field data cache clearing, even for memory-based doc values formats,
 - getting the memory usage for a specific field,
 - knowing whether a field is actually multi-valued.

This commit also allows for configuring doc-values formats on a per-field basis
similarly to postings formats. In particular the doc values format of the
_version field can be configured through its own field mapper (it used to be
handled in UidFieldMapper previously).

Closes #3806

time:
2013-10-09T11:11:00Z
class:
comments:
Get all templates not available before 0.90.3

time:
2013-10-09T10:16:15Z
class:
comments:
Fix broken links in example configuration file

time:
2013-10-09T09:35:31Z
class:
src/main/java/org/elasticsearch/index/query/QueryBuilders.java
comments:
Added QueryBuilders#fuzzyQuery method that accepts value parameter as an object

Fixed javadocs

Closes #3616

time:
2013-10-09T08:47:59Z
class:
comments:
Add monitoring link for es2graphite.

time:
2013-10-09T08:20:23Z
class:
src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java
src/main/java/org/elasticsearch/common/lucene/docset/MatchDocIdSet.java
src/main/java/org/elasticsearch/common/lucene/search/XFilteredQuery.java
src/main/java/org/elasticsearch/common/recycler/RecyclerUtils.java
src/main/java/org/elasticsearch/index/cache/id/IdCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java
src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryParser.java
src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/ConstantScorer.java
src/main/java/org/elasticsearch/index/search/child/CustomQueryWrappingFilter.java
src/main/java/org/elasticsearch/index/search/child/DeleteByQueryWrappingFilter.java
src/main/java/org/elasticsearch/index/search/child/HasChildFilter.java
src/main/java/org/elasticsearch/index/search/child/HasParentFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
src/main/java/org/elasticsearch/index/search/nested/IncludeNestedDocsQuery.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/main/java/org/elasticsearch/search/query/QueryPhase.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Support the `has_child`, `has_parent`, `top_children` queries (and filters) in other apis than just search api. The queries are also now supported in count, explain (return dummy explination) and delete by query apis.
Migrate SearchContext.Rewrite to Releasable. All the parent child queries are now implemented as Lucene queries and the state is kept in the Weight.
Completely disable caching for `has_child` and `has_parent` filters, this has never worked and it also can also never work. The matching docIds are cached per segment while the collection of parent ids is top level.

Closes #3822

time:
2013-10-09T08:04:37Z
class:
src/main/java/org/elasticsearch/river/cluster/RiverNodeHelper.java
comments:
Fix comment grammar

time:
2013-10-09T07:56:49Z
class:
comments:
Remove extra 'processors' anchor in threadpool docs

time:
2013-10-08T21:06:55Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/fielddata/FieldDataType.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/indices/warmer/IndicesWarmer.java
src/main/java/org/elasticsearch/indices/warmer/InternalIndicesWarmer.java
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
comments:
Improved warm-up of new segments.

* Merged segments are now warmed-up at the end of the merge operation instead
  of _refresh, so that _refresh doesn't pay the price for the warm-up of merged
  segments, which is often higher than flushed segments because of their size.
* Even when no _warmer is registered, some basic warm-up of the segments is
  performed: norms, doc values (_version). This should help a bit people who
  forget to register warmers.
* Eager loading support for the parent id cache and field data: when one
  can't predict what terms will be present in the index, it is tempting to use
  a match_all query in a warmer, but in that case, query execution might not be
  much faster than field data loading so having a warmer that only loads field
  data without running a query can be useful.

Closes #3819

time:
2013-10-08T20:51:13Z
class:
comments:
Merge pull request #37 from ryansb/readmeDeprecateS3Gateway

Add note that the S3 Gateway will be deprecated

time:
2013-10-08T16:18:20Z
class:
comments:
updated source filtering tests and spec

Fixed id tests to be strings.
Changed the _source_* param of get_source as they have changed in core.

time:
2013-10-08T16:16:27Z
class:
comments:
The name parameter of indices.get_template is not required.

time:
2013-10-08T16:12:05Z
class:
comments:
add note that the S3 Gateway will be deprecated

time:
2013-10-08T14:19:10Z
class:
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
plugin -remove deletes bin directory
Adding test for #3847.

time:
2013-10-08T13:52:59Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
plugin -remove deletes bin directory
I tried to install a plugin directly from disk, but used the wrong arguments. Totally my fault for not RTFM properly.

However, by following the instructions printed out by `bin/plugin`, I ended up deleting my $ES/bin directory.

```
$ pwd
/tmp/elasticsearch-0.90.5
$ ls
LICENSE.txt    NOTICE.txt     README.textile bin            config         lib
$ bin/plugin --install file:///tmp/foo.zip
-> Installing file:///tmp/foo.zip...
Failed to install file:///tmp/foo.zip, reason: plugin directory /tmp/elasticsearch-0.90.5/plugins already exists. To update the plugin, uninstall it first using -remove file:///tmp/foo.zip command
$ bin/plugin -remove file:///tmp/foo.zip
-> Removing file:///tmp/foo.zip
Removed file:///tmp/foo.zip
$ ls
LICENSE.txt    NOTICE.txt     README.textile config         lib
```

I reproduced the problem in 0.90.5 and the latest master.
Closes #3847.

time:
2013-10-08T13:44:03Z
class:
src/main/java/org/apache/lucene/queries/ExtendedCommonTermsQuery.java
src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
src/main/java/org/apache/lucene/util/packed/XAbstractAppendingLongBuffer.java
src/main/java/org/apache/lucene/util/packed/XAppendingPackedLongBuffer.java
src/main/java/org/apache/lucene/util/packed/XMonotonicAppendingLongBuffer.java
src/main/java/org/elasticsearch/Version.java
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/action/termvector/TermVectorWriter.java
src/main/java/org/elasticsearch/common/lucene/Lucene.java
src/main/java/org/elasticsearch/common/lucene/docset/DocIdSets.java
src/main/java/org/elasticsearch/common/lucene/search/TermFilter.java
src/main/java/org/elasticsearch/common/lucene/uid/Versions.java
src/main/java/org/elasticsearch/index/analysis/NamedAnalyzer.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java
src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormat.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinals.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/TypeFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/main/java/org/elasticsearch/index/merge/policy/IndexUpgraderMergePolicy.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/query/TermFilterParser.java
src/main/java/org/elasticsearch/index/query/TermsFilterParser.java
src/main/java/org/elasticsearch/index/query/TypeFilterParser.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/HasChildFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentIdsFilter.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/search/dfs/DfsPhase.java
src/main/java/org/elasticsearch/search/suggest/completion/Completion090PostingsFormat.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionTokenStream.java
src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java
src/main/java/org/elasticsearch/search/suggest/phrase/WordScorer.java
src/test/java/org/elasticsearch/common/lucene/search/TermsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterLuceneTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
src/test/java/org/elasticsearch/index/cache/filter/FilterCacheTests.java
src/test/java/org/elasticsearch/index/codec/postingformat/DefaultPostingsFormatTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractStringFieldDataTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/index/search/nested/AbstractNumberNestedSortingTests.java
src/test/java/org/elasticsearch/index/search/nested/DoubleNestedSortingTests.java
src/test/java/org/elasticsearch/index/search/nested/FloatNestedSortingTests.java
src/test/java/org/elasticsearch/index/search/nested/NestedSortingTests.java
comments:
Update Lucene to version 4.5.0.

time:
2013-10-08T07:51:33Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/MergeContext.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/multifield/MultiFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
comments:
Add FieldMappers before adding Mappers (used for parsing) and while holding the relevant's ObjectMapper mutex

Adding the mappers first could cause the wrong FieldMappers to be used during object parsing

Also:
Removed MergeContext.newFieldMappers, MergeContext.newObjectMappers and relatives as they are not used anymore.
Similarly removed MergeContext.addFieldDataChange & fieldMapperChanges as they were not used.

Closes #3844

time:
2013-10-07T15:25:18Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
src/main/java/org/elasticsearch/action/count/CountRequest.java
src/main/java/org/elasticsearch/action/delete/DeleteRequest.java
src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/get/GetRequest.java
src/main/java/org/elasticsearch/action/index/IndexRequest.java
src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java
src/main/java/org/elasticsearch/common/Required.java
comments:
Remove @Required annotation

The @Required annotation is used for documentation purposes only anyway.

time:
2013-10-07T15:02:24Z
class:
src/main/java/org/elasticsearch/action/support/single/shard/TransportShardSingleOperationAction.java
src/main/java/org/elasticsearch/river/RiversService.java
src/main/java/org/elasticsearch/river/routing/RiversRouter.java
comments:
Improve exception handling for river startup

Due to a change in 0.90 some exceptions may show up when starting a river,
even though this is not a problem as the shard has not been initialized
yet and a retry is scheduled.

time:
2013-10-07T13:08:52Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Rejecting invalid fields inside of completion field

Only valid fields (input, output, weight and payload) are now allowed inside a completion field.
This makes sure that typos like "inputs" are caught on indexing.

time:
2013-10-07T12:42:49Z
class:
comments:
[DOCS] Added pages explaining lucene query parser syntax and regular expression syntax

time:
2013-10-07T09:12:47Z
class:
src/main/java/org/elasticsearch/index/query/AndFilterParser.java
src/main/java/org/elasticsearch/index/query/BoolFilterParser.java
src/main/java/org/elasticsearch/index/query/ExistsFilterParser.java
src/main/java/org/elasticsearch/index/query/FilterParser.java
src/main/java/org/elasticsearch/index/query/FilteredQueryParser.java
src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java
src/main/java/org/elasticsearch/index/query/MissingFilterParser.java
src/main/java/org/elasticsearch/index/query/ParsedFilter.java
src/main/java/org/elasticsearch/indices/cache/filter/terms/IndicesTermsFilterCache.java
src/main/java/org/elasticsearch/search/facet/filter/FilterFacetParser.java
src/main/java/org/elasticsearch/search/query/FilterBinaryParseElement.java
src/main/java/org/elasticsearch/search/query/FilterParseElement.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
comments:
Better logic ignoring filters when parsing
When parsing a filter, we effectively have a case where we need to ignore a filter. For example, when an "and" filter has no elements. Ignoring a filter is different compared to matching on all or matching on none, because an and filter with no elements should simply be ignored in the context of a bool filter for example, regardless if its used within a must or a must_not filter.

We should be consistent in our codebase when handling these use case. See also #3809

closes #3838

time:
2013-10-07T07:56:49Z
class:
src/main/java/org/elasticsearch/common/lucene/search/Queries.java
comments:
use the already used constant for match no filter

time:
2013-10-06T19:18:43Z
class:
comments:
Changed documentation to use getter notation

Updated some java documentation to reflect the use of getters instead of calling methods based on field names.

Relates to #2657

time:
2013-10-06T07:20:05Z
class:
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
comments:
Disable ConcurrentDynamicTemplateTests for now

time:
2013-10-05T15:41:06Z
class:
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
comments:
Add simple test for delete by field query

time:
2013-10-05T15:28:30Z
class:
src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
comments:
fix typo - s/Deprected/Deprecated

time:
2013-10-05T15:24:34Z
class:
src/main/java/org/elasticsearch/index/analysis/StopTokenFilterFactory.java
src/test/java/org/elasticsearch/index/analysis/StopTokenFilterTests.java
comments:
Warn users with IAE if pos_inc is disabled in 'stop' filter

time:
2013-10-05T15:18:15Z
class:
comments:
[DOCS] Changed capitalization of operator in rescore query

time:
2013-10-05T15:10:30Z
class:
comments:
[DOCS] Fixed typo

time:
2013-10-05T15:06:13Z
class:
comments:
[DOCS] Removed enable_position_increments in stop filter

time:
2013-10-05T14:31:52Z
class:
comments:
[DOCS] Updated ICU-Plugin docs from the repo README

time:
2013-10-05T14:29:40Z
class:
comments:
Update README.md

time:
2013-10-04T12:08:37Z
class:
comments:
Changed nested filter example to use an inner bool filter instead of a bool query, to demonstrate the usage of a filter rather than a query.

time:
2013-10-03T21:57:11Z
class:
src/main/java/org/elasticsearch/common/io/stream/HandlesStreamInput.java
comments:
Also clear handlesText

time:
2013-10-03T21:10:57Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/main/java/org/apache/lucene/queryparser/classic/QueryParserSettings.java
src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
src/main/java/org/elasticsearch/action/deletebyquery/IndexDeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/deletebyquery/ShardDeleteByQueryRequest.java
src/main/java/org/elasticsearch/action/get/MultiGetShardRequest.java
src/main/java/org/elasticsearch/action/get/MultiGetShardResponse.java
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsShardRequest.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsShardResponse.java
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/cache/recycler/CacheRecycler.java
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/EvenShardsCountAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
src/main/java/org/elasticsearch/common/Strings.java
src/main/java/org/elasticsearch/common/collect/XMaps.java
src/main/java/org/elasticsearch/common/hppc/HppcMaps.java
src/main/java/org/elasticsearch/common/io/stream/HandlesStreamInput.java
src/main/java/org/elasticsearch/common/io/stream/HandlesStreamOutput.java
src/main/java/org/elasticsearch/common/lucene/search/MultiPhrasePrefixQuery.java
src/main/java/org/elasticsearch/common/transport/PortsRange.java
src/main/java/org/elasticsearch/common/trove/ExtTDoubleObjectHashMap.java
src/main/java/org/elasticsearch/common/trove/ExtTHashMap.java
src/main/java/org/elasticsearch/common/trove/ExtTIntArrayList.java
src/main/java/org/elasticsearch/common/trove/ExtTLongObjectHashMap.java
src/main/java/org/elasticsearch/common/trove/ExtTObjectIntHasMap.java
src/main/java/org/elasticsearch/common/trove/StringIdentityHashingStrategy.java
src/main/java/org/elasticsearch/gateway/local/LocalGateway.java
src/main/java/org/elasticsearch/gateway/local/LocalGatewayAllocator.java
src/main/java/org/elasticsearch/index/analysis/NumericDoubleAnalyzer.java
src/main/java/org/elasticsearch/index/analysis/NumericFloatAnalyzer.java
src/main/java/org/elasticsearch/index/analysis/NumericIntegerAnalyzer.java
src/main/java/org/elasticsearch/index/analysis/NumericLongAnalyzer.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdReaderTypeCache.java
src/main/java/org/elasticsearch/index/fielddata/FieldDataStats.java
src/main/java/org/elasticsearch/index/fielddata/ShardFieldData.java
src/main/java/org/elasticsearch/index/query/CustomFiltersScoreQueryBuilder.java
src/main/java/org/elasticsearch/index/query/CustomFiltersScoreQueryParser.java
src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/HasChildFilter.java
src/main/java/org/elasticsearch/index/search/child/HasParentFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentIdsFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
src/main/java/org/elasticsearch/indices/cache/filter/IndicesFilterCache.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
src/main/java/org/elasticsearch/search/dfs/AggregatedDfs.java
src/main/java/org/elasticsearch/search/dfs/DfsPhase.java
src/main/java/org/elasticsearch/search/dfs/DfsSearchResult.java
src/main/java/org/elasticsearch/search/facet/datehistogram/CountDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/datehistogram/InternalCountDateHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/datehistogram/InternalFullDateHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/datehistogram/ValueDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/datehistogram/ValueScriptDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/CountHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/FullHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/InternalCountHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/histogram/InternalFullHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/histogram/ScriptHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/ValueHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/ValueScriptHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/InternalDoubleTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/TermsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/longs/InternalLongTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/longs/TermsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/HashedAggregator.java
src/main/java/org/elasticsearch/search/facet/terms/strings/InternalStringTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/strings/ScriptTermsStringFieldFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/doubles/InternalTermsStatsDoubleFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/doubles/TermsStatsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/longs/InternalTermsStatsLongFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/longs/TermsStatsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/InternalTermsStatsStringFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/TermsStatsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/fetch/FetchSearchRequest.java
src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionStats.java
src/test/java/org/elasticsearch/benchmark/hppc/StringMapAdjustOrPutBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchBenchmark.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/index/fielddata/LongFieldDataTests.java
src/test/java/org/elasticsearch/recovery/RelocationTests.java
comments:
Migrate from Trove to Hppc.

time:
2013-10-03T14:42:09Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/EsAbortPolicy.java
src/main/java/org/elasticsearch/common/util/concurrent/SizeBlockingQueue.java
comments:
improve thread pool rejection message

time:
2013-10-03T09:40:29Z
class:
comments:
[DOCS] Fixed a typo in indices.get_templates

time:
2013-10-02T20:32:32Z
class:
src/main/java/org/elasticsearch/search/facet/terms/TermsFacetBuilder.java
src/main/java/org/elasticsearch/search/facet/terms/TermsFacetParser.java
src/main/java/org/elasticsearch/search/facet/terms/index/IndexNameFacetExecutor.java
comments:
added javadocs for builder and cleaned up support for `shard_size` on terms & terms_stats facets

time:
2013-10-02T20:02:00Z
class:
src/main/java/org/elasticsearch/search/facet/terms/TermsFacetBuilder.java
src/main/java/org/elasticsearch/search/facet/terms/TermsFacetParser.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/InternalDoubleTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/TermsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/index/IndexNameFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/longs/InternalLongTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/longs/TermsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/FieldsTermsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/HashedAggregator.java
src/main/java/org/elasticsearch/search/facet/terms/strings/InternalStringTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/strings/ScriptTermsStringFieldFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringOrdinalsFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/TermsStatsFacetBuilder.java
src/main/java/org/elasticsearch/search/facet/termsstats/TermsStatsFacetParser.java
src/main/java/org/elasticsearch/search/facet/termsstats/doubles/InternalTermsStatsDoubleFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/doubles/TermsStatsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/longs/InternalTermsStatsLongFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/longs/TermsStatsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/InternalTermsStatsStringFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/TermsStatsStringFacetExecutor.java
src/test/java/org/elasticsearch/search/facet/terms/ShardSizeTermsFacetTests.java
src/test/java/org/elasticsearch/search/facet/termsstats/ShardSizeTermsStatsFacetTests.java
comments:
introduced support for "shard_size" for terms & terms_stats facets. The "shard_size" is the number of term entries each shard will send back to the coordinating node. "shard_size" > "size" will increase the accuracy (both in terms of the counts associated with each term and the terms that will actually be returned the user) - of course, the higher "shard_size" is, the more expensive the processing becomes as bigger queues are maintained on a shard level and larger lists are streamed back from the shards.

closes #3821

time:
2013-10-02T19:46:24Z
class:
src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
src/main/java/org/elasticsearch/search/highlight/HighlighterContext.java
src/main/java/org/elasticsearch/search/highlight/HighlighterParseElement.java
src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java
src/main/java/org/elasticsearch/search/highlight/SearchContextHighlight.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/main/java/org/elasticsearch/search/rescore/QueryRescorer.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
comments:
Support specifing score query on highlight.

This is useful if you want to highlight terms not in the search query or
you want sort highlighted snippets based on another query.

Closes #3630

time:
2013-10-02T18:20:09Z
class:
src/main/java/org/elasticsearch/index/engine/Engine.java
comments:
Return source string instead of calling an infinite recursive loop

time:
2013-10-02T09:15:18Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsResponse.java
src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
src/main/java/org/elasticsearch/indices/InternalIndicesService.java
src/main/java/org/elasticsearch/monitor/os/OsStats.java
comments:
Introduced shardStats on InternalIndicesService to expose shard level statistics.
Added a load_average_format=array|hash param to OsStats to allow serializing load averages into a hash (with keys 1m,5m, 15m).
Added node_info_format to NodeStats, allowing to suppress node info output

time:
2013-10-02T08:36:37Z
class:
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchAndIndexingBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/child/ChildSearchShortCircuitBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/facet/HistogramFacetSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/facet/QueryFilterFacetSearchBenchmark.java
src/test/java/org/elasticsearch/benchmark/search/facet/TermsFacetSearchBenchmark.java
comments:
Use simple class name as cluster name

time:
2013-10-01T17:28:46Z
class:
comments:
[API] cluster.health wait_for_nodes is a string, not a number

time:
2013-10-01T16:28:35Z
class:
comments:
Uniquify more anchor links to fix asciidoc

time:
2013-10-01T15:32:20Z
class:
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
comments:
Make testcase more reproducible

time:
2013-10-01T15:03:31Z
class:
src/main/java/org/elasticsearch/index/mapper/object/DynamicTemplate.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
comments:
Allow dynamic templates with match_mapping_type but no path_match or match.

As long as we have some selector we're good.

Closes #3814

time:
2013-10-01T14:33:06Z
class:
src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java
src/main/java/org/elasticsearch/action/termvector/TermVectorWriter.java
comments:
fix term vector api for missing payloads

time:
2013-10-01T13:58:28Z
class:
src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java
comments:
s/Exception/Throwable

time:
2013-10-01T13:58:28Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
comments:
Add more debug info to testcase

time:
2013-10-01T13:58:28Z
class:
src/test/java/org/elasticsearch/common/io/streams/BytesStreamsTests.java
comments:
StreamTests only work on 64Bit JVMs

32bit JVMs have different buffer grow behavior. We simply ingore this
since it's a lucene feature that is tested in the upstream project.

time:
2013-10-01T13:09:56Z
class:
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticSearchAssertions.java
comments:
Improved index template tests, among other to test for getting all templates by not specifying a name.

time:
2013-10-01T12:20:02Z
class:
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
comments:
Calling `GET _template` gave a 500 error back.

Also:
We always return a valid json back
If there are no templates define we return 200 OK ( as opposed to a request for a specific template id which returns 404)

Closes #3812

time:
2013-09-30T21:32:00Z
class:
comments:
Uniquify anchor links to fix asciidoc/docbook generation

time:
2013-09-30T19:13:16Z
class:
comments:
Add more anchor links to documentation

Related to #3679

time:
2013-09-30T18:28:40Z
class:
src/main/java/org/elasticsearch/index/analysis/PatternCaptureGroupTokenFilterFactory.java
src/test/java/org/elasticsearch/index/analysis/PatternCaptureTokenFilterTests.java
comments:
Throw ESIA if required field 'patterns' is not present in filter config.

If 'pattern_capture' tokenfilter is create / mapped without a 'patterns'
settings we now throw an exception since this is a misconfiguration and
likely due to the similar settings on related token filters.

Closes #3808

time:
2013-09-30T14:07:09Z
class:
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/LocalGatewayIndexStateTests.java
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionTests.java
src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/test/AbstractNodesTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Cut over remaining tests to 'AbstractIntegrationTest'

time:
2013-09-30T14:03:37Z
class:
src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
comments:
Catch EsRejectedExecException on cluster info reschedule

time:
2013-09-30T11:39:20Z
class:
src/main/java/org/elasticsearch/indices/InternalIndicesLifecycle.java
comments:
catch indices lifecycle failures and log them
make sure we catch index/shard lifecycle failures, and properly log them

time:
2013-09-30T09:10:54Z
class:
src/main/java/org/elasticsearch/discovery/zen/ping/ZenPing.java
src/main/java/org/elasticsearch/discovery/zen/ping/ZenPingService.java
src/main/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPing.java
comments:
Catch RejectedExceutionException in ZenPing et al.

If nodes are shutting down we close thread pools and throw
'EsRejectedExcutionException'. This commit handles these exceptions
gracefully if throw during Ping execution.

time:
2013-09-30T08:54:30Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsResponse.java
comments:
serialize timestamp on the response

time:
2013-09-30T08:39:14Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
comments:
additional places not to do field conversions

time:
2013-09-28T20:16:34Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/store/mock/MockDirectoryHelper.java
src/test/java/org/elasticsearch/test/store/mock/MockFSDirectoryService.java
src/test/java/org/elasticsearch/test/store/mock/MockFSIndexStore.java
src/test/java/org/elasticsearch/test/store/mock/MockFSIndexStoreModule.java
src/test/java/org/elasticsearch/test/store/mock/MockRamDirecorySerivce.java
src/test/java/org/elasticsearch/test/store/mock/MockRamIndexStore.java
src/test/java/org/elasticsearch/test/store/mock/MockRamIndexStoreModule.java
comments:
Move Mock Store impls to test package

time:
2013-09-28T20:05:22Z
class:
src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java
comments:
Expose several options from MockDirWrapper via index settings

Index settings can now override default behavior for 'double write'
and 'no delete open files' on MockDirectoryWrapper if tests use these
options in a legit. way. ie. in a restore situation a double write
is a legit operation.

time:
2013-09-28T18:36:15Z
class:
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
comments:
cleanup testcase

time:
2013-09-27T15:08:34Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java
src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsResponse.java
comments:
added a ToXContent implementation to NodeStats

time:
2013-09-27T14:45:23Z
class:
src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/search/sort/SortParseElement.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Returning useful exception when sorting on a completion field

Closes #3747

time:
2013-09-27T14:09:36Z
class:
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/test/NodeSettingsSource.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
introduced NodeSettingsSource in the test infrastructure os tests with scopes TEST & SUITE without an explicit numNodes definitions will fall back on the nodeSettings(int) callback

time:
2013-09-27T12:42:12Z
class:
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeMappingRefreshAction.java
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
comments:
Add indexUUID to mapping-updated and mapping-refresh events and make sure they are applied to an index with same UUID.

This can go wrong if indices with the same name are repeatably created and deleted.

UUIDs can not be null anymore. If UUID is not available `_na_` will be used as a value.

Also - some minor clean up in ShardStateAction where shard started events could be added twice to the to-be-applied list where the second instance will be ignored.

Closes #3783

time:
2013-09-27T12:39:07Z
class:
comments:
Print Java Version during Validate

time:
2013-09-27T08:10:08Z
class:
src/main/java/org/elasticsearch/monitor/jvm/JvmUtils.java
comments:
remove unused class

time:
2013-09-26T21:35:34Z
class:
comments:
remove unused setting

time:
2013-09-26T20:42:32Z
class:
comments:
service.bat properly configures mem settings

service.bat converts X(m(s|x)|ss) to MB/KB and uses dedicated arguments to the underlying JVM DLL
empty/unset JAVA_OPTS no longer trips commons daemon
fixes #3785

time:
2013-09-26T16:52:23Z
class:
comments:
Reverse course

See comment [here](https://github.com/elasticsearch/elasticsearch-rest-api-spec/commit/2dd7f4f65282288a0e21933f930a40eb7cbec2fd#commitcomment-4189612)

time:
2013-09-26T12:37:12Z
class:
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
comments:
Send the update-mapping events before actually indexing into the shard, because the latter may generate exceptions (like when the shard is not yet ready to accept new docs).

Also improved the SimpleDeleteMappingTest, as it make take a while until the update-mapping event is processed.

Closes #3782

time:
2013-09-26T12:30:25Z
class:
comments:
Documentation: Removed service wrapper, added rpm/deb package information

time:
2013-09-26T12:04:59Z
class:
src/main/java/org/elasticsearch/cluster/action/index/NodeAliasesUpdatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeIndexCreatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeIndexDeletedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeIndicesStateUpdatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeMappingCreatedAction.java
src/main/java/org/elasticsearch/cluster/action/index/NodeMappingRefreshAction.java
src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java
src/main/java/org/elasticsearch/gateway/none/NoneGateway.java
src/main/java/org/elasticsearch/gateway/shared/SharedStorageGateway.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
use the event cluster state to send events back to master
instead of relying on the current cluster state from the cluster service, make sure to rely on the cluster state we get from the change event, this will allow us to move processing of the cluster event around potentially to before the local cluster state has been updated

time:
2013-09-26T10:24:07Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
do not silently fail on plugin install with source files

time:
2013-09-26T03:03:28Z
class:
comments:
Added path to exist, supporting optional "type" part

Since the type is an optional part, there needs to be a path that can be used without it.

time:
2013-09-25T21:56:38Z
class:
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
comments:
Add more debug info to SimpleDeleteMappingTests

time:
2013-09-25T17:29:16Z
class:
comments:
[TEST] In the open indices test, wait for yellow after opening

time:
2013-09-25T17:26:05Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
src/main/java/org/elasticsearch/index/service/IndexService.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
comments:
Introduced an index UUID which is added to the index's settings upon creation. Used that UUID to verify old and delayed shard started/failed events are not applied to newer indexes with the same name.

Also, exceptions while processing batched events do not stop the rest of the events from being processed.

Closes #3778

time:
2013-09-25T16:59:12Z
class:
comments:
[TEST] single alias APIs not supported before 0.90.1

time:
2013-09-25T16:59:12Z
class:
comments:
[TEST] get_source not supported before 0.90.1

time:
2013-09-25T16:02:13Z
class:
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
fix to compile under 1.6

time:
2013-09-25T12:18:34Z
class:
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
Improve EngineSearcher tracking

Currently we fail tests is any searcher reference is pending. Yet,
on a slow machine the freeContext calls that are async could still be
in flight so if there are pending searchers we wait for a bit to make
sure we don't fail if a freeContext call is in flight.
The MockEngine now also contains the stack trace of the first close call
if a searcher is closed twice.

time:
2013-09-25T12:08:18Z
class:
comments:
[API] formatting issues

time:
2013-09-25T11:54:08Z
class:
comments:
[TEST] Fixed the delete_template test so that it works for 0.90.*

time:
2013-09-25T11:39:58Z
class:
comments:
[TEST] The get_mapping change in format is in master, not 0.90.*

time:
2013-09-25T11:38:45Z
class:
src/main/java/org/elasticsearch/index/analysis/NamedAnalyzer.java
comments:
add assert to make sure we fix NamedAnalyzer when upgrading to Lucene 4.5

time:
2013-09-25T07:36:12Z
class:
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
comments:
Added test for DateHistogram#factor

DateHistogramFacets can be used on fields that store dates in a numeric
(long) field using different resolutions like seconds instead of
milliseconds. This commit adds a test that checks if the factor is
applied correctly to scale it up to milliseconds.

time:
2013-09-24T15:50:24Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
add awaitfix on search while relocation with 0 replicas

time:
2013-09-24T13:55:48Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
Acquire ReadLock before reading SegmentInfos in RobinEngine

Before reading segmentinfos we should aquire the read lock to prevent
reading the segment infos on an already closed robin engine.

time:
2013-09-24T13:52:13Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
add origin to failure message

time:
2013-09-24T13:38:12Z
class:
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java
src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java
src/main/java/org/elasticsearch/index/gateway/none/NoneIndexShardGateway.java
src/main/java/org/elasticsearch/index/shard/IndexShardState.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
comments:
Introduce internal post recovery state
Introduce a new internal, index shard level, post recovery state, where the shard moves to when its done with recovery. The shard will now move to started only once the cluster state with its respective cluster state level state is started.

This change allow to have more fine grained control over when to allow reads on a shard, resolving potential refresh temporal visibility aspects while indexing and issuign a refresh. By only allowing reads on started shards, and making sure we refresh right before we move to started

time:
2013-09-24T12:32:41Z
class:
src/test/java/org/elasticsearch/gateway/none/RecoverAfterNodesTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Moved RecoverAfterNodesTests to inherit from AbstractIntegrationTest

time:
2013-09-24T11:10:41Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
comments:
improve search while relocation
- add verification phase at the end of the test
- add explicit test for 0 replicas and 1 replica

time:
2013-09-24T11:01:45Z
class:
src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
comments:
Update Operation might hang (rarely) when retrying on invalid shard state
The retry logic when failing does not reset the operation started flag...
closes #3769

time:
2013-09-24T07:27:39Z
class:
comments:
Merge pull request #3767 from gtt116/master

Remove a comma in doc to make example a valid json.

time:
2013-09-24T07:23:23Z
class:
comments:
Remove a comma in doc to make example a valid json.

This will help reader to do a hurry up copy-paste test.

time:
2013-09-23T22:04:54Z
class:
src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/NoMasterNodeTests.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
src/test/java/org/elasticsearch/indexing/IndexActionTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/search/compress/SearchSourceCompressTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/versioning/SimpleVersioningTests.java
comments:
Migrate createIndex().

time:
2013-09-23T20:17:21Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Reenable MockEngineModul as default on TestCluster

time:
2013-09-23T20:09:35Z
class:
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
comments:
One too many...

time:
2013-09-23T20:03:06Z
class:
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionTests.java
src/test/java/org/elasticsearch/indices/cache/CacheTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/search/customscore/CustomScoreSearchTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/timestamp/SimpleTimestampTests.java
src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Remove redundant wipeIndices().
ouch that one is important!!!

Derp. Back...


time:
2013-09-23T16:18:36Z
class:
src/test/java/org/elasticsearch/cluster/SimpleDataNodesTests.java
src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionTests.java
src/test/java/org/elasticsearch/node/InternalNodeTests.java
src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoTests.java
src/test/java/org/elasticsearch/recovery/RelocationTests.java
comments:
cut over more tests to AbstractIntegrationTest

time:
2013-09-23T16:06:33Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksResponse.java
comments:
Fix misspelling.

time:
2013-09-23T15:24:31Z
class:
comments:
add docs on new service.bat facility

time:
2013-09-23T13:53:42Z
class:
src/test/java/org/elasticsearch/indices/leaks/IndicesLeaksTests.java
src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
comments:
cut over more tests to AbstractIntegrationTest

time:
2013-09-23T11:53:45Z
class:
comments:
Percolation results have changed in master

time:
2013-09-23T11:53:32Z
class:
comments:
The get_mapping tests were the wrong way around

time:
2013-09-23T11:23:25Z
class:
comments:
[API] Added _source,_source_include,_source_exclude to
* explain
* get
* mget
* search
* get_source
Did we consider having two separate params?
- one to include/exclude the source (`boolean`)
- one to list the fields to include (`list`)

This is kind of hard to translate for typed clients.

time:
2013-09-22T22:19:33Z
class:
src/main/java/org/elasticsearch/action/support/single/shard/TransportShardSingleOperationAction.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Cut RecoveryPercolatorTests over to AbstractIntegrationTest
Added node restart capabilities to TestCluster
Trigger retry mechanism (onFailure method) instead of invoking transport service with null DiscoveryNode when no DiscoveryNode can be found for a ShardRouting.

time:
2013-09-22T21:56:30Z
class:
src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
add internal origin to delete by query

time:
2013-09-22T20:45:39Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
comments:
disable 'SearchWhileCreatingIndexTests' for now - fix is already in the pipeline

time:
2013-09-22T20:25:30Z
class:
src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java
src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
Added support for dynamic transport client ratio in tests.

Currently tests only run with node clients but eventually we want to
run all tests with randomly choosen node / transport clients. To enable
this during development and on test servers as a transition phase this
commit adds the ability to allow a fraction of the clients used in
tests to be transport clients. By default this is still disabled.
To enable transport clients in tests pass '-Dtests.client.ratio=[0..1]'
where '1.0' will force transport clients and '0.0' completely disables
them. If an empty string is passed the ratio is chosen at random for
each test.

time:
2013-09-22T18:24:05Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
src/main/java/org/elasticsearch/action/delete/index/TransportShardDeleteAction.java
src/main/java/org/elasticsearch/action/get/TransportGetAction.java
src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
comments:
move the internal source for a refresh to be required

time:
2013-09-22T16:29:23Z
class:
src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/main/java/org/elasticsearch/action/suggest/TransportSuggestAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorService.java
src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
add internal source to acquire searcher
add a source indicating why the searcher was acquired

time:
2013-09-22T15:58:40Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
src/main/java/org/elasticsearch/action/delete/index/TransportShardDeleteAction.java
src/main/java/org/elasticsearch/action/get/TransportGetAction.java
src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
add internal source to refresh
can be used to more easily understand where its coming from

time:
2013-09-22T13:02:05Z
class:
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
comments:
Add completion field support in Rest nodes stats

Closes #3746

time:
2013-09-22T10:05:58Z
class:
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Cleanup Integration Tests

time:
2013-09-22T10:05:57Z
class:
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
comments:
Small cleanups in TransportClient et.al

Catching Throwable instead of Exception in TransportClient
and TransportClientNodesService and restore interrupted flag
if interrupt exception is caught and ignored

time:
2013-09-22T10:05:57Z
class:
src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
comments:
Add missing TransportHandler for clear_sc (ClearScroll)
@s1monw Thanks for adding this!

@martijnvg YW!


time:
2013-09-22T10:05:57Z
class:
src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
comments:
Call validate in TransportClients before request is send

time:
2013-09-22T10:05:57Z
class:
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
comments:
Fail GetIndexTemplate if names it null or empty

time:
2013-09-22T10:05:57Z
class:
src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
comments:
Add listener nodes to nodes list if 'sniff' is true

TransportClient doesn't add the initial nodes to the nodes list
if it doesn't retrieve any nodes from the listeners which can cause
the transport client to throw a 'NoNodeAvailableException' if the
'sniff' response didn't return any nodes. This situation can occure
if the client tries to get the listener nodes cluster state while that
node is not yet connected to any other nodes.

time:
2013-09-22T10:01:27Z
class:
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
comments:
Fixed serialisation bug for multi percolate request and response classes.

This bug manifests when running with transport client.

time:
2013-09-22T01:19:08Z
class:
src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetMappingsAction.java
comments:
fix log to trace

time:
2013-09-21T18:10:43Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Added @TestLogging to all methods to see which shards we refresh and which ones we search on

Increased wait timeout and added multiple iterations there as well, one is not enough. We want to verify whether the problem gets fixed later on.

time:
2013-09-21T05:10:16Z
class:
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionTests.java
src/test/java/org/elasticsearch/indices/cache/CacheTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/search/customscore/CustomScoreSearchTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/timestamp/SimpleTimestampTests.java
src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
More AbstractIntegrationTest
@drewr you don't need the `wipeIndices()` call here. We guarantee that all indices are gone before the tests starts. Can you maybe go through and remove those calls where needed?

Was just doing a preliminary replace. Will look further.

yeah no worries - I just thought I mention it.

Thanks! I hadn't made my way through all of `AbstractIntegrationTest` yet. Good to know.


time:
2013-09-21T03:25:33Z
class:
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
Add/fix index selectors.

Closes #3758.

time:
2013-09-21T00:11:36Z
class:
src/test/java/org/elasticsearch/indices/state/SimpleIndexStateTests.java
comments:
Moved SimpleIndexStateTests to AbstractIntegrationTest

time:
2013-09-20T23:55:11Z
class:
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
comments:
don't clear gateways in reroute test
- also remove test logging from percolator

time:
2013-09-20T20:21:26Z
class:
comments:
Added the clear_scroll spec

time:
2013-09-20T19:32:52Z
class:
src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
comments:
Set nowInMillis to search context created by the explain api so that "NOW" can be used within queries

Added nowInMillis to ExplainRequest in a backwards compatible manner

Fixes #3626

time:
2013-09-20T19:32:13Z
class:
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ShardValidateQueryRequest.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Set nowInMillis to search context created by the validate query api so that "NOW" can be used within queries

Added nowInMillis to ShardValidateQueryRequest in a backwards compatible manner

Fixes #3629

time:
2013-09-20T19:31:00Z
class:
src/main/java/org/elasticsearch/action/count/CountRequest.java
src/main/java/org/elasticsearch/action/count/ShardCountRequest.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
comments:
Set nowInMillis to search context created by the count api so that "NOW" can be used within queries

Added nowInMillis to ShardCountRequest in a backwards compatible manner

Fixes #3625

time:
2013-09-20T19:22:56Z
class:
comments:
Added nested filter join option to the docs.

Closes #3738

time:
2013-09-20T19:19:31Z
class:
src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
comments:
Allow slop = -1 in span queries

Closes #3673

time:
2013-09-20T18:26:09Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
Use node clients for now until tests stabelize

time:
2013-09-20T17:25:50Z
class:
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
comments:
Removed ClusterScope annotation

time:
2013-09-20T17:21:53Z
class:
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
comments:
Moved ConcurrentPercolatorTests over to AbstractIntegrationTest

time:
2013-09-20T16:58:57Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java
src/test/java/org/elasticsearch/index/mapper/boost/BoostMappingTests.java
comments:
Allow the `_boost` field to be indexed and stored.

Closes #3752

time:
2013-09-20T14:56:33Z
class:
src/main/java/org/elasticsearch/cluster/TimeoutClusterStateUpdateTask.java
comments:
fix javadoc

time:
2013-09-20T14:36:46Z
class:
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
comments:
Removed usage AbstractIntegrationTest#updateClusterSettings

time:
2013-09-20T14:36:23Z
class:
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
comments:
Removed AbstractIntegrationTest#updateClusterSettings

time:
2013-09-20T14:04:33Z
class:
src/test/java/org/elasticsearch/cluster/NoMasterNodeTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
comments:
Cut over NoMasterNodeTests to AbstractIntegrationTest

time:
2013-09-20T13:31:37Z
class:
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchTests.java
comments:
Changed SimpleBlocksTests and CustomHighlighterSearchTests to use AbstractIntegrationTest

time:
2013-09-20T13:30:05Z
class:
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
comments:
fixed compile error

time:
2013-09-20T13:08:49Z
class:
src/test/java/org/elasticsearch/test/TestCluster.java
comments:
- Added TestCluster#getInstances(Class) method.

time:
2013-09-20T13:08:06Z
class:
src/test/java/org/elasticsearch/percolator/DeletePercolatorTypeTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
comments:
- Cut DeletePercolatorTypeTests and TTLPercolatorTests over to the AbstractIntegrationTest.

time:
2013-09-20T12:55:35Z
class:
src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
src/main/java/org/elasticsearch/common/xcontent/XContentGenerator.java
src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContentGenerator.java
src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContentGenerator.java
src/main/java/org/elasticsearch/rest/action/support/RestXContentBuilder.java
comments:
REST: Add newline to response when using pretty flag
closes #3748
relates to #3422

time:
2013-09-20T12:55:35Z
class:
comments:
doc processors setting

time:
2013-09-20T12:15:08Z
class:
comments:
completion_fields and field_data fields not support in node stats yet.
See https://github.com/elasticsearch/elasticsearch/issues/3746

time:
2013-09-20T11:36:50Z
class:
src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginTests.java
src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
comments:
Using AbstractIntegrationTest in SimpleTTLTests and FunctionScorePluginTests

time:
2013-09-20T11:31:46Z
class:
src/test/java/org/elasticsearch/cluster/AbstractZenNodesTests.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/allocation/ShardsAllocatorModuleTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
comments:
Cut over more tests to AbstractIntegrationTest

time:
2013-09-20T11:26:04Z
class:
comments:
Added completion stats to cluster.node_stats and indices.stats

time:
2013-09-20T10:31:17Z
class:
comments:
fix thread pool docs to remove blocking

time:
2013-09-19T16:58:07Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
comments:
use the same client and preference when failing

time:
2013-09-19T16:29:55Z
class:
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
comments:
Log line set to TRACE

The default log level for the action package is DEBUG, we don't want to print out lines like this by default in our distribution.

time:
2013-09-19T15:48:22Z
class:
src/test/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilterTests.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/broadcast/BroadcastActionsTests.java
src/test/java/org/elasticsearch/cluster/AbstractZenNodesTests.java
src/test/java/org/elasticsearch/cluster/ClusterHealthTests.java
src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
src/test/java/org/elasticsearch/cluster/NoMasterNodeTests.java
src/test/java/org/elasticsearch/cluster/SimpleDataNodesTests.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/UpdateSettingsValidationTests.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ShardsAllocatorModuleTests.java
src/test/java/org/elasticsearch/cluster/allocation/SimpleAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/shards/ClusterSearchShardsTests.java
src/test/java/org/elasticsearch/codecs/CodecTests.java
src/test/java/org/elasticsearch/common/geo/GeoJSONShapeParserTests.java
src/test/java/org/elasticsearch/common/geo/ShapeBuilderTests.java
src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
src/test/java/org/elasticsearch/common/regex/RegexTests.java
src/test/java/org/elasticsearch/common/settings/ImmutableSettingsTests.java
src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java
src/test/java/org/elasticsearch/consistencylevel/WriteConsistencyLevelTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/count/simple/SimpleCountTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/discovery/DiscoveryTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPingTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
src/test/java/org/elasticsearch/flt/FuzzyLikeThisActionTests.java
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/LocalGatewayIndexStateTests.java
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/none/RecoverAfterNodesTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/index/analysis/AnalysisModuleTests.java
src/test/java/org/elasticsearch/index/analysis/CJKFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/CharFilterTests.java
src/test/java/org/elasticsearch/index/analysis/HunspellTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/KeepFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/LimitTokenCountFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/NGramTokenizerFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/NumericAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/PatternCaptureTokenFilterTests.java
src/test/java/org/elasticsearch/index/analysis/ShingleTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/StopAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/WordDelimiterTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/commongrams/CommonGramsTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/codec/CodecTests.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FieldDataFilterIntegrationTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinalsTests.java
src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java
src/test/java/org/elasticsearch/indexing/IndexActionTests.java
src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionTests.java
src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java
src/test/java/org/elasticsearch/indices/cache/CacheTests.java
src/test/java/org/elasticsearch/indices/exists/types/TypesExistsTests.java
src/test/java/org/elasticsearch/indices/leaks/IndicesLeaksTests.java
src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
src/test/java/org/elasticsearch/indices/mapping/SimpleGetMappingsTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/indices/settings/UpdateSettingsTests.java
src/test/java/org/elasticsearch/indices/state/CloseIndexDisableCloseAllTests.java
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
src/test/java/org/elasticsearch/indices/state/SimpleIndexStateTests.java
src/test/java/org/elasticsearch/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
src/test/java/org/elasticsearch/indices/store/SimpleDistributorTests.java
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
src/test/java/org/elasticsearch/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/indices/warmer/SimpleIndicesWarmerTests.java
src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/mget/SimpleMgetTests.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/node/InternalNodeTests.java
src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoTests.java
src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java
src/test/java/org/elasticsearch/percolator/DeletePercolatorTypeTests.java
src/test/java/org/elasticsearch/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/percolator/TTLPercolatorTests.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
src/test/java/org/elasticsearch/plugin/ResponseHeaderPluginTests.java
src/test/java/org/elasticsearch/plugin/SitePluginTests.java
src/test/java/org/elasticsearch/recovery/FullRollingRestartTests.java
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
src/test/java/org/elasticsearch/recovery/RelocationTests.java
src/test/java/org/elasticsearch/recovery/SimpleRecoveryTests.java
src/test/java/org/elasticsearch/routing/AliasResolveRoutingTests.java
src/test/java/org/elasticsearch/routing/AliasRoutingTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresTests.java
src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/compress/SearchSourceCompressTests.java
src/test/java/org/elasticsearch/search/customscore/CustomScoreSearchTests.java
src/test/java/org/elasticsearch/search/facet/ConcurrentDuel.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/facet/terms/UnmappedFieldsTermsFacetsTests.java
src/test/java/org/elasticsearch/search/fields/SearchFieldsTests.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginTests.java
src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionTests.java
src/test/java/org/elasticsearch/search/geo/GeoBoundingBoxTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceFacetTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationTests.java
src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/indicesboost/SimpleIndicesBoostSearchTests.java
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
src/test/java/org/elasticsearch/search/msearch/SimpleMultiSearchTests.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
src/test/java/org/elasticsearch/search/scan/SearchScanScrollingTests.java
src/test/java/org/elasticsearch/search/scan/SearchScanTests.java
src/test/java/org/elasticsearch/search/scriptfilter/ScriptFilterSearchTests.java
src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/search/source/SourceFetchingTests.java
src/test/java/org/elasticsearch/search/stats/SearchStatsTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionPostingsFormatTest.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionTokenStreamTest.java
src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
src/test/java/org/elasticsearch/search/timeout/SearchTimeoutTests.java
src/test/java/org/elasticsearch/similarity/SimilarityTests.java
src/test/java/org/elasticsearch/termvectors/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/termvectors/GetTermVectorTests.java
src/test/java/org/elasticsearch/termvectors/TermVectorUnitTests.java
src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java
src/test/java/org/elasticsearch/test/AbstractNodesTests.java
src/test/java/org/elasticsearch/test/ElasticSearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java
src/test/java/org/elasticsearch/test/ElasticSearchThreadFilter.java
src/test/java/org/elasticsearch/test/ElasticSearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/TestCluster.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticSearchAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticSearchGeoAssertions.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticSearchMatchers.java
src/test/java/org/elasticsearch/threadpool/SimpleThreadPoolTests.java
src/test/java/org/elasticsearch/timestamp/SimpleTimestampTests.java
src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTests.java
src/test/java/org/elasticsearch/transport/netty/KeyedLockTests.java
src/test/java/org/elasticsearch/ttl/SimpleTTLTests.java
src/test/java/org/elasticsearch/update/UpdateTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
src/test/java/org/elasticsearch/versioning/ConcurrentDocumentOperationTests.java
src/test/java/org/elasticsearch/versioning/SimpleVersioningTests.java
comments:
Cleanup test classes and add Scope support for TestCluster

TestCluster can currently only be used in a globally shared scope.
This commit adds the ability to use the TestCluster in 3 different
scopes per test-suite. The scopes are 'Global', 'Suite' and 'Test'
where the cluster is shared across all tests, across all test methods or
not at all respectivly.
Subclasses of AbstractIntegrationTest (formerly AbstractSharedClusterTest)
can add an annotation if they need a different scope than Global (default):

```
  @ClusterScope(scope=Scope.Suite, numNodes=1)
```
This also allows to specify the number of shared nodes in that TestCluster
that are available when a test starts.

The cleanups in this commit include:

 - s/Elasticsearch/ElasticSearch/g on test classes
 - Move test classes in org.elasticsearch.test

time:
2013-09-19T14:43:20Z
class:
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
comments:
Rename Engine#seacher() into Engine#acquireSearcher()

The name should reflect that the caller is responsible for
releaseing the searcher again.

time:
2013-09-19T14:32:33Z
class:
comments:
detect JRE (vs JDK) and invalid JAVA_HOME

fixes #3739

time:
2013-09-19T14:21:45Z
class:
src/main/java/org/elasticsearch/index/engine/IndexEngineModule.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/TestCluster.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
src/test/java/org/elasticsearch/test/engine/MockEngineModule.java
src/test/java/org/elasticsearch/test/engine/MockRobinEngine.java
comments:
Add asserting searcher to track searcher references

This assertion module also injects an AssertingIndexSearcher that
checks if our queries are all compliant with the lucene specification
which is improtant for future updates and changes in the upstream project.

time:
2013-09-19T14:18:04Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
comments:
add explicit refresh post failure to test
log the hits post explicit refresh, and post explicit wait for green

time:
2013-09-19T13:02:11Z
class:
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Added more information to assertion in completion suggest tests

time:
2013-09-19T11:24:48Z
class:
src/main/java/org/elasticsearch/transport/TransportService.java
comments:
Make sure the transport response handler is invoked only once.

There was a small window of time where the transport response handler's handException method was invoked twice. As far as I can tell this happened when node disconnect event was processed just after the request was registered and between a "Node not connected" error was thrown. The TransportService#sendRequest method would invoke the transport response handler's handException method regardless if it was already invoked. This resulted that for one request failure, two retries were executed.

The mpercolate api has an assert that tripped when more than the expected shard level responses were returned. This was caused by the issue described above. For the a single shard level request we had multiple responses and this broke the the the total excepted responses. Also the reduce could be started prematurely, which resulted in an incorrect final response (e.g. total count being incorrect). For example: two shards in total, shard 0 gets reduces twice. The second shard 0 response gets in just before shard 1 response gets in. The reduce starts without shard 1 response.

time:
2013-09-19T11:09:24Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
comments:
Discovery to support a timeout waiting for other nodes to processing new cluster state
The master node processing changes to cluster state, and part of the processing is publishing the cluster state to other nodes. It does not wait for the cluster state to be processed on the other nodes before it moves on to the next cluster state processing job.

This is fine, we support out of order cluster state events using versioning, and nodes can handle those cases. It does lead though to non optimal API semantics. For example, when issuing cluster health, and waiting for green state, the master node will report back once the cluster is green based on its cluster state, but that mentioned "green" state might not have been received by all other nodes yet.

Add a discovery.zen.publish_timeout setting, and default it to 5s. This will give a best effort into making sure all nodes will process a cluster state within a window of time.

closes #3736

time:
2013-09-18T18:29:01Z
class:
src/main/java/org/elasticsearch/index/aliases/IndexAliasesService.java
src/main/java/org/elasticsearch/index/query/ParsedFilter.java
src/main/java/org/elasticsearch/search/facet/FacetParseElement.java
src/main/java/org/elasticsearch/search/facet/filter/FilterFacetParser.java
src/main/java/org/elasticsearch/search/sort/GeoDistanceSortParser.java
src/main/java/org/elasticsearch/search/sort/ScriptSortParser.java
src/main/java/org/elasticsearch/search/sort/SortParseElement.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
comments:
Prevented empty filters from causing NPE

 Closes #3724

time:
2013-09-18T16:01:23Z
class:
comments:
Updated outdated default setting in doc.

time:
2013-09-18T15:54:17Z
class:
comments:
removed some spaces that cause my yaml parser to choke

time:
2013-09-18T14:22:27Z
class:
src/test/java/org/elasticsearch/TestCluster.java
comments:
Check if nodes have been shut down in TestCluster#beforeTest

The test cluster ignored randomly teared down nodes in tests.
This commit also adds some debug logging to the TestCluster#beforeTest
method.

time:
2013-09-18T14:11:17Z
class:
comments:
escape spaces in JAVA_HOME

fix 3725
Just ran into this. Added the quotations manually in the .bat as a workaround. May want to add to the release notes of the current .zip

Thanks for this commit.  I'm using 0.90.5 locally because that's the version we're on and I ran into and fixed this problem on my own.  Glad to see that it's long since been incorporated into newer versions.


time:
2013-09-18T13:54:58Z
class:
comments:
Updated the test README to allow multiple test sections and an initial setup section

time:
2013-09-18T13:29:40Z
class:
comments:
Changed the get_mapping test to handle versions correctly

time:
2013-09-18T13:29:21Z
class:
comments:
Moved get-missing template tests into their own file

time:
2013-09-18T13:28:51Z
class:
comments:
Removed the regression tests for aliases - missing index etc
should be caught by the client before it hits ES

time:
2013-09-18T12:57:08Z
class:
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
comments:
call ensureGreen instead of explicit call

time:
2013-09-18T12:33:02Z
class:
src/test/java/org/elasticsearch/get/GetActionTests.java
comments:
GetActionTests: call ensureGreen() to get more meaningful debug output on failure

time:
2013-09-18T12:15:56Z
class:
src/test/java/org/elasticsearch/indices/mapping/SimpleDeleteMappingTests.java
comments:
call ensureGreen() to get more meaningful debug output on failure

time:
2013-09-18T11:38:44Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/tasks/PendingClusterTasksResponse.java
src/main/java/org/elasticsearch/cluster/ClusterState.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
comments:
improve failure message when timing out on green/yellow

time:
2013-09-18T11:04:41Z
class:
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
comments:
Removed wrong assertion from OpenCloseIndexTests

If a request hasn't been acknowledged, there's no guarantee for any node to hold the up-to-date cluster state (not even the master yet, as the execution is asynchronous)

time:
2013-09-18T10:35:44Z
class:
comments:
Fix formatting of the documentation.

Remaining '@'s have been replaced with '`'s.

time:
2013-09-18T10:35:20Z
class:
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
comments:
improve logging on before/after shared cluster tests

time:
2013-09-18T10:28:24Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
src/main/java/org/elasticsearch/common/regex/Regex.java
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
comments:
Delete Template: When deleting with * and no templates exists, don't 404
closes #3723

time:
2013-09-18T09:49:09Z
class:
src/test/java/org/elasticsearch/indices/state/OpenCloseIndexTests.java
comments:
Added acknowledgment timeout test to OpenCloseIndexTests

time:
2013-09-18T08:54:00Z
class:
src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
comments:
If there is an exception that indicates that the shard isn't available then the exception should bubble up to the TransportShardSingleOperationAction class, so the shard level request can be retried on a different shard. (multi get api)

time:
2013-09-18T08:53:34Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
comments:
Don't wrap the exception in an ElasticSearchException when shard isn't available.

time:
2013-09-18T08:52:37Z
class:
src/main/java/org/elasticsearch/action/termvector/TransportSingleShardMultiTermsVectorAction.java
comments:
If there is an exception that indicates that the shard isn't available then the exception should bubble up to the TransportShardSingleOperationAction class, so the shard level request can be retried on a different shard. (multi term vector api)

time:
2013-09-18T06:28:41Z
class:
src/test/java/org/elasticsearch/TestCluster.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
comments:
Disable random ram directories to prevent OOM during tests.

We need to find a way to enable this without adding crazy heaps etc.
Maybe only selected tests can run this.

time:
2013-09-17T21:29:49Z
class:
src/test/java/org/elasticsearch/search/scan/SearchScanTests.java
comments:
Randomized SearchScanTests

time:
2013-09-17T21:07:36Z
class:
src/main/java/org/elasticsearch/index/search/nested/NestedFieldComparatorSource.java
comments:
Simplify NestedFieldComparators for numerics

The average and sum comparators basically share the same code which is
copy-past today. We can simplify this into a base class which reduces
code duplication and prevents copy-paste bugs.

time:
2013-09-17T21:07:29Z
class:
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/ClusterManager.java
src/test/java/org/elasticsearch/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/TestCluster.java
src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/indices/IgnoreIndicesTests.java
src/test/java/org/elasticsearch/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/recovery/SimpleRecoveryTests.java
src/test/java/org/elasticsearch/routing/AliasResolveRoutingTests.java
src/test/java/org/elasticsearch/routing/SimpleRoutingTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTests.java
src/test/java/org/elasticsearch/search/facet/ExtendedFacetsTestsMultiShardMultiNodeTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsMultiShardMultiNodeTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/facet/terms/UnmappedFieldsTermsFacetsTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/validate/SimpleValidateQueryTests.java
src/test/java/org/elasticsearch/versioning/ConcurrentDocumentOperationTests.java
comments:
Make TestCluster based integration tests more repoducible

While testing an async system providing reproducible tests that
use randomized components is a hard task we should at least try to
reestablish the enviroment of a failing test as much as possible.
This commit allows to re-establish the shared 'TestCluster' by
resetting the cluster to a predefined shared state before each test.

Before this commit a tests that is executed in isolation was likely
using a entirely different node enviroment as the failing test since
the 'TestCluster' kept intermediate nodes started by other tests around.

time:
2013-09-17T19:30:27Z
class:
comments:
change default number of test jvms to 1
the auto default can cause a lot of pressure on a machine when running the tests (each process actually runs a multi node cluster)

time:
2013-09-17T17:54:31Z
class:
comments:
add date field to decay function doc

time:
2013-09-17T16:26:30Z
class:
src/main/java/org/elasticsearch/search/sort/GeoDistanceSortParser.java
comments:
Added sort_mode and sortMode parameters to _geo_distance sort.
Previously it just support the "mode" parameter, which is
inconsistent

Closes #3717

time:
2013-09-17T15:20:11Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/BaseFuture.java
comments:
Don't throw set exception if it is an error based exception, this breaks how we deal with assertions in general.

time:
2013-09-17T13:04:48Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
add 0.90.6

time:
2013-09-17T12:28:51Z
class:
src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java
comments:
Print '-Des.x.y' properties in reproduce line

time:
2013-09-17T12:28:26Z
class:
comments:
Fixed the skip range on percolator tests

time:
2013-09-17T12:28:14Z
class:
comments:
Fixed put_template test to work with 0.90.3 onwards, where
a missing template now throws a 404

time:
2013-09-17T12:21:45Z
class:
comments:
Add distance supported units

time:
2013-09-17T12:16:29Z
class:
comments:
Merge pull request #3702 from costin/master

add elasticsearch as a service for Windows platforms

time:
2013-09-17T12:16:18Z
class:
comments:
Fixed indices.open test - need to wait for shards to be allocated
before trying to close the index

time:
2013-09-17T12:01:09Z
class:
comments:
rework script to handle path with spaces
use service id for pid name
disable filtering on *.exe (caused corruption)
rename exe names and add more options to .bat
start/stop operations are now supported (and expected to be called) by service.bat
add more variables from the env to customize default behavior prior to installing the service
add manager option
fixes regarding batch flow
specify service id in description
minor readability improvement
include .exe only in ZIP archive
rename x64 service id to make it work out of the box
add elasticsearch as a service for Windows platforms
based on Apace Commons Daemon
supports both x64 and x86

time:
2013-09-17T11:30:40Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
comments:
Alias filter not applied when using 'multi-index' syntax with wild card in URL
closes #3677

time:
2013-09-17T08:41:23Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
comments:
Serving cluster state version log line set to TRACE instead of DEBUG

time:
2013-09-17T07:22:25Z
class:
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/count/simple/SimpleCountTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java
src/test/java/org/elasticsearch/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
comments:
Autodetect indices when 'indexRandom' is used.

time:
2013-09-17T07:02:49Z
class:
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
comments:
Create should use the same index name as the index request in tests

time:
2013-09-17T06:14:23Z
class:
comments:
Elasticsearch startup script supports directories containing spaces

Closes #3712

time:
2013-09-17T04:46:17Z
class:
comments:
prepare for next development iteration

time:
2013-09-17T04:41:17Z
class:
comments:
prepare release elasticsearch-cloud-aws-1.15.0

time:
2013-09-17T04:35:21Z
class:
src/main/java/org/elasticsearch/gateway/s3/S3Gateway.java
comments:
Update to elasticsearch 0.90.4
Breaking changes in to EsExecutors was introduced in elasticsearch 0.90.4
Closes #35.

time:
2013-09-16T22:34:10Z
class:
src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
src/main/java/org/elasticsearch/discovery/DiscoveryModule.java
src/main/java/org/elasticsearch/transport/TransportModule.java
comments:
Add `node.mode` with `local` or `network`
Compared to setting node.local to true, would be nicer to support node.mode with values of local or network.

Note, node.local is still supported.

closes #3713

time:
2013-09-16T22:06:13Z
class:
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
comments:
Beef up 'indexRandom' by running index requests concurrently

time:
2013-09-16T21:32:17Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/test/java/org/elasticsearch/search/indicesboost/SimpleIndicesBoostSearchTests.java
comments:
Better handling of /_all/_search when no indices exist
closes #3710

time:
2013-09-16T20:20:25Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
FlushNotAllowedEngineException during optimize
default to wait if a flush is on going when executed as part of optimize request
closes #3631

time:
2013-09-16T19:57:44Z
class:
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
comments:
Use 'indexRandom' in GeoDistanceTests

time:
2013-09-16T18:56:59Z
class:
comments:
Explain returns a 1, not 1.0

time:
2013-09-16T18:56:48Z
class:
comments:
Rename weird-index to start with test- so that it gets cleaned up

time:
2013-09-16T18:56:32Z
class:
comments:
Scroll test was missing an index - fails when other indices present

time:
2013-09-16T18:56:12Z
class:
comments:
Fixed indentation on an analyzer test

time:
2013-09-16T16:40:47Z
class:
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
Fixed PluginManagerTests

It caused the deletion of the existing bin/plugin script when run from the IDE

time:
2013-09-16T16:12:51Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Plugins: Automatic detection of site plugins fails to copy over the content to `_site`
closes #3707

time:
2013-09-16T16:12:51Z
class:
src/main/java/org/elasticsearch/Version.java
comments:
add 0.90.5

time:
2013-09-16T15:12:06Z
class:
src/main/java/org/elasticsearch/index/search/nested/NestedFieldComparatorSource.java
src/test/java/org/elasticsearch/search/geo/GeoDistanceTests.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Copy slow in wrapped comparator even if root doc is the first doc in the
segment.

We missed to copy the slot if the root doc is the first doc in the
segment.

Closes #3706

time:
2013-09-16T14:22:24Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
RecoveryWhileUnderLoadTests: added output of all shards stats in case of failure

Added wait to see if the problem will eventually get fixed or not in case of failure

time:
2013-09-16T14:22:24Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Replaced count api with search (search_type=count) in RecoveryWhileUnderLoadTests checks

This way we get the logging of all the shards we searched on

time:
2013-09-16T14:13:01Z
class:
comments:
[DOCS] Tidied up various doc formatting errors

time:
2013-09-16T13:57:08Z
class:
comments:
[DOCS] Tidied up function score

time:
2013-09-16T13:57:07Z
class:
comments:
[Docs] Added an added[0.90.4] flag to the disk based allocator

time:
2013-09-16T13:38:47Z
class:
comments:
upgrade to jackson 2.2.3

time:
2013-09-16T13:16:40Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
comments:
remove default scale for geo fields

time:
2013-09-16T13:16:40Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/ScoreFunctionBuilders.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
comments:
allow origin not set, defaults to "now" for date fields, exception for all other types

time:
2013-09-16T13:16:40Z
class:
src/main/java/org/elasticsearch/index/query/QueryBuilders.java
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
comments:
allow no query is defined in function score, default is match all

time:
2013-09-16T13:05:28Z
class:
comments:
upgrade to netty 3.7.0

time:
2013-09-16T12:12:41Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
comments:
If cluster health times out don't index lots of documents

The SearchWithRandomExceptionTests aim to catch problems when resources
are not closed due to exceptions etc. Yet in some cases the random seeds
cause the index to never be fully allocated so we basically go into a
ping-pong state where we try to allocate shards back and forth on nodes.
This causes all docs to time out which in-turn causes the tests to run
for a very long time (hours or days).
If we can not allocate the index and get to a yellow state we simply
index only one doc and expected all searches to fail.

This commit also beefs up the assertions in this test to check if
documents are actually present if they are indexed and refresh was
successful.

Closes #3694

time:
2013-09-16T09:28:32Z
class:
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
comments:
Allow include / exclude of completion stats via REST parameters

Stats can be retrieved on a per-feature / per-component  basis including the fields
they apply to. This commit add support for a 'completion' flag to include statistics
for the complition feature as well as 'completion_fields' to only
include certain fields into the returned statistics.
To disambiguate between 'fielddata' and 'completion' fields this commit
uses 'fields' as the default inclusion filter for stats fields only used
if not dedicated '[completion|fielddata]_fields' paramter is provided.

Relates to #3522

time:
2013-09-16T09:17:01Z
class:
comments:
Added docs for named queries.
Relates to #3581

time:
2013-09-16T07:56:21Z
class:
comments:
Debian init script: Added armhf openjdk6/7

Added java-6-openjdk-armhf and java-7-openjdk-armhf to JDK_DIRS in debian init.d script per elasticsearch/elasticsearch#3659

Closes #3659

time:
2013-09-16T07:46:43Z
class:
comments:
Making debian init script bourne shell compatible

Using backticks instead of bash only $() to execute a shell command

Closes #3691

time:
2013-09-16T07:40:23Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
comments:
don't serialize unneeded filter

time:
2013-09-16T07:14:00Z
class:
src/main/java/org/elasticsearch/common/collect/MapBackedSet.java
src/main/java/org/elasticsearch/common/inject/internal/FailableCache.java
src/main/java/org/elasticsearch/common/util/concurrent/ConcurrentCollections.java
comments:
upgrade to google guava v 15

time:
2013-09-15T22:30:03Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreTests.java
comments:
defining filter is not always needed, we can assume match all if no filter is given

time:
2013-09-14T23:54:27Z
class:
src/main/java/org/elasticsearch/action/suggest/TransportSuggestAction.java
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
comments:
Add dedicated Suggest Thread Pool
Add a dedicated suggest thread pool for the suggest API. With the new completion suggest type, which is purely CPU bounded, it makes more sense to have a dedicated thread pool for suggest compared to having it share the search thread pool and "competing" against other search operations.
closes #3698

time:
2013-09-14T23:40:35Z
class:
src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
comments:
use static TL for common numeric precision values

time:
2013-09-14T21:31:56Z
class:
comments:
update plugin

time:
2013-09-14T20:42:53Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
Briefly delete manifested mapping type on a node without reason
When a dynamic type is introduced during indexing, the node that introduces it sends the fact that its added to the master, to be added to the master node. The master node then adds it to the index metadata and republishes that fact.

In order not to delete the mapping while the new type is introduced on the node that introduced it, we keep a map of seen mappings, and remove a mapping type when we already processed it.

The map is not properly cleared though in all places where an actual index service is being removed on a node.

closes #3697

time:
2013-09-14T09:51:34Z
class:
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
comments:
tag with @AwaitsFix because it causes the test suite to crash

see #3694
Also, this might have caused one of the problems described in issue #3674

time:
2013-09-13T20:46:04Z
class:
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
src/main/java/org/elasticsearch/index/gateway/none/NoneIndexShardGateway.java
src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
comments:
better logging
trace log the low level details on recovery

time:
2013-09-13T20:06:12Z
class:
src/test/java/org/elasticsearch/broadcast/BroadcastActionsTests.java
comments:
use built in flush/refresh helper methods

time:
2013-09-13T19:44:38Z
class:
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/OptimizeRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/ShardOptimizeRequest.java
src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/rest/action/admin/indices/optimize/RestOptimizeAction.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
Optimize API: Remove refresh flag
Refresh flag in optimize is problematic, since the shards refresh is allowed to execute on is different compared to the optimize shards. In order to do optimize and then refresh, they should be executed as separate APIs when needed.
closes #3690

time:
2013-09-13T19:09:45Z
class:
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java
src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/FlushNotAllowedEngineException.java
src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/facet/terms/UnmappedFieldsTermsFacetsTests.java
src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionTests.java
src/test/java/org/elasticsearch/search/sort/SimpleSortTests.java
comments:
Flush API: remove refresh flag
Refresh flag in flush is problematic, since the shards refresh is allowed to execute on is different compared to the flush shards. In order to do flush and then refresh, they should be executed as separate APIs when needed.
closes #3689

time:
2013-09-13T18:03:58Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
allow refresh to execute on a relocating shard as well

time:
2013-09-13T17:55:50Z
class:
src/test/java/org/elasticsearch/index/fielddata/FieldDataFilterIntegrationTests.java
comments:
Add integration test for regex field data filter

time:
2013-09-13T17:51:15Z
class:
comments:
Add TESTING document describing test settings

time:
2013-09-13T16:03:28Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
Log failures at closing the SearcherManager.

time:
2013-09-13T15:45:39Z
class:
comments:
Allow packages to disable immediate restart on package upgrade

Both package types, RPM and deb now contain an option to not restart on upgrade.

This option can be configure in /etc/default/elasticsearch for dpkg based systems
and /etc/sysconfig/elasticsearch for rpm based systems.

By default the setting is as before, where a restart is executed on upgrade.

Closes #3685

time:
2013-09-13T15:38:57Z
class:
src/main/java/org/elasticsearch/index/mapper/MapperService.java
comments:
improve logging
the source of the default mappings should be trace logged

time:
2013-09-13T15:35:01Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
comments:
improve visibility of clusterState and shardsIt
In case of retries, we update the clusterState and shardsIt, make sure they are visible using volatile (even though updates will probably go through a memory barrier, this might explain rare failure we see when retry happens)

time:
2013-09-13T14:39:08Z
class:
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
comments:
Improved test

Introduced ElasticsearchAssertions that check for failures in all response
Added comment to flush requests as we don't check for failures there
Attempt to remove Thread.sleep in testChangeInitialShardsRecovery in favour of awaitBusy block
Added awaitBusy block in testQuorumRecovery waiting for YELLOW. We could have GREEN after the close node but wa want to wait for the YELLOW state.

time:
2013-09-13T14:39:08Z
class:
src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java
comments:
Removed wrong assertion that makes recoverWhileUnderLoadWithNodeShutdown fail.

As we are within an awaitBusy block, it doesn't make sense to have an assertion, since it would fail the test instead of waiting till the condition is verified (till timeout expires)

time:
2013-09-13T14:35:11Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
comments:
use trace logging on cluster state driven indexing

time:
2013-09-13T14:20:38Z
class:
comments:
[DOCS] Added Cold Fusion client to community page

time:
2013-09-13T13:08:59Z
class:
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequestBuilder.java
src/main/java/org/elasticsearch/client/IndicesAdminClient.java
src/main/java/org/elasticsearch/client/support/AbstractIndicesAdminClient.java
comments:
Remove get index templates deprecated methods
In 0.90.4, we deprecated some code:

* `GetIndexTemplatesRequest#GetIndexTemplatesRequest(String)` moved to `GetIndexTemplatesRequest#GetIndexTemplatesRequest(String...)`
* `GetIndexTemplatesRequest#name(String)` moved to `GetIndexTemplatesRequest#names(String...)`
* `GetIndexTemplatesRequest#name()` moved to `GetIndexTemplatesRequest#names()`

* `GetIndexTemplatesRequestBuilder#GetIndexTemplatesRequestBuilder(IndicesAdminClient, String)` moved to  `GetIndexTemplatesRequestBuilder#GetIndexTemplatesRequestBuilder(IndicesAdminClient, String...)`

* `IndicesAdminClient#prepareGetTemplates(String)` moved to `IndicesAdminClient#prepareGetTemplates(String...)`

* `AbstractIndicesAdminClient#prepareGetTemplates(String)` moved to `AbstractIndicesAdminClient#prepareGetTemplates(String...)`

We can now remove that old methods in 1.0.

**Note**: it breaks the Java API

Relative to #2532.
Closes #3681.

time:
2013-09-13T13:08:59Z
class:
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequest.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplatesAction.java
src/main/java/org/elasticsearch/client/IndicesAdminClient.java
src/main/java/org/elasticsearch/client/support/AbstractIndicesAdminClient.java
src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateTests.java
comments:
Support for REST get ALL templates.
/_template shows: No handler found for uri [/_template] and method [GET]

It would make sense to list the templates as they are listed in the /_cluster/state call.

Closes #2532.

time:
2013-09-13T12:50:51Z
class:
src/test/java/org/elasticsearch/cluster/NoMasterNodeTests.java
comments:
add wait for green to prevent test failure

time:
2013-09-13T10:40:10Z
class:
comments:
Changed .gitignore to ignore all files in .settings except
for the ones that we want to preserve, to ensure a common
coding style between IDEA and Eclipse
@clintongormley Great! Thank you so much.


time:
2013-09-13T10:14:52Z
class:
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
src/test/java/org/elasticsearch/ElasticSearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/ElasticsearchLuceneTestCase.java
comments:
mark test base classes as abstract

time:
2013-09-13T09:49:16Z
class:
src/main/java/org/elasticsearch/common/Strings.java
comments:
Fix possible NPE due to #3658 change

time:
2013-09-13T09:36:43Z
class:
src/main/java/org/elasticsearch/common/Strings.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/hotthreads/RestNodesHotThreadsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/restart/RestNodesRestartAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/shutdown/RestNodesShutdownAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/shards/RestClusterSearchShardsAction.java
src/main/java/org/elasticsearch/rest/action/admin/cluster/state/RestClusterStateAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestGetIndicesAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/indices/RestIndicesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/gateway/snapshot/RestGatewaySnapshotAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/delete/RestDeleteMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/optimize/RestOptimizeAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/segments/RestIndicesSegmentsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/status/RestIndicesStatusAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/get/RestGetWarmerAction.java
src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
src/main/java/org/elasticsearch/rest/action/deletebyquery/RestDeleteByQueryAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestMultiPercolateAction.java
src/main/java/org/elasticsearch/rest/action/percolate/RestPercolateAction.java
src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java
src/main/java/org/elasticsearch/rest/action/support/RestActions.java
comments:
Remove RestActions#splitXXX(String) methods
* `RestActions#splitIndices(String)`
* `RestActions#splitTypes(String)`
* `RestActions#splitNodes(String)`

And replace with `Strings.splitStringByCommaToArray(String)`

Closes #3680.

time:
2013-09-13T09:23:37Z
class:
comments:
The docs URLs have changed to include en/

time:
2013-09-13T07:29:06Z
class:
comments:
Removed .settings from .gitignore - @jpountz intended
for it to be included to ensure consistent code styles
between eclipse and IDEA. Instead just ignore
the org.eclipse.m2e preferences
Thank you for this quick response, but I guess that some plugins other than `m2e` may save preference in `.settings`.

So I prefer "ignore all other than we know" style like:

``` gitignore
/.settings/
!/.settings/org.eclipse.core.resources.prefs
!/.settings/org.eclipse.jdt.core.prefs
!/.settings/org.eclipse.jdt.ui.prefs
```

How do you think?

@tadd agreed - I wasn't aware of that syntax. I've added your suggestions and pushed. thanks!


time:
2013-09-12T21:39:03Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchTests.java
comments:
CompletionFieldMapper should use index name instead of full name

Fixes #3669

time:
2013-09-12T21:24:27Z
class:
src/main/java/org/elasticsearch/common/lucene/store/BufferedChecksumIndexOutput.java
src/main/java/org/elasticsearch/index/store/Store.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java
src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsTests.java
comments:
Fix several places where resources are not closed

This commit adds a test that checks that we are closing
all files even if there are random IOExceptions happening. The test
found several places where due to IOExceptions streams were not
closed due to unsufficient exception handling.

time:
2013-09-12T19:03:33Z
class:
src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesTests.java
comments:
Introduced common test methods in MatchedQueriesTests (e.g. createIndex, ensureGreen, refresh, assertHitCount)

time:
2013-09-12T17:53:59Z
class:
src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java
comments:
Added specific log level to check which shards were refreshed and which shards we searched on

time:
2013-09-12T13:07:36Z
class:
comments:
[DOCS] Deprecated the from/to/include_lower/include_upper params
in the range query, range filter and numeric range filter.
Better to use gt/gte/lt/lte as they are explicit.

time:
2013-09-12T09:00:59Z
class:
comments:
Fix typo

Thanks to @ybonnel for finding it ;-)
Sorry. I mixed names! @yohanboniface found it :-)


time:
2013-09-12T08:41:38Z
class:
src/main/java/org/elasticsearch/action/search/ClearScrollRequest.java
src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
comments:
If all scroll ids should be removed then the `_all` value should be used instead of not specifying any scroll ids.

time:
2013-09-12T08:27:46Z
class:
comments:
Added an example of test `setup` into the `indices.analyze` API

time:
2013-09-12T08:25:42Z
class:
src/test/java/org/elasticsearch/nested/SimpleNestedTests.java
comments:
Moved to use assertHitCount instead of just checking the total count

time:
2013-09-12T08:19:10Z
class:
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
comments:
Set log level to trace for package action.support.broadcast in the RecoveryPercolatorTests#testSinglePercolator_recovery test.

time:
2013-09-11T20:47:34Z
class:
src/main/java/org/apache/lucene/store/FilterDirectory.java
src/main/java/org/apache/lucene/store/RateLimitedFSDirectory.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/index/store/Store.java
src/main/java/org/elasticsearch/index/store/distributor/AbstractDistributor.java
src/main/java/org/elasticsearch/index/store/fs/FsDirectoryService.java
src/main/java/org/elasticsearch/index/store/fs/MmapFsIndexStore.java
src/main/java/org/elasticsearch/index/store/fs/NioFsIndexStore.java
src/main/java/org/elasticsearch/index/store/fs/SimpleFsIndexStore.java
src/main/java/org/elasticsearch/index/store/memory/ByteBufferDirectoryService.java
src/main/java/org/elasticsearch/index/store/ram/RamDirectoryService.java
src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java
src/main/java/org/elasticsearch/indices/recovery/RecoveryStatus.java
src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/TestCluster.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java
src/test/java/org/elasticsearch/index/store/mock/MockFSDirectoryService.java
src/test/java/org/elasticsearch/index/store/mock/MockFSIndexStore.java
src/test/java/org/elasticsearch/index/store/mock/MockFSIndexStoreModule.java
src/test/java/org/elasticsearch/index/store/mock/MockRamDirecorySerivce.java
src/test/java/org/elasticsearch/index/store/mock/MockRamIndexStore.java
src/test/java/org/elasticsearch/index/store/mock/MockRamIndexStoreModule.java
src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexTests.java
src/test/java/org/elasticsearch/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/search/geo/GeoFilterTests.java
src/test/java/org/elasticsearch/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java
src/test/java/org/elasticsearch/search/scan/SearchScanScrollingTests.java
src/test/java/org/elasticsearch/search/scroll/SearchScrollTests.java
src/test/java/org/elasticsearch/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/update/UpdateTests.java
comments:
Add support for Lucene's MockDirectoryWrapper

MockDirectoryWrapper adds asserting logic to the low level directory
implementation that helps to track and catch resource leaks like
unclosed index inputs caused by dangling IndexReader or IndexSearcher
instances. It prevents double writes to files and allows low level
random exceptions to be thrown for testing index consistency etc.

Closes #3654

time:
2013-09-11T20:16:43Z
class:
comments:
Add -Dtests.integration support to pom.xml

time:
2013-09-11T20:12:38Z
class:
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
src/test/java/org/elasticsearch/AbstractNodesTests.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
comments:
Added 'IntegrationTests' annotation to filter integration tests

Tests now support ignoring integartion tests by passing
'-Dtests.integration=false' to the test runner either via IDE or
maven to only run fast unittests.

time:
2013-09-11T19:00:53Z
class:
src/main/java/org/elasticsearch/client/Client.java
comments:
fixed typo in javadoc

time:
2013-09-11T18:49:33Z
class:
src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
src/main/java/org/elasticsearch/plugins/PluginManager.java
src/test/java/org/elasticsearch/index/fielddata/DuelFieldDataTests.java
src/test/java/org/elasticsearch/node/internal/InternalSettingsPerparerTests.java
src/test/java/org/elasticsearch/plugin/PluginManagerTests.java
comments:
Fix misspellings.

time:
2013-09-11T17:49:49Z
class:
src/test/java/org/apache/lucene/analysis/miscellaneous/UniqueTokenFilterTests.java
src/test/java/org/elasticsearch/AbstractNodesTests.java
src/test/java/org/elasticsearch/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/ClusterManager.java
src/test/java/org/elasticsearch/ElasticSearchExceptionTests.java
src/test/java/org/elasticsearch/ElasticSearchThreadFilter.java
src/test/java/org/elasticsearch/ElasticSearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/TestCluster.java
src/test/java/org/elasticsearch/VersionTests.java
src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
src/test/java/org/elasticsearch/action/percolate/MultiPercolatorRequestTests.java
src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
src/test/java/org/elasticsearch/action/suggest/SuggestActionTests.java
src/test/java/org/elasticsearch/aliases/IndexAliasesTests.java
src/test/java/org/elasticsearch/blocks/SimpleBlocksTests.java
src/test/java/org/elasticsearch/broadcast/BroadcastActionsTests.java
src/test/java/org/elasticsearch/cluster/AbstractZenNodesTests.java
src/test/java/org/elasticsearch/cluster/ClusterHealthTests.java
src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java
src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
src/test/java/org/elasticsearch/cluster/MinimumMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/NoMasterNodeTests.java
src/test/java/org/elasticsearch/cluster/SimpleDataNodesTests.java
src/test/java/org/elasticsearch/cluster/SpecificMasterNodesTests.java
src/test/java/org/elasticsearch/cluster/UpdateSettingsValidationTests.java
src/test/java/org/elasticsearch/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/cluster/allocation/FilteringAllocationTests.java
src/test/java/org/elasticsearch/cluster/allocation/ShardsAllocatorModuleTests.java
src/test/java/org/elasticsearch/cluster/allocation/SimpleAllocationTests.java
src/test/java/org/elasticsearch/cluster/metadata/MappingMetaDataParserTests.java
src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java
src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeFiltersTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocatePostApiFlagTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/DisableAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsTests.java
src/test/java/org/elasticsearch/cluster/settings/SettingsValidatorTests.java
src/test/java/org/elasticsearch/cluster/shards/ClusterSearchShardsTests.java
src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
src/test/java/org/elasticsearch/codecs/CodecTests.java
src/test/java/org/elasticsearch/common/compress/CompressedStringTests.java
src/test/java/org/elasticsearch/common/geo/GeoJSONShapeParserTests.java
src/test/java/org/elasticsearch/common/geo/ShapeBuilderTests.java
src/test/java/org/elasticsearch/common/io/StreamsTests.java
src/test/java/org/elasticsearch/common/io/streams/BytesStreamsTests.java
src/test/java/org/elasticsearch/common/io/streams/HandlesStreamsTests.java
src/test/java/org/elasticsearch/common/joda/DateMathParserTests.java
src/test/java/org/elasticsearch/common/lucene/LuceneTest.java
src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java
src/test/java/org/elasticsearch/common/lucene/search/MatchAllDocsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/MoreLikeThisQueryTests.java
src/test/java/org/elasticsearch/common/lucene/search/MultiPhrasePrefixQueryTests.java
src/test/java/org/elasticsearch/common/lucene/search/TermsFilterTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterLuceneTests.java
src/test/java/org/elasticsearch/common/lucene/search/XBooleanFilterTests.java
src/test/java/org/elasticsearch/common/lucene/store/InputStreamIndexInputTests.java
src/test/java/org/elasticsearch/common/lucene/uid/VersionsTests.java
src/test/java/org/elasticsearch/common/path/PathTrieTests.java
src/test/java/org/elasticsearch/common/regex/RegexTests.java
src/test/java/org/elasticsearch/common/settings/ImmutableSettingsTests.java
src/test/java/org/elasticsearch/common/settings/bar/BarTestClass.java
src/test/java/org/elasticsearch/common/settings/foo/FooTestClass.java
src/test/java/org/elasticsearch/common/settings/loader/JsonSettingsLoaderTests.java
src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeUnitTests.java
src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java
src/test/java/org/elasticsearch/common/unit/DistanceUnitTests.java
src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
src/test/java/org/elasticsearch/common/util/SlicedDoubleListTests.java
src/test/java/org/elasticsearch/common/util/SlicedLongListTests.java
src/test/java/org/elasticsearch/common/util/SlicedObjectListTests.java
src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java
src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
src/test/java/org/elasticsearch/common/xcontent/builder/BuilderRawFieldTests.java
src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
src/test/java/org/elasticsearch/common/xcontent/smile/JsonVsSmileTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentHelperTests.java
src/test/java/org/elasticsearch/common/xcontent/support/XContentMapValuesTests.java
src/test/java/org/elasticsearch/consistencylevel/WriteConsistencyLevelTests.java
src/test/java/org/elasticsearch/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/count/simple/SimpleCountTests.java
src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java
src/test/java/org/elasticsearch/deps/jackson/JacksonLocationTests.java
src/test/java/org/elasticsearch/deps/joda/SimpleJodaTests.java
src/test/java/org/elasticsearch/deps/joda/TimeZoneRoundingTests.java
src/test/java/org/elasticsearch/deps/lucene/SimpleLuceneTests.java
src/test/java/org/elasticsearch/deps/lucene/VectorHighlighterTests.java
src/test/java/org/elasticsearch/discovery/DiscoveryTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPingTests.java
src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingTests.java
src/test/java/org/elasticsearch/document/AliasedIndexDocumentActionsTests.java
src/test/java/org/elasticsearch/document/BulkTests.java
src/test/java/org/elasticsearch/document/DocumentActionsTests.java
src/test/java/org/elasticsearch/explain/ExplainActionTests.java
src/test/java/org/elasticsearch/flt/FuzzyLikeThisActionTests.java
src/test/java/org/elasticsearch/gateway/fs/IndexGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/LocalGatewayIndexStateTests.java
src/test/java/org/elasticsearch/gateway/local/QuorumLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java
src/test/java/org/elasticsearch/gateway/none/RecoverAfterNodesTests.java
src/test/java/org/elasticsearch/get/GetActionTests.java
src/test/java/org/elasticsearch/index/VersionTypeTests.java
src/test/java/org/elasticsearch/index/aliases/IndexAliasesServiceTests.java
src/test/java/org/elasticsearch/index/analysis/AnalysisModuleTests.java
src/test/java/org/elasticsearch/index/analysis/AnalysisTestsHelper.java
src/test/java/org/elasticsearch/index/analysis/CJKFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/CharFilterTests.java
src/test/java/org/elasticsearch/index/analysis/CompoundAnalysisTests.java
src/test/java/org/elasticsearch/index/analysis/HunspellTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/KeepFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/LimitTokenCountFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/NGramTokenizerFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/NumericAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/PatternCaptureTokenFilterTests.java
src/test/java/org/elasticsearch/index/analysis/ShingleTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/StopAnalyzerTests.java
src/test/java/org/elasticsearch/index/analysis/WordDelimiterTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/commongrams/CommonGramsTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/index/analysis/filter1/MyFilterTokenFilterFactory.java
src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTest.java
src/test/java/org/elasticsearch/index/cache/filter/FilterCacheTests.java
src/test/java/org/elasticsearch/index/cache/id/SimpleIdCacheTests.java
src/test/java/org/elasticsearch/index/codec/CodecTests.java
src/test/java/org/elasticsearch/index/codec/postingformat/DefaultPostingsFormatTests.java
src/test/java/org/elasticsearch/index/deletionpolicy/SnapshotDeletionPolicyTests.java
src/test/java/org/elasticsearch/index/deletionpolicy/SnapshotIndexCommitExistsMatcher.java
src/test/java/org/elasticsearch/index/engine/EngineSearcherTotalHitsMatcher.java
src/test/java/org/elasticsearch/index/engine/robin/RobinEngineTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataImplTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractNumericFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/AbstractStringFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DoubleFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/DuellFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FSTPackedBytesStringFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/FilterFieldDataTest.java
src/test/java/org/elasticsearch/index/fielddata/FloatFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/LongFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/NoOrdinalsStringFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/PagedBytesStringFieldDataTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinalsTests.java
src/test/java/org/elasticsearch/index/fielddata/ordinals/SingleOrdinalsTests.java
src/test/java/org/elasticsearch/index/gateway/CommitPointsTests.java
src/test/java/org/elasticsearch/index/mapper/MapperTestUtils.java
src/test/java/org/elasticsearch/index/mapper/UidTests.java
src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
src/test/java/org/elasticsearch/index/mapper/analyzer/AnalyzerMapperTests.java
src/test/java/org/elasticsearch/index/mapper/boost/BoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/CustomBoostMappingTests.java
src/test/java/org/elasticsearch/index/mapper/boost/FieldLevelBoostTests.java
src/test/java/org/elasticsearch/index/mapper/camelcase/CamelCaseFieldNameTests.java
src/test/java/org/elasticsearch/index/mapper/completion/CompletionFieldMapperTests.java
src/test/java/org/elasticsearch/index/mapper/compound/CompoundTypesTests.java
src/test/java/org/elasticsearch/index/mapper/date/SimpleDateMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamic/DynamicMappingTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/genericstore/GenericStoreDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/pathmatch/PathMatchDynamicTemplateTests.java
src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeoShapeFieldMapperTests.java
src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonAndGeohashMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/geo/LatLonMappingGeoPointTests.java
src/test/java/org/elasticsearch/index/mapper/id/IdMappingTests.java
src/test/java/org/elasticsearch/index/mapper/index/IndexTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/ip/SimpleIpMappingTests.java
src/test/java/org/elasticsearch/index/mapper/lucene/DoubleIndexingDocTest.java
src/test/java/org/elasticsearch/index/mapper/lucene/StoredNumericValuesTest.java
src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
src/test/java/org/elasticsearch/index/mapper/multifield/merge/JavaMultiFieldMergeTests.java
src/test/java/org/elasticsearch/index/mapper/nested/NestedMappingTests.java
src/test/java/org/elasticsearch/index/mapper/numeric/SimpleNumericTests.java
src/test/java/org/elasticsearch/index/mapper/object/NullValueObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/object/SimpleObjectMappingTests.java
src/test/java/org/elasticsearch/index/mapper/overridetype/OverrideTypeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
src/test/java/org/elasticsearch/index/mapper/path/PathMapperTests.java
src/test/java/org/elasticsearch/index/mapper/routing/RoutingTypeMapperTests.java
src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/CompressSourceMappingTests.java
src/test/java/org/elasticsearch/index/mapper/source/DefaultSourceMappingTests.java
src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseDocumentTypeLevelsTests.java
src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
src/test/java/org/elasticsearch/index/merge/policy/MergePolicySettingsTest.java
src/test/java/org/elasticsearch/index/query/SimpleIndexQueryParserTests.java
comments:
Collapse test.{unit,integration} into org.elasticsearch.

time:
2013-09-11T14:34:08Z
class:
comments:
Reverting change in bin/plugin due to d3980ee184f11efcbd2b38421f4946de9198fe20 commit

time:
2013-09-11T14:08:57Z
class:
src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java
src/main/java/org/elasticsearch/index/mapper/MapperService.java
src/main/java/org/elasticsearch/index/mapper/ParseContext.java
src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
src/test/java/org/elasticsearch/test/integration/indices/mapping/ConcurrentDynamicTemplateTests.java
comments:
Rare race condition when introducing new fields into a mapping
Dynamic mapping allow to dynamically introduce new fields into an existing mapping. There is a (pretty rare) race condition, where a new field/object being introduced will not be immediately visible for another document that introduces it at the same time.

closes #3667, closes #3544

time:
2013-09-11T14:04:08Z
class:
src/main/java/org/elasticsearch/common/logging/Loggers.java
src/test/java/org/elasticsearch/junit/listeners/LoggingListener.java
comments:
Loggers#getLogger static method to take into account the logger prefix

Improved LoggingListener (which reads and applies @TestLogging annotation) to take into account the logger prefix. We can now use the @TestLogging annotation and specify either the whole package name (e.g. o.e.action.metadata) or only the package name without the logger prefix (action.metadata), the custom log level will be properly applied in both cases

time:
2013-09-11T09:24:07Z
class:
src/test/java/org/elasticsearch/test/integration/indices/state/OpenCloseIndexTests.java
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Removed logger prefixes when using @TestLogging annotation

time:
2013-09-11T09:20:08Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Added more trace logging.
Enabled trace logging for RecoveryPercolatorTests#testMultiPercolator_recovery test
Cleaned up and removed unnecessary usage of concurrent collections.

time:
2013-09-10T20:33:51Z
class:
src/main/java/org/elasticsearch/action/suggest/SuggestResponse.java
comments:
Rewrote SuggestResponse#toString method

It only prints out json now (as the SearchResponse does)
Added missing startObject & endObject (was causing JsonGenerationException)

Closes #3661

time:
2013-09-10T19:17:34Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/search/ClearScrollAction.java
src/main/java/org/elasticsearch/action/search/ClearScrollRequest.java
src/main/java/org/elasticsearch/action/search/ClearScrollRequestBuilder.java
src/main/java/org/elasticsearch/action/search/ClearScrollResponse.java
src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
src/main/java/org/elasticsearch/client/Client.java
src/main/java/org/elasticsearch/client/support/AbstractClient.java
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
src/main/java/org/elasticsearch/search/SearchService.java
src/main/java/org/elasticsearch/search/action/SearchServiceTransportAction.java
src/test/java/org/elasticsearch/test/integration/search/scroll/SearchScrollTests.java
comments:
Added clear scroll api.

The clear scroll api allows clear all resources associated with a `scroll_id` by deleting the `scroll_id` and its associated SearchContext.

Closes #3657

time:
2013-09-10T16:31:35Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
src/test/java/org/elasticsearch/test/integration/plugin/PluginManagerTests.java
comments:
Plugin Manager: add silent mode.
Now with have proper exit codes for elasticsearch plugin manager (see #3463), we can add a silent mode to plugin manager.

```sh
bin/plugin --install karmi/elasticsearch-paramedic --silent
```

Closes #3628.

time:
2013-09-10T15:19:26Z
class:
src/test/java/org/elasticsearch/test/unit/transport/AbstractSimpleTransportTests.java
comments:
change logging level of testTimeoutSendExceptionWithDelayedResponse to TRACE

time:
2013-09-10T12:28:59Z
class:
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Configured TRACE logging to RecoveryWhileUnderLoadTests#recoverWhileUnderLoadAllocateBackupsTest

We want to log which shards we are searching on and which shards we are refreshing

time:
2013-09-10T10:13:37Z
class:
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/integration/search/geo/GeoDistanceTests.java
comments:
use ElasticsearchAssertions to get info on shard failures

time:
2013-09-09T21:36:45Z
class:
comments:
Changed the `ignore_missing` client parameter to `ignore: 404`

This should make easier any potential expansion such as:

    client.update('index', 'type', 41, {...}, ignore: 409

Also restructured and renamed the test suite a bit as part of the commit.

---

This reverts commit 0b142cc8812d8d090e48ea0ad89c007767870b91, "Removed client-specific `ignore_missing` parameter".

time:
2013-09-09T21:36:45Z
class:
comments:
Removed the incorrect info about `_all` default for index in `indices.get_mapping` API

time:
2013-09-09T21:36:45Z
class:
comments:
Added tests for default document type in `get` and `get_source` APIs

time:
2013-09-09T21:36:45Z
class:
comments:
Revert "Changed the missing `type` to `_all` in "Get Source" test"

This reverts commit f834a8b9a18739ba97eba592be98ce6804082d37.

time:
2013-09-09T21:36:45Z
class:
comments:
Revert "Changed the missing `type` to `_all` in "Get" test"

This reverts commit c7b376a4222d68788c59ffefbaaeae33d70536b8.

time:
2013-09-09T21:36:44Z
class:
comments:
Renamed the "All indices" test for `_search` API to "Default index"

This reverts commit 51713399e943412866e95cf94f341cb4625ef831.

time:
2013-09-09T21:36:44Z
class:
comments:
Added test for client-side default document type in `exists` API

This reverts commit f6f037e6b15b51023c6ca45adbd394fd16e714f1.

time:
2013-09-09T21:36:44Z
class:
comments:
Improved and fixed "Get Mapping" tests

* Fixed error in `skip` explanation for "get type" test
* Separated the tests for getting index/type mapping

I vote for removing the "get type" test entirely, since it just tests ancient versions.

time:
2013-09-09T21:36:44Z
class:
comments:
Fixed incorrect test names in "Update" fields / meta-fields tests

time:
2013-09-09T21:36:44Z
class:
comments:
Changed the "Indices Analyze" test to better correspond with the new test structure

1. Move the "text format" test into separate file
2. Remove the "JSON format" from test names

time:
2013-09-09T21:36:44Z
class:
comments:
Removed test "setup" in "Indices Analyze" test

When the runner contract is specified as "run all the tests in the file in sequence,
resetting cluster after each file", it makes is hard to translate the concept into
regular Test::Unit environment.

Changed the "Analyze API JSON format - index and field" test to perform the necessary
setup as part of the test code.

time:
2013-09-09T21:36:44Z
class:
comments:
Changed the missing `type` to `_all` in "Get" test

time:
2013-09-09T21:36:43Z
class:
comments:
Corrected test names for "Bulk" test suite

time:
2013-09-09T21:36:43Z
class:
comments:
Changed the missing `type` to `_all` in "Get Source" test

time:
2013-09-09T21:36:43Z
class:
comments:
Changed the "default index/type" to use `index: _all` and renamed to "All indices"

time:
2013-09-09T21:36:43Z
class:
comments:
Removed test for client-side default type in `exists` API

time:
2013-09-09T21:36:43Z
class:
comments:
Removed client-specific `ignore_missing` parameter

This parameter can introduce confusion, since people might think this is something
working on Elasticsearch level, eg. passing it to `curl`

time:
2013-09-09T19:21:27Z
class:
src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/main/java/org/elasticsearch/action/suggest/TransportSuggestAction.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorService.java
src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/search/SearchService.java
comments:
Rename IndexShard#searcher() to #acquireSearcher()

Based on recent bugs ( #3652 ) where searchers were acquired multiple times
but never released 'IndexShard#searcher()' has not a more accurate name.

Closes #3653

time:
2013-09-09T19:21:27Z
class:
src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
comments:
Catch ESRejectedExecutionException on node close

When a node shuts down thread pools might throw
ESRejectedExecutionException and our test framework fails tests if
exceptions are not caught hitting uncaught exception handler.

time:
2013-09-09T19:17:16Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
src/test/java/org/elasticsearch/test/integration/plugin/PluginManagerTests.java
comments:
Plugin Manager should support -remove group/artifact/version naming
When installing a plugin, we use:

```sh
bin/plugin --install groupid/artifactid/version
```

But when removing the plugin, we only support:

```sh
bin/plugin --remove dirname
```

where `dirname` is the directory name of the plugin under `/plugins` dir.

Closes #3421.

time:
2013-09-09T18:59:47Z
class:
comments:
Fixed incorrect default JSON spec for `get_source` API

time:
2013-09-09T17:06:09Z
class:
comments:
key is "index.store.type", not "index.storage.type"

time:
2013-09-09T15:50:41Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
Only pull searcher once during completion stats

The inner call to the completion stats pulled a second searcher
that never got released causing the underlying readers to never
get closed unless the node is shut down. This was triggered
with literally each stats call including the completion stats
even if no completion service was used on the index.

Closes #3652

time:
2013-09-09T15:49:30Z
class:
src/main/java/org/elasticsearch/cluster/ClusterInfo.java
src/main/java/org/elasticsearch/cluster/ClusterInfoService.java
src/main/java/org/elasticsearch/cluster/ClusterModule.java
src/main/java/org/elasticsearch/cluster/DiskUsage.java
src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
src/main/java/org/elasticsearch/cluster/routing/allocation/StartedRerouteAllocation.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDeciders.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AllocationDecidersModule.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
src/main/java/org/elasticsearch/cluster/settings/ClusterDynamicSettingsModule.java
src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/BalanceConfigurationTests.java
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/RandomAllocationDeciderTests.java
comments:
Add AllocationDecider that takes free disk space into account

This commit adds two main pieces, the first is a ClusterInfoService
that provides a service running on the master nodes that fetches the
total/free bytes for each data node in the cluster as well as the
sizes of all shards in the cluster. This information is gathered by
default every 30 seconds, and can be changed dynamically by setting
the `cluster.info.update.interval` setting. This ClusterInfoService
can hopefully be used in the future to weight nodes for allocation
based on their disk usage, if desired.

The second main piece is the DiskThresholdDecider, which can disallow
a shard from being allocated to a node, or from remaining on the node
depending on configuration parameters. There are three main
configuration parameters for the DiskThresholdDecider:

`cluster.routing.allocation.disk.threshold_enabled` controls whether
the decider is enabled. It defaults to false (disabled). Note that the
decider is also disabled for clusters with only a single data node.

`cluster.routing.allocation.disk.watermark.low` controls the low
watermark for disk usage. It defaults to 0.70, meaning ES will not
allocate new shards to nodes once they have more than 70% disk
used. It can also be set to an absolute byte value (like 500mb) to
prevent ES from allocating shards if less than the configured amount
of space is available.

`cluster.routing.allocation.disk.watermark.high` controls the high
watermark. It defaults to 0.85, meaning ES will attempt to relocate
shards to another node if the node disk usage rises above 85%. It can
also be set to an absolute byte value (similar to the low watermark)
to relocate shards once less than the configured amount of space is
available on the node.

Closes #3480

time:
2013-09-09T15:04:50Z
class:
comments:
Fixed a typo on the `get` API spec

time:
2013-09-09T12:24:21Z
class:
src/test/java/org/elasticsearch/test/integration/indices/warmer/LocalGatewayIndicesWarmerTests.java
src/test/java/org/elasticsearch/test/integration/indices/warmer/SimpleIndicesWarmerTests.java
comments:
Fixed typo: renamed test wamer package to warmer

time:
2013-09-09T12:24:21Z
class:
src/test/java/org/apache/lucene/util/AbstractRandomizedTest.java
src/test/java/org/elasticsearch/junit/listeners/LoggingListener.java
src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/test/integration/ElasticSearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/integration/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/integration/ElasticsearchTestCase.java
comments:
Fixed typo: renamed test.listerners package to test.listener

time:
2013-09-09T12:24:21Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/test/java/org/elasticsearch/test/integration/indices/state/OpenCloseIndexTests.java
comments:
Restored log lines to TRACE for notification post alias creation and open/close index
Introduced specific log level for those in OpenCloseIndexTests#testCloseOpenAliasMultipleIndices

time:
2013-09-09T12:24:21Z
class:
src/main/java/org/elasticsearch/common/logging/ESLogger.java
src/main/java/org/elasticsearch/common/logging/jdk/JdkESLogger.java
src/main/java/org/elasticsearch/common/logging/log4j/Log4jESLogger.java
src/main/java/org/elasticsearch/common/logging/slf4j/Slf4jESLogger.java
src/test/java/org/elasticsearch/junit/annotations/TestLogging.java
src/test/java/org/elasticsearch/junit/listerners/LoggingListener.java
src/test/java/org/elasticsearch/test/integration/ElasticsearchTestCase.java
comments:
Added @TestLogging annotation to set a specific level per test method

 It supports multiple logger:level comma separated key value pairs
 Use the _root keyword to set the root logger level
 e.g. @Logging("_root:DEBUG,org.elasticsearch.cluster.metadata:TRACE")
 or just @TestLogging("_root:DEBUG,cluster.metadata:TRACE") since we start the test with -Des.logger.prefix=

time:
2013-09-09T12:00:40Z
class:
comments:
Added the default `_all` value for document type in `get_source` API

time:
2013-09-09T11:36:31Z
class:
comments:
Added the default `_all` value for document type in `get` API

time:
2013-09-09T11:33:46Z
class:
comments:
Added the default index value to the `search` API spec

time:
2013-09-09T11:01:53Z
class:
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
comments:
Use same index name for indexing that is used for creating the index

time:
2013-09-09T09:57:01Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
comments:
Throw IAE if reserved completion suggester chars are used in input

The completion suggester reserves 0x00 and 0xFF as for internal use.
If those chars are used in the input string an IAE is thrown and the
input is rejected.

Closes #3648

time:
2013-09-09T09:56:09Z
class:
comments:
Changed the JSON spec to include the default document API in the `exists` API

time:
2013-09-09T08:53:53Z
class:
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
comments:
Only use one document to test empty shards

time:
2013-09-09T07:29:22Z
class:
src/test/java/org/elasticsearch/test/integration/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/test/integration/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/test/integration/indices/mapping/UpdateMappingTests.java
src/test/java/org/elasticsearch/test/integration/mlt/MoreLikeThisActionTests.java
src/test/java/org/elasticsearch/test/integration/nested/SimpleNestedTests.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/test/integration/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/test/integration/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/test/integration/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/test/integration/termvectors/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/test/integration/termvectors/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/test/integration/termvectors/GetTermVectorTests.java
comments:
Remove createMapped and mapping helpers from AbstractSharedClusterTest

our tests should use the API we have in favor of hard to read / understand
test helpers.
@s1monw I think the field name should be `term` in the lookup2 mapping.  Not a big deal here because of dynamic mapping, but I imagine this could have caused issues if we were expecting an explicit mapping such as not_analyzed, etc.  Maybe tests like this should disable dynamic mapping and set dynamic to strict?

```
assertAcked(prepareCreate("lookup2")
    .setSettings(ImmutableSettings.settingsBuilder().put("index.mapper.dynamic", false))
    .addMapping("type", jsonBuilder().startObject().startObject("type").field("dynamic", "strict").startObject("properties")
    ...
```


time:
2013-09-09T07:16:47Z
class:
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/integration/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
comments:
Beautify SuggestSearchTests.

SuggestSearchTests had tons of duplicate code and didn't use all of the
fancy new integration test helper method.  I've removed a ton of duplicate
code and used as many of the nice test helper method I could think of.

Closes #3611

time:
2013-09-07T22:32:44Z
class:
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
comments:
fix logging level

time:
2013-09-06T19:35:53Z
class:
src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
comments:
field rename

time:
2013-09-06T19:34:08Z
class:
src/main/java/org/elasticsearch/search/SearchHit.java
src/main/java/org/elasticsearch/search/SearchModule.java
src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
src/main/java/org/elasticsearch/search/fetch/matchedqueries/MatchedQueriesFetchSubPhase.java
src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
src/test/java/org/elasticsearch/test/integration/search/matchedqueries/MatchedQueriesTests.java
comments:
Removed matched_filters in favor for matched_queries.

Closes #3644

time:
2013-09-06T19:15:22Z
class:
src/main/java/org/elasticsearch/search/SearchHit.java
src/main/java/org/elasticsearch/search/SearchModule.java
src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
src/main/java/org/elasticsearch/search/fetch/matchedfilters/MatchedQueriesFetchSubPhase.java
src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
src/test/java/org/elasticsearch/test/integration/search/matchedfilters/MatchedQueriesTests.java
comments:
Deprecate the method names `namedFilter` in favor of `namedQueries`.
The reason behind this is that the `_name` support has been extended to queries as well and the name `namedQueries` suggests better that it is applicable to the whole query dsl.

Relates to #3581

time:
2013-09-06T17:04:15Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
comments:
Allow to control the number of processors sizes are based on
Sometimes, one wants to just control the number of processors our different size base calculations for thread pools and network workers are based on, and not use the reported available processor by the OS. Add processors setting, where it can be controlled.

closes #3643
w00t I knew this is going to be useful one day!


time:
2013-09-06T16:23:16Z
class:
src/main/java/org/elasticsearch/common/lucene/docset/DocIdSets.java
comments:
Remember to think about filter caching when upgrading to Lucene 4.5.

time:
2013-09-06T15:56:18Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
src/test/java/org/elasticsearch/test/unit/transport/netty/KeyedLockTests.java
comments:
fix potential blocking of NettyTransport connect and disconnect methods

Currently, in NettyTransport the locks for connecting and disconnecting channels are stored in a ConcurrentMap that has 500 entries. A tread can acquire a lock for an id and the lock returned is chosen on a hash function computed from the id.
Unfortunately, a collision of two ids can cause a deadlock as follows:

Scenario: one master (no data), one datanode (only data node)

DiscoveryNode id of master is X
DiscoveryNode id of datanode is Y

Both X and Y cause the same lock to be returned by NettyTransport#connectLock()

Both are up and running, all is fine until master stops.

Thread 1: The master fault detection of the datanode is notified (onNodeDisconnected()), which in turn leads the node to try and reconnect to master via the callstack titled "Thread 1" below.

-> connectToNode() is called and lock for X is acquired. The method waits for 45s for the cannels to reconnect.

Furthermore, Thread 1 holds the NettyTransport#masterNodeMutex.

Thread 2: The connection fails with an exception (connection refused, see callstack below), because the master shut down already. The exception is handled in NettyTransport#exceptionCaught which calls NettyTransport#disconnectFromNodeChannel. This method acquires the lock for Y (see Thread 2 below).

Now, if Y and X have two different locks, this would get the lock, disconnect the channels and notify thread 1. But since X and Y have the same locks, thread 2 is deadlocked with thread 1 which waits for 45s.

In this time, no thread can acquire the masterNodeMutex (held by thread 1), so the node can, for example, not stop.

This commit introduces a mechanism that assures unique locks for unique ids. This lock is not reentrant and therfore assures that threads can not end up in an infinite recursion (see Thread 3 below for an example on how a thread can aquire a lock twice).
While this is not a problem right now, it is potentially dangerous to have it that way, because the callstacks are complex as is and slight changes might cause unecpected recursions.

Thread 1
----

	owns: Object  (id=114)
	owns: Object  (id=118)
	waiting for: DefaultChannelFuture  (id=140)
	Object.wait(long) line: not available [native method]
	DefaultChannelFuture(Object).wait(long, int) line: 461
	DefaultChannelFuture.await0(long, boolean) line: 311
	DefaultChannelFuture.awaitUninterruptibly(long) line: 285
	NettyTransport.connectToChannels(NettyTransport$NodeChannels, DiscoveryNode) line: 672
	NettyTransport.connectToNode(DiscoveryNode, boolean) line: 609
	NettyTransport.connectToNode(DiscoveryNode) line: 579
	TransportService.connectToNode(DiscoveryNode) line: 129
	MasterFaultDetection.handleTransportDisconnect(DiscoveryNode) line: 195
	MasterFaultDetection.access$0(MasterFaultDetection, DiscoveryNode) line: 188
	MasterFaultDetection$FDConnectionListener.onNodeDisconnected(DiscoveryNode) line: 245
	TransportService$Adapter$2.run() line: 298
	EsThreadPoolExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: 1145
	ThreadPoolExecutor$Worker.run() line: 615
	Thread.run() line: 724

Thread 2
-------

	waiting for: Object  (id=114)
	NettyTransport.disconnectFromNodeChannel(Channel, Throwable) line: 790
	NettyTransport.exceptionCaught(ChannelHandlerContext, ExceptionEvent) line: 495
	MessageChannelHandler.exceptionCaught(ChannelHandlerContext, ExceptionEvent) line: 228
	MessageChannelHandler(SimpleChannelUpstreamHandler).handleUpstream(ChannelHandlerContext, ChannelEvent) line: 112
	DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline$DefaultChannelHandlerContext, ChannelEvent) line: 564
	DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(ChannelEvent) line: 791
	SizeHeaderFrameDecoder(FrameDecoder).exceptionCaught(ChannelHandlerContext, ExceptionEvent) line: 377
	SizeHeaderFrameDecoder(SimpleChannelUpstreamHandler).handleUpstream(ChannelHandlerContext, ChannelEvent) line: 112
	DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline$DefaultChannelHandlerContext, ChannelEvent) line: 564
	DefaultChannelPipeline.sendUpstream(ChannelEvent) line: 559
	Channels.fireExceptionCaught(Channel, Throwable) line: 525
	NioClientBoss.processSelectedKeys(Set<SelectionKey>) line: 110
	NioClientBoss.process(Selector) line: 79
	NioClientBoss(AbstractNioSelector).run() line: 312
	NioClientBoss.run() line: 42
	ThreadRenamingRunnable.run() line: 108
	DeadLockProofWorker$1.run() line: 42
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1145
	ThreadPoolExecutor$Worker.run() line: 615
	Thread.run() line: 724

Thread 3
---------

        org.elasticsearch.transport.netty.NettyTransport.disconnectFromNode(NettyTransport.java:772)
        org.elasticsearch.transport.netty.NettyTransport.access$1200(NettyTransport.java:92)
        org.elasticsearch.transport.netty.NettyTransport$ChannelCloseListener.operationComplete(NettyTransport.java:830)
        org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:427)
        org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:418)
        org.jboss.netty.channel.DefaultChannelFuture.setSuccess(DefaultChannelFuture.java:362)
        org.jboss.netty.channel.AbstractChannel$ChannelCloseFuture.setClosed(AbstractChannel.java:355)
        org.jboss.netty.channel.AbstractChannel.setClosed(AbstractChannel.java:185)
        org.jboss.netty.channel.socket.nio.AbstractNioChannel.setClosed(AbstractNioChannel.java:197)
        org.jboss.netty.channel.socket.nio.NioSocketChannel.setClosed(NioSocketChannel.java:84)
        org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:357)
        org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.eventSunk(NioClientSocketPipelineSink.java:58)
        org.jboss.netty.channel.Channels.close(Channels.java:812)
        org.jboss.netty.channel.AbstractChannel.close(AbstractChannel.java:197)
        org.elasticsearch.transport.netty.NettyTransport$NodeChannels.closeChannelsAndWait(NettyTransport.java:892)
        org.elasticsearch.transport.netty.NettyTransport$NodeChannels.close(NettyTransport.java:879)
        org.elasticsearch.transport.netty.NettyTransport.disconnectFromNode(NettyTransport.java:778)
        org.elasticsearch.transport.netty.NettyTransport.access$1200(NettyTransport.java:92)
        org.elasticsearch.transport.netty.NettyTransport$ChannelCloseListener.operationComplete(NettyTransport.java:830)
        org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:427)
        org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:418)
        org.jboss.netty.channel.DefaultChannelFuture.setSuccess(DefaultChannelFuture.java:362)
        org.jboss.netty.channel.AbstractChannel$ChannelCloseFuture.setClosed(AbstractChannel.java:355)
        org.jboss.netty.channel.AbstractChannel.setClosed(AbstractChannel.java:185)
        org.jboss.netty.channel.socket.nio.AbstractNioChannel.setClosed(AbstractNioChannel.java:197)
        org.jboss.netty.channel.socket.nio.NioSocketChannel.setClosed(NioSocketChannel.java:84)
        org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:357)
        org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:93)
        org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:109)
        org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)
        org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:90)
        org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
        java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        java.lang.Thread.run(Thread.java:724)

time:
2013-09-06T00:25:17Z
class:
src/main/java/org/elasticsearch/common/io/stream/BytesStreamOutput.java
src/test/java/org/elasticsearch/test/unit/common/io/streams/BytesStreamsTests.java
comments:
BytesStreamOutput default size should be 2k instead of 32k
We changed the default of BytesStreamOutput (used in various places in ES) to 32k from 1k with the assumption that most stream tend to be large. This doesn't hold for example when indexing small documents and adding them using XContentBuilder (which will have a large overhead).

Default the buffer size to 2k now, but be relatively aggressive in expanding the buffer when below 256k (double it), and just use oversize (1/8th) when larger to try and minimize garbage and buffer copies.

relates to #3624
closes #3638

time:
2013-09-05T23:46:24Z
class:
src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java
src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
src/main/java/org/elasticsearch/action/get/MultiGetRequest.java
src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
comments:
Not allowing index names in request body for multi-get/search/bulk when indices are already given in url
closes #3636
It looks good. Now I can disallow the index/indices by setting the rest.action.multi.allow_explicit_index to false.


time:
2013-09-05T22:41:14Z
class:
src/main/java/org/elasticsearch/common/compress/lzf/LZFCompressor.java
comments:
On Solaris, default LZF compress type (for transport) can cause segfault
closes #3634

time:
2013-09-05T18:30:22Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
comments:
change to trace level logging

time:
2013-09-05T15:59:52Z
class:
src/main/java/org/elasticsearch/action/support/nodes/TransportNodesOperationAction.java
comments:
improve setting response/failure on nodes actions
we can use the index in the node ids list as the index for the array when we set the response or the exception, removing the need for an index AtomicInteger

time:
2013-09-05T15:21:59Z
class:
src/test/java/org/elasticsearch/test/unit/termvectors/TermVectorUnitTests.java
comments:
Use lucene test framework if low level lucene parts are involved in tests.

Test should never write outside of the test directories.
Hello, word frequency statistics, can filter some document before, in the documentation of the filtered word frequency statistics?I didn't see on the website, the original code seems to also have no?

time:
2013-09-05T15:19:28Z
class:
src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
src/main/java/org/apache/lucene/search/vectorhighlight/XBaseFragListBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XBaseFragmentsBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFastVectorHighlighter.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFieldFragList.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFieldPhraseList.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFieldQuery.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFieldTermStack.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFragListBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFragmentsBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XScoreOrderFragmentsBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XSimpleFieldFragList.java
src/main/java/org/apache/lucene/search/vectorhighlight/XSimpleFragListBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XSimpleFragmentsBuilder.java
src/main/java/org/apache/lucene/search/vectorhighlight/XSingleFragListBuilder.java
src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
src/main/java/org/elasticsearch/search/highlight/vectorhighlight/FragmentBuilderHelper.java
src/main/java/org/elasticsearch/search/highlight/vectorhighlight/SimpleFragmentsBuilder.java
src/main/java/org/elasticsearch/search/highlight/vectorhighlight/SourceScoreOrderFragmentsBuilder.java
src/test/java/org/apache/lucene/search/vectorhighlight/XFastVectorHighlighterTest.java
src/test/java/org/elasticsearch/test/integration/search/highlight/HighlighterSearchTests.java
src/test/java/org/elasticsearch/test/unit/deps/lucene/VectorHighlighterTests.java
comments:
Revert "Add FastVectorHighlighter support for more complex queries."

This reverts commit e943cc81a5cd02e6ef641ad0662f34bda176fb5b.

The more complex queries support causes StackOverflowErrors that
can influence the cluster performance and stability dramatically.
This commit backs out this change to reduce the risk for deep
stacks.

Reverts #3357
Thanks.


time:
2013-09-05T14:52:57Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
comments:
ignore rejected exception when shutting down in cluster service

time:
2013-09-05T14:01:09Z
class:
src/test/java/org/elasticsearch/test/integration/count/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/test/integration/count/simple/SimpleCountTests.java
comments:
Added tests for count api

testDateRangeInQueryString awaits fix (#3625)

time:
2013-09-05T13:05:37Z
class:
src/main/java/org/apache/lucene/util/packed/XAbstractAppendingLongBuffer.java
src/main/java/org/apache/lucene/util/packed/XAppendingPackedLongBuffer.java
src/main/java/org/apache/lucene/util/packed/XMonotonicAppendingLongBuffer.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinals.java
src/main/java/org/elasticsearch/index/fielddata/ordinals/OrdinalsBuilder.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/ordinals/MultiOrdinalsTests.java
comments:
Make the acceptable compression overhead used by MultiOrdinals configurable and default to PackedInts.FASTEST (causing it to byte align).

Closes #3623

Before this commit , this was the output of TermsFacetSearchBenchmark, on my MacBookAir:

```
------------------ SUMMARY -------------------------------
                     name      took    millis
                  terms_s      7.3s        36
              terms_map_s     28.8s       144
                  terms_l     15.9s        79
              terms_map_l     15.5s        77
                 terms_sm        1m       319
             terms_map_sm      4.9m      1491
                 terms_lm      2.7m       825
             terms_map_lm      2.7m       829
          terms_stats_s_l     37.6s       188
         terms_stats_s_lm      2.4m       722
         terms_stats_sm_l      6.5m      1958
------------------ SUMMARY -------------------------------
```

After the change to FASTEST, we have:

```
------------------ SUMMARY -------------------------------
                     name      took    millis
                  terms_s      6.9s        34
              terms_map_s     28.8s       144
                  terms_l     17.4s        87
              terms_map_l     17.6s        88
                 terms_sm       42s       210
             terms_map_sm      4.2m      1287
                 terms_lm      2.3m       714
             terms_map_lm      2.3m       716
          terms_stats_s_l     37.5s       187
         terms_stats_s_lm      1.6m       482
         terms_stats_sm_l      6.1m      1852
------------------ SUMMARY -------------------------------
```

time:
2013-09-05T11:34:12Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
comments:
TransportSearchTypeAction logs used shards under TRACE level

time:
2013-09-05T10:42:38Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
comments:
Minor cleanup to logging messages.

time:
2013-09-05T10:37:33Z
class:
comments:
Removed port range option from discovery.zen.ping.unicast.hosts example.

time:
2013-09-05T10:14:10Z
class:
comments:
[DOCS] Changed the deprecation of custom_boost/score/filters_score
queries to 0.90.4

time:
2013-09-05T09:25:06Z
class:
comments:
[DOCS] Function score was added in 0.90.4 not 1.00.Beta

time:
2013-09-05T08:10:40Z
class:
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
comments:
Return empty completion stats if engine throws an exception

If the index shard is not started yet the underlying engine can
throw an exception since not everything is initialized. This can
happen if a shard is just about starting up or recovering / initalizing
and stats are requested.

Closes #3619

time:
2013-09-04T21:20:56Z
class:
comments:
[DOCS] Fixed fielddata regex syntax

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Missing sort values now works for all field types

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added function score query

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added the human flag

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Tidied up the plugins page and added Graphite and Statsd

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added clarification about global scope in facets

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added fuzzy options to completion suggester

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added wildcard template matching

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added a few clarifications to the docs from the issues list

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added multi-index open/close

time:
2013-09-04T21:20:55Z
class:
comments:
[DOCS] Added "elastics" client for javascript

time:
2013-09-04T21:20:54Z
class:
comments:
[DOCS] Added highlighting to the phrase suggester

time:
2013-09-04T21:20:54Z
class:
comments:
[DOCS] Added docs for term vectors

time:
2013-09-04T21:20:54Z
class:
comments:
[DOCS] Fixed typo

time:
2013-09-04T10:46:43Z
class:
comments:
Allow test output to be configurable via CMD

time:
2013-09-04T09:08:00Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
comments:
Added cluster state version to the debug logging of shards instances used in search.

time:
2013-09-04T08:37:00Z
class:
src/test/java/org/elasticsearch/test/integration/TestCluster.java
comments:
Added client_ prefix to node clients created by TestCluster (client_node_#)

time:
2013-09-04T08:26:18Z
class:
src/test/java/org/elasticsearch/test/integration/TestCluster.java
comments:
Node clients in tests use now the same naming convention as ordinary nodes (node#)

time:
2013-09-03T19:52:50Z
class:
src/main/java/org/elasticsearch/common/Base64.java
src/main/java/org/elasticsearch/common/Classes.java
src/main/java/org/elasticsearch/common/Names.java
src/main/java/org/elasticsearch/common/Strings.java
comments:
Clean up warnings in commons package.

time:
2013-09-03T19:52:50Z
class:
src/main/java/org/elasticsearch/action/index/IndexRequest.java
src/main/java/org/elasticsearch/common/Strings.java
src/main/java/org/elasticsearch/common/UUID.java
src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
src/test/java/org/elasticsearch/benchmark/bloom/BloomBench.java
src/test/java/org/elasticsearch/test/integration/AbstractNodesTests.java
src/test/java/org/elasticsearch/test/integration/TestCluster.java
src/test/java/org/elasticsearch/test/integration/cluster/allocation/ClusterRerouteTests.java
src/test/java/org/elasticsearch/test/stress/fullrestart/FullRestartStressTest.java
src/test/java/org/elasticsearch/test/stress/rollingrestart/RollingRestartStressTest.java
comments:
Remove UUID class in favor of Strings util methods

time:
2013-09-03T19:28:31Z
class:
comments:
[DOCS] Removed outdated new/deprecated version notices

time:
2013-09-03T15:57:11Z
class:
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/common/util/concurrent/ThreadLocals.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
comments:
Removed ThreadLocals class and its references, since it is no longer needed.

time:
2013-09-03T15:09:44Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/PreferPrimaryAllocationTests.java
comments:
Prevent ShardAllocator to modify the unassigned while running allocations

The unassinged list is used to make allocation decisions but is currently
modified during allocation runs which causes primaries to be throttled
during allocation. If this happens newly allocated indices can be stalled
for a long time turning a cluster into a RED state if concurrent relocations
and / or recoveries are happening.

Closes #3610

time:
2013-09-03T14:46:05Z
class:
src/test/java/org/elasticsearch/test/integration/indices/wamer/SimpleIndicesWarmerTests.java
comments:
Improved test

Removed needless delete lines, added log lines and shared ensureGreen calls

time:
2013-09-03T14:28:44Z
class:
comments:
[DOCS] Fixed an out of sequence header in the Groovy docs

time:
2013-09-03T14:16:15Z
class:
comments:
[DOCS] link: prefix not required when using {ref} attributes

time:
2013-09-03T14:15:50Z
class:
comments:
[DOCS] Chunk depth now configurable, so [float] not required

time:
2013-09-03T13:47:57Z
class:
src/test/java/org/elasticsearch/test/integration/plugin/PluginManagerTests.java
comments:
Fixed PluginManagerTests to connect to the right node when checking if the plugin is available

time:
2013-09-03T13:08:43Z
class:
src/test/java/org/elasticsearch/test/integration/plugin/PluginManagerTests.java
comments:
Switched PluginManagerTests to use default plugins location and added check that http connector is working properly

time:
2013-09-03T12:18:04Z
class:
src/test/java/org/elasticsearch/test/integration/rest/helper/HttpClient.java
comments:
Added errorStream null check in HttpClient (used for testing purpose)

time:
2013-09-03T09:58:14Z
class:
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/PreferPrimaryAllocationTests.java
comments:
test for primary allocating over replicas
still marked as await fix, requires investigation

time:
2013-09-03T09:44:56Z
class:
src/test/java/org/elasticsearch/test/integration/plugin/PluginManagerTests.java
comments:
Replaced localhost with 127.0.0.1 in PluginManagerTests

time:
2013-09-03T08:34:32Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
src/test/java/org/elasticsearch/test/integration/plugin/PluginManagerTests.java
comments:
Improved logic that removes top-level folder from archives when needed

Whether we remove the top-level folder from the archive depends now on the zip itself and not on where it was downloaded from. That makes it work installing local files too.

Closes #3582

time:
2013-09-03T08:26:37Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionPostingsFormatTest.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/test/unit/index/mapper/completion/CompletionFieldMapperTests.java
comments:
Add 'min_input_len' to completion suggester

Restrict the size of the input length to a reasonable size otherwise very
long strings can cause StackOverflowExceptions deep down in lucene land.
Yet, this is simply a saftly limit set to `50` UTF-16 codepoints by default.
This limit is only present at index time and not at query time. If prefix
completions > 50 UTF-16 codepoints are expected / desired this limit should be raised.
Critical string sizes are beyone the 1k UTF-16 Codepoints limit.

Closes #3596

time:
2013-09-03T08:19:58Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
comments:
Restructured the transport action code for multi percolate api.

time:
2013-09-02T19:53:00Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
comments:
Previously added logging in TransportRefreshAction caused NPE if search shards had errors (or was not yet started/assigned)
Better formatting for logging in TransportRefreshAction

time:
2013-09-02T15:17:53Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
comments:
Search action now log in debug what shards/nodes were used before moving to second phase
Added  a debug log for executing a refresh request on a shard.

time:
2013-09-02T14:29:49Z
class:
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Added new iteration to RecoveryWhileUnderLoadTests

We want to check whether the issue causing the test to fail would be fixed by an additional refresh or not

time:
2013-09-02T10:16:14Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
comments:
Added log lines to log (debug level) acknowledgements regarding index alias creation and index state change

time:
2013-09-02T08:58:09Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
src/test/java/org/elasticsearch/test/integration/indices/state/OpenCloseIndexTests.java
comments:
Fixed close index when the index is already closed

Closes #3601

time:
2013-09-02T08:30:10Z
class:
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Used ElasticsearchAssertions to check count result in RecoveryWhileUnderLoadTests

time:
2013-09-01T10:58:17Z
class:
comments:
Added IDs to the community clients docs, to control HTML page names

time:
2013-08-31T07:13:54Z
class:
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/RandomAllocationDeciderTests.java
comments:
Allow up to 10% unbalance in random allocator tests

time:
2013-08-30T18:56:23Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/test/java/org/elasticsearch/test/integration/TestCluster.java
src/test/java/org/elasticsearch/test/integration/search/basic/SearchWhileCreatingIndexTests.java
comments:
SearchWhileCreatingIndexTests didn't always supply enough node for write consistency requirements and thus hanged.

Added more debug logging to TransportShardReplicationOperationAction

*Changed* node naming in tests from GUIDs to node# based naming as they are much easier to read

time:
2013-08-30T14:10:53Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Changed expectedOperationsPerItem from AtomicInteger array to AtomicReferenceArray<AtomicInteger>.
Made node stopping / starting less aggressive in RecoveryPercolatorTests.

time:
2013-08-30T12:05:53Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
comments:
Add more trace logging if shard allocation is throttled

time:
2013-08-30T12:02:13Z
class:
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/integration/search/simple/SimpleSearchTests.java
comments:
Added total, successful shard info to search related asserts in ElasticsearchAssertions

Rewrote SimpleSearchTests assertion to use that.

time:
2013-08-30T08:11:45Z
class:
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/RandomAllocationDeciderTests.java
comments:
Added Random test for ShardAllocator.

This test will make random allocation decision on a growing and
shrinking cluster leading to a random distribution of the shards.
After a certain amount of iterations the test allows allocation unless
the same shard is already allocated on a node and balances the cluster
to gain optimal balance.

time:
2013-08-29T22:06:45Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
comments:
Use atomic collections to make sure all of the memory contents are visible from writing to reading thread.

time:
2013-08-29T14:40:38Z
class:
src/main/java/org/elasticsearch/action/support/TransportAction.java
comments:
Execute listeners on current thread if threadpool is shutting down

time:
2013-08-29T14:40:38Z
class:
src/test/java/org/elasticsearch/test/integration/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/unit/index/codec/CodecTests.java
comments:
Force default codec in tests where we rely on the latest lucene defaults
Good catch!

;)


time:
2013-08-29T14:40:38Z
class:
src/main/java/org/elasticsearch/search/suggest/Suggest.java
src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestion.java
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/test/unit/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
comments:
Recheck cutoffScore during phrase_suggest merge.

The goal is to throw out suggestions that only meet the cutoff in some
shards.  This will happen if your input phrase is only contained in a
few shards.  If your shards are unbanced this rechecking can throw out
good suggestions.

Closes #3547.

time:
2013-08-29T14:00:59Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
comments:
Removed unnecessary catch clause.
Improved logging

time:
2013-08-29T12:15:38Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
comments:
Logging shard level multi percolate errors under debug rather than trace

time:
2013-08-29T12:10:49Z
class:
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Added logging and asserts to make it easier to understand potential failures

time:
2013-08-29T10:56:33Z
class:
src/test/java/org/elasticsearch/test/integration/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/integration/indices/analyze/HunspellServiceTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/HunspellTokenFilterFactoryTests.java
comments:
Convert relative paths to URI first in tests to prevent URL encoded paths

If a path to the test classes contains spaces Hunspell tests failed due
to URL encoded paths. This happens on CI builds if you give the build
a name containing a space. This is fixed by first converting to a URI
and created a File object from the URI directly.

time:
2013-08-29T09:38:13Z
class:
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/index/mapper/SourceToParse.java
src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
src/test/java/org/elasticsearch/test/integration/percolator/TTLPercolatorTests.java
comments:
Ignore AlreadyExpiredException exception during when indexing a document on a replica.
The document should just be indexed to stay consistent with the primary shard.

time:
2013-08-29T09:27:01Z
class:
src/test/java/org/elasticsearch/test/integration/percolator/TTLPercolatorTests.java
comments:
Make sure 2 writes happened, so we can check if 2 deletes happen that have been triggered by ttl

time:
2013-08-29T08:29:26Z
class:
comments:
Use a separate build directory for Eclipse.

The fact that Maven and Eclipse share the same build directories can trigger
race conditions when both are trying to build at the same time, eg. if you run
`mvn clean test` while Eclipse is up and running: Eclipse will notice that some
class files are missing and start compiling in parallel with Maven.

time:
2013-08-29T08:27:20Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
comments:
Fixed typo

time:
2013-08-29T08:15:40Z
class:
src/main/java/org/elasticsearch/index/analysis/StemmerTokenFilterFactory.java
comments:
Fixed a typo in the config of light finnish stemmer (old last_finish is still supported for backward compatibility)

Closes #3594

time:
2013-08-28T23:24:34Z
class:
comments:
Migrated documentation into the main repo
Hi @clintongormley , why did you add this line?
It seems to conflict with the "not ignored are .settings" policy that written at above comment.

Hi @tadd 

Good catch. I've made the line more specific: 9f59a85c26e4aef9d65a459039cbce0f017333a0

Thank you!  It looks far better.

@clintongormley Is this an error? Does the delete operation actually **create** an index if it doesn't exist? Doesn't seem to make sense.


time:
2013-08-28T21:31:35Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
src/test/java/org/elasticsearch/test/integration/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/AwarenessAllocationTests.java
comments:
Prevent allocation algorithm from prematurely exiting balance operations

In a special case if allocations from the "heaviest" to the "lighter" nodes is not possible
due to some allocation decider restrictions like zone awareness. if one zone has for instance
less nodes than another zone so one zone is horribly overloaded from a balanced perspective but we
can't move to the "lighter" shards since otherwise the zone would go over capacity.

Closes #3580
Da issn typo :-)


time:
2013-08-28T18:57:39Z
class:
src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java
src/test/java/org/elasticsearch/test/integration/search/simple/SimpleSearchTests.java
comments:
Treat empty prefrence as a `not set` in Plain Operation Routing

An empty preference was causing a AIOOB exception in
PlainOperationRouting. We now check for `null` or `empty` instead of
just `null`

Closes #3591

time:
2013-08-28T18:21:22Z
class:
src/main/java/org/elasticsearch/action/count/CountResponse.java
src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
comments:
Added a status method CountResponse that resolve shard failures into rest status code. That method is now used in RestCountAction to return proper status.

Closes #3585

time:
2013-08-28T13:29:16Z
class:
src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingGatewayAllocator.java
src/main/java/org/elasticsearch/gateway/local/LocalGatewayAllocator.java
comments:
batch failed shards into a single cluster state event
make sure we process as much as possible failed shard events within a single cluster state event callback (similar to what we do with started shards)

time:
2013-08-28T13:24:51Z
class:
src/main/java/org/elasticsearch/index/fielddata/BytesValues.java
comments:
Make BytesValues documentation clearer about BytesRef ownership.

time:
2013-08-28T12:56:26Z
class:
src/test/java/org/elasticsearch/test/integration/percolator/TTLPercolatorTests.java
comments:
no need for flush/optimize

time:
2013-08-28T12:12:07Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
Don't recover a shard if it just failed on this node and wasn't reassigned to this node by master yet.

additional places where we should track failed shards, and call clean as part of the top level calls

time:
2013-08-28T12:12:07Z
class:
src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
comments:
Don't recover a shard if it just failed on this node and wasn't reassigned to this node by master yet.

When recovery of a shard fails on a node, the node sends notification to the master with information about the failure. During the period between the shard failure and the time when notification about the failure reaches the master, any changes in shard allocations can trigger the node with the failed shard to allocate this shard again. This allocation (especially if successful) creates a ripple effect of the shard going through failure/started states in order to match the delayed states processed by master.  Under certain condition, a node involved in this process might generate warning messages: "marked shard as started, but shard has not been created, mark shard as failed".

This fix makes sure that nodes keep track of failed shard allocations and will not try to allocate such shards repeatedly while waiting for the failure notification to be processed by master.

time:
2013-08-28T08:47:39Z
class:
src/test/java/org/elasticsearch/test/integration/search/basic/SearchWhileRelocatingTests.java
comments:
ElasticsearchAssertions.assertHitCount also checks shard failures

time:
2013-08-28T08:42:53Z
class:
src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
src/main/java/org/elasticsearch/index/query/BoolQueryParser.java
src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
src/main/java/org/elasticsearch/index/query/CommonTermsQueryParser.java
src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
src/main/java/org/elasticsearch/index/query/DisMaxQueryParser.java
src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryParser.java
src/main/java/org/elasticsearch/index/query/FieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FieldQueryParser.java
src/main/java/org/elasticsearch/index/query/FilteredQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FilteredQueryParser.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisFieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisFieldQueryParser.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyLikeThisQueryParser.java
src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java
src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java
src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java
src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java
src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
src/main/java/org/elasticsearch/index/query/IdsQueryParser.java
src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MatchQueryParser.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisFieldQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisFieldQueryParser.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryParser.java
src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java
src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
src/main/java/org/elasticsearch/index/query/NestedQueryParser.java
src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java
src/main/java/org/elasticsearch/index/query/QueryParseContext.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java
src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
src/main/java/org/elasticsearch/index/query/RangeQueryParser.java
src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java
src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanFirstQueryParser.java
src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanNearQueryParser.java
src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanNotQueryParser.java
src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanOrQueryParser.java
src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
src/main/java/org/elasticsearch/index/query/SpanTermQueryParser.java
src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
src/main/java/org/elasticsearch/index/query/TermQueryParser.java
src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
src/main/java/org/elasticsearch/index/query/TermsQueryParser.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryBuilder.java
src/main/java/org/elasticsearch/index/query/TopChildrenQueryParser.java
src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java
src/main/java/org/elasticsearch/search/fetch/matchedfilters/MatchedFiltersFetchSubPhase.java
src/test/java/org/elasticsearch/test/integration/search/matchedfilters/MatchedFiltersTests.java
comments:
Added `_name` support to queries.

This extends the named filter support from only filters to also queries.

Closes #3581
Although it's handy to put queries under `namedFilters` too, since we wrap them into filters, I'm not sure this is clear api wise. In fact this leads to returning their names into the same bucket as named filters, called matched filters. Not sure though whether I would prefer to have two buckets `matched_filters` and `matched_queries`, since it's the same functionality.

We can keep named filters and named queries completely separate, to keep a clear distinction, also in the response, so have both a `named_filters` and a `named_queries` part per hit.

In the end of the day whether a `_name` is specified on a query or filter it does the same, just placing the `_name` in the response if a filter or query has matched.

I like the idea of keeping them distinct. This would also enforce the difference between queries and filters for end-users.

++1 on distinct lists.... 

We decided in 1.0.beta to just rename namedFilters to namedQueries and not keep named filter and named queries distinct. We chose the name namedQueries b/c it seems less restricting than namedFilters. Also whether a filter or query is named doesn't really matter, b/c a user is in charge of chosen an unique name.

In 0.90 the name namedFilters will not be changed.


time:
2013-08-28T06:44:10Z
class:
src/test/java/org/elasticsearch/test/integration/search/simple/SimpleSearchTests.java
comments:
Refreshing after green so also recovering replicas will be refreshed.

time:
2013-08-27T17:28:20Z
class:
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/AwarenessAllocationTests.java
comments:
AwarenessAllocationTests must extend ESTestCase in order to respect AwaitsFix annotations

time:
2013-08-27T17:01:54Z
class:
src/main/java/org/elasticsearch/indices/recovery/RecoverySettings.java
src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java
comments:
Recover small files (< 1mb) using a separate threadpool than large files.

Fixes #3576

time:
2013-08-27T16:30:00Z
class:
src/main/java/org/elasticsearch/search/SearchService.java
src/test/java/org/elasticsearch/test/integration/search/basic/SearchWhileRelocatingTests.java
comments:
Fix searching while shard is being relocated

Shard relocation caused queries to fail in the fetch phase either with a
`AlreadyClosedException` or a `SearchContextMissingException`.
This was caused by the `SearchService` releasing the `SearchContext`s via the
superfluous call of `releaseContextsForShard()` when the
Maybe use ElasticsearchAssertions.assertHitCount ? it also reports shard failures when asserting..

made the change and pushed. thanks!


time:
2013-08-27T16:05:42Z
class:
src/test/java/org/elasticsearch/test/integration/cluster/allocation/AwarenessAllocationTests.java
src/test/java/org/elasticsearch/test/unit/cluster/routing/allocation/AwarenessAllocationTests.java
comments:
Added unit tests or zone awareness

time:
2013-08-27T15:03:55Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Fixed extraction of site plugins downloaded from github, so that we skip the top-level folder and we place the files directly under the _site folder

Closes #3551

time:
2013-08-27T11:46:33Z
class:
src/main/java/org/elasticsearch/action/termvector/TransportMultiTermVectorsAction.java
comments:
MultiTermVectorsAction was wrongly registered under mget

time:
2013-08-27T10:25:35Z
class:
src/test/java/org/elasticsearch/test/integration/cluster/allocation/AwarenessAllocationTests.java
comments:
Add more tests for Zone Awareness

time:
2013-08-27T10:03:49Z
class:
src/test/java/org/elasticsearch/junit/listerners/ReproduceInfoPrinter.java
src/test/java/org/elasticsearch/test/integration/ElasticSearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/integration/ElasticsearchLuceneTestCase.java
comments:
Added log info on test finished

time:
2013-08-27T09:48:20Z
class:
src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java
src/main/java/org/elasticsearch/action/admin/indices/status/IndicesStatusResponse.java
src/main/java/org/elasticsearch/http/HttpInfo.java
src/main/java/org/elasticsearch/index/cache/filter/FilterCacheStats.java
src/main/java/org/elasticsearch/index/cache/id/IdCacheStats.java
src/main/java/org/elasticsearch/index/fielddata/FieldDataStats.java
src/main/java/org/elasticsearch/index/flush/FlushStats.java
src/main/java/org/elasticsearch/index/get/GetStats.java
src/main/java/org/elasticsearch/index/indexing/IndexingStats.java
src/main/java/org/elasticsearch/index/merge/MergeStats.java
src/main/java/org/elasticsearch/index/percolator/stats/PercolateStats.java
src/main/java/org/elasticsearch/index/refresh/RefreshStats.java
src/main/java/org/elasticsearch/index/search/stats/SearchStats.java
src/main/java/org/elasticsearch/index/store/StoreStats.java
src/main/java/org/elasticsearch/index/warmer/WarmerStats.java
src/main/java/org/elasticsearch/monitor/fs/FsStats.java
src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
src/main/java/org/elasticsearch/monitor/os/OsInfo.java
src/main/java/org/elasticsearch/monitor/os/OsStats.java
src/main/java/org/elasticsearch/monitor/process/ProcessStats.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionStats.java
src/main/java/org/elasticsearch/transport/TransportStats.java
comments:
Fixed order of parameters when calling byteSizeField and timeValueField methods (introduced with #3432 - support for human readable flag)

time:
2013-08-27T09:05:12Z
class:
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Make sure preference isn't null

time:
2013-08-27T08:46:21Z
class:
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefOrdValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefValComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/NestedWrappableComparator.java
src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/NumberComparatorBase.java
src/main/java/org/elasticsearch/index/fielddata/plain/AbstractBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/search/nested/NestedFieldComparatorSource.java
src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
src/test/java/org/elasticsearch/test/integration/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/AbstractFieldDataImplTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/AbstractNumericFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/AbstractStringFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/DoubleFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/FloatFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/LongFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/NoOrdinalsStringFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/search/nested/NestedSortingTests.java
comments:
Configurable sort order for missing string values.

This commit allows for configuring the sort order of missing values in BytesRef
comparators (used for strings) with the following options:
 - _first: missing values will appear in the first positions,
 - _last: missing values will appear in the last positions (default),
 - <any value>: documents with missing sort value will use the given value when
   sorting.

Since the default is _last, sorting by string value will have a different
behavior than in previous versions of elasticsearch which used to insert missing
value in the first positions when sorting in ascending order.

Implementation notes:
 - Nested sorting is supported through the implementation of
   NestedWrappableComparator,
 - BytesRefValComparator was mostly broken since no field data implementation
   was using it, it is now tested through NoOrdinalsStringFieldDataTests,
 - Specialized BytesRefOrdValComparators have been removed now that the ordinals
   rely on packed arrays instead of raw arrays,
 - Field data tests hierarchy has been changed so that the numeric tests don't
   inherit from the string tests anymore,
 - When _first or _last is used, internally the comparators are told to use
   null or BytesRefFieldComparatorSource.MAX_TERM to replace missing values
   (depending on the sort order),
 - BytesRefValComparator just replaces missing values with the provided value
   and uses them for comparisons,
 - BytesRefOrdValComparator multiplies ordinals by 4 so that it can find
   ordinals for the missing value and the bottom value which are directly
   comparable with the segment ordinals. For example, if the segment values and
   ordinals are (a,1) and (b,2), they will be stored internally as (a,4) and
   (b,8) and if the missing value is 'ab', it will be assigned 6 as an ordinal,
   since it is between 'a' and 'b'. Then if the bottom value is 'abc', it will
   be assigned 7 as an ordinal since if it between 'ab' and 'b'.

Closes #896

time:
2013-08-27T08:45:09Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Simplified percolate reduce logic and the percolator recovery test

time:
2013-08-26T16:01:12Z
class:
src/test/java/org/elasticsearch/test/integration/percolator/ConcurrentPercolatorTests.java
src/test/java/org/elasticsearch/test/integration/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/test/integration/percolator/PercolatorTests.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/test/integration/percolator/TTLPercolatorTests.java
comments:
No test is simple

time:
2013-08-26T16:00:36Z
class:
src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
comments:
Rename multi percolate item actions:
count_percolate -> count
percolate_existing_doc -> percolate
count_percolate_existing_doc -> count

If header contains `id` field, then it will automatically be percolation  an existing document.

time:
2013-08-26T14:37:07Z
class:
src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
src/main/java/org/elasticsearch/action/count/TransportCountAction.java
src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java
src/main/java/org/elasticsearch/percolator/PercolateContext.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/main/java/org/elasticsearch/percolator/QueryCollector.java
src/main/java/org/elasticsearch/search/SearchService.java
src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
src/test/java/org/elasticsearch/test/integration/percolator/SimplePercolatorTests.java
comments:
Added highlighter to percolate api.

The highlighter in the percolate api highlights snippets in the document being percolated. If highlighting is enabled then foreach matching query, highlight snippets will be generated.
All highlight options that are supported via the search api are also supported in the percolate api, since the percolate api embeds the same highlighter infrastructure as the search api.
The `size` option is a required option if highlighting is specified in the percolate api, other than that the `highlight`request part can just be placed in the percolate api request body.

Closes #3574

time:
2013-08-26T13:42:19Z
class:
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Small cleanup

time:
2013-08-26T13:37:18Z
class:
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Only use the client variable and don't use client from client() in percolator test

time:
2013-08-26T13:15:01Z
class:
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshRequest.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/RefreshRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/ShardRefreshRequest.java
src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
src/main/java/org/elasticsearch/action/delete/index/TransportShardDeleteAction.java
src/main/java/org/elasticsearch/action/get/TransportGetAction.java
src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
src/main/java/org/elasticsearch/index/engine/Engine.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java
src/main/java/org/elasticsearch/index/percolator/PercolatorQueriesRegistry.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
src/test/java/org/elasticsearch/test/unit/index/engine/robin/RobinEngineTests.java
comments:
Improve refresh logic when replica move to started
closes #3573

time:
2013-08-26T12:29:40Z
class:
src/test/java/org/elasticsearch/test/integration/search/basic/SearchWhileCreatingIndexTests.java
comments:
improve search while create test
- improve the test to be more re-creatable
- have tests for various number of replica counts, to check if failures are caused by searching on replicas that might not have been refreshed yet
- improve test to test explicit index creation, and index creation caused by index operation
- have an initial search go to _primary, to check if failure fails when searching on replica because it missed a refresh

time:
2013-08-26T07:48:04Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
comments:
Added extra logging

time:
2013-08-26T07:25:21Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsAction.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsItemResponse.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequest.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsRequestBuilder.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsResponse.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsShardRequest.java
src/main/java/org/elasticsearch/action/termvector/MultiTermVectorsShardResponse.java
src/main/java/org/elasticsearch/action/termvector/TransportMultiTermVectorsAction.java
src/main/java/org/elasticsearch/action/termvector/TransportSingleShardMultiTermsVectorAction.java
src/main/java/org/elasticsearch/action/termvector/TransportSingleShardTermVectorAction.java
src/main/java/org/elasticsearch/client/Client.java
src/main/java/org/elasticsearch/client/support/AbstractClient.java
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/index/service/InternalIndexService.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorModule.java
src/main/java/org/elasticsearch/index/termvectors/ShardTermVectorService.java
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/termvector/RestMultiTermVectorsAction.java
src/test/java/org/elasticsearch/test/integration/termvectors/MultiTermVectorsTests.java
comments:
Multi term vector request
--------------------------

This feature allows to retrieve [term vectors](https://github.com/elasticsearch/elasticsearch/issues/3114) for a list of documents. The json request has exactly the same [format](https://github.com/elasticsearch/elasticsearch/issues/3484) as the ```_termvectors``` endpoint

It use it, call

```
curl -XGET 'http://localhost:9200/index/type/_mtermvectors' -d '{
    "fields": [
        "field1",
        "field2",
        ...
    ],
    "ids": [
        "docId1",
        "docId2",
        ...
    ],
    "offsets": false|true,
    "payloads": false|true,
    "positions": false|true,
    "term_statistics": false|true,
    "field_statistics": false|true
}'

```

The return format is an array, each entry of which conatins the term vector response for one document:

```
{
   "docs": [
      {
         "_index": "index",
         "_type": "type",
         "_id": "docId1",
         "_version": 1,
         "exists": true,
         "term_vectors": {
         	...
         }
      },
      {
         "_index": "index",
         "_type": "type",
         "_id": "docId2",
         "_version": 1,
         "exists": true,
         "term_vectors": {
         ...
         }
      }
   ]
}
```

Note that, like term vectors, the mult term vectors request will silenty skip over documents that have no term vectors stored in the index and will simply return an empty response in this case.

Closes #3536
Hello, Elasticsearch MultiTermVectors can filter first, then the word frequency statistics of the filtered information?

time:
2013-08-26T07:25:21Z
class:
src/main/java/org/elasticsearch/action/termvector/TermVectorFields.java
src/main/java/org/elasticsearch/action/termvector/TermVectorRequest.java
src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java
src/main/java/org/elasticsearch/action/termvector/TermVectorWriter.java
src/main/java/org/elasticsearch/rest/action/termvector/RestTermVectorAction.java
src/test/java/org/elasticsearch/test/integration/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/test/integration/termvectors/AbstractTermVectorTests.java
src/test/java/org/elasticsearch/test/integration/termvectors/GetTermVectorCheckDocFreqTests.java
src/test/java/org/elasticsearch/test/integration/termvectors/GetTermVectorTests.java
src/test/java/org/elasticsearch/test/unit/termvectors/TermVectorUnitTests.java
comments:
Refactor term vector api

This is necessary to allow adding a mult term vector request

time:
2013-08-25T19:50:04Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Don't reduce twice if failure occurs.

time:
2013-08-24T07:08:39Z
class:
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Make sure all shards are refreshed during recovery test

time:
2013-08-23T22:07:57Z
class:
comments:
upgrade to joda 2.3

time:
2013-08-23T20:03:14Z
class:
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
comments:
use our abort policy in the scheduler thread pool

time:
2013-08-23T19:33:14Z
class:
src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
comments:
remove unused variable

time:
2013-08-23T18:57:53Z
class:
src/test/java/org/elasticsearch/test/integration/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Don't assert a second time if awaitBusy returned successfully

time:
2013-08-23T17:24:47Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/main/java/org/elasticsearch/common/util/concurrent/AbstractRunnable.java
src/main/java/org/elasticsearch/common/util/concurrent/EsAbortPolicy.java
src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
src/main/java/org/elasticsearch/common/util/concurrent/SizeBlockingQueue.java
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
src/test/java/org/elasticsearch/test/integration/threadpool/SimpleThreadPoolTests.java
src/test/java/org/elasticsearch/test/unit/common/util/concurrent/EsExecutorsTests.java
src/test/java/org/elasticsearch/test/unit/threadpool/UpdateThreadPoolSettingsTests.java
comments:
Setting index/bulk thread pools with queue_size can cause replica shard failures
closes #3526

time:
2013-08-23T16:04:53Z
class:
src/test/java/org/elasticsearch/test/integration/indices/store/IndicesStoreTests.java
comments:
Use awaiBusy rather than a tight loop in IndicesStoreTests

time:
2013-08-23T16:04:53Z
class:
src/test/java/org/elasticsearch/test/integration/recovery/RecoveryWhileUnderLoadTests.java
comments:
Improve assertion and busy waiting for RecoveryWhileUnterLoadTests

time:
2013-08-23T16:04:53Z
class:
src/test/java/org/elasticsearch/test/integration/cluster/ClusterServiceTests.java
comments:
Wait for consistent view on both clients in ClusterServiceTests

time:
2013-08-23T16:04:53Z
class:
src/test/java/org/apache/lucene/search/vectorhighlight/XFastVectorHighlighterTest.java
src/test/java/org/elasticsearch/test/integration/ElasticSearchThreadFilter.java
src/test/java/org/elasticsearch/test/integration/ElasticSearchTokenStreamTestCase.java
src/test/java/org/elasticsearch/test/integration/ElasticsearchLuceneTestCase.java
src/test/java/org/elasticsearch/test/integration/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionTokenStreamTest.java
src/test/java/org/elasticsearch/test/unit/common/lucene/uid/VersionsTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/CJKFilterFactoryTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/CharFilterTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/KeepFilterFactoryTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/LimitTokenCountFilterFactoryTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/NGramTokenizerFactoryTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/PatternCaptureTokenFilterTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/ShingleTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/StopAnalyzerTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/WordDelimiterTokenFilterFactoryTests.java
src/test/java/org/elasticsearch/test/unit/index/analysis/commongrams/CommonGramsTokenFilterFactoryTests.java
comments:
Introduce base test classes to share thread scope annotations

Currently we run unittests with clusters running in the background
that can potentiallly spawn threads causeing the thread leak control
to fire off in tests that don't use the test cluster. This commit
introduces some base classes for that purpose shadowning lucene test
framework classes adding the approriate ThreadScope.

time:
2013-08-23T16:04:53Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
src/main/java/org/elasticsearch/indices/cache/filter/IndicesFilterCache.java
src/main/java/org/elasticsearch/transport/TransportService.java
comments:
Add ESAbortPolicy to cached pools

All ES ThreadPools / Executors should use the ESAbortPolicy or at least
one that throws the ESRejectedExecutionException.

time:
2013-08-23T16:04:52Z
class:
src/test/java/org/elasticsearch/test/integration/ElasticsearchTestCase.java
src/test/java/org/elasticsearch/test/integration/mlt/MoreLikeThisActionTests.java
comments:
Randomize numeric types in MLT test and apply mapping ahead of time.

time:
2013-08-23T14:04:00Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
comments:
add additional method for setting combine mode with CombineFunction parameter

time:
2013-08-23T14:03:23Z
class:
src/main/java/org/elasticsearch/index/query/QueryBuilders.java
src/main/java/org/elasticsearch/index/query/functionscore/ScoreFunctionBuilders.java
src/test/java/org/elasticsearch/test/integration/percolator/SimplePercolatorTests.java
src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/test/integration/search/customscore/CustomScoreSearchTests.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/RandomScoreFunctionTests.java
src/test/java/org/elasticsearch/test/integration/search/rescore/QueryRescorerTests.java
src/test/java/org/elasticsearch/test/integration/search/sort/SimpleSortTests.java
src/test/java/org/elasticsearch/test/unit/index/query/SimpleIndexQueryParserTests.java
comments:
add builders for nicer java api

This commit and the previous 10 commits close issue 3533.

Closes #3533

time:
2013-08-23T12:44:34Z
class:
src/test/java/org/elasticsearch/test/integration/search/customscore/CustomScoreSearchTests.java
comments:
format code

time:
2013-08-23T12:44:34Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/exp/ExponentialDecayFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/gauss/GaussDecayFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/lin/LinearDecayFunctionBuilder.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/FunctionScorePluginTests.java
comments:
rename reference -> origin

time:
2013-08-23T12:44:34Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunction.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/exp/ExponentialDecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/gauss/GaussDecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/lin/LinearDecayFunctionParser.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
comments:
rename scale_weight -> decay

time:
2013-08-23T12:44:22Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/exp/ExponentialDecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/gauss/GaussDecayFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/lin/LinearDecayFunctionParser.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/FunctionScorePluginTests.java
comments:
Add offset to decay function score

Docs within the offset will be scored with 1.0, decay only starts after
offset is reached.

time:
2013-08-23T12:44:01Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
src/main/java/org/elasticsearch/index/query/CustomFiltersScoreQueryParser.java
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
src/test/java/org/elasticsearch/test/integration/search/customscore/CustomScoreSearchTests.java
comments:
rename 'total' to 'sum', both enum and for query

time:
2013-08-23T12:44:01Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/CombineFunction.java
src/main/java/org/elasticsearch/common/lucene/search/function/ScriptScoreFunction.java
src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
src/test/java/org/elasticsearch/test/integration/search/rescore/QueryRescorerTests.java
comments:
add more combine functions and rename PLAIN to REPLACE

time:
2013-08-23T12:43:54Z
class:
src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
comments:
make GeoPoint parsable in lat/lon json format

time:
2013-08-23T11:55:14Z
class:
src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java
comments:
format code

time:
2013-08-23T11:55:14Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java
src/test/java/org/elasticsearch/test/integration/search/rescore/QueryRescorerTests.java
comments:
make mult default boost mode

always multiply query score to function score. For script score
functions, this means that boost_mode has to be set to `plain` if
'function_score' should behave like 'custom_score'

time:
2013-08-23T11:55:14Z
class:
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryParser.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/DecayFunctionScoreTests.java
comments:
add boost_mode to rest interface

allow user to set combine functions explicitely via boost_mode variable.

time:
2013-08-23T11:55:14Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/BoostScoreFunction.java
src/main/java/org/elasticsearch/common/lucene/search/function/CombineFunction.java
src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java
src/main/java/org/elasticsearch/common/lucene/search/function/RandomScoreFunction.java
src/main/java/org/elasticsearch/common/lucene/search/function/ScoreFunction.java
src/main/java/org/elasticsearch/common/lucene/search/function/ScriptScoreFunction.java
src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
src/test/java/org/elasticsearch/test/integration/search/customscore/CustomScoreSearchTests.java
comments:
Fix inconsistent usage of ScriptScoreFunction in FiltersFunctionScoreQuery

This commit fixes inconsistencies in `function_score` and `filters_function_score`
using scripts, see issue #3464

The method 'ScoreFunction.factor(docId)' is removed completely, since the name
suggests that this method actually computes a factor which was not the case.
Multiplying the computed score is now handled by 'FiltersFunctionScoreQuery'
and 'FunctionScoreQuery' and not implicitely performed in
'ScoreFunction.factor(docId, subQueryScore)' as was the case for 'BoostScoreFunction'
and 'DecayScoreFunctions'.

This commit also fixes the explain function for FiltersFunctionScoreQuery. Here,
the influence of the maxBoost was never printed. Furthermore, the queryBoost was
printed as beeing multiplied to the filter score.

Closes #3464

time:
2013-08-23T11:20:29Z
class:
comments:
Dont write pidfile twice on startup

There is no need to write the pidfile in the bin/elasticsearchshell script
as this happens already in the java code.

Also cleaning up the bin/elasticsearch shell script a bit (no need to return
an error code when exec is called, as this forks and exits the shell script
immediately).

Closes #3529
Closes #1745

time:
2013-08-23T10:15:47Z
class:
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
comments:
cleanup removable of reject_policy

time:
2013-08-23T09:27:12Z
class:
comments:
Debian init script: Add debian default java location

Adding /usr/lib/jvm/default-java to JAVA_HOME candidates to check

Closes #3500

time:
2013-08-23T08:04:13Z
class:
src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java
comments:
Added test for verifying the id cache size if the clear cache api is invoked.

time:
2013-08-23T07:55:51Z
class:
src/main/java/org/elasticsearch/index/cache/id/simple/SimpleIdCache.java
comments:
Call onRemoval of shard IdCache during clear.

This looks like a copy/paste issue where onCached was being called
rather than onRemoval. This should fix the ID cache stats not being
correct after a call to /_cache/clear?id_cache=true

time:
2013-08-23T00:48:43Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/RandomScoreFunction.java
src/main/java/org/elasticsearch/index/query/functionscore/random/RandomScoreFunctionParser.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/RandomScoreFunctionTests.java
comments:
random_score function - Added the index name and shard id to the randomization, and improved the PRNG itself

Closes #3559
Why not using ESLogger in tests?
It's not really a concern here because this test is marked as Ignore.

It's not a test but just a small script do show the distribution of the rand.... it's here so we won't need to write it again in case we change the prng


time:
2013-08-22T18:59:31Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
src/test/java/org/elasticsearch/test/unit/cluster/settings/ClusterSettingsTests.java
comments:
ClusterUpdateSettingsAction will hang if no changes were made

 Closes #3560

time:
2013-08-22T11:16:00Z
class:
src/main/java/org/elasticsearch/cloud/azure/AzureComputeService.java
src/main/java/org/elasticsearch/cloud/azure/AzureModule.java
src/main/java/org/elasticsearch/cloud/azure/AzureSettingsFilter.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscovery.java
src/main/java/org/elasticsearch/discovery/azure/AzureDiscoveryModule.java
src/main/java/org/elasticsearch/discovery/azure/AzureUnicastHostsProvider.java
src/main/java/org/elasticsearch/plugin/cloud/azure/CloudAzurePlugin.java
src/test/java/AzureSimpleTest.java
comments:
Create elasticsearch-cloud-azure project

time:
2013-08-22T09:59:25Z
class:
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionPostingsFormatTest.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
comments:
Prevent NPE if all docs for the field are pruned during merge

During segment merges FieldConsumers for all fields from the source
segments are created. Yet, if all documents that have a value in a
certain field  are deleted / pruned during the merge the FieldConsumer
will not be called at all causing the internally used FST Builder to
return `null` from it's `build()` method. This means we can't store
it and run potentially into a NPE. This commit adds handling for
this corner case both during merge and during suggest phase since
we also don't have a Lookup instance for this segments field.

Closes #3555

time:
2013-08-21T21:57:15Z
class:
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Properly reduce in onFailure

time:
2013-08-21T15:44:08Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Plugin Manager can not download _site plugins from github
Sounds like github changes a bit download url for master zip file.

From `https://github.com/username/reponame/zipball/master` to `https://github.com/username/reponame/archive/master.zip`.

We need to update plugin manager to reflect that change.

In the meantime, we invite users having this issue to use:

```sh
bin/plugin -install reponame -url https://github.com/username/reponame/archive/master.zip
```

For example:

```sh
bin/plugin -install paramedic -url https://github.com/karmi/elasticsearch-paramedic/archive/master.zip
```

Closes #3551
Is this valid?  I can install a plugin fine on 019.3 from the zipball url, but when I use a build of master and it downloads from the archive url plugins don't work correctly.  On master, the plugin is extracted into a sub-folder, ie.  plugins/head/_site/elasticsearch-head-master/ so the index.html file is not being found.

Once again, thanks a lot for pointing this out Matt! I'm looking into it.

Verified that:

```
curl -I "https://github.com/karmi/elasticsearch-paramedic/archive/master.zip"
```

works fine, redirects to https://codeload.github.com/karmi/elasticsearch-paramedic/zip/master.

It looks like the url user/repo/zipball/master is now working. It wasn't working back when this issue was opened, therefore we changed the github url where we get the archive from. Unfortunately the structure of the archive is slightly different when downloaded from the new url, since it contains a subfolder that has a slightly different naming, which we relied on in order to strip that part of the path from every zip entry and put all the files directly under the _site folder. To be more specific, the archives contain now a `repo-master` top-level folder, while using the other address the top-level folder is `user-repo-hash`.

We would like to keep the new adopted url format (user/repo/archive/master.zip) since it seems more future-proof, but we need to adapt the zip extraction process too in order for this to work properly.

Going to reopen the issue.


time:
2013-08-21T14:08:00Z
class:
src/main/java/org/elasticsearch/plugins/PluginManager.java
comments:
Plugin Manager can not download _site plugins from github
Sounds like github changes a bit download url for master zip file.

From `https://github.com/username/reponame/zipball/master` to `https://codeload.github.com/username/reponame/zip/master`.

We need to update plugin manager to reflect that change.

In the meantime, we invite users having this issue to use:

```sh
bin/plugin -install reponame -url https://codeload.github.com/username/reponame/zip/master
```

For example:

```sh
bin/plugin -install paramedic -url https://codeload.github.com/karmi/elasticsearch-paramedic/zip/master
```

Closes #3551

time:
2013-08-21T13:33:52Z
class:
src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContentGenerator.java
src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContentGenerator.java
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/test/unit/common/xcontent/builder/BuilderRawFieldTests.java
comments:
Completion Suggester: Allow payload to be a value
closes #3550

time:
2013-08-21T12:25:49Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
comments:
Checking for paylods as JSON objects in completion suggester

If the payload is not a JSON object on indexation, an exception will be thrown.

time:
2013-08-21T11:15:38Z
class:
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequestBuilder.java
src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
src/main/java/org/elasticsearch/index/shard/service/IndexShard.java
src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java
src/main/java/org/elasticsearch/indices/InternalIndicesService.java
src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/main/java/org/elasticsearch/search/suggest/completion/Completion090PostingsFormat.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionStats.java
src/test/java/org/elasticsearch/test/integration/indices/stats/SimpleIndexStatsTests.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
comments:
Expose size statistics for completion suggest

In order to determine how many RAM the completion suggest structures will eat up, this data should be exposed.

Closes #3522

time:
2013-08-21T09:57:47Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:55:59Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:55:28Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:54:57Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:54:28Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:53:56Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:53:21Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:52:44Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:49:10Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:46:13Z
class:
comments:
Create CONTRIBUTING.md

time:
2013-08-21T09:27:32Z
class:
comments:
Adding Contributing guidelines

time:
2013-08-20T20:26:42Z
class:
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
Smarter default to `index.index_concurrency`
closes #3546

time:
2013-08-20T20:17:26Z
class:
src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
comments:
Bound processor size based cals to 32
We use number of processors to choose default thread pool sizes, and number of workers in networking (for HTTP and transport). Bound it to max at 32 by default as a safety measure to create too many threads.

This relates to #3478, where we set the default to 24, but 32 is probably a better default.

closes #3545

time:
2013-08-20T17:09:14Z
class:
comments:
prepare for next development iteration

time:
2013-08-20T16:57:35Z
class:
comments:
prepare release elasticsearch-mapper-attachments-1.9.0

time:
2013-08-20T16:31:06Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
src/test/java/org/elasticsearch/index/mapper/xcontent/EncryptedDocMapperTest.java
src/test/java/org/elasticsearch/plugin/mapper/attachments/test/MultipleAttachmentIntegrationTests.java
comments:
Ignore encrypted documents
Original request:
        I am sending multiple pdf, word etc. attachments in one documents to be indexed.

        Some of them (pdf) are encrypted and I am getting a MapperParsingException caused by org.apache.tika.exception.TikaException: Unable to extract PDF content cause by
        org.apache.pdfbox.exceptions.WrappedIOException: Error decrypting document.

        I was wondering if the attachment mapper could expose some switch to ignore the documents it can not extract?

 As we now have option `ignore_errors`, we can support it. See #38 relative to this option.

Closes #18.

time:
2013-08-20T15:54:34Z
class:
src/main/java/org/apache/lucene/search/vectorhighlight/XFieldPhraseList.java
src/main/java/org/apache/lucene/search/vectorhighlight/XFieldQuery.java
src/test/java/org/apache/lucene/search/vectorhighlight/XFastVectorHighlighterTest.java
comments:
Prevent FVH from entering a very long running loop on large docs with high freq phrase terms.

Terminate phrase searches early if max phrase window is exceeded in
FastVectorHighlighter to prevent very long running phrase
extraction if phrase terms are high frequent. See LUCENE-5182

Closes #3543

time:
2013-08-20T15:28:11Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
comments:
Tika may "hang up" client application
Sometimes Tika may crash while parsing some files.  In this case it may generate just runtime errors (Throwable), not  TikaException.
But there is no catch clause for  Throwable in the AttachmentMapper.java :

        String parsedContent;
        try {
            // Set the maximum length of strings returned by the parseToString method, -1 sets no limit
            parsedContent = tika().parseToString(new FastByteArrayInputStream(content), metadata, indexedChars);
        } catch (TikaException e) {
            throw new MapperParsingException("Failed to extract [" + indexedChars + "] characters of text for [" + name + "]", e);
        }

As a result,  tika() may hang up the whole application.
(we have some pdf-files that "hang up" Elastic client if you try to parse them using mapper-attahcment plugin)

We propose the following fix:

        String parsedContent;
        try {
            // Set the maximum length of strings returned by the parseToString method, -1 sets no limit
            parsedContent = tika().parseToString(new FastByteArrayInputStream(content), metadata, indexedChars);
        } catch (Throwable e) {
            throw new MapperParsingException("Failed to extract [" + indexedChars + "] characters of text for [" + name + "]", e);
        }

(just replace TikaException with Throwable  it works for our cases)

Thank you!
Closes #21.

time:
2013-08-20T14:35:52Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
src/test/java/org/elasticsearch/index/mapper/xcontent/DateAttachmentMapperTests.java
comments:
Mapper plugin overwrite date mapping
If you define some specific mapping for your file content, such as the following:

```javascript
{
    "person": {
        "properties": {
            "file": {
                "type": "attachment",
                "path": "full",
                "fields": {
                    "date": { "type": "string" }
                }
            }
        }
    }
}
```

And then, if you ask back the mapping, you get:

```javascript
{
   "person":{
      "properties":{
         "file":{
            "type":"attachment",
            "path":"full",
            "fields":{
               "file":{
                  "type":"string"
               },
               "author":{
                  "type":"string"
               },
               "title":{
                  "type":"string"
               },
               "name":{
                  "type":"string"
               },
               "date":{
                  "type":"date",
                  "format":"dateOptionalTime"
               },
               "keywords":{
                  "type":"string"
               },
               "content_type":{
                  "type":"string"
               }
            }
         }
      }
   }
}
```

All your settings have been overwrited by the mapper plugin.

See also issue #22 where the issue was found.

Closes #39.

time:
2013-08-20T14:15:18Z
class:
comments:
Update readme with release dates

time:
2013-08-20T14:03:31Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MetadataMapperTest.java
comments:
Add content_length metadata
We now generate `content_length` field field based on file size.
Closes #26.

time:
2013-08-20T13:52:14Z
class:
src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java
comments:
Share shards computation logic between searchShards and searchShardsCount

time:
2013-08-20T12:19:08Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/test/java/org/elasticsearch/test/integration/search/query/SimpleQueryTests.java
comments:
when doing range queries within a query_string query, the range terms should only be lowercased if the field is not numeric

fixes #3540

time:
2013-08-20T11:43:36Z
class:
src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
src/main/java/org/elasticsearch/rest/action/support/RestXContentBuilder.java
comments:
Renamed readable_format flag to human

Closes #3541

time:
2013-08-20T10:34:33Z
class:
src/test/java/org/elasticsearch/index/mapper/xcontent/MetadataMapperTest.java
comments:
In test for #38, we should check the real file name as we have it :-).

time:
2013-08-20T10:26:49Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MetadataMapperTest.java
comments:
Don't reject full document in case of invalid metadata
From original PR #17 from @fcamblor

If you try to index a document with an invalid metadata, the full document is rejected.

For example:

```html
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html lang="fr">
<head>
<title>Hello</title>
<meta name="date" content="">
<meta name="Author" content="kimchy">
<meta name="Keywords" content="elasticsearch,cool,bonsai">
</head>
<body>World</body>
</html>
```

has a non parseable date.

This fix add a new option that ignore parsing errors `"index.mapping.attachment.ignore_errors":true` (default to `true`).

Closes #17, #38.

time:
2013-08-19T23:18:36Z
class:
src/main/java/org/elasticsearch/rest/action/RestActionModule.java
src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
comments:
Add the /_cat/count and /_cat/count/{index} API.

The cat count API allows retrieving the count of all docs in the
cluster, or docs in specific indices, in a human-readable format.

time:
2013-08-19T16:59:48Z
class:
src/main/java/org/elasticsearch/action/ActionModule.java
src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
src/main/java/org/elasticsearch/action/percolate/PercolateShardRequest.java
src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java
src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardOperationRequest.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/test/java/org/elasticsearch/test/integration/percolator/MultiPercolatorTests.java
src/test/java/org/elasticsearch/test/integration/percolator/RecoveryPercolatorTests.java
comments:
Improved multi percolate api, to bundle all the requests by shard into one shard level request instead of sending each percolate request separately to the shards.

time:
2013-08-19T15:57:22Z
class:
src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java
src/test/java/org/elasticsearch/test/unit/common/xcontent/support/XContentHelperTests.java
comments:
XContentHelper.mergeDefaults with single key object list ([ { key: .. } , {key : ... } .. ] ) didn't add defaults which were not already in content

 Closes #3538

time:
2013-08-19T15:39:24Z
class:
src/test/java/org/elasticsearch/test/integration/routing/AliasRoutingTests.java
comments:
Added test for #3268 and comments to test for #2682

time:
2013-08-19T15:39:24Z
class:
src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java
comments:
Fix search shards count method when targeting concrete and routing-aliased indices

time:
2013-08-19T14:31:59Z
class:
src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java
src/test/java/org/elasticsearch/test/integration/termvectors/GetTermVectorTestsCheckDocFreq.java
comments:
Change response format of term vector endpoint

This commit changes the response format of the term vectors
to be consistent with the response format of the analyze endpoint.

```
{
   "_index": "test",
   "_type": "type1",
   "_id": "1",
   "_version": 1,
   "exists": true,
   "term_vectors": {
      "field_with_positions_offsets": {
         "field_statistics": {..},
         "terms": {
            "evil": {
               "term_freq": 2,
               "pos": [ 4 , 7 ],
               "start": [ 17, 40 ],
               "end": [ 21 , 44 ]
            },
            "orthodontist": {
               "term_freq": 1,
               "pos": [ 5 ]
               ],
               "start": [ 22 ],
               "end": [ 34]
            }
         }
      }
   }
}
```

becomes

```
{
   "_index": "test",
   "_type": "type1",
   "_id": "1",
   "_version": 1,
   "exists": true,
   "term_vectors": {
      "field_with_positions_offsets": {
         "field_statistics": {..},
         "terms": {
            "evil": {
               "term_freq": 2,
               "tokens": [
                   { "position": 4, "start_offset": 17, "end_offset" : 21 },
                   { "position": 7, "start_offset": 40, "end_offset" : 44 }
               ]
            },
            "orthodontist": {
               "term_freq": 1,
               "tokens" : [ { "position": 5 , "start_offset" : 22, "end_offset" : 34 } ]
            }
         }
      }
   }
}
```

Closes issue #3484

time:
2013-08-19T13:51:10Z
class:
src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
src/test/java/org/elasticsearch/test/integration/indices/mapping/SimpleGetMappingsTests.java
comments:
GetMapping failed when index had no mapping (yet)

Closes #3534

time:
2013-08-19T13:01:14Z
class:
src/main/java/org/elasticsearch/common/lucene/search/Queries.java
src/test/java/org/elasticsearch/test/unit/index/query/SimpleIndexQueryParserTests.java
comments:
use the now publicly available getDisjuncts

time:
2013-08-19T12:07:13Z
class:
src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
comments:
Switched all catch (Exception e) to catch (Throwable e)

time:
2013-08-19T11:41:21Z
class:
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
comments:
added a top level try catch for threaded operations. Exception which bubbled up could cause requests to hang.

time:
2013-08-19T09:01:02Z
class:
src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java
src/test/java/org/elasticsearch/index/mapper/xcontent/MultifieldAttachmentMapperTests.java
comments:
Mapper plugin overwrites multifield mapping
If you define some specific mapping for your file content, such as the following:

```javascript
{
    "person": {
        "properties": {
            "file": {
                "type": "attachment",
                "path": "full",
                "fields": {
                    "file": {
                        "type": "multifield",
                        "fields": {
                            "file": { "type": "string" },
                            "suggest": { "type": "string" }
                        }
                    }
                }
            }
        }
    }
}
```

And then, if you ask back the mapping, you get:

```javascript
{
   "person":{
      "properties":{
         "file":{
            "type":"attachment",
            "path":"full",
            "fields":{
               "file":{
                  "type":"string"
               },
               "author":{
                  "type":"string"
               },
               "title":{
                  "type":"string"
               },
               "name":{
                  "type":"string"
               },
               "date":{
                  "type":"date",
                  "format":"dateOptionalTime"
               },
               "keywords":{
                  "type":"string"
               },
               "content_type":{
                  "type":"string"
               }
            }
         }
      }
   }
}
```

All your settings have been overwrited by the mapper plugin.

Closes #37.

time:
2013-08-19T08:18:51Z
class:
src/test/java/org/elasticsearch/test/integration/indices/store/SimpleDistributorTests.java
comments:
increase (use default) timeout to green in test

time:
2013-08-18T20:28:51Z
class:
src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java
src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java
src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java
src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
src/main/java/org/elasticsearch/gateway/fs/FsGateway.java
src/main/java/org/elasticsearch/indices/recovery/RecoverySettings.java
src/main/java/org/elasticsearch/threadpool/ThreadPool.java
src/test/java/org/elasticsearch/test/integration/threadpool/SimpleThreadPoolTests.java
src/test/java/org/elasticsearch/test/unit/common/util/concurrent/EsExecutorsTests.java
src/test/java/org/elasticsearch/test/unit/common/util/concurrent/PrioritizedExecutorsTests.java
src/test/java/org/elasticsearch/test/unit/threadpool/UpdateThreadPoolSettingsTests.java
comments:
Thread Pool: Remove blocking type option
The blocking thread pool type is not recommended to be used, since it will end up blocking the IO thread most times when executing, which is not recommended (other operations will then stall as well).
closes #3531

time:
2013-08-18T09:05:21Z
class:
src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java
src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
src/test/java/org/elasticsearch/test/integration/indices/mapping/UpdateMappingTests.java
comments:
Changed the default of SourceFieldMapper's includes & excludes to be null, to support a "not specified" state, which is important now that they are update-able & merge-able

time:
2013-08-18T06:39:11Z
class:
src/test/java/org/elasticsearch/test/integration/search/functionscore/RandomScoreFunctionTests.java
comments:
Fix RandomScoreFunctionTests to be more reproducible.

time:
2013-08-17T21:42:01Z
class:
src/test/java/org/elasticsearch/test/integration/search/functionscore/RandomScoreFunctionTests.java
comments:
fixed RandomScoreFunctionTests

time:
2013-08-17T20:25:35Z
class:
src/main/java/org/elasticsearch/common/lucene/search/function/RandomScoreFunction.java
src/main/java/org/elasticsearch/index/query/QueryBuilders.java
src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreModule.java
src/main/java/org/elasticsearch/index/query/functionscore/random/RandomScoreFunctionBuilder.java
src/main/java/org/elasticsearch/index/query/functionscore/random/RandomScoreFunctionParser.java
src/main/java/org/elasticsearch/index/query/functionscore/script/ScriptScoreFunctionBuilder.java
src/test/java/org/elasticsearch/test/integration/search/functionscore/RandomScoreFunctionTests.java
src/test/java/org/elasticsearch/test/integration/search/query/SimpleQueryTests.java
comments:
Added support for random_score function:

 * can be used to return matching results in random order

 Closes #1170

time:
2013-08-17T11:43:23Z
class:
src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
comments:
Fix small javadoc typos for IndexShardRoutingTable

time:
2013-08-17T06:25:34Z
class:
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
comments:
reduce max replica in test to stabelize with low number of available nodes

time:
2013-08-16T19:58:38Z
class:
src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
comments:
Added a debug log when sending an mapping updated request to master

time:
2013-08-16T19:56:39Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryAndFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollQueryAndFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollScanAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java
src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java
src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeOperationAction.java
src/main/java/org/elasticsearch/action/support/nodes/TransportNodesOperationAction.java
src/main/java/org/elasticsearch/action/support/replication/TransportShardReplicationOperationAction.java
src/main/java/org/elasticsearch/action/support/single/custom/TransportSingleCustomOperationAction.java
src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
src/main/java/org/elasticsearch/action/support/single/shard/TransportShardSingleOperationAction.java
comments:
Better exception handling in actions when forking to a thread pool
An execution on a thread pool might be rejected due to its settings, have better handling in those cases across the actions we have.
closes #3524

time:
2013-08-16T19:18:37Z
class:
src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java
src/main/java/org/elasticsearch/common/lucene/search/ApplyAcceptedDocsFilter.java
src/main/java/org/elasticsearch/common/lucene/search/Queries.java
src/main/java/org/elasticsearch/index/query/FilteredQueryParser.java
src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java
src/main/java/org/elasticsearch/index/query/MatchAllQueryParser.java
src/main/java/org/elasticsearch/index/query/ParsedQuery.java
src/main/java/org/elasticsearch/index/search/MatchQuery.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/test/java/org/elasticsearch/test/integration/search/query/SimpleQueryTests.java
src/test/java/org/elasticsearch/test/unit/index/engine/EngineSearcherTotalHitsMatcher.java
src/test/java/org/elasticsearch/test/unit/index/query/SimpleIndexQueryParserTests.java
comments:
Removed static versions of MatchAllDocsQuery

If a static cached version of MatchAllDocsQuery is used through for
instanst the `query_string` together with a boost like `*:*^2.0` the
globally used version is modified since queries are not immutable and it's
boost variable can change at any time. Holding on to queries that are modifiable
is risky and should not be done in a global scope.
This commit also adds tests for constant scores from `constant_score` query.

Closes #3521

time:
2013-08-16T18:14:24Z
class:
src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java
src/main/java/org/elasticsearch/search/suggest/phrase/LaplaceScorer.java
src/main/java/org/elasticsearch/search/suggest/phrase/LinearInterpoatingScorer.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestParser.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
src/main/java/org/elasticsearch/search/suggest/phrase/StupidBackoffScorer.java
src/main/java/org/elasticsearch/search/suggest/phrase/WordScorer.java
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
src/test/java/org/elasticsearch/test/unit/search/suggest/phrase/NoisyChannelSpellCheckerTests.java
comments:
Prevent Phrase Suggester from failing on missing fields.

Unless the field is not mapped phrase suggester should return
empty results or skip candidate generation if a field in not in
the index rather than failing hard with an illegal argument exception.
Some shards might not have a value in a certain field.

Closes #3469

time:
2013-08-16T16:55:28Z
class:
src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java
src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
src/main/java/org/elasticsearch/percolator/PercolateException.java
src/main/java/org/elasticsearch/percolator/PercolatorService.java
src/test/java/org/elasticsearch/test/integration/percolator/SimplePercolatorTests.java
comments:
* Check if size is set if sort is used, if not throw exception.
* Fix reduce error when reducing shard responses.
* Short circuit reduce phase when possible (single matches & no matches)

time:
2013-08-16T13:11:59Z
class:
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Fix typo

time:
2013-08-16T09:29:33Z
class:
src/main/java/org/elasticsearch/search/suggest/SuggestPhase.java
src/main/java/org/elasticsearch/search/suggest/Suggester.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CustomSuggester.java
src/test/java/org/elasticsearch/test/integration/search/suggest/SuggestSearchTests.java
comments:
Suggest should ignore empty shards
From #3469.
When running suggest on empty shards, it raises an error like:

```
"failures" : [ {
      "status" : 400,
      "reason" : "ElasticSearchIllegalArgumentException[generator field [title] doesn't exist]"
    } ]
```

We should ignore empty shards.

Closes #3473.

time:
2013-08-16T08:59:20Z
class:
src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
src/test/java/org/elasticsearch/test/integration/AbstractSharedClusterTest.java
comments:
Add assertion that index creation & deletion is acknowledged

time:
2013-08-16T01:15:25Z
class:
src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java
src/main/java/org/elasticsearch/cache/recycler/CacheRecycler.java
src/main/java/org/elasticsearch/cache/recycler/CacheRecyclerModule.java
src/main/java/org/elasticsearch/cache/recycler/DefaultCacheRecycler.java
src/main/java/org/elasticsearch/cache/recycler/NoneCacheRecycler.java
src/main/java/org/elasticsearch/client/transport/TransportClient.java
src/main/java/org/elasticsearch/common/recycler/NoneRecycler.java
src/main/java/org/elasticsearch/common/recycler/QueueRecycler.java
src/main/java/org/elasticsearch/common/recycler/Recycler.java
src/main/java/org/elasticsearch/common/recycler/SoftThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/recycler/ThreadLocalRecycler.java
src/main/java/org/elasticsearch/common/util/BigIntArray.java
src/main/java/org/elasticsearch/common/util/IntArray.java
src/main/java/org/elasticsearch/common/util/IntArrays.java
src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java
src/main/java/org/elasticsearch/index/search/child/HasChildFilter.java
src/main/java/org/elasticsearch/index/search/child/HasParentFilter.java
src/main/java/org/elasticsearch/index/search/child/ParentQuery.java
src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java
src/main/java/org/elasticsearch/indices/cache/filter/IndicesFilterCache.java
src/main/java/org/elasticsearch/node/internal/InternalNode.java
src/main/java/org/elasticsearch/search/facet/datehistogram/CountDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/datehistogram/InternalCountDateHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/datehistogram/InternalFullDateHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/datehistogram/ValueDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/datehistogram/ValueScriptDateHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/CountHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/FullHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/InternalCountHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/histogram/InternalFullHistogramFacet.java
src/main/java/org/elasticsearch/search/facet/histogram/ScriptHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/ValueHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/histogram/ValueScriptHistogramFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/InternalDoubleTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/doubles/TermsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/longs/InternalLongTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/longs/TermsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/terms/strings/InternalStringTermsFacet.java
src/main/java/org/elasticsearch/search/facet/terms/strings/ScriptTermsStringFieldFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/doubles/InternalTermsStatsDoubleFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/doubles/TermsStatsDoubleFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/longs/InternalTermsStatsLongFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/longs/TermsStatsLongFacetExecutor.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/InternalTermsStatsStringFacet.java
src/main/java/org/elasticsearch/search/facet/termsstats/strings/TermsStatsStringFacetExecutor.java
src/main/java/org/elasticsearch/search/internal/SearchContext.java
src/main/java/org/elasticsearch/search/query/QueryPhase.java
comments:
refactor cache recycler, introduce thread local one, and default to it

time:
2013-08-15T23:10:50Z
class:
src/main/java/org/elasticsearch/action/search/type/TransportSearchDfsQueryAndFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchQueryThenFetchAction.java
src/main/java/org/elasticsearch/action/search/type/TransportSearchScrollScanAction.java
comments:
better exception handling when building the search response

time:
2013-08-15T20:12:57Z
class:
src/main/java/org/elasticsearch/common/lucene/Lucene.java
src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java
comments:
Cleanup Exception Handling in RobinEngine & raise write lock timeout

The write-lock timeout on the index writer is 1s by default. Given the
default lock poll interval of 1s this gives an upper bound of 2 obtain
checks for a write lock which might be not enough under load.
This commit adds cleaned up exception handling and more warn logging
related to obtaining locks under load.

time:
2013-08-15T18:27:02Z
class:
src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
src/test/java/org/elasticsearch/test/integration/AbstractSharedClusterTest.java
src/test/java/org/elasticsearch/test/integration/indices/mapping/UpdateMappingTests.java
comments:
Added a needed ensureYellow to UpdateMappingTests.updateMappingConcurrently

Also:
more cluster state related debug logging.
get cluster state api didn't populate cluster state version in response (was always 0)
added logging when testing ends and before indices cleanup start.

time:
2013-08-15T17:24:02Z
class:
src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/AtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/AbstractBytesIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/DoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FSTBytesAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/FloatArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/GeoPointDoubleArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayAtomicFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PackedArrayIndexFieldData.java
src/main/java/org/elasticsearch/index/fielddata/plain/PagedBytesAtomicFieldData.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/AbstractStringFieldDataTests.java
comments:
Added infrastructure to figure out the number of unique values for a field on the atomic level and the highest number of atomic field values for all segments. This can use as a heuristic for initializing data structures.

Also moved the load method from concrete classes to AbstractIndexFieldData class.

time:
2013-08-15T12:57:00Z
class:
src/test/java/org/elasticsearch/junit/listerners/ReproduceInfoPrinter.java
comments:
Add test method information to log output

Often it's hard to tell which testmethods were already executed
when a particualr test fails. This commit adds a log output when a
new test is started to better differentiate which log output belongs
to which test.

This commit also moves the reproduce line to logging output to gain
timestamps for the failure.

time:
2013-08-15T12:57:00Z
class:
src/test/java/org/elasticsearch/test/integration/search/facet/SimpleFacetsTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/DuellFieldDataTests.java
src/test/java/org/elasticsearch/test/unit/index/fielddata/FilterFieldDataTest.java
comments:
Remove 'concrete_bytes' fielddata impl from tests

We don't have this implementation anymore tests will just fallback
to default and issue a warning.

time:
2013-08-15T12:36:00Z
class:
comments:
Allow to configure root logging level using system properties. Ex. -Des.logger.level=DEBUG  . Defaults to INFO as before.
Seems like we may want maxBackupIndex as a config option as well. The default behavior can lead to machines running out of disk space.


time:
2013-08-15T11:29:09Z
class:
src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java
src/main/java/org/elasticsearch/search/suggest/completion/AnalyzingCompletionLookupProvider.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestParser.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionFuzzyBuilder.java
src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java
src/test/java/org/elasticsearch/test/unit/index/mapper/completion/CompletionFieldMapperTests.java
comments:
CompletionSuggester cleanups

* Fuzzy Suggester parameter names are now easier to understand
  * non_prefix_length became prefix_length
  * min_prefix_length became min_length
* Instead of specyfying search_analyzer and index_analyzer using analyzer for both is supported
* CompletionSuggester used the CharsRef spare instead of too much toString() now

