time:
2016-08-10T14:06:05Z
class:
core/src/main/java/org/elasticsearch/search/suggest/DirectSpellcheckerSettings.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/term/TermSuggester.java
comments:
Move getDirectSpellChecker to DirectSpellcheckerSettings

time:
2016-08-10T14:01:28Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
comments:
Merge pull request #19914 from javanna/enhancement/suggestutils_cleanup

Move SuggestUtils methods to their respective caller classes

time:
2016-08-10T12:56:00Z
class:
comments:
[docs] Remove extra "s" at buckets_path snippet

Closes #19907

time:
2016-08-10T11:22:18Z
class:
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpClient.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerTransportTests.java
comments:
[Test] Add test for Netty4 HTTP support of header 100-continue (#19908)

* [Test] Add test for Netty4 HTTP support of header 100-continue

Related to #19904

* Update after David comments

time:
2016-08-10T11:21:22Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
comments:
Fix expect 100 continue header handling

Due to a misordering of the HTTP handlers, the Netty 4 HTTP server
mishandles Expect: 100-continue headers from clients. This commit fixes
this issue by ordering the handlers correctly.

Relates #19904

time:
2016-08-10T10:57:24Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
comments:
SuggestUtils#analyze: assign success variable a value

time:
2016-08-10T10:54:38Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
comments:
move SuggestUtils methods to their respective callers

These methods are called only once, they are then moved to the classes that call them, and become private.

time:
2016-08-10T10:36:25Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
comments:
Merge pull request #19906 from javanna/enhancement/suggest_utils_unused_methods

Remove unused methods from SuggestUtils

time:
2016-08-10T10:28:06Z
class:
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
comments:
Remove redundant generics type declaration

time:
2016-08-10T10:28:06Z
class:
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
comments:
remove unused methods from SuggestUtils

Parsing code was moved to the builder objects, these methods were left behind unused

time:
2016-08-10T10:26:13Z
class:
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Merge pull request #19864 from javanna/enhancement/query_parse_unknown_objects

[TEST] make AbstractQueryTestCase#testUnknownObjectException more accurate

time:
2016-08-10T10:21:25Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] add inline comments to AbstractQueryTestCase#unknownObjectExceptionTest

time:
2016-08-10T10:21:25Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] enable testUnknownObjectException for alternate query versions too

time:
2016-08-10T10:21:25Z
class:
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryBuilderTests.java
comments:
[TEST] use ParseField instead of plain strings in query tests

time:
2016-08-10T09:48:51Z
class:
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] make AbstractQueryTestCase#testUnknownObjectException more accurate

testUnknownObjectException used to generate malformed json objects in some cases, due to the existence of arrays as it was not closing the injected object correctly. That is why the test was catching JsonParseException among the exception that are expected to be thrown. That is fixed by tracking where the new object is placed and placing its end object marker to the right level rather than always at the end.

Also introduced a mechanism to explicitly declare objects that won't cause any exception when they get additional objects injected, so that there is no need to override the method anymore as that caused copy pasting of the whole test method. This also makes sure that changes are reflected in tests, as those inner objects are not skipped but we actually check that what is declared is true (no exceptions get thrown when an additional object is added within them.

time:
2016-08-10T09:48:51Z
class:
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
comments:
[TEST] inner_hits is now parsed on the coord node, no need to skip such objects in testUnknownObjectException

time:
2016-08-10T08:17:54Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
comments:
rename local loop variable ingore->ignore

time:
2016-08-10T08:16:25Z
class:
comments:
Documented netty4 Expect bug in release notes and breaking changes

time:
2016-08-10T07:30:39Z
class:
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
comments:
Fix expectations of GeoPointFieldMapperTests.

Closes #19895

time:
2016-08-10T03:44:05Z
class:
comments:
Merge pull request #19902 from elastic/ppf2-doc-snapshot-restore-to-newer-cluster-1

Clarified statement on restoring a snapshot to a cluster on a newer version.

time:
2016-08-10T01:22:29Z
class:
comments:
Update snapshots.asciidoc

>However, the version of the new cluster should be the same or newer than the cluster that was

Afaik, you can't restore a snapshot to a newer cluster that is not consecutively newer (i.e. can't restore 1.x snapshot to a 5.x cluster).  This is to clarify the statement above moving forward.

time:
2016-08-09T21:37:37Z
class:
comments:
Docs: Fixed typos in example buckets_paths > buckets_path.

time:
2016-08-09T21:35:35Z
class:
core/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/simple/SimpleMapperTests.java
comments:
Mappings: Support dots in field names in mapping parsing

This change adds support for treating dots in field names found in
mappings as path separators, like was previously done for dynamic
mappings and document parsing.

closes #19443

time:
2016-08-09T20:25:16Z
class:
comments:
Remove alpha5 bwc indexes

We don't have bwc indexes for alpha releases.

time:
2016-08-09T20:07:09Z
class:
core/src/main/java/org/elasticsearch/snapshots/ConcurrentSnapshotExecutionException.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
comments:
Check restores in progress before deleting a snapshot (#19853)

Currently, when attempting to delete a snapshot, we check
if a snapshot is in progress before proceeding with the
delete. However, we do not check if a restore is taking
place before deleting. This can lead to concurrency issues
where a restore is in progress but the snapshotted files
for the restore are being deleted underneath.

This commit first checks if a restore is in progress and
if so, it prevents the deletion of a snapshot with an
exception.

Note that this is not a complete solution because it is
still possible that a restore of the same snapshot is
started after the deletion commenced but before the
deletion finished. But there is a much smaller window
for this to occur and this commit is a quick way to
check for the common case.

time:
2016-08-09T19:27:29Z
class:
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
core/src/test/java/org/elasticsearch/search/controller/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggesterBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
Merge pull request #19877 from areek/fix/remove_completion_payload

Remove payload option from completion suggester

time:
2016-08-09T18:37:27Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestListTasksAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/tasks/ListTasksResponseTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportRethrottleAction.java
comments:
Merge branch 'fix/19772-toString'

time:
2016-08-09T17:57:26Z
class:
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/script/ScriptModule.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge remote-tracking branch 'dakrone/compliation-breaker'

time:
2016-08-09T17:54:38Z
class:
comments:
Clarifies the documentation for the `http.cors.enabled` setting (#19890)

Clarifies the documentation for the `http.cors.enabled` setting

time:
2016-08-09T17:44:42Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
comments:
Fix after review

time:
2016-08-09T16:52:03Z
class:
comments:
Fixed missing changes in the version bump to alpha6

time:
2016-08-09T16:31:27Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Bumped version to 5.0.0-alpha6 and added bwc indices for alpha5

time:
2016-08-09T16:26:27Z
class:
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/script/ScriptModule.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Circuit break the number of inline scripts compiled per minute

When compiling many dynamically changing scripts, parameterized
scripts (<https://www.elastic.co/guide/en/elasticsearch/reference/master/modules-scripting-using.html#prefer-params>)
should be preferred. This enforces a limit to the number of scripts that
can be compiled within a minute. A new dynamic setting is added -
`script.max_compilations_per_minute`, which defaults to 15.

If more dynamic scripts are sent, a user will get the following
exception:

```json
{
  "error" : {
    "root_cause" : [
      {
        "type" : "circuit_breaking_exception",
        "reason" : "[script] Too many dynamic script compilations within one minute, max: [15/min]; please use on-disk, indexed, or scripts with parameters instead",
        "bytes_wanted" : 0,
        "bytes_limit" : 0
      }
    ],
    "type" : "search_phase_execution_exception",
    "reason" : "all shards failed",
    "phase" : "query",
    "grouped" : true,
    "failed_shards" : [
      {
        "shard" : 0,
        "index" : "i",
        "node" : "a5V1eXcZRYiIk8lecjZ4Jw",
        "reason" : {
          "type" : "general_script_exception",
          "reason" : "Failed to compile inline script [\"aaaaaaaaaaaaaaaa\"] using lang [painless]",
          "caused_by" : {
            "type" : "circuit_breaking_exception",
            "reason" : "[script] Too many dynamic script compilations within one minute, max: [15/min]; please use on-disk, indexed, or scripts with parameters instead",
            "bytes_wanted" : 0,
            "bytes_limit" : 0
          }
        }
      }
    ],
    "caused_by" : {
      "type" : "general_script_exception",
      "reason" : "Failed to compile inline script [\"aaaaaaaaaaaaaaaa\"] using lang [painless]",
      "caused_by" : {
        "type" : "circuit_breaking_exception",
        "reason" : "[script] Too many dynamic script compilations within one minute, max: [15/min]; please use on-disk, indexed, or scripts with parameters instead",
        "bytes_wanted" : 0,
        "bytes_limit" : 0
      }
    }
  },
  "status" : 500
}
```

This also fixes a bug in `ScriptService` where requests being executed
concurrently on a single node could cause a script to be compiled
multiple times (many in the case of a powerful node with many shards)
due to no synchronization between checking the cache and compiling the
script. There is now synchronization so that a script being compiled
will only be compiled once regardless of the number of concurrent
searches on a node.

Relates to #19396

time:
2016-08-09T15:11:45Z
class:
comments:
Add quotes to prevent shell globbing in TESTING.asciidoc

time:
2016-08-09T15:07:13Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/CancelAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/MoveAllocationCommand.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/gateway/PriorityComparatorTests.java
comments:
Simplify RoutingNodes interface (#19870)

Slims the public interface of RoutingNodes down to 4 methods to update routing entries:
- initializeShard() -> initializes an unassigned shard
- startShard() -> starts an initializing shard / completes relocation of a shard
- relocateShard() -> starts relocation of a started shard
- failShard() -> fails/cancels an assigned shard

In the spirit of PR #19743, where deassociateDeadNodes was moved to its own public method to be only called when nodes have actually left the cluster and not on every reroute step, this commit also removes electPrimariesAndUnassignedDanglingReplicas from AllocationService and folds it into the shard failure logic. This means that an active replica is promoted to primary in the same method where the primary was failed. Previously we would scan in each reroute iteration for active replicas to be promoted to primary.

time:
2016-08-09T14:32:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
comments:
Fix toString method

See https://github.com/elastic/elasticsearch/pull/19773#issuecomment-238564524

Was introduced with #18939

time:
2016-08-09T13:57:35Z
class:
comments:
Bumped version in docs

time:
2016-08-09T10:34:52Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
comments:
Fix after merge

time:
2016-08-09T10:14:50Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
comments:
Fix after merge

time:
2016-08-09T09:53:29Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/AllocationBenchmark.java
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateResponse.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/StartedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/ParseField.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentParser.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TruncateTranslogCommand.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/AnalysisPlugin.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/repositories/IndexId.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
core/src/main/java/org/elasticsearch/search/fetch/ShardFetchSearchRequest.java
core/src/main/java/org/elasticsearch/search/fetch/matchedqueries/MatchedQueriesFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java
core/src/main/java/org/elasticsearch/search/suggest/Suggest.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkActionTests.java
core/src/test/java/org/elasticsearch/action/ingest/IngestProxyActionFilterTests.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/action/search/TransportMultiSearchActionTests.java
core/src/test/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/nodes/TransportNodesActionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ClusterStateCreationUtils.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientHeadersTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterChangedEventTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateTests.java
core/src/test/java/org/elasticsearch/cluster/NodeConnectionsServiceTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/DelayedAllocationServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ActiveAllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/common/rounding/RoundingTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
core/src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeRemovalClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryUnitTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueueTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/gateway/AsyncShardFetchTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/fielddata/ScriptDocValuesTests.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/query/AbstractTermQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FuzzyQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java
core/src/test/java/org/elasticsearch/index/query/GeoPolygonQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/IndicesQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchAllQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhraseQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MultiMatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
core/src/test/java/org/elasticsearch/index/query/QueryShardContextTests.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleQueryStringBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WrapperQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/indices/state/RareClusterStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBoundsTests.java
core/src/test/java/org/elasticsearch/search/controller/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/search/geo/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
core/src/test/java/org/elasticsearch/snapshots/FsBlobStoreRepositoryIT.java
core/src/test/java/org/elasticsearch/threadpool/ThreadPoolStatsTests.java
comments:
Merge branch 'master' into fix/19772-toString

# Conflicts:
#	core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java

time:
2016-08-09T09:15:36Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FuzzyQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhraseQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTests.java
comments:
Merge pull request #19871 from javanna/fix/short_query_multiple_fields

Throw exception when multiple field names are provided as part of query short syntax

time:
2016-08-09T08:06:30Z
class:
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/core/KeywordFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/BaseGeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperLegacy.java
core/src/test/java/org/elasticsearch/index/mapper/core/KeywordFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/dynamictemplate/simple/SimpleDynamicTemplatesTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/SimpleExternalMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeohashMappingGeoPointTests.java
core/src/test/java/org/elasticsearch/index/mapper/multifield/MultiFieldTests.java
comments:
Save one utf8 conversion in KeywordFieldMapper. #19867

If a `keyword` field is both indexed and doc-valued, then we will convert the
input string to utf8 bytes twice: once for indexing/storing, and once for doc
values. This commit changes `keyword` fields to compute the utf8 representation
up-front and then feed both the inverted index and doc values with it.

Rather than adding version-based bw compat logic, I broke the `keyword` field
(they are now indexed/stored as a binary field rather than string), which is
fine since we are still on alpha releases for 5.0.

time:
2016-08-09T08:01:56Z
class:
core/src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
comments:
Modify term query error when multiple fields are provided to comply with all other queries

time:
2016-08-09T07:53:03Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTests.java
comments:
Throw parsing error if span term query contains multiple fields in its short version

time:
2016-08-09T07:52:28Z
class:
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
comments:
Add common method that throws exception whenever multiple fields are provided in a query that support one field only

This makes sure that error messages are unified, and makes us save a few lines of code too.

time:
2016-08-09T07:50:12Z
class:
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
comments:
[TEST] test that term query short syntax throws error when multiple fields are provided

time:
2016-08-09T01:59:49Z
class:
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
comments:
Remove dead OOM handling in engine

Previously, the engine would catch an out of memory error and would try
to handle the error (it would try to fail the engine, and then it would
swallow the out of memory error). Catching the out of memory errors was
removed in 3343ceeae44f3d28e3c1ba7861886848df74e390 so this code path is
not effectively dead. This commit removes this dead code from the
engine.

Relates #19881

time:
2016-08-08T20:04:06Z
class:
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionContext.java
core/src/test/java/org/elasticsearch/search/controller/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggesterBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
Remove payload option from completion suggester

The payload option was introduced with the new completion
suggester implementation in v5, as a stop gap solution
to return additional metadata with suggestions.

Now we can return associated documents with suggestions
(#19536) through fetch phase using stored field (_source).
The additional fetch phase ensures that we only fetch
the _source for the global top-N suggestions instead of
fetching _source of top results for each shard.

time:
2016-08-08T18:55:33Z
class:
comments:
Build: Fix compile time deps in poms and simplify transitive exclusions

This change works around a known issue with using the maven-publish
gralde plugin. All deps are marked in the generated pom as runtime. With
this change, they are set back to compile time. This also simplified the
transitive dependencies exclusion to work the same as how it was fixed in
gradle 2.14 (wildcard exclusions).

closes #19835

time:
2016-08-08T18:39:55Z
class:
core/src/test/java/org/elasticsearch/index/query/GeoPolygonQueryBuilderTests.java
comments:
[TEST] remove AwaitsFix that was fixed with #16615

time:
2016-08-08T18:39:55Z
class:
core/src/test/java/org/elasticsearch/index/query/GeoPolygonQueryBuilderTests.java
comments:
[TEST] remove unused argument from GeoPolygonQueryBuilderTests#randomPolygon

time:
2016-08-08T18:22:36Z
class:
comments:
Merge pull request #19873 from rjernst/norelease_check

Add back norelease check when building a release

time:
2016-08-08T18:20:36Z
class:
comments:
Add back norelease check when building a release

This was lost around 2.1. This change adds it back.

closes #19246

time:
2016-08-08T17:42:48Z
class:
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTests.java
comments:
Throw parsing error if wildcard query contains multiple fields in its short version

time:
2016-08-08T17:42:37Z
class:
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTests.java
comments:
Throw parsing error if regexp query contains multiple fields in its short version

time:
2016-08-08T17:42:26Z
class:
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTests.java
comments:
Throw parsing error if prefix query contains multiple fields in its short version

time:
2016-08-08T17:42:14Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
comments:
Throw parsing error if match query contains multiple fields in its short version

time:
2016-08-08T17:42:01Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MatchPhraseQueryBuilderTests.java
comments:
Throw parsing error if match phrase query contains multiple fields in its short version

time:
2016-08-08T17:41:45Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilderTests.java
comments:
Throw parsing error if match phrase prefix query contains multiple fields in its short version

time:
2016-08-08T17:40:54Z
class:
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/FuzzyQueryBuilderTests.java
comments:
Throw parsing error if fuzzy query contains multiple fields in its short version

time:
2016-08-08T17:40:23Z
class:
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTests.java
comments:
Throw parsing error if common terms query contains multiple fields in its short version

time:
2016-08-08T17:09:43Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] expand AbstractQueryTestCase#testQueryWrappedInArray to run against query alternate versions

time:
2016-08-08T12:17:25Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
comments:
#19855 Throw exception when maxBounds greater than minBounds

Throw exception when maxBounds greater than minBounds

time:
2016-08-08T11:09:43Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
comments:
Throw exception when maxBounds greater than minBounds

The recent changes to the Histogram Aggregator introduced a bug where
an exception would not be thrown if the maxBound of the extended bounds
is less that the minBound. This change fixes that bug.

Closes #19833

time:
2016-08-08T09:46:48Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
comments:
Fix issue when relocation source and target routings are failed in same batch update

PR #19715 made AllocationService less lenient, requiring ShardRouting instances that are passed to its applyStartedShards and
applyFailedShards methods to exist in the routing table. As primary shard failures also fail initializing replica shards,
concurrent replica shard failures that are treated in the same cluster state update might not reference existing replica entries
in the routing table anymore. To solve this, PR #19715 ordered the failures by first handling replica before
primary failures. There are other failures that influence more than one routing entry, however. When we have a failed shard entry
for both a relocation source and target, then, depending on the order, either one or the other might point to an out-dated shard
entry. As finding a good order is more difficult than applying the failures, this commit re-adds parts of the ShardRouting
re-resolve logic so that the applyFailedShards method can properly treat shard failure batches.

time:
2016-08-08T08:52:09Z
class:
comments:
Fix typo

Reported at https://discuss.elastic.co/t/little-error-in-documentation-page-mapping-parameters-format/57424

time:
2016-08-08T08:41:59Z
class:
comments:
[DOCS] clarify behaviour when routing is required and no routing value is specified

This note in the delete api about broadcasting to all shards is a leftover that should have been removed when the broadcasting feature was removed

Relates to #10136

time:
2016-08-07T17:05:07Z
class:
qa/evil-tests/src/test/java/org/elasticsearch/bootstrap/EvilJNANativesTests.java
comments:
Fix parsing in test set max number of threads

This commit fixes a test bug in
EvilJNANativesTests#testSetMaximumNumberOfThreads. Namely, the test was
not checking whether or not the value from /proc/self/limits was equal
to "unlimited" before attempting to parse as a long. This commit fixes
that error.

time:
2016-08-06T04:21:16Z
class:
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
comments:
fix rogue license header

time:
2016-08-05T23:42:06Z
class:
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
core/src/test/java/org/elasticsearch/index/fielddata/ScriptDocValuesTests.java
core/src/test/java/org/elasticsearch/search/geo/GeoDistanceIT.java
comments:
Deprecate GeoDistance enumerators and remove geo distance script helpers

GeoDistance is implemented using a crazy enum that causes issues with the scripting modules. This commit moves all distance calculations to arcDistance and planeDistance static methods in GeoUtils. It also removes unnecessary distance helper methods from ScriptDocValues.GeoPoints.

time:
2016-08-05T22:55:08Z
class:
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
core/src/main/java/org/elasticsearch/search/fetch/ShardFetchSearchRequest.java
core/src/main/java/org/elasticsearch/search/fetch/matchedqueries/MatchedQueriesFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/suggest/Suggest.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/test/java/org/elasticsearch/search/controller/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
Merge pull request #19536 from areek/enhancement/completion_suggester_documents

Add support for returning documents with completion suggester

time:
2016-08-05T21:51:45Z
class:
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java
core/src/main/java/org/elasticsearch/search/fetch/ShardFetchSearchRequest.java
core/src/main/java/org/elasticsearch/search/fetch/matchedqueries/MatchedQueriesFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/suggest/Suggest.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/test/java/org/elasticsearch/search/controller/SearchPhaseControllerTests.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggestionTests.java
comments:
Add support for returning documents with completion suggester

This commit enables completion suggester to return documents
associated with suggestions. Now the document source is returned
with every suggestion, which respects source filtering options.

In case of suggest queries spanning more than one shard, the
suggest is executed in two phases, where the last phase fetches
the relevant documents from shards, implying executing suggest
requests against a single shard is more performant due to the
document fetch overhead when the suggest spans multiple shards.

time:
2016-08-05T20:51:04Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
comments:
Merge pull request #19825 from cbuescher/register-namedWritables-transportClient

Add NamedWriteables from plugins to TransportClient

time:
2016-08-05T20:38:31Z
class:
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] restore tests repeatability in AbstractQueryTestCase

Some random operations were conditionally performed in the before test, which made tests not repeatable. For instance take the seed chain to repeat a specific iteration and try to reproduce it, this conditional code would get executed in both cases when trying to isolate the failure, but not among the different iterations (as only the first method/iteration executes it), hence the failure will not reproduce.

Moved the random operations to beforeClass and left the non random part in the before method, which is needed as it depends on some method that can be overridden by subclasses.

time:
2016-08-05T19:39:44Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
comments:
Avoid using injector and more test to TransportClientTests

time:
2016-08-05T19:31:03Z
class:
comments:
Add field for plugins installed on issue template

This commit adds a field to the GitHub issue template for a list of the
plugins that are installed on the Elasticsearch installation. This is a
common enough ask that it is better to just collect this information up
front.

Relates #19840

time:
2016-08-05T18:58:33Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFromRemoteWithAuthTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/Netty3Plugin.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Utils.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/Netty4Plugin.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4TransportPublishAddressIT.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
comments:
Avoid early initializing Netty

Today when we load the Netty plugins, we indirectly cause several Netty
classes to initialize. This is because we attempt to load some classes
by name, and loading these classes is done in a way that triggers a long
chain of class initializers within Netty. We should not do this, this
can lead to log messages before the logger is loader, and it leads to
initialization in cases when the classes would never be needed (for
example, Netty 3 class initialization is never needed if Netty 4 is
used, and vice versa). This commit avoids this early initialization of
these classes by removing the need for the early loading.

Relates #19819

time:
2016-08-05T18:31:49Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
core/src/test/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestTests.java
comments:
Merge pull request #19837

Ensure PutMappingRequest.buildFromSimplifiedDef input are pairs

time:
2016-08-05T17:42:52Z
class:
comments:
Remove unneeded 140 character line suppresions

time:
2016-08-05T17:25:20Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java
core/src/test/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestTests.java
comments:
Ensure PutMappingRequest.buildFromSimplifiedDef fails when input isn't pairs

The method requires pairs of fieldnames and property arguments and will fail if
the varargs input is an uneven number. We should check this and fail with an
appropriate IllegalArgumentException instead.

time:
2016-08-05T17:10:13Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
comments:
mute test

time:
2016-08-05T15:13:26Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/PutIndexTemplateResponse.java
comments:
make ctors protected (#19831)

This is useful if we need an acknowledged instance in a test

time:
2016-08-05T15:11:53Z
class:
core/src/main/java/org/elasticsearch/plugins/AnalysisPlugin.java
comments:
Add note explaining analysis caching for plugins

```
Elasticsearch doesn't have any automatic mechanism to share these
components between indexes. If any component is heavy enough to
warrant such sharing then it is the Pugin's responsibility to do
it in their {@link AnalysisProvider} implementation. We recommend
against doing this unless absolutely necessary because it can be
difficult to get the caching right given things like behavior
changes across versions.
```

Closes #19814

time:
2016-08-05T15:08:59Z
class:
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
comments:
Add test to check that plugin NamedWriteables are registerd with TransportClient

time:
2016-08-05T13:53:35Z
class:
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/AbstractTermQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FuzzyQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java
core/src/test/java/org/elasticsearch/index/query/GeoPolygonQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/IndicesQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhraseQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MultiMatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryShardContextTests.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleQueryStringBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WrapperQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Merge pull request #19791 from javanna/fix/multiple_fields_queries

Query parsers to throw exception when multiple field names are provided

time:
2016-08-05T13:39:02Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/repositories/IndexId.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/test/java/org/elasticsearch/snapshots/FsBlobStoreRepositoryIT.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageBlobStoreRepositoryTests.java
test/framework/src/main/java/org/elasticsearch/repositories/blobstore/ESBlobStoreRepositoryIntegTestCase.java
comments:
Snapshot repository cleans up empty index folders (#19751)

This commit cleans up indices in a snapshot repository when all
snapshots containing the index are all deleted. Previously, empty
indices folders would lay around after all snapshots containing
them were deleted.

time:
2016-08-05T13:35:53Z
class:
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
comments:
Do not parse the created version from the settings every time a field is parsed. #19824

I found it while looking at some jfr telemetry reports from Rally.

time:
2016-08-05T12:11:01Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
comments:
Add NamedWriteables from plugins to TransportClient

Plugins provide NamedWriteables that are added to the
NamedWriteableRegistry. Those are added on Nodes already, the same mechanism is
added to the setup for TransportClient.

time:
2016-08-05T11:55:18Z
class:
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/test/java/org/elasticsearch/index/query/AbstractTermQueryTestCase.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/BoostingQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/ConstantScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/DisMaxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/FuzzyQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java
core/src/test/java/org/elasticsearch/index/query/GeoPolygonQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/GeohashCellQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/IndicesQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchPhraseQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MultiMatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryShardContextTests.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SimpleQueryStringBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanContainingQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanFirstQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanNotQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/SpanWithinQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TermsQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TypeQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/WrapperQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] use expectThrows wherever possible in query builder unit tests

time:
2016-08-05T10:26:06Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentParser.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBoundsTests.java
core/src/test/java/org/elasticsearch/threadpool/ThreadPoolStatsTests.java
comments:
Update to Jackson 2.8.1

This commit updates Jackson to the 2.8.1 version, which is more strict when it comes to build objects. It also adds the snakeyaml dependency that was previously shaded in jackson libs.

It also closes #18076

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
comments:
fix line length in FuzzyQueryBuilder

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
comments:
Make query parsing stricter by requiring each parser to stop at END_OBJECT token

Instead of being lenient in QueryParseContext#parseInnerQueryBuilder we check that the token where the parser stopped reading was END_OBJECT, and throw error otherwise. This is a best effort to verify that the parsers read a whole object rather than stepping out in the middle of it due to malformed queries.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/FuzzyQueryBuilderTests.java
comments:
Throw parsing error if fuzzy query contains multiple fields

Fuzzy Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also added test for short prefix query variant and modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/test/java/org/elasticsearch/index/query/TermQueryBuilderTests.java
comments:
[TEST] test that term query throws error when made against multiple fields

time:
2016-08-05T08:58:19Z
class:
core/src/test/java/org/elasticsearch/index/query/AbstractTermQueryTestCase.java
comments:
[TEST] check validation error messages in AbstractTermQueryTestCase

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/SpanTermQueryBuilderTests.java
comments:
Throw parsing error if  span_term query contains multiple fields

Span term Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/CommonTermsQueryBuilderTests.java
comments:
Throw parsing error if common terms query contains multiple fields

Common Terms Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also added test for short prefix query variant and modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MatchQueryBuilderTests.java
comments:
Throw parsing error if match query contains multiple fields

Match Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also added test for short prefix query variant and modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilderTests.java
comments:
Throw parsing error if match_phrase_prefix query contains multiple fields

Match phrase prefix Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also added test for short prefix query variant and modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/GeoDistanceQueryBuilderTests.java
comments:
Throw parsing error if geo_distance query contains multiple fields

Geo distance Query, like many other queries, used to parse even when the query referred to multiple fields and the last one would win. We rather throw an exception now instead.

time:
2016-08-05T08:58:19Z
class:
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTests.java
comments:
[TEST] check validation error messages in IdsQueryBuilderTests

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/MatchPhraseQueryBuilderTests.java
comments:
Throw parsing error if match_phrase query contains multiple fields

Match phrase Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also added test for short prefix query variant and modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/WildcardQueryBuilderTests.java
comments:
Throw parsing error if wildcard query contains multiple fields

Wildcard Query, like many other queries, used to parse even when the query referred to multiple fields and the first one would win. We rather throw an exception now instead.
Also added test for short prefix query variant and modified the parsing code to consume the whole query object.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/RegexpQueryBuilderTests.java
comments:
Throw parsing error if regexp query contains multiple fields

Regexp Query, like many other queries, used to parse even when the query referred to multiple fields and the last one would win. We rather throw an exception now instead.
Also added test for short prefix query variant.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/PrefixQueryBuilderTests.java
comments:
Throw parsing error if prefix query contains multiple fields

Prefix Query, like many other queries, used to parse when the query refers to multiple fields and the last one would win. We rather throw an exception now instead.
Also added tests for short prefix quer variant.

time:
2016-08-05T08:58:19Z
class:
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/RangeQueryBuilderTests.java
comments:
Throw parsing error if range query contains multiple fields

Range Query, like many other queries, used to parse when the query refers to multiple fields and the last one would win. We rather throw an exception now instead.

Closes #19547

time:
2016-08-05T08:28:38Z
class:
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/test/java/org/elasticsearch/common/rounding/RoundingTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
comments:
#19781 Refactored Rounding simplify Date Histogram code

Refactored Rounding simplify Date Histogram code

time:
2016-08-05T06:58:03Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/AllocationBenchmark.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkActionTests.java
core/src/test/java/org/elasticsearch/action/ingest/IngestProxyActionFilterTests.java
core/src/test/java/org/elasticsearch/action/search/TransportMultiSearchActionTests.java
core/src/test/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/nodes/TransportNodesActionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ClusterStateCreationUtils.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientHeadersTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterChangedEventTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateTests.java
core/src/test/java/org/elasticsearch/cluster/NodeConnectionsServiceTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/DelayedAllocationServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ActiveAllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AddIncrementallyTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationPriorityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AwarenessAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/BalanceConfigurationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/CatAllocationTestCase.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ConcurrentRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DeadNodesAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ElectReplicaAsPrimaryDuringRelocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ExpectedShardSizeAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedNodeRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/IndexBalanceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferLocalPrimariesToRelocatingPrimariesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PreferPrimaryAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryElectionRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/PrimaryNotRelocatedWhileBeingRecoveredTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RandomAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RebalanceAfterActiveTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ReplicaAllocatedAfterPrimaryTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/RoutingNodesIntegrityTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardVersioningTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ShardsLimitAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardNoReplicasRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SingleShardOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/TenShardsOneReplicaRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ThrottlingAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/UpdateNumberOfReplicasTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/EnableAllocationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
core/src/test/java/org/elasticsearch/cluster/structure/RoutingIteratorTests.java
core/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeRemovalClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryUnitTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueueTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/gateway/AsyncShardFetchTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayMetaStateTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/indices/state/RareClusterStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
comments:
Upon being elected as master, prefer joins' node info to existing cluster state (#19743)

When we introduces [persistent node ids](https://github.com/elastic/elasticsearch/pull/19140) we were concerned that people may copy data folders from one to another resulting in two nodes competing for the same id in the cluster. To solve this we elected to not allow an incoming join if a different with same id already exists in the cluster, or if some other node already has the same transport address as the incoming join. The rationeel there was that it is better to prefer existing nodes and that we can rely on node fault detection to remove any node from the cluster that isn't correct any more, making room for the node that wants to join (and will keep trying).

Sadly there were two problems with this:
1) One minor and easy to fix - we didn't allow for the case where the existing node can have the same network address as the incoming one, but have a different ephemeral id (after node restart). This confused the logic in `AllocationService`, in this rare cases. The cluster is good enough to detect this and recover later on, but it's not clean.
2) The assumption that Node Fault Detection will clean up is *wrong* when the node just won an election (it wasn't master before) and needs to process the incoming joins in order to commit the cluster state and assume it's mastership. In those cases, the Node Fault Detection isn't active. 

This PR fixes these two and prefers incoming nodes to existing node when finishing an election. 
On top of the, on request by @ywelsch , `AllocationService` synchronization between the nodes of the cluster and it's routing table is now explicit rather than something we do all the time. The same goes for promotion of replicas to primaries.

time:
2016-08-04T20:55:08Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
comments:
Merge pull request #19803 from elastic/fix/transportClientTests

Fix PreBuiltTransportClientTests to run and pass

time:
2016-08-04T20:47:39Z
class:
core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java
comments:
Remove BWC serialization logic for pre 2.2 nodes (#19810)

This change removes all pre 2.2 logic from InternalSearchResponse serialization. It's unneeded in 5.0 since we require full cluster restart

time:
2016-08-04T19:23:05Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/Features.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/section/DoSectionTests.java
comments:
Fail yaml tests and docs snippets that get unexpected warnings

Adds `warnings` syntax to the yaml test that allows you to expect
a `Warning` header that looks like:
```
    - do:
        warnings:
            - '[index] is deprecated'
            - quotes are not required because yaml
            - but this argument is always a list, never a single string
            - no matter how many warnings you expect
        get:
            index:    test
            type:    test
            id:        1
```

These are accessible from the docs with:
```
// TEST[warning:some warning]
```

This should help to force you to update the docs if you deprecate
something. You *must* add the warnings marker to the docs or the build
will fail. While you are there you *should* update the docs to add
deprecation warnings visible in the rendered results.

time:
2016-08-04T19:00:59Z
class:
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
comments:
Fix various concurrency issues in transport (#19675)

Due to various issues (most notably a missing happens-before edge
between socket accept and channel close in MockTcpTransport),
MockTcpTransportTests sometimes did not terminate.

With this commit we fix various concurrency issues that led to
this hanging test.

Failing example build: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-os-compatibility/os=oraclelinux/835/console

time:
2016-08-04T18:42:12Z
class:
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TruncateTranslogCommand.java
comments:
Add checksumming and versions to the Translog's Checkpoint files (#19797)

This prepares the infrastructure to be able to extend the checkpoint file to store more information.

time:
2016-08-04T18:00:22Z
class:
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Merge pull request #19808 from javanna/test/parse_alternate_query_strict

[TEST] parse query alternate versions in strict mode

time:
2016-08-04T17:49:43Z
class:
core/src/test/java/org/elasticsearch/index/query/IdsQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] parse query alternate versions in strict mode

AbstractQueryTestCase parses the main version of the query in strict mode, meaning that it will fail if any deprecated syntax is used. It should do the same for alternate versions (e.g. short versions). This is the way it is because the two alternate versions for ids query are both deprecated. Moved testing for those to a specific test method that isolates the deprecations and actually tests that the two are deprecated.

time:
2016-08-04T15:48:44Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/TestAwsS3Service.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java
comments:
Merge branch 'pr/19557-extract-aws-key'

time:
2016-08-04T15:45:05Z
class:
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
comments:
fix import statements

time:
2016-08-04T15:28:12Z
class:
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
comments:
Added failure message to test

time:
2016-08-04T15:24:19Z
class:
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/test/java/org/elasticsearch/common/rounding/OffsetRoundingTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
comments:
Remove offset rounding

This is in favour of doing the offset calculations in the date histogram

time:
2016-08-04T15:24:19Z
class:
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java
core/src/test/java/org/elasticsearch/common/rounding/OffsetRoundingTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
comments:
Remove TimeZoneRounding abstraction

Because the Rounding class now only deals with date based rounding of
values we can remove the TimeZoneRounding abstraction to simplify the
code.

time:
2016-08-04T15:24:19Z
class:
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/test/java/org/elasticsearch/common/rounding/OffsetRoundingTests.java
comments:
Remove unused rounding code

Factor rounding and Interval rounding (the non-date based rounding)
was no longer used so it has been removed. Offset rounding has been
retained for no since both date based rounding classes rely on it

time:
2016-08-04T15:22:13Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
comments:
Restore interrupted status on when closing client

When closing a transport client that depends on Netty 4, interrupted
exceptions can be thrown while shutting down some Netty threads. This
commit refactors the handling of these exceptions to finish shutting
down and then just restore the interrupted status.

time:
2016-08-04T15:17:53Z
class:
comments:
Updated v5.0.0-alpha5 release notes

time:
2016-08-04T14:18:48Z
class:
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
comments:
[TEST] Fixes primary term in TransportReplicationActionTests#testReplicaProxy

time:
2016-08-04T14:03:08Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
comments:
Setting exists equals false instead of not exists

This commit rewrites a boolean expression to check for equality with
false instead of negating the existence check.

time:
2016-08-04T13:56:59Z
class:
comments:
Update link to mapper-murmur3 plugin in card docs (#19788)

time:
2016-08-04T13:48:38Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
comments:
Wait for Netty 4 threads to terminate on close

Today if the PreBuiltTransportClient is using Netty 4 transport, on
shutdown some Netty 4 threads could linger. This commit causes the
client to wait for these threads to shutdown upon termination.

time:
2016-08-04T13:15:28Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
comments:
Fix PreBuiltTransportClientTests to run and pass

This change does three things:

1. Makes PreBuiltTransportClientTests run since it was silently
failing on a missing dependency
2. Makes PreBuiltTransportClientTests pass
3. Removes the http.type and transport.type from being set in the
transport clients additional settings since these are set to `netty4` by
default anyway.

time:
2016-08-04T12:47:46Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
comments:
Fixes issue with dangling index being deleted instead of re-imported (#19666)

Fixes an issue where a node that receives a cluster state
update with a brand new cluster UUID but without an
initial persistence block could cause indices to be wiped out,
preventing them from being reimported as dangling indices.
This commit only removes the in-memory data structures and
thus, are subsequently reimported as dangling indices.

time:
2016-08-04T10:00:37Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/RoutingAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/StartedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTests.java
core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/FailedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/StartedShardsRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
comments:
Use primary terms as authority to fail shards (#19715)

A primary shard currently instructs the master to fail a replica shard that it fails to replicate writes to before acknowledging the writes to the client. To ensure that the primary instructing the master to fail the replica is still the current primary in the cluster state on the master, it submits not only the identity of the replica shard to fail to the master but also its own shard identity. This can be problematic however when the primary is relocating. After primary relocation handoff but before the primary relocation target is activated, the primary relocation target is replicating writes through the authority of the primary relocation source. This means that the primary relocation target should probably send the identity of the primary relocation source as authority. However, this is not good enough either, as primary shard activation and shard failure instructions can arrive out-of-order. This means that the relocation target would have to send both relocation source and target identity as authority. Fortunately, there is another concept in the cluster state that represents this joint authority, namely primary terms. The primary term is only increased on initial assignment or when a replica is promoted. It stays the same however when a primary relocates.

This commit changes ShardStateAction to rely on primary terms for shard authority. It also changes the wire format to only transmit ShardId and allocation id of the shard to fail (instead of the full ShardRouting), so that the same action can be used in a subsequent PR to remove allocation ids from the active allocation set for which there exist no ShardRouting in the cluster anymore. Last but not least, this commit also makes AllocationService less lenient, requiring ShardRouting instances that are passed to its applyStartedShards and applyFailedShards methods to exist in the routing table. ShardStateAction, which is calling these methods, now has the responsibility to resolve the ShardRouting objects that are to be started / failed, and remove duplicates.

time:
2016-08-04T08:23:36Z
class:
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
comments:
Recovery: don't log an error when listing an empty folder

time:
2016-08-04T08:06:25Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
[TEST] remove unused methods and fix some warnings in AbstractQueryTestCase

Also fix line length issues

time:
2016-08-04T03:02:13Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
comments:
Improve cat thread pool API

Today, when listing thread pools via the cat thread pool API, thread
pools are listed in a column-delimited format. This is unfriendly to
command-line tools, and inconsistent with other cat APIs. Instead,
thread pools should be listed in a row-delimited format.

Additionally, the cat thread pool API is limited to a fixed list of
thread pools that excludes certain built-in thread pools as well as all
custom thread pools. These thread pools should be available via the cat
thread pool API.

This commit improves the cat thread pool API by listing all thread pools
(built-in or custom), and by listing them in a row-delimited
format. Finally, for each node, the output thread pools are sorted by
thread pool name.

Relates #19721

time:
2016-08-04T01:31:48Z
class:
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3ClientYamlTestSuiteIT.java
comments:
Increase Netty 3 REST test suite timeout

This commit increases the Netty 3 REST test suite timeout to thirty
minutes. This is to address these tests running slowly after increasing
the number of nodes in the tests to two. This has surfaced that the
tests are heavily impacted by excessive fsyncs from most tests using the
default number of shards of five.

time:
2016-08-04T00:20:00Z
class:
comments:
Docs: Fixed callout error that broke the build.

time:
2016-08-04T00:02:51Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestListTasksAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/tasks/ListTasksResponseTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportRethrottleAction.java
comments:
Remove ListTasksResponse#setDiscoveryNodes

time:
2016-08-03T22:40:17Z
class:
comments:
CONSOLify the completion suggester docs (#19758)

* CONSOLEify search/suggesters/completion
* CONSOLEify context suggester docs

time:
2016-08-03T20:24:24Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
comments:
Fixes CreateIndexIT test that assumes an index create propogated
before calling delete.

time:
2016-08-03T19:36:11Z
class:
comments:
Fix loggerUsageCheck after clean

The `loggerUsageCheck` can only run on directories that exist. It was
checking whether or not the directories exists before they were built
built and then deciding to do no work. But only if you are building in
a cleaned environment which CI does, but people rarely do locally.

time:
2016-08-03T19:23:34Z
class:
comments:
Explicitly tell Netty to not use unsafe

With the security permissions that we grant to Netty, Netty can not
access unsafe (because it relies on having the runtime permission
accessDeclaredMembers and the reflect permission
suppressAccessChecks). Instead, we should just explicitly tell Netty to
not use unsafe. This commit adds a flag to the default jvm.options to
tell Netty to not look for unsafe.

Relates #19786

time:
2016-08-03T18:58:24Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
comments:
Merge pull request #19765 from rjernst/metadata_mapper_dup

Mappings: Fix detection of metadata fields in documents

time:
2016-08-03T18:57:58Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
comments:
Merge pull request #19770 from rjernst/script_service_component

Add ScriptService to dependencies available for plugin components

time:
2016-08-03T18:10:43Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerPipeliningTests.java
comments:
Merge pull request #19767 from jaymode/netty4

Enable Netty 4 extensions

time:
2016-08-03T16:21:39Z
class:
core/src/main/java/org/elasticsearch/common/ParseField.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/test/java/org/elasticsearch/index/query/MatchAllQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Merge pull request #19750 from javanna/fix/npe_parse_field_array

Throw ParsingException if a query is wrapped in an array

time:
2016-08-03T16:18:13Z
class:
comments:
Update term-level-queries.asciidoc

Typo fix

time:
2016-08-03T15:05:14Z
class:
core/src/main/java/org/elasticsearch/common/ParseField.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/test/java/org/elasticsearch/index/query/MatchAllQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Throw ParsingException if a query is wrapped in an array

Our parsing code accepted up until now queries in the following form (note that the query starts with `[`:

```
{
    "bool" : [
        {
          "must" : []
        }
    ]
}
```

This would lead to a null pointer exception as most parsers assume that the field name ("must" in this example) is the first thing that can be found in a query if its json is valid, hence always non null while parsing. Truth is that the additional array layer doesn't make the json invalid, hence the following code fragment would cause NPE within ParseField, because null gets passed to `parseContext.isDeprecatedSetting`:

```
if (token == XContentParser.Token.FIELD_NAME) {
    currentFieldName = parser.currentName();
} else if (parseContext.isDeprecatedSetting(currentFieldName)) {
    // skip
} else if (token == XContentParser.Token.START_OBJECT) {
```

We could add null checks in each of our parsers in lots of places, but we rely on `currentFieldName` being non null in all of our parsers, and we should consider it a bug when these unexpected situations are not caught explicitly. It would be best to find a way to prevent such queries altogether without changing all of our parsers.

The reason why such a query goes through is that we've been allowing a query to start with either `[` or `{`. The only reason I found is that we accept `match_all : []`. This seems like an undocumented corner case that we could drop support for. Then we can be stricter and accept only `{` as start token of a query. That way the only next token that the parser can encounter if the json is valid (otherwise the json parser would barf earlier) is actually a field_name, hence the assumption that all our parser makes hold.

The downside of this is simply dropping support for `match_all : []`

Relates to #12887

time:
2016-08-03T14:59:57Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ESClientYamlSuiteTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/GreaterThanEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/GreaterThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/IsFalseParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/IsTrueParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LengthParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LessThanOrEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LessThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/MatchParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SetSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/Assertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ExecutableSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/GreaterThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/GreaterThanEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/IsFalseAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/IsTrueAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LengthAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LessThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LessThanOrEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/MatchAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SetSection.java
comments:
Add line number to yaml test failures

Old:
```
   > Throwable #1: java.lang.AssertionError: expected [2xx] status code but api [reindex] returned [400 Bad Request] [{"error":{"root_cause":[{"type":"parsing_exception","reason":"[reindex] failed to parse field [dest]","line":1,"col":25}],"type":"parsing_exception","reason":"[reindex] failed to parse field [dest]","line":1,"col":25,"caused_by":{"type":"illegal_argument_exception","reason":"[dest] unknown field [asdfadf], parser not found"}},"status":400}]
   >    at __randomizedtesting.SeedInfo.seed([9325F8C5C6F227DD:1B71C71F680E4A25]:0)
   >    at org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:119)
   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:309)
   >    at java.lang.Thread.run(Thread.java:745)
```

New:
```
   > Throwable #1: java.lang.AssertionError: Failure at [reindex/10_basic:12]: expected [2xx] status code but api [reindex] returned [400 Bad Request] [{"error":{"root_cause":[{"type":"parsing_exception","reason":"[reindex] failed to parse field [dest]","line":1,"col":25}],"type":"parsing_exception","reason":"[reindex] failed to parse field [dest]","line":1,"col":25,"caused_by":{"type":"illegal_argument_exception","reason":"[dest] unknown field [asdfadf], parser not found"}},"status":400}]
   >    at __randomizedtesting.SeedInfo.seed([444DEEAF47322306:CC19D175E9CE4EFE]:0)
   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:329)
   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:309)
   >    at java.lang.Thread.run(Thread.java:745)
   > Caused by: java.lang.AssertionError: expected [2xx] status code but api [reindex] returned [400 Bad Request] [{"error":{"root_cause":[{"type":"parsing_exception","reason":"[reindex] failed to parse field [dest]","line":1,"col":25}],"type":"parsing_exception","reason":"[reindex] failed to parse field [dest]","line":1,"col":25,"caused_by":{"type":"illegal_argument_exception","reason":"[dest] unknown field [asdfadf], parser not found"}},"status":400}]
   >    at org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:119)
   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:325)
   >    ... 37 more
```

Sorry for the longer stack trace, but I wanted to be sure I didn't throw
anything away by accident.

time:
2016-08-03T14:56:19Z
class:
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
comments:
[TEST] fix log statement in ESIndexLevelReplicationTestCase

time:
2016-08-03T14:49:49Z
class:
comments:
Add 2.3.5 to packaging tests list

This should make the packaging tests happy again.

time:
2016-08-03T14:41:25Z
class:
comments:
Migration Guide changes for BlobContainer (#19731)

Adds a notice in the migration guide for removing
two deleteBlobs and one writeBlob method from the
BlobContainer interface.

time:
2016-08-03T13:50:47Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Added version 2.3.5 with bwc indices

time:
2016-08-03T13:37:38Z
class:
comments:
fix bwc index tool for versions before 5.0 (#19626)

* fix bwc index tool for versions before 5.0

time:
2016-08-03T13:16:18Z
class:
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilders.java
core/src/main/java/org/elasticsearch/common/io/stream/NamedWriteableRegistry.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/LocalShardSnapshot.java
core/src/main/java/org/elasticsearch/index/shard/ShadowIndexShard.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalOrder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/package-info.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/BucketHelpers.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TaskManagerTestCase.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/upgrade/UpgradeIT.java
core/src/test/java/org/elasticsearch/action/support/replication/BroadcastReplicationTests.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/common/io/stream/NamedWriteableRegistryTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/common/rounding/RoundingTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
core/src/test/java/org/elasticsearch/common/util/IndexFolderUpgraderTests.java
core/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingDisabledTests.java
core/src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoverySourceHandlerTests.java
core/src/test/java/org/elasticsearch/search/DocValueFormatTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/MissingValueIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramOffsetIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBoundsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/aggregations/package-info.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/AvgBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketSelectorIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/CumulativeSumIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DateDerivativeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DerivativeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/ExtendedStatsBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/MaxBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/MinBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/PercentilesBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/StatsBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/SumBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffIT.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/WritableTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/SmoothingModelTestCase.java
core/src/test/java/org/elasticsearch/tasks/PersistedTaskInfoTests.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/MoreExpressionTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4ScheduledPingTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoderTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/NettyTransportMultiPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/SimpleNetty4TransportTests.java
test/framework/src/main/java/org/elasticsearch/index/MapperTestUtils.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
test/framework/src/main/java/org/elasticsearch/test/OldIndexUtils.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
Merge branch 'master' into netty4

* master:
  Fix REST test documentation
  [Test] move methods from bwc test to test package for use in plugins (#19738)
  package-info.java should be in src/main only.
  Split regular histograms from date histograms. #19551
  Tighten up concurrent store metadata listing and engine writes (#19684)
  Plugins: Make NamedWriteableRegistry immutable and add extenion point for named writeables
  Add documentation for the 'elasticsearch-translog' tool
  [TEST] Increase time waiting for all shards to move off/on to a node
  Fixes the active shard count check in the case of (#19760)
  Fixes cat tasks operation in detailed mode
  ignore some docker craziness in scccomp environment checks

time:
2016-08-03T12:56:09Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/test/java/org/elasticsearch/tasks/ListTasksResponseTests.java
comments:
ListTasksResponse#toString() should not group by nodes

We just overwrite `toString()` method so it calls toXContent
with `group_by` = "whatever" so we don't try to group by nodes
which does not make sense in a toString() method.

We keep the old behavior for `toXContent()` method which
means that there is no impact in the REST layer but
only in logs and tests (where we call `toString()`).

Closes #19772.

time:
2016-08-03T11:50:45Z
class:
comments:
Fix REST test documentation

To run the tests we have to use now `*Yaml*IT` instead of `RestIT`:

```sh
gradle :distribution:integ-test-zip:integTest  -Dtests.class=org.elasticsearch.test.rest.*Yaml*IT
```

time:
2016-08-03T09:50:25Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
comments:
Merge pull request #19754 from rmuir/docker_seccomp

ignore some docker craziness in seccomp environment checks

time:
2016-08-03T09:41:46Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/upgrade/UpgradeIT.java
core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/common/util/IndexFolderUpgraderTests.java
test/framework/src/main/java/org/elasticsearch/test/OldIndexUtils.java
comments:
[Test] move methods from bwc test to test package for use in plugins (#19738)

* [Test] move methods from bwc test to test package for use in other plugins

time:
2016-08-03T09:11:25Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/metrics/package-info.java
core/src/test/java/org/elasticsearch/search/aggregations/package-info.java
comments:
package-info.java should be in src/main only.

time:
2016-08-03T08:36:38Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilders.java
core/src/main/java/org/elasticsearch/common/io/stream/NamedWriteableRegistry.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TaskManagerTestCase.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/support/replication/BroadcastReplicationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/common/io/stream/NamedWriteableRegistryTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingDisabledTests.java
core/src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/search/DocValueFormatTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/WritableTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/SmoothingModelTestCase.java
core/src/test/java/org/elasticsearch/tasks/PersistedTaskInfoTests.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4ScheduledPingTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoderTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/NettyTransportMultiPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/SimpleNetty4TransportTests.java
test/framework/src/main/java/org/elasticsearch/index/MapperTestUtils.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
Merge pull request #19764 from rjernst/writeable_registry

Make NamedWriteableRegistry immutable and add extension point for named writeables

time:
2016-08-03T07:43:04Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
comments:
Plugins: Add ScriptService to dependencies available for plugin components

time:
2016-08-03T06:39:48Z
class:
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalOrder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/BucketHelpers.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
core/src/test/java/org/elasticsearch/common/rounding/RoundingTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/MissingValueIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramOffsetIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBoundsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/AvgBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketSelectorIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/CumulativeSumIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DateDerivativeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DerivativeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/ExtendedStatsBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/MaxBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/MinBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/PercentilesBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/StatsBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/SumBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffIT.java
core/src/test/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/MoreExpressionTests.java
comments:
Split regular histograms from date histograms. #19551

Currently both aggregations really share the same implementation. This commit
splits the implementations so that regular histograms can support decimal
intervals/offsets and compute correct buckets for negative decimal values.

However the response API is still the same. So for intance both regular
histograms and date histograms will produce an
`org.elasticsearch.search.aggregations.bucket.histogram.Histogram`
aggregation.

The optimization to compute an identifier of the rounded value and the
rounded value itself has been removed since it was only used by regular
histograms, which now do the rounding themselves instead of relying on the
Rounding abstraction.

Closes #8082
Closes #4847

time:
2016-08-03T06:34:09Z
class:
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/LocalShardSnapshot.java
core/src/main/java/org/elasticsearch/index/shard/ShadowIndexShard.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoverySourceHandlerTests.java
comments:
Tighten up concurrent store metadata listing and engine writes (#19684)

In several places in our code we need to get a consistent list of files + metadata of the current index. We currently have a couple of ways to do in the `Store` class, which also does the right things and tries to verify the integrity of the smaller files. Sadly, those methods can run into trouble if anyone writes into the folder while they are busy. Most notably, the index shard's engine decides to commit half way and remove a `segment_N` file before the store got to checksum (but did already list it). This race condition typically doesn't happen as almost all of the places where we list files also happen to be places where the relevant shard doesn't yet have an engine. There  is however an exception (of course :)) which is the API to list shard stores, used by the master when it is looking for shard copies to assign to.

I already took one shot at fixing this in #19416 , but it turns out not to be enough - see for example https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-os-compatibility/os=sles/822.

The first inclination to fix this was to add more locking to the different Store methods and acquire the `IndexWriter` lock, thus preventing any engine for accessing if if the a shard is offline and use the current index commit snapshotting logic already existing in `IndexShard` for when the engine is started. That turned out to be a bad idea as we create more subtleties where, for example, a store listing can prevent a shard from starting up (the writer lock doesn't wait if it can't get access, but fails immediately, which is good). Another example is running on a shared directory where some other engine may actually hold the lock.

Instead I decided to take another approach:
1) Remove all the various methods on store and keep one, which accepts an index commit (which can be null) and also clearly communicates that the *caller* is responsible for concurrent access. This also tightens up the API which is a plus.
2) Add a `snapshotStore` method to IndexShard that takes care of all the concurrency aspects with the engine, which is now possible because it's all in the same place. It's still a bit ugly but at least it's all in one place and we can evaluate how to improve on this later on. I also renamed the  `snapshotIndex` method to `acquireIndexCommit` to avoid confusion and I think it communicates better what it does.

time:
2016-08-03T00:03:21Z
class:
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
comments:
Check inner field with metadata field name is ok

time:
2016-08-02T23:54:44Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java
comments:
Mappings: Fix detection of metadata fields in documents

In 2.0, the ability to specify metadata fields like _routing and _ttl
inside a document was removed. However, the ability to break through
this restriction has lingered, and the check that enforced it is
completely broken.

This change fixes the check, and adds a parsing test.

time:
2016-08-02T22:56:25Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/geo/builders/ShapeBuilders.java
core/src/main/java/org/elasticsearch/common/io/stream/NamedWriteableRegistry.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TaskManagerTestCase.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/support/replication/BroadcastReplicationTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/common/io/stream/NamedWriteableRegistryTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingDisabledTests.java
core/src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/search/DocValueFormatTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/completion/WritableTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/SmoothingModelTestCase.java
core/src/test/java/org/elasticsearch/tasks/PersistedTaskInfoTests.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4ScheduledPingTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoderTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/NettyTransportMultiPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/SimpleNetty4TransportTests.java
test/framework/src/main/java/org/elasticsearch/index/MapperTestUtils.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
Plugins: Make NamedWriteableRegistry immutable and add extenion point for named writeables

Currently any code that wants to added NamedWriteables to the
NamedWriteableRegistry can do so via guice injection of the registry,
and registering at construction time. However, this makes the registry
complex: it has both get and register methods synchronized, and there is
likely contention on the read side from multiple threads.  The
registration has mostly already been contained to guice modules at node
construction time.

This change makes the registry immutable, taking all of the
NamedWriteable readers at construction time. It also allows plugins to
added arbitrary named writables that it may use in its own transport
actions.

time:
2016-08-02T22:27:02Z
class:
comments:
Merge remote-tracking branch 'dakrone/document-translog-tool'

time:
2016-08-02T22:26:28Z
class:
comments:
Add documentation for the 'elasticsearch-translog' tool

This adds documentation to the translog page for the CLI truncation
tool.

time:
2016-08-02T22:18:39Z
class:
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
comments:
[TEST] Increase time waiting for all shards to move off/on to a node

time:
2016-08-02T22:00:39Z
class:
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
comments:
Fixes the active shard count check in the case of (#19760)

ActiveShardCount.ALL by checking for active shards,
not just started shards, as a shard could be active
but in the relocating state (i.e. not in the started
state).

time:
2016-08-02T21:07:30Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerPipeliningTests.java
comments:
Simplify Netty 4 transport implementations

The Netty 4 transport implementations have an unnecessary dependency on
SocketChannels, and can instead just use plain Channels.

time:
2016-08-02T19:21:31Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
comments:
Fixes cat tasks operation in detailed mode

Currently the cat tasks operation fails in the detailed mode.

Closes #19755

time:
2016-08-02T18:46:44Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java
comments:
make netty4 http request public

time:
2016-08-02T18:10:40Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
comments:
Allow for Netty 4 HTTP extensions

This commit enables the Netty 4 HTTP server implementation to allow for
extensions.

time:
2016-08-02T18:06:29Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
comments:
add javadocs

time:
2016-08-02T17:45:41Z
class:
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
comments:
update transport to allow for extensions

time:
2016-08-02T16:19:38Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
comments:
ignore some docker craziness in scccomp environment checks

time:
2016-08-02T16:19:19Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/Netty3Plugin.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/Netty4Plugin.java
comments:
Default transport and HTTP to Netty 4

This commit sets the default transport and HTTP implementation to use
transport-netty4.

Relates #19563

time:
2016-08-02T13:48:21Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobContainer.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
Enables implementations of the BlobContainer interface to (#19749)

conform with the requirements of the writeBlob method by
throwing a FileAlreadyExistsException if attempting to write
to a blob that already exists. This change means implementations
of BlobContainer should never overwrite blobs - to overwrite a
blob, it must first be deleted and then can be written again.

Closes #15579

time:
2016-08-02T13:31:08Z
class:
comments:
Merge pull request #19687 from javanna/docs/java_api_version

[DOCS] replace {es.version} in maven coordinates with current version

time:
2016-08-02T13:30:30Z
class:
core/src/main/java/org/apache/log4j/package-info.java
core/src/main/java/org/elasticsearch/action/package-info.java
core/src/main/java/org/elasticsearch/monitor/package-info.java
core/src/main/java/org/elasticsearch/package-info.java
core/src/main/java/org/elasticsearch/plugins/package-info.java
core/src/main/java/org/elasticsearch/repositories/package-info.java
core/src/main/java/org/elasticsearch/script/package-info.java
core/src/main/java/org/elasticsearch/search/aggregations/package-info.java
core/src/main/java/org/elasticsearch/search/profile/aggregation/package-info.java
core/src/main/java/org/elasticsearch/search/profile/package-info.java
core/src/main/java/org/elasticsearch/search/profile/query/package-info.java
comments:
Add docs for a few packages

This'll make javadocs slightly more useful....

time:
2016-08-02T13:21:43Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/url/URLBlobContainer.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/ChecksumBlobStoreFormat.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/BlobStoreFormatIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/BlobContainerWrapper.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobContainer.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreTestCase.java
comments:
Cleans up the BlobContainer interface by removing the (#19727)

writeBlob method takes a BytesReference in favor of just
the writeBlob method that takes an InputStream.

Closes #18528

time:
2016-08-02T13:17:21Z
class:
comments:
[DOCS] replace {es.version} in maven coordinates with current version

time:
2016-08-02T13:15:01Z
class:
comments:
Documentation changes for wait_for_active_shards (#19581)

Documentation changes and migration doc changes for introducing 
wait_for_active_shards and removing write consistency level.

Closes #19581

time:
2016-08-02T13:01:11Z
class:
core/src/main/java/org/elasticsearch/action/WriteConsistencyLevel.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/index/IndexRequestTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/action/support/WaitActiveShardCountIT.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexIT.java
core/src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresIT.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequestBuilder.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParserTests.java
comments:
Merge pull request #19454 from abeyad/remove-write-consistency-level

Removes write consistency level across replication action APIs in favor of wait_for_active_shards

time:
2016-08-02T12:17:51Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/AbstractBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkMain.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchBenchmarkTask.java
comments:
Improve client benchmark (#19736)

* Allow to run client benchmark as an uberjar
* Busy wait to avoid accidental skew on low target throughput rates
* Trigger and wait for full GC to happen between trials
* Add missing SuppressForbidden to allow System.gc in client benchmark

time:
2016-08-02T12:11:42Z
class:
comments:
Ban dangerous methods of java.lang.Thread (#19677)

Ban dangerous methods of java.lang.Thread

With this commit we disallow usage of the method Thread.stop().

time:
2016-08-02T06:46:38Z
class:
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
comments:
Document and enforce cancellation policy of CancellableThreads (#19712)

With this commit we add documentation and additional checks to
enforce the cancellation policy of CancellableThreads (which is
disallow `Thread#interrupt()` on any of the threads managed by
it).

time:
2016-08-01T23:14:37Z
class:
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
comments:
Refactors wait_for_active_shards index settings tests

time:
2016-08-01T23:05:10Z
class:
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/RunningStats.java
comments:
Serialize doc counts in Matrix-Stats module

This fixes a bug in the RunningStats class for the matrix stats aggregation module. doc counts were not being searlized which means they were only computed the first time the aggregation was computed. This was causing incorrect results when the aggregation was pulled from cache.

time:
2016-08-01T20:15:12Z
class:
comments:
Fixes header level for migration doc entry

time:
2016-08-01T17:51:39Z
class:
core/src/main/java/org/elasticsearch/index/translog/TranslogReader.java
comments:
Revert to older exception message

If the uuidBytes and ref are converted to utf8, it's possible they can
trip an assertion related to valid UTF-8/UTF-16 ranges, so display them
as hex, not as strings.
Is the toString really useful? I guess you could try and convert and eat the exception if it doesn't if it were really useful.

yes it's useful, it prints out the hex code for the bytes, which I still think is helpful


time:
2016-08-01T17:37:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/index/IndexRequestTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/action/support/WaitActiveShardCountIT.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
comments:
Makes the index.write.wait_for_active_shards setting index-level and
dynamically updatable for both index creation and write operations.

time:
2016-08-01T17:35:30Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
comments:
Before, transport replication actions implemented a checkWriteConsistency()
method to determine if a write consistency check should be performed
before proceeding with the action.  This commit removes this method from
the transport replication actions in favor of setting the ActiveShardCount
on the request, with setting the value to ActiveShardCount.NONE if the
transport action's checkWriteConsistency() method returned false.

time:
2016-08-01T17:35:29Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexIT.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
comments:
Refactors ActiveShardCount

time:
2016-08-01T17:35:29Z
class:
core/src/main/java/org/elasticsearch/action/WriteConsistencyLevel.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/test/java/org/elasticsearch/action/support/WaitActiveShardCountIT.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/search/basic/SearchWhileCreatingIndexIT.java
core/src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresIT.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequestBuilder.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParserTests.java
comments:
Removes the notion of write consistency level across all APIs in
favor of waiting for active shard copy count (wait_for_active_shards).

time:
2016-08-01T16:03:53Z
class:
core/src/main/java/org/elasticsearch/cluster/SnapshotsInProgress.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/repositories/IndexId.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryData.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotId.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/bwcompat/RepositoryUpgradabilityIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/repositories/IndexIdTests.java
core/src/test/java/org/elasticsearch/repositories/RepositoryDataTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobStore.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/MockAmazonS3.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStoreContainerTests.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
Merge pull request #19706 from elastic/enhancement/snapshot-blob-handling

More resilient blob handling in snapshot repositories

time:
2016-08-01T14:59:47Z
class:
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/script/FileScriptTests.java
core/src/test/java/org/elasticsearch/script/IndexLookupIT.java
core/src/test/java/org/elasticsearch/script/ScriptContextTests.java
core/src/test/java/org/elasticsearch/script/StoredScriptsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/RangeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ScriptedMetricIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
core/src/test/java/org/elasticsearch/search/fields/SearchFieldsIT.java
core/src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/scriptfilter/ScriptQuerySearchIT.java
core/src/test/java/org/elasticsearch/search/sort/SimpleSortIT.java
core/src/test/java/org/elasticsearch/search/stats/SearchStatsIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/IndexLookupTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SimpleSortTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovyIndexedScriptTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/TemplateQueryBuilderTests.java
test/framework/src/main/java/org/elasticsearch/script/MockScriptEngine.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
 [TEST] Kill remaining lang-groovy messy tests

After #13834 many tests that used Groovy scripts (for good or bad reason) in their tests have been moved in the lang-groovy module and the issue #13837 has been created to track these messy tests in order to clean them up.

The work started with #19280, #19302 and #19336 and this PR moves the remaining messy tests back in core, removes the dependency on Groovy, changes the scripts in order to use the mocked script engine, and change the tests to integration tests.

It also moves IndexLookupIT test back (even if it has good chance to be removed soon) and fixes its tests.

It also changes AbstractQueryTestCase to use custom script plugins in tests.

closes #13837

time:
2016-08-01T14:57:37Z
class:
comments:
Remove `_missing_` from the docs.

It is removed in 5.0, see #15153.

time:
2016-08-01T14:50:02Z
class:
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
comments:
AzureBlobContainer's deleteBlob method now throws a NoSuchFileException
instead of a vanilla IOException when the blob doesn't exist, in order
to conform to the BlobContainer's interface contract.

time:
2016-08-01T14:42:58Z
class:
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteResponse.java
core/src/main/java/org/elasticsearch/action/index/IndexResponse.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateResponse.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/support/master/IndexingMasterFailoverIT.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/WaitUntilRefreshIT.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingIT.java
core/src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/date/LegacyDateMappingTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/indices/DateMathIndexExpressionsIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsIT.java
core/src/test/java/org/elasticsearch/ingest/IngestClientIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWithRandomIOExceptionsIT.java
core/src/test/java/org/elasticsearch/search/nested/SimpleNestedIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
comments:
Rename operation to result and reworking responses

* Rename operation to result and reworking responses
* Rename DocWriteResponse.Operation enum to DocWriteResponse.Result

These are just easier to interpret names.

Closes #19664

time:
2016-08-01T12:11:35Z
class:
comments:
Merge pull request #19718 from elastic/revert-18519-docs/add_console_to_search

Revert "Add console to docs for inner hits, explain, and friends"

time:
2016-08-01T12:09:54Z
class:
comments:
Revert "Add console to docs for inner hits, explain, and friends"

time:
2016-08-01T11:43:32Z
class:
core/src/main/java/org/elasticsearch/tasks/package-info.java
comments:
Add description to org.elasticsearch.tasks package (#19700)

Yet more readable docs!

time:
2016-08-01T11:43:13Z
class:
core/src/main/java/org/elasticsearch/search/suggest/completion/context/package-info.java
core/src/main/java/org/elasticsearch/search/suggest/completion/package-info.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/package-info.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/package-info.java
core/src/main/java/org/elasticsearch/search/suggest/package-info.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/package-info.java
core/src/main/java/org/elasticsearch/search/suggest/term/package-info.java
comments:
Add descriptions for o.e.search.suggest packages (#19699)

Let's have readable javadoc!

time:
2016-08-01T11:08:50Z
class:
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
comments:
make election stop not be a failure (#19705)

During our master elections, nodes "vote" for a master being issuing a join request to it. Since this is done in an async fashion, joins may arrive before the master itself has realized it had won the election. Therefore we start accumulating node joins on every node at election start (we don't know the result yet). When the election finish nodes that did not become the master (i.e., joined another node which won the election) need to potentially process and fail any incoming join request they may have received during the election. This is currently achieved by always issuing a cluster state update task that is doomed to fail, even if no pending joins are actually there. That aspect results in confusing (debug) log messages, making it seems like something is wrong. For example (note that `NotMasterException`)

```
[2016-07-30 22:25:53,040][DEBUG][cluster.service          ] [node_t1] processing [zen-disco-process-pending-joins [{node_t0}{4SqBTyYNQ82J9c75Cs7jtg}{kutaNSYbTZCSybvqczgWCA}{127.0.0.1}{127.0.0.1:9400} elected]]: execute
[2016-07-30 22:25:53,041][DEBUG][transport                ] [node_t1] connected to node [{node_t0}{4SqBTyYNQ82J9c75Cs7jtg}{kutaNSYbTZCSybvqczgWCA}{127.0.0.1}{127.0.0.1:9400}]
[2016-07-30 22:25:53,045][DEBUG][cluster.service          ] [node_t1] cluster state update task [zen-disco-process-pending-joins [{node_t0}{4SqBTyYNQ82J9c75Cs7jtg}{kutaNSYbTZCSybvqczgWCA}{127.0.0.1}{127.0.0.1:9400} elected]] failed
NotMasterException[Node [{node_t1}{eAQts270TiGFpoCDE-0PQQ}{or5bsv2ET220su78DLJk5g}{127.0.0.1}{127.0.0.1:9401}] not master for join request]
[2016-07-30 22:25:53,048][DEBUG][cluster.service          ] [node_t1] processing [zen-disco-process-pending-joins [{node_t0}{4SqBTyYNQ82J9c75Cs7jtg}{kutaNSYbTZCSybvqczgWCA}{127.0.0.1}{127.0.0.1:9400} elected]]: took [7ms] no change in cluster_state
```

This commit cleans up  the logic a bit to only use failure where there are actual joins that are failed. The result is cleaner logs as well:

```
[2016-07-30 22:23:12,880][DEBUG][cluster.service          ] [node_t1] processing [zen-disco-election-stop [{node_t0}{jMR5HCpOQnOM4pGeFkUjng}{B5WIZQAdQk2cWbjGZ21mvQ}{127.0.0.1}{127.0.0.1:9400} elected]]: execute
[2016-07-30 22:23:12,881][DEBUG][cluster.service          ] [node_t1] processing [zen-disco-election-stop [{node_t0}{jMR5HCpOQnOM4pGeFkUjng}{B5WIZQAdQk2cWbjGZ21mvQ}{127.0.0.1}{127.0.0.1:9400} elected]]: took [0s] no change in cluster_state
[2016-07-30 22:23:12,881][DEBUG][transport                ] [node_t1] connected to node [{node_t0}{jMR5HCpOQnOM4pGeFkUjng}{B5WIZQAdQk2cWbjGZ21mvQ}{127.0.0.1}{127.0.0.1:9400}]
```

time:
2016-08-01T10:10:09Z
class:
comments:
Merge pull request #18519 from MaineC/docs/add_console_to_search

Add console to docs for inner hits, explain, and friends

time:
2016-08-01T09:09:56Z
class:
comments:
Remove unnecessary indices refresh and wait for green status in REST tests

time:
2016-08-01T09:09:48Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
comments:
/_cat/shards should support wilcards for indices

closes #19634

time:
2016-08-01T08:59:52Z
class:
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
core/src/main/java/org/elasticsearch/index/search/MultiMatchQuery.java
core/src/test/java/org/elasticsearch/index/query/MultiMatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/query/MultiMatchQueryIT.java
comments:
Merge pull request #19665 from cbuescher/missing-field-MultiMatchQuery

`multi_match` query should produce MatchNoDocs query on unknown field

time:
2016-08-01T07:22:12Z
class:
comments:
Remove unnecessary indices refresh from cluster.state/20_filtering.yaml file

time:
2016-08-01T07:22:12Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/test/java/org/elasticsearch/cluster/SimpleClusterStateIT.java
comments:
Allow routing table to be filtered by index pattern

Before this commit when an index pattern is used to filter the cluster state, only indices metadata are populated and routing table is just empty. This commit aligns the behavior of the filtering of cluster state's routing table with the filtering of cluster state's metadata so that coherent data are returned for both routing table & metadata when index pattern is requested.

time:
2016-07-31T19:58:24Z
class:
comments:
Add note to put mapping API docs on index creation

This commit clarifies that the put mapping API can also apply when
creating an index.

Closes #19703

time:
2016-07-31T16:49:28Z
class:
core/src/test/java/org/elasticsearch/search/aggregations/EquivalenceIT.java
comments:
Fix EquivalenceIT#testRandomRanges failed with -Dtest.seed A4648847991E5C27

Set double value to double type mapping in EquivalenceIT.

Closes #19697

time:
2016-07-31T04:20:37Z
class:
core/src/main/java/org/elasticsearch/cluster/SnapshotsInProgress.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/repositories/IndexId.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryData.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotId.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/bwcompat/RepositoryUpgradabilityIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/repositories/IndexIdTests.java
core/src/test/java/org/elasticsearch/repositories/RepositoryDataTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobStore.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
Merge pull request #19421 from abeyad/snapshot-uuids-in-blob-names

Snapshot UUIDs in blob names

time:
2016-07-30T22:46:58Z
class:
core/src/main/java/org/elasticsearch/repositories/RepositoryData.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/test/java/org/elasticsearch/repositories/RepositoryDataTests.java
comments:
Removes legacy format in RepositoryData

time:
2016-07-30T00:31:24Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestRequest.java
core/src/main/java/org/elasticsearch/rest/RestUtils.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterRerouteAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterStateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestDeleteStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestGetTaskAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/package-info.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/common/path/PathTrieTests.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/rest/RestUtilsTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestPutSearchTemplateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequest.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
plugins/repository-gcs/src/test/java/org/elasticsearch/common/blobstore/gcs/MockHttpTransport.java
comments:
Squash o.e.rest.action.admin.cluster

In an effort to reduce the number of tiny packages we have in the
code base this moves all the files that were in subdirectories of
`org.elasticsearch.rest.action.admin.cluster` into
`org.elasticsearch.rest.action.admin.cluster`.

Also fixes line length in these packages.

time:
2016-07-30T00:26:30Z
class:
core/src/main/java/org/elasticsearch/env/ESFileStore.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/test/java/org/elasticsearch/env/ESFileStoreTests.java
comments:
Merge pull request #19554 from mikemccand/negative_usable_space

Guard against negative result from FileStore.getUsableSpace when picking data path for a new shard

time:
2016-07-29T21:13:27Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteResponseParsers.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java
comments:
Reindex: Only ask for _version we need it

`_reindex` only needs the `_version` if the `dest` has
`"version_type": "external"`. So it shouldn't ask for it unless it does.

`_update_by_query` and `_delete_by_query` always need the `_version`.

Closes #19135

time:
2016-07-29T21:13:01Z
class:
core/src/test/java/org/elasticsearch/env/ESFileStoreTests.java
comments:
use mockito instead

time:
2016-07-29T19:00:30Z
class:
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
comments:
Only write forced_refresh if we forced a refresh

Otherwise it just adds noise to the response.

Closes #19629

time:
2016-07-29T18:28:17Z
class:
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
core/src/main/java/org/elasticsearch/index/search/MultiMatchQuery.java
comments:
Adressing review comments

time:
2016-07-29T18:27:28Z
class:
comments:
Merge pull request #19667 from rjernst/client_jar_id

Build: Fix client jars for plugins/modules to have the correct artifactId

time:
2016-07-29T18:21:43Z
class:
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteResponse.java
core/src/main/java/org/elasticsearch/action/index/IndexResponse.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateResponse.java
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/support/master/IndexingMasterFailoverIT.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/WaitUntilRefreshIT.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingIT.java
core/src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/date/LegacyDateMappingTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/indices/DateMathIndexExpressionsIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/recovery/IndexPrimaryRelocationIT.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsIT.java
core/src/test/java/org/elasticsearch/ingest/IngestClientIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWithRandomExceptionsIT.java
core/src/test/java/org/elasticsearch/search/basic/SearchWithRandomIOExceptionsIT.java
core/src/test/java/org/elasticsearch/search/nested/SimpleNestedIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
comments:
Remove isCreated and isFound from the Java API

This is cleanup work from #19566, where @nik9000 suggested trying to nuke the isCreated and isFound methods. I've combined nuking the two methods with removing UpdateHelper.Operation in favor of DocWriteResponse.Operation here.

Closes #19631.

time:
2016-07-29T18:13:10Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFromRemoteBuildRestClientTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFromRemoteWhitelistTests.java
comments:
Use fewer threads when reindexing-from-remote

Reindex from remote uses the Elasticsearch client which uses apache
httpasyncclient which spins up 5 thread by default, 1 as a dispatcher
and 4 more to handle IO. This changes Reindex's usage so it only spins
up two thread - 1 dispatcher and one to handle io. It also renames the
threads to "es-client-$taskid-$thread_number". That way if we see any
thread sticking around we can trace it back to the task.

time:
2016-07-29T16:29:48Z
class:
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
core/src/main/java/org/elasticsearch/index/search/MultiMatchQuery.java
comments:
Try catching potential null query results and convert to MatchNoDocsQuery

time:
2016-07-29T15:58:30Z
class:
core/src/main/java/org/elasticsearch/action/ingest/GetPipelineResponse.java
comments:
ingest: Made the response format of the get pipeline api match with the response format of the index template api

Closes #19585

time:
2016-07-29T15:53:12Z
class:
comments:
Dependencies: Upgrade to netty 4.1.4 (#19689)

Removes our internal snapshot repo we used until 4.1.4 was released.

time:
2016-07-29T15:51:33Z
class:
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
comments:
add defense to selectNewPathForShard

time:
2016-07-29T14:41:39Z
class:
comments:
Add client jars pom generation, and make transport client depend on
transport client plugin jars

time:
2016-07-29T14:08:03Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/get/GetIndexTemplatesResponse.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/AliasesNotFoundException.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCloseIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestDeleteIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestForceMergeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetFieldMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestHeadIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestOpenIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRefreshAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestSyncedFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestUpgradeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestValidateQueryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/package-info.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/rest/action/admin/indices/RestAnalyzeActionTests.java
comments:
Squash o.e.rest.action.admin.indices

In an effort to reduce the number of tiny packages we have in the
code base this moves all the files that were in subdirectories of
`org.elasticsearch.rest.action.admin.indices` into
`org.elasticsearch.rest.action.admin.indices`.

It also adds a `package-info.java` file explaining what the files in
the package *do*.

Also fixes line length in these packages. It makes a single non-checkstyle
change: implementing `ToXContent` on `GetIndexTemplatesResponse`. I did
this because it was the right thing to do and it fixed a line length
violation.

time:
2016-07-29T13:25:12Z
class:
comments:
[DOCS] updated documentation for transport client changes

Updated dependency in Java API docs and added section in breaking
changes

time:
2016-07-29T13:06:49Z
class:
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
comments:
fixed compiler warnining and removed unused imports

time:
2016-07-29T12:52:24Z
class:
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
comments:
test: fix type in test name

time:
2016-07-29T12:43:31Z
class:
comments:
Rename "breaking java" tag to "breaking-java"

time:
2016-07-29T12:43:31Z
class:
comments:
Updated release notes to use breaking-java tag

time:
2016-07-29T12:43:31Z
class:
comments:
Added release notes for 5.0.0-alpha5

time:
2016-07-29T12:43:31Z
class:
comments:
Update release notes script to add the "breaking java" label

time:
2016-07-29T11:49:11Z
class:
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/JvmExamplePlugin.java
comments:
Fix typo in comment

time:
2016-07-29T10:41:11Z
class:
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/search/highlight/CustomQueryScorer.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
comments:
Plain highlighter should ignore parent/child queries.

The plain highligher fails when it tries to select the fragments based on a query containing either a `has_child` or `has_parent` query.

The plain highligher should just ignore parent/child queries as it makes no sense to highligh a parent match with a has_child as the child documents are not available at highlight time. Instead if child document should be highlighed inner hits should be used.

Parent/child queries already have no effect when the `fvh` or `postings` highligher is used. The test added in this commit verifies that.

Closes #14999

time:
2016-07-29T09:22:47Z
class:
comments:
[DOCS] add java REST client docs (#19618)

[DOCS] add java REST client docs

Add some docs on how to get started with the Java REST client, some common configuration that may be needed and the sniffer component.

time:
2016-07-29T08:56:37Z
class:
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/search/MatchQuery.java
core/src/test/java/org/elasticsearch/index/query/MultiMatchQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/query/MultiMatchQueryIT.java
comments:
`multi_match` query should produce MatchNoDocs query on unknown fieldname

Currently when the `fields` parameter used in a `multi_match` query contains a
wildcard expression that doesn't resolve to any field name in the target index,
MultiMatchQueryBuilder produces a `null` query. This change changes it to be a
MatchNoDocs query, since returning no documents for this case is already the
current behaviour. Also adding missing field names (with and without wildcards)
to the unit and integration test.

time:
2016-07-29T08:49:40Z
class:
core/src/main/java/org/elasticsearch/common/ParseField.java
comments:
#19676 Added JavaDocs and comments to ParseField

Added JavaDocs and comments to ParseField

time:
2016-07-29T08:39:38Z
class:
core/src/main/java/org/elasticsearch/common/ParseField.java
comments:
Added JavaDocs and comments to ParseField

time:
2016-07-29T08:14:32Z
class:
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
comments:
Undeprecates `aggs` in the search request

This change adds a second ParseField for the `aggs` field in the search
request so both `aggregations` and `aggs` are undeprecated allowed
fields in the search request

Closes #19504

time:
2016-07-29T07:59:29Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/BucketUtilsTests.java
comments:
Make the heuristic to compute the default shard size less aggressive.

The current heuristic to compute a default shard size is pretty aggressive,
it returns `max(10, number_of_shards * size)` as a value for the shard size.
I think making it less aggressive has the benefit that it would reduce the
likelyness of running into OOME when there are many shards (yearly
aggregations with time-based indices can make numbers of shards in the
thousands) and make the use of breadth-first more likely/efficient.

This commit replaces the heuristic with `size * 1.5 + 10`, which is enough
to have good accuracy on zipfian distributions.

time:
2016-07-29T02:09:01Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/common/util/set/Sets.java
core/src/main/java/org/elasticsearch/repositories/RepositoryData.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/test/java/org/elasticsearch/repositories/RepositoryDataTests.java
comments:
This commit first reads the repository data and only
upgrades if it determines the read data is in the legacy
format. It writes the upgraded version if it is not a
read-only repository and caches the repository data if
it is a read-only repository.

time:
2016-07-29T01:54:22Z
class:
comments:
Switch example from inclusion to exclusion.

Page is explaining allocation exclusion- example should be about exclusion as well.

time:
2016-07-28T20:13:58Z
class:
core/src/main/java/org/elasticsearch/rest/action/support/RestStatusToXContentListener.java
comments:
Assert we return Location header with 201 CREATED

Add an assertion to the most popular way of turning the response object
into the actual http response. As it stands all places we return
`201 CREATED` we return the `Location` header. This will help to keep it
that way, though it won't catch all uses.

Followup to #19509

time:
2016-07-28T20:07:44Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/package-info.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestResponseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ESClientYamlSuiteTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/Features.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/FileUtils.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/package-info.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/package-info.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestSpec.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/package-info.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SkipSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/package-info.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/FileUtilsTests.java
comments:
Add package-info to o.e.test.rest

This removes two packages, consolidating them into their parent package
and adds `package-info.java` files to describe all of the packages under
`org.elasticsearch.test.rest`.

time:
2016-07-28T19:19:10Z
class:
comments:
Build: Fix client jars for plugins/modules to have the correct artifactId

For transport client plugins, the jars and poms are renamed with the
-client suffix. But we need the artifactId to match the id in the
filename.

time:
2016-07-28T16:05:51Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/TestAwsS3Service.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java
comments:
Extract AWS Key from KeyChain instead of using potential null value

While I was working on #18703, I discovered a bad behavior when people don't provide AWS key/secret as part as their `elasticsearch.yml` but rely on SysProps or env. variables...

In [`InternalAwsS3Service#getClient(...)`](https://github.com/elastic/elasticsearch/blob/d4366f8493ac8d2f7091404ffd346e4f3c0f9af9/plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java#L76-L141), we have:

```java
        Tuple<String, String> clientDescriptor = new Tuple<>(endpoint, account);
        AmazonS3Client client = clients.get(clientDescriptor);
```

But if people don't provide credentials, `account` is `null`.

Even if it actually could work, I think that we should use the `AWSCredentialsProvider` we create later on and extract from it the `account` (AWS KEY actually) and then use it as the second value of the tuple.

Closes #19557.

time:
2016-07-28T15:55:16Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/AbstractBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkRunner.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Metrics.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/MetricsCalculator.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Sample.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/SampleRecorder.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/rest/RestClientBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/transport/TransportClientBenchmark.java
client/rest/src/main/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumer.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/ResponseListener.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/FailureTrackingResponseListenerTests.java
client/rest/src/test/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumerTests.java
client/rest/src/test/java/org/elasticsearch/client/HostsTrackingFailureListener.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/ResponseExceptionTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/SyncResponseListenerTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/ElasticsearchHostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SnifferBuilder.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/ElasticsearchHostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ElasticsearchStatusException.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteResponse.java
core/src/main/java/org/elasticsearch/action/index/IndexResponse.java
core/src/main/java/org/elasticsearch/action/ingest/GetPipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineResponse.java
core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateResponse.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/io/ReleasableBytesStream.java
core/src/main/java/org/elasticsearch/common/io/stream/BytesStreamOutput.java
core/src/main/java/org/elasticsearch/common/io/stream/ReleasableBytesStreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasable.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/network/NetworkService.java
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
core/src/main/java/org/elasticsearch/common/xcontent/StatusToXContent.java
core/src/main/java/org/elasticsearch/env/Environment.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/http/HttpServerAdapter.java
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/TranslogReader.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/index/translog/TruncateTranslogCommand.java
core/src/main/java/org/elasticsearch/indices/breaker/HierarchyCircuitBreakerService.java
core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/plugins/DiscoveryPlugin.java
core/src/main/java/org/elasticsearch/rest/AbstractRestChannel.java
core/src/main/java/org/elasticsearch/rest/RestChannel.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestRequest.java
core/src/main/java/org/elasticsearch/rest/RestStatus.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestStatusToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorBase.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsFetchSubPhase.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/TransportServiceAdapter.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/FileChangesListener.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineResponseTests.java
core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java
core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkServiceTests.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreTests.java
core/src/test/java/org/elasticsearch/index/shard/ShardPathTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java
core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java
core/src/test/java/org/elasticsearch/ingest/IngestDocumentTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationTestScriptsPlugin.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/FiltersIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/MinDocCountIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/NestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ReverseNestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MaxIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MinIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestSearchIT.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
core/src/test/java/org/elasticsearch/watcher/FileWatcherTests.java
distribution/deb/src/test/java/org/elasticsearch/test/rest/DebClientYamlTestSuiteIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/CreatedLocationHeaderIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/IntegTestZipClientYamlTestSuiteIT.java
distribution/rpm/src/test/java/org/elasticsearch/test/rest/RpmClientYamlTestSuiteIT.java
distribution/tar/src/test/java/org/elasticsearch/test/rest/TarClientYamlTestSuiteIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/ZipClientYamlTestSuiteIT.java
docs/src/test/java/org/elasticsearch/smoketest/DocsClientYamlTestSuiteIT.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/MatrixStatsClientYamlTestSuiteIT.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/IngestCommonClientYamlTestSuiteIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/LangExpressionClientYamlTestSuiteIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/LangGroovyClientYamlTestSuiteIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/RenderSearchTemplateTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/SuggestSearchTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/LangMustacheClientYamlTestSuiteIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateRequestTests.java
comments:
merge master

time:
2016-07-28T15:51:38Z
class:
comments:
Merge remote-tracking branch 'dadoonet/pr/19556-use-DefaultAWSCredentialsProviderChain'

time:
2016-07-28T15:46:05Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
comments:
Merge remote-tracking branch 'origin/master'

time:
2016-07-28T15:44:50Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
comments:
Merge pull request #19610 from areek/enhancement/19484

Add zero-padding to auto-generated rollover index name increment

time:
2016-07-28T15:38:52Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
comments:
Merge branch 'pr/19556-use-DefaultAWSCredentialsProviderChain'

time:
2016-07-28T15:34:00Z
class:
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
comments:
Remove non needed imports

time:
2016-07-28T15:31:16Z
class:
core/src/main/java/org/elasticsearch/env/ESFileStore.java
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/test/java/org/elasticsearch/env/ESFileStoreTests.java
core/src/test/java/org/elasticsearch/index/shard/NewPathForShardTests.java
comments:
work around JDK bug: if FileStore.getXXXSpace APIs return negative value, change that to Long.MAX_VALUE instead

time:
2016-07-28T14:59:18Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/network/NetworkService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/DiscoveryPlugin.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkServiceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpChannelTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerPipeliningTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpChannelTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerPipeliningTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerTransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4ScheduledPingTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoderTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/NettyTransportMultiPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/SimpleNetty4TransportTests.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2NetworkTests.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceInstancesService.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceInstancesServiceImpl.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceModule.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/network/GceNameResolver.java
plugins/discovery-gce/src/main/java/org/elasticsearch/discovery/gce/GceUnicastHostsProvider.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoverTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceInstancesServiceMock.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceMetadataServiceMock.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceMockUtils.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceNetworkTests.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
Merge branch 'pr/15724-gce-network-host-master'

time:
2016-07-28T14:20:48Z
class:
comments:
[docs] Deprecate found and created (#19633)

These parts of delete and index response have been replaced with the
operation field.

time:
2016-07-28T13:53:14Z
class:
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/ResponseExceptionTests.java
comments:
Merge pull request #19653 from javanna/enhancement/response_exception_body_message

Add response body to ResponseException error message

time:
2016-07-28T12:55:07Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineResponse.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineResponseTests.java
comments:
Merge branch 'fix/npe-simulate-pipeline-no-id'

time:
2016-07-28T12:44:20Z
class:
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/ResponseExceptionTests.java
comments:
Add response body to ResponseException error message

Consuming the response body to make it part of the exception message means that it may not be readable anymore later, depending on whether the entity is repeatable or not. Turns out that the response body tells a lot about the error itself, and considering that we don't expect bodies to be incredibly big for errors, we can wrap the entity into a BufferedHttpEntity to make it repeatable.

Closes #19622

time:
2016-07-28T12:39:46Z
class:
comments:
another s/maven/gradle

time:
2016-07-28T12:38:13Z
class:
comments:
Update TESTING.asciidoc (#19652)

time:
2016-07-28T12:00:57Z
class:
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
comments:
#19649 Makes `m` case sensitive in TimeValue

Makes `m` case sensitive in TimeValue

time:
2016-07-28T11:49:53Z
class:
comments:
Removed array-of-string example from search template

Relates to #19643

time:
2016-07-28T11:28:24Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineResponse.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineResponseTests.java
comments:
Fix NPE when simulating a pipeline with no id

When you simulate a pipeline without specifying an id against a node where the request is redirected to a master node,
the request and the response is throwing a NPE:

```
java.lang.NullPointerException
    at __randomizedtesting.SeedInfo.seed([3B9536AC6AA23C06:DD62280CF765DA1F]:0)
    at org.elasticsearch.common.io.stream.StreamOutput.writeString(StreamOutput.java:300)
    at org.elasticsearch.action.ingest.SimulatePipelineRequest.writeTo(SimulatePipelineRequest.java:92)
    at org.elasticsearch.transport.local.LocalTransport.sendRequest(LocalTransport.java:222)
    at org.elasticsearch.test.transport.AssertingLocalTransport.sendRequest(AssertingLocalTransport.java:95)
    at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:470)
    at org.elasticsearch.action.TransportActionNodeProxy.execute(TransportActionNodeProxy.java:51)
    at org.elasticsearch.client.transport.support.TransportProxyClient.lambda$execute$441(TransportProxyClient.java:63)
    at org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:233)
    at org.elasticsearch.client.transport.support.TransportProxyClient.execute(TransportProxyClient.java:63)
    at org.elasticsearch.client.transport.TransportClient.doExecute(TransportClient.java:309)
    at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:403)
    at org.elasticsearch.client.FilterClient.doExecute(FilterClient.java:67)
    at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:403)
    at org.elasticsearch.client.support.AbstractClient$ClusterAdmin.execute(AbstractClient.java:710)
    at org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:80)
    at org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:54)
    at org.elasticsearch.action.ActionRequestBuilder.get(ActionRequestBuilder.java:62)
    at org.elasticsearch.ingest.bano.BanoProcessorIntegrationTest.testSimulateProcessorConfigTarget(BanoProcessorIntegrationTest.java:139)
```

This patch fixes this and adds some random tests.

time:
2016-07-28T11:14:08Z
class:
core/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreTests.java
comments:
fix explain in function_score if no function filter matches (#19185)

* fix explain in function_score if no function filter matches

When each function in function_score has a filter but none of them matches
we always assume 1 for the combined functions and then combine that with the
sub query score.
But the explanation did not reflect that because in case no function matched
we did not even use the actual score that was computed in the explanation.

time:
2016-07-28T11:09:05Z
class:
comments:
Update gateway.asciidoc (#19572)

* Update gateway.asciidoc

Added a note to clarify that, in cases where nodes in a cluster have different setting, the node that is the elected master takes precedence over anything else.

* Update gateway.asciidoc

Updated as per @bleskes's comments

time:
2016-07-28T10:27:24Z
class:
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
comments:
Makes `m` case sensitive in TimeValue

The reason for this change is that currently if a user specifies e.g.`2M`
meaning 2 months as a time value instead of throwing an exception
explaining that time units in months are not supported (due to months
having variable time spans) we instead will parse this to 2 minutes.
This could be surprising to a user and could mean put a lot of load on
the cluster performing a task that was never intended and whose results
will be useless anyway.

It is generally accepted that `m` indicates minutes and `M` indicates
months with time values so this is consistent with the expectations a
user might have around specifying time units.

A concrete example of where this causes issues is in the decay score
function which uses TimeValue to parse the scale and offset parameters
of the decay into millisecond values to use in the calculation.

Relates to #19619

time:
2016-07-27T22:40:49Z
class:
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
comments:
[TEST] throw correct error within assertBusy in TruncateTranslogIT

time:
2016-07-27T22:33:14Z
class:
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/watcher/FileChangesListener.java
core/src/test/java/org/elasticsearch/watcher/FileWatcherTests.java
comments:
Merge pull request #19638 from rjernst/filewatcher_interface

Change file changes listener for resource watcher to an interface

time:
2016-07-27T22:26:09Z
class:
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
comments:
Only log running out of slots when out of slots (#19637)

We were logging on every `refresh=wait_for`.

time:
2016-07-27T22:25:24Z
class:
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/watcher/FileChangesListener.java
core/src/test/java/org/elasticsearch/watcher/FileWatcherTests.java
comments:
Change file changes listener for resource watcher to an interface

Currently to use the ResourceWatcherService to watch files, you
implement a FileChangesListener. However, this is a class, not an
interface, even though it has no base state or anything like that, just
defining a few methods. This change converts FileChangesListener to an
interface.

time:
2016-07-27T21:01:08Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/Definition.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/ErrorHandlingLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/AExpression.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ALink.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ANode.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/AStatement.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/AStoreable.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EAssignment.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EBinary.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EBool.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EBoolean.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ECallLocal.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ECapturingFunctionRef.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ECast.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EChain.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EComp.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EConditional.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EConstant.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EDecimal.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EExplicit.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EFunctionRef.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EInstanceof.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ELambda.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EListInit.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EMapInit.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ENewArray.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ENewObj.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ENull.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ENumeric.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/ERegex.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EStatic.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EString.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EUnary.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EVariable.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/IDefLink.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/LBrace.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/LCallInvoke.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/LField.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PBrace.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PCallInvoke.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PField.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubArrayLength.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubBrace.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubCallInvoke.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubDefArray.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubDefCall.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubDefField.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubField.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubListShortcut.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubMapShortcut.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/PSubShortcut.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SBlock.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SBreak.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SCatch.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SContinue.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SDeclBlock.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SDeclaration.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SDo.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SEach.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SExpression.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFunction.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SIf.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SIfElse.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SReturn.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSource.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSubEachArray.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSubEachIterable.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SThrow.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/STry.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SWhile.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/package-info.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicAPITests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicExpressionTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/EqualsTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/NoSemiColonTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/PostfixTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/RegexTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ReservedWordTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ScoreTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ScriptEngineTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ScriptTestCase.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/TryCatchTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/WhenThingsGoWrongTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/antlr/ParserTests.java
comments:
Refactored Painless link nodes into expression nodes to simplify
load/store operations of variable/method chains.

Closes #19459

time:
2016-07-27T18:17:41Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ElasticsearchStatusException.java
core/src/main/java/org/elasticsearch/rest/RestStatus.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/package-info.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteInfo.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/package-info.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFromRemoteWhitelistTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFromRemoteWithAuthTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexRequestTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexSourceTargetValidationTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RestReindexActionTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteInfoTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/support/Features.java
comments:
Add authentication to reindex-from-remote

The tests for authentication extend ESIntegTestCase and use a mock
authentication plugin. This way the clients don't have to worry about
running it. Sadly, that means we don't really have good coverage on the
REST portion of the authentication.

This also adds ElasticsearchStatusException, and exception on which you
can set an explicit status. The nice thing about it is that you can
set the RestStatus that it returns to whatever arbitrary status you like
based on the status that comes back from the remote system.
reindex-from-remote then uses it to wrap all remote failures, preserving
the status from the remote Elasticsearch or whatever proxy is between us
and the remove Elasticsearch.

time:
2016-07-27T18:03:20Z
class:
comments:
clarify awkward text (#19608)

time:
2016-07-27T16:59:38Z
class:
comments:
[docs] missing a comma in the terms aggregation example

time:
2016-07-27T16:21:20Z
class:
comments:
Document proxy flags explicitly and nuke Windows section

Closes #19503

time:
2016-07-27T16:17:19Z
class:
comments:
Correct Java setting to pass proxy options to plugin install

It appears that `proxyHost` and `proxyPort` are not valid Java
properties; they should be prefixed with either `http` or `https`. There
is no code that the flags pass through in `plugin` that munges the flags
in any way, so they should be passed through as indicated in the Java
docs.

See:
https://docs.oracle.com/javase/7/docs/technotes/guides/net/proxies.html
https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html

time:
2016-07-27T15:54:52Z
class:
comments:
provide code example for processors setting

A simple example but was missing

Closes #19567

time:
2016-07-27T14:50:47Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
comments:
Add zero-padding to auto-generated rollover index name increment

closes #19484

time:
2016-07-27T12:56:17Z
class:
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
comments:
test: fix generic type

time:
2016-07-27T12:30:14Z
class:
comments:
Update to current format.

time:
2016-07-27T11:35:58Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/DiscoveryPlugin.java
comments:
Fix comments and method name

time:
2016-07-27T11:28:53Z
class:
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceInstancesServiceImpl.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/network/GceNameResolver.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoverTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceMetadataServiceMock.java
comments:
Rename GceMetadataServiceImpl to GceMetadataService

See https://github.com/elastic/elasticsearch/pull/15765/files#r65527203

time:
2016-07-27T10:19:08Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/DiscoveryPlugin.java
comments:
Revert last change and make generateCustomNameResolvers private in Node class

time:
2016-07-27T09:36:06Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/DiscoveryPlugin.java
comments:
Move generateCustomNameResolvers to DiscoveryPlugin interface

time:
2016-07-27T09:24:53Z
class:
client/sniffer/src/main/java/org/elasticsearch/client/sniff/ElasticsearchHostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SnifferBuilder.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/ElasticsearchHostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteResponse.java
core/src/main/java/org/elasticsearch/action/index/IndexResponse.java
core/src/main/java/org/elasticsearch/action/ingest/GetPipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateResponse.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/TranslogReader.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/index/translog/TruncateTranslogCommand.java
core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java
core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java
core/src/test/java/org/elasticsearch/ingest/IngestDocumentTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
distribution/deb/src/test/java/org/elasticsearch/test/rest/DebClientYamlTestSuiteIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/IntegTestZipClientYamlTestSuiteIT.java
distribution/rpm/src/test/java/org/elasticsearch/test/rest/RpmClientYamlTestSuiteIT.java
distribution/tar/src/test/java/org/elasticsearch/test/rest/TarClientYamlTestSuiteIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/ZipClientYamlTestSuiteIT.java
docs/src/test/java/org/elasticsearch/smoketest/DocsClientYamlTestSuiteIT.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/MatrixStatsClientYamlTestSuiteIT.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/IngestCommonClientYamlTestSuiteIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/LangExpressionClientYamlTestSuiteIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/LangGroovyClientYamlTestSuiteIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/LangMustacheClientYamlTestSuiteIT.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/LangPainlessClientYamlTestSuiteIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorClientYamlTestSuiteIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexClientYamlTestSuiteIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3ClientYamlTestSuiteIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4ClientYamlTestSuiteIT.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/IcuClientYamlTestSuiteIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/KuromojiClientYamlTestSuiteIT.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/PhoneticClientYamlTestSuiteIT.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/SmartCNClientYamlTestSuiteIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/StempelClientYamlTestSuiteIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/DiscoveryAzureClassicClientYamlTestSuiteIT.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/CloudAwsClientYamlTestSuiteIT.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/DiscoveryGceClientYamlTestSuiteIT.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/IngestAttachmentClientYamlTestSuiteIT.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/IngestGeoIpClientYamlTestSuiteIT.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/IngestUserAgentClientYamlTestSuiteIT.java
plugins/jvm-example/src/test/java/org/elasticsearch/plugin/example/JvmExampleClientYamlTestSuiteIT.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavascriptClientYamlTestSuiteIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonClientYamlTestSuiteIT.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/MapperAttachmentsClientYamlTestSuiteIT.java
plugins/mapper-murmur3/src/test/java/org/elasticsearch/index/mapper/murmur3/MapperMurmur3ClientYamlTestSuiteIT.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/MapperSizeClientYamlTestSuiteIT.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/RepositoryAzureClientYamlTestSuiteIT.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/RepositoryGcsClientYamlTestSuiteIT.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/RepositoryHdfsClientYamlTestSuiteIT.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RepositoryS3ClientYamlTestSuiteIT.java
plugins/store-smb/src/test/java/org/elasticsearch/index/store/StoreSmbClientYamlTestSuiteIT.java
qa/backwards-5.0/src/test/java/org/elasticsearch/backwards/Backwards50ClientYamlTestSuiteIT.java
qa/smoke-test-ingest-disabled/src/test/java/org/elasticsearch/smoketest/SmokeTestIngestDisabledClientYamlTestSuiteIT.java
qa/smoke-test-ingest-with-all-dependencies/src/test/java/org/elasticsearch/smoketest/SmokeTestIngestWithAllDepsClientYamlTestSuiteIT.java
qa/smoke-test-multinode/src/test/java/org/elasticsearch/smoketest/SmokeTestMultiNodeClientYamlTestSuiteIT.java
qa/smoke-test-plugins/src/test/java/org/elasticsearch/smoketest/SmokeTestPluginsClientYamlTestSuiteIT.java
qa/smoke-test-reindex-with-painless/src/test/java/org/elasticsearch/smoketest/SmokeTestReindexWithPainlessClientYamlTestSuiteIT.java
qa/smoke-test-reindex-with-painless/src/test/java/org/elasticsearch/smoketest/SmokeTestReindexWithPainlessIT.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/BlacklistedPathPatternMatcher.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestCandidate.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ESClientYamlSuiteTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/Stash.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/client/ClientYamlTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/client/ClientYamlTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/client/ClientYamlTestResponseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestFragmentParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestParseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSuiteParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/GreaterThanEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/GreaterThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/IsFalseParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/IsTrueParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LengthParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LessThanOrEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LessThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/MatchParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SetSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SetupSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SkipSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/TeardownSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApi.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestSpec.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ApiCallSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/Assertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ClientYamlTestSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ClientYamlTestSuite.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ExecutableSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/GreaterThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/GreaterThanEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/IsFalseAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/IsTrueAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LengthAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LessThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LessThanOrEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/MatchAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SetSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SetupSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SkipSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/TeardownSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/support/Features.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/support/FileUtils.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/BlacklistedPathPatternMatcherTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/ObjectPathTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/StashTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/AbstractParserTestCase.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/AssertionParsersTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlSuiteTestParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/SetSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/SetupSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/SkipSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/TeardownSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/TestSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParserFailingTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/support/FileUtilsTests.java
comments:
Merge branch 'master' into pr/15724-gce-network-host-master

time:
2016-07-27T09:23:25Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/network/NetworkService.java
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Move registerCustomNameResolvers to Node class and rename it

time:
2016-07-27T09:23:18Z
class:
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpChannelTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerPipeliningTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerTransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4ScheduledPingTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoderTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/NettyTransportMultiPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/SimpleNetty4TransportTests.java
comments:
Fix after merge

time:
2016-07-27T08:01:36Z
class:
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
comments:
removed useless comment and make sure all public constructors delegate to the package protected constructor.

time:
2016-07-27T07:50:44Z
class:
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
comments:
Deprecate template query.

Closes #19390

time:
2016-07-27T07:48:51Z
class:
comments:
[DOCS] fix documentation for selecting algorithm for percentiles agg

time:
2016-07-27T07:35:09Z
class:
core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java
core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java
core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java
core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java
core/src/test/java/org/elasticsearch/ingest/IngestDocumentTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
comments:
ingest: Change the `foreach` processor to use the `_ingest._value` ingest metadata attribute to store the current array element being processed.

Closes #19592

time:
2016-07-26T23:17:02Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
comments:
Fixes debug logging on index creation waiting for shards to be started (#19612)

time:
2016-07-26T21:42:10Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
await fix testConcurrentSendRespondAndDisconnect

time:
2016-07-26T20:14:04Z
class:
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
comments:
[TEST] Assert that shard has been released before running truncate tool

It's possible that the shard has been closed but the resources
associated with it have not yet been released. This waits until the
index lock can be obtained before running the tool.

time:
2016-07-26T19:08:19Z
class:
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
comments:
Tests: add more logging to testCorruptFileThenSnapshotAndRestore

This test fails because of an unknown exceptions in FsService.stats() method, which causes no stats to be returned. With this change the exception that is causing this issue is going to be logged.

Related to #19591 and #17964

time:
2016-07-26T18:01:30Z
class:
comments:
[docs] Switch contraction to possesive

time:
2016-07-26T17:53:44Z
class:
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
distribution/deb/src/test/java/org/elasticsearch/test/rest/DebClientYamlTestSuiteIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/IntegTestZipClientYamlTestSuiteIT.java
distribution/rpm/src/test/java/org/elasticsearch/test/rest/RpmClientYamlTestSuiteIT.java
distribution/tar/src/test/java/org/elasticsearch/test/rest/TarClientYamlTestSuiteIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/ZipClientYamlTestSuiteIT.java
docs/src/test/java/org/elasticsearch/smoketest/DocsClientYamlTestSuiteIT.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/MatrixStatsClientYamlTestSuiteIT.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/IngestCommonClientYamlTestSuiteIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/LangExpressionClientYamlTestSuiteIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/LangGroovyClientYamlTestSuiteIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/LangMustacheClientYamlTestSuiteIT.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/LangPainlessClientYamlTestSuiteIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorClientYamlTestSuiteIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexClientYamlTestSuiteIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3ClientYamlTestSuiteIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4ClientYamlTestSuiteIT.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/IcuClientYamlTestSuiteIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/KuromojiClientYamlTestSuiteIT.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/PhoneticClientYamlTestSuiteIT.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/SmartCNClientYamlTestSuiteIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/StempelClientYamlTestSuiteIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/DiscoveryAzureClassicClientYamlTestSuiteIT.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/CloudAwsClientYamlTestSuiteIT.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/DiscoveryGceClientYamlTestSuiteIT.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/IngestAttachmentClientYamlTestSuiteIT.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/IngestGeoIpClientYamlTestSuiteIT.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/IngestUserAgentClientYamlTestSuiteIT.java
plugins/jvm-example/src/test/java/org/elasticsearch/plugin/example/JvmExampleClientYamlTestSuiteIT.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavascriptClientYamlTestSuiteIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonClientYamlTestSuiteIT.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/MapperAttachmentsClientYamlTestSuiteIT.java
plugins/mapper-murmur3/src/test/java/org/elasticsearch/index/mapper/murmur3/MapperMurmur3ClientYamlTestSuiteIT.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/MapperSizeClientYamlTestSuiteIT.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/RepositoryAzureClientYamlTestSuiteIT.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/RepositoryGcsClientYamlTestSuiteIT.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/RepositoryHdfsClientYamlTestSuiteIT.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RepositoryS3ClientYamlTestSuiteIT.java
plugins/store-smb/src/test/java/org/elasticsearch/index/store/StoreSmbClientYamlTestSuiteIT.java
qa/backwards-5.0/src/test/java/org/elasticsearch/backwards/Backwards50ClientYamlTestSuiteIT.java
qa/smoke-test-ingest-disabled/src/test/java/org/elasticsearch/smoketest/SmokeTestIngestDisabledClientYamlTestSuiteIT.java
qa/smoke-test-ingest-with-all-dependencies/src/test/java/org/elasticsearch/smoketest/SmokeTestIngestWithAllDepsClientYamlTestSuiteIT.java
qa/smoke-test-multinode/src/test/java/org/elasticsearch/smoketest/SmokeTestMultiNodeClientYamlTestSuiteIT.java
qa/smoke-test-plugins/src/test/java/org/elasticsearch/smoketest/SmokeTestPluginsClientYamlTestSuiteIT.java
qa/smoke-test-reindex-with-painless/src/test/java/org/elasticsearch/smoketest/SmokeTestReindexWithPainlessClientYamlTestSuiteIT.java
qa/smoke-test-reindex-with-painless/src/test/java/org/elasticsearch/smoketest/SmokeTestReindexWithPainlessIT.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/BlacklistedPathPatternMatcher.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestCandidate.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ESClientYamlSuiteTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/Stash.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/client/ClientYamlTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/client/ClientYamlTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/client/ClientYamlTestResponseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestFragmentParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestParseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlTestSuiteParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/GreaterThanEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/GreaterThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/IsFalseParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/IsTrueParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LengthParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LessThanOrEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/LessThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/MatchParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SetSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SetupSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/SkipSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/parser/TeardownSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApi.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestSpec.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ApiCallSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/Assertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ClientYamlTestSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ClientYamlTestSuite.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/ExecutableSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/GreaterThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/GreaterThanEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/IsFalseAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/IsTrueAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LengthAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LessThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/LessThanOrEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/MatchAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SetSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SetupSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/SkipSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/TeardownSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/support/Features.java
test/framework/src/main/java/org/elasticsearch/test/rest/yaml/support/FileUtils.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/BlacklistedPathPatternMatcherTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/ObjectPathTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/StashTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/AbstractParserTestCase.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/AssertionParsersTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/ClientYamlSuiteTestParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/DoSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/SetSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/SetupSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/SkipSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/TeardownSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/parser/TestSectionParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParserFailingTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestApiParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/yaml/support/FileUtilsTests.java
comments:
Rename client yaml test infrastructure

This makes it obvious that these tests are for running the client yaml
suites. Now that there are other ways of running tests using the REST
client against a running cluster we can't go on calling the shared
client yaml tests "REST tests". They are rest tests, but they aren't
**the** rest tests.

time:
2016-07-26T17:48:15Z
class:
core/src/main/java/org/elasticsearch/action/ingest/GetPipelineRequest.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
comments:
[Ingest] Add REST _ingest/pipeline to get all pipelines

This adds an extra REST handler for "_ingest/pipeline" so that users do not need to supply "_ingest/pipeline/*" to get all of them.

- Also adds a teardown section to related REST-tests for ingest.

time:
2016-07-26T16:51:01Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/AbstractBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkRunner.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Metrics.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/MetricsCalculator.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Sample.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/SampleRecorder.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/rest/RestClientBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/transport/TransportClientBenchmark.java
client/rest/src/main/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumer.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/ResponseListener.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/FailureTrackingResponseListenerTests.java
client/rest/src/test/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumerTests.java
client/rest/src/test/java/org/elasticsearch/client/HostsTrackingFailureListener.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/SyncResponseListenerTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/Strings.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/io/ReleasableBytesStream.java
core/src/main/java/org/elasticsearch/common/io/stream/BytesStreamOutput.java
core/src/main/java/org/elasticsearch/common/io/stream/ReleasableBytesStreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasable.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
core/src/main/java/org/elasticsearch/common/xcontent/StatusToXContent.java
core/src/main/java/org/elasticsearch/env/Environment.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/http/HttpServerAdapter.java
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/http/HttpTransportSettings.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/indices/breaker/HierarchyCircuitBreakerService.java
core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/rest/AbstractRestChannel.java
core/src/main/java/org/elasticsearch/rest/RestChannel.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestRequest.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestStatusToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorBase.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsFetchSubPhase.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/TransportServiceAdapter.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/common/StringsTests.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/shard/ShardPathTests.java
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationTestScriptsPlugin.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/FiltersIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/MinDocCountIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/NestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ReverseNestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MaxIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MinIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestSearchIT.java
distribution/deb/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/CreatedLocationHeaderIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/rpm/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/tar/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
docs/src/test/java/org/elasticsearch/smoketest/SmokeTestDocsIT.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/MatrixAggregationRestIT.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/IngestCommonRestIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/ExpressionRestIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovyRestIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/RenderSearchTemplateTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/SuggestSearchTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheRestIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateRequestTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/PainlessRestIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorRestIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexRestIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequest.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequestHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfigBuilder.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3MessageChannelHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty3/src/test/java/org/elasticsearch/ESNetty3IntegTestCase.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3RestIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortIntegrationIT.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpChannel.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequestHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/cors/Netty4CorsConfig.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/cors/Netty4CorsConfigBuilder.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/cors/Netty4CorsHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/pipelining/HttpPipelinedRequest.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/pipelining/HttpPipelinedResponse.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/pipelining/HttpPipeliningHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/Netty4Plugin.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/ByteBufBytesReference.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/ByteBufStreamInput.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4InternalESLogger.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4MessageChannelHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4OpenChannelsHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoder.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Utils.java
modules/transport-netty4/src/test/java/org/elasticsearch/ESNetty4IntegTestCase.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpChannelTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpClient.java
comments:
Merge branch 'master' into pr/15724-gce-network-host-master

time:
2016-07-26T16:28:31Z
class:
comments:
Consolify term and phrase suggester docs

This includes a working example of reverse filters to support
correcting prefix errors.

time:
2016-07-26T16:26:30Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/network/NetworkService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkServiceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpChannelTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerPipeliningTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2NetworkTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceMockUtils.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceNetworkTests.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
Move custom name resolvers to NetworkService CTOR

Instead of using NetworkModule we can directly inject them in NetworkService CTOR.

See https://github.com/elastic/elasticsearch/pull/15765#issuecomment-235307974

time:
2016-07-26T16:17:52Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
comments:
Merge pull request #19595 from cbuescher/fix-19422

Allow empty json object in request body in `_count` API.

time:
2016-07-26T16:04:05Z
class:
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
comments:
remove socket timeout from MockTcpTransport

added in b208a7dbaeeb269e6d1e121f46a29cb6b0f8004f

time:
2016-07-26T16:02:22Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
increase logging information in testConcurrentSendRespondAndDisconnect

time:
2016-07-26T16:01:57Z
class:
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
comments:
add `Socket closed` variant to NetworkExceptionHelper.isCloseConnectionException

time:
2016-07-26T15:58:39Z
class:
comments:
Set up project substitution for client:transport

This ensures that projects depending on client:transport (such as client:benchmark) properly resolve this dependency.

time:
2016-07-26T15:39:11Z
class:
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/TranslogReader.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/index/translog/TruncateTranslogCommand.java
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
comments:
Merge remote-tracking branch 'dakrone/translog-cli'

time:
2016-07-26T15:35:17Z
class:
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
comments:
Fix unit test build failure

We didn't catch the failure because we tested against the fork instead
of master. I think.

time:
2016-07-26T15:28:37Z
class:
client/sniffer/src/main/java/org/elasticsearch/client/sniff/ElasticsearchHostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SnifferBuilder.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/ElasticsearchHostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
comments:
Simplify Sniffer initialization and automatically create the default HostsSniffer (#19599)

Simplify Sniffer initialization and automatically create the default HostsSniffer

Take Sniffer.Builder out to its own top level class. Remove HostsSniffer.Builder and let SnifferBuilder create the default HostsSniffer. This simplifies the Sniffer initialization as the HostsSniffer is not mandatory anymore. It can still be specified though in case the configuration needs to be changed or a different impl has to be used. Also make HostsSniffer an interface.

time:
2016-07-26T15:16:19Z
class:
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteResponse.java
core/src/main/java/org/elasticsearch/action/index/IndexResponse.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateResponse.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java
comments:
Add _operation field to index, update, delete responses

Performing the bulk request shown in #19267 now results in the following:
```
{"_index":"test","_type":"test","_id":"1","_version":1,"_operation":"create","forced_refresh":false,"_shards":{"total":2,"successful":1,"failed":0},"status":201}
{"_index":"test","_type":"test","_id":"1","_version":1,"_operation":"noop","forced_refresh":false,"_shards":{"total":2,"successful":1,"failed":0},"status":200}
```

time:
2016-07-26T14:34:07Z
class:
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/TranslogReader.java
core/src/main/java/org/elasticsearch/index/translog/TranslogToolCli.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/index/translog/TruncateTranslogCommand.java
core/src/test/java/org/elasticsearch/index/translog/TruncateTranslogIT.java
comments:
Add 'elasticsearch-translog' CLI tool with 'translog' command

This adds the `bin/elasticsearch-translate` bin file that will be used
for CLI tasks pertaining to Elasticsearch. Currently it implements only
a single sub-command, `truncate-translog`, that creates a truncated
translog for a given folder.

Here's what running the tool looks like:

```
 bin/elasticsearch-translog truncate -d data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/
Checking existing translog files
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   WARNING: Elasticsearch MUST be stopped before running this tool   !
!                                                                     !
!   WARNING:    Documents inside of translog files will be lost       !
!                                                                     !
!   WARNING:          The following files will be DELETED!            !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-10.tlog
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-18.tlog
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-21.tlog
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-12.ckp
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-25.ckp
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-29.tlog
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-2.tlog
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-5.tlog
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-41.ckp
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-6.ckp
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-37.ckp
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-24.ckp
--> data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-11.ckp

Continue and DELETE files? [y/N] y
Reading translog UUID information from Lucene commit from shard at [data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/index]
Translog Generation: 3
Translog UUID      : AxqC4rocTC6e0fwsljAh-Q
Removing existing translog files
Creating new empty checkpoint at [data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog.ckp]
Creating new empty translog at [data/nodes/0/indices/P45vf_YQRhqjfwLMUvSqDw/0/translog/translog-3.tlog]
Done.
```

It also includes a `-b` batch operation that can be used to skip the
confirmation diaglog.

Resolves #19123

time:
2016-07-26T14:04:51Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
comments:
Add socket timeout in MockTcpTransport

With this commit we set an explicit socket timeout in
MockTcpTransport to avoid hanging tests in case of disconnections.

time:
2016-07-26T13:27:25Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/test/java/org/elasticsearch/index/query/QueryParseContextTests.java
comments:
Adding unit tests for QueryParseContext

time:
2016-07-26T10:33:54Z
class:
comments:
[DOCS] fix callout in buckets path docs

time:
2016-07-26T09:29:35Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/AbstractBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkRunner.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Metrics.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/MetricsCalculator.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Sample.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/SampleRecorder.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/rest/RestClientBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/transport/TransportClientBenchmark.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/common/xcontent/StatusToXContent.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/indices/breaker/HierarchyCircuitBreakerService.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestStatusToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorBase.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsFetchSubPhase.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationTestScriptsPlugin.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/MinDocCountIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/NestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ReverseNestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MaxIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MinIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestSearchIT.java
distribution/deb/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/CreatedLocationHeaderIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/rpm/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/tar/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
docs/src/test/java/org/elasticsearch/smoketest/SmokeTestDocsIT.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/MatrixAggregationRestIT.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/IngestCommonRestIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/ExpressionRestIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovyRestIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/RenderSearchTemplateTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/SuggestSearchTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheRestIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateRequestTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/PainlessRestIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorRestIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexRestIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3RestIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4RestIT.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/AnalysisICURestIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/AnalysisKuromojiRestIT.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/AnalysisPhoneticRestIT.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/AnalysisSmartChineseRestIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryRestIT.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/DiscoveryEc2RestIT.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/DiscoveryGCERestIT.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/IngestAttachmentRestIT.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/IngestGeoIpRestIT.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentRestIT.java
plugins/jvm-example/src/test/java/org/elasticsearch/plugin/example/JvmExampleRestIT.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavaScriptRestIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonScriptRestIT.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/MapperAttachmentsRestIT.java
plugins/mapper-murmur3/src/test/java/org/elasticsearch/index/mapper/murmur3/MapperMurmur3RestIT.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/MapperSizeRestIT.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureRepositoryRestIT.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageRepositoryRestIT.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsRepositoryRestIT.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RepositoryS3RestIT.java
plugins/store-smb/src/test/java/org/elasticsearch/index/store/SMBStoreRestIT.java
qa/backwards-5.0/src/test/java/org/elasticsearch/backwards/MultiNodeBackwardsIT.java
qa/smoke-test-ingest-disabled/src/test/java/org/elasticsearch/smoketest/IngestDisabledIT.java
qa/smoke-test-ingest-with-all-dependencies/src/test/java/org/elasticsearch/smoketest/IngestWithDependenciesIT.java
qa/smoke-test-multinode/src/test/java/org/elasticsearch/smoketest/SmokeTestMultiIT.java
qa/smoke-test-plugins/src/test/java/org/elasticsearch/smoketest/SmokeTestPluginsIT.java
qa/smoke-test-reindex-with-painless/src/test/java/org/elasticsearch/smoketest/SmokeTestReindexWithPainlessIT.java
test/framework/src/main/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
test/framework/src/main/java/org/elasticsearch/script/MockScriptEngine.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESClientYamlSuiteTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
Merge branch 'master' into docs/add_console_to_search

time:
2016-07-26T09:29:27Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/FiltersIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
comments:
#19571 Add _bucket_count option to buckets_path

Add _bucket_count option to buckets_path

time:
2016-07-26T09:01:22Z
class:
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/AbstractBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkRunner.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/BenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Metrics.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/MetricsCalculator.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/Sample.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/metrics/SampleRecorder.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchBenchmarkTask.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/search/SearchRequestExecutor.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/rest/RestClientBenchmark.java
client/benchmark/src/main/java/org/elasticsearch/client/benchmark/transport/TransportClientBenchmark.java
comments:
Add client benchmark

With this commit we add a benchmark for the new REST client and the
existing transport client.

Closes #19281

time:
2016-07-26T08:28:21Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateRangeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/FiltersIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoDistanceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
comments:
Add _bucket_count option to buckets_path

This change adds a new special path to the buckets_path syntax
`_bucket_count`. This new option will return the number of buckets for a
multi-bucket aggregation, which can then be used in pipeline
aggregations.

Closes #19553

time:
2016-07-26T07:54:05Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
comments:
Allow empty json object in request body in `_count` API

When the request body is missing, all documents in the target index are counted.
As mentioned in #19422, the same should happen when the request body is an empty
json object. This is also the behaviour for the `_search` endpoint and the two
APIs should behave in the same way.

time:
2016-07-26T07:04:51Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/NestedIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ReverseNestedIT.java
comments:
aggs: Changed how `nested` and `reverse_nested` aggs know about their nested depth level.

Before the aggregation tree was traversed to figure out what the parent level is, this commit
changes that by using `NestedScope` to figure out the nested depth level. The big upsides
are that this cleans up `NestedAggregator` (it used a hack to lazily figure out the nested parent filter)
 and this is also what `nested` query uses and therefor the `nested` query can be included inside `nested`
 aggregation and work correctly.

Closes #11749
Closes #12410

time:
2016-07-26T06:27:47Z
class:
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4RestIT.java
comments:
Temporarily increase Netty4RestIT timeout

Recently, we experience timeouts on our Windows build slaves for
Netty4RestIT. Until we have figured out what's going on, we
increase this test suite's timeout temporarily to ensure this
timeout does not mask other problems.

time:
2016-07-26T04:29:04Z
class:
comments:
Remove duplicate dependency declaration for http client (#19580)

We disable transitive dependencies in our build plugin
for all dependencies except for the group `org.elasticsearch`.
However, in the reindex plugin we depend on the REST client
and declare its dependencies again which is not necessary
(and led to problems with conflicting versions in #19281).

With this PR we remove the duplicate declaration.

time:
2016-07-26T00:40:41Z
class:
comments:
Merge pull request #19589 from rjernst/license_header_generic

Allow license header check to be customized

time:
2016-07-26T00:30:15Z
class:
comments:
Use string concat instead of gstring

time:
2016-07-26T00:22:08Z
class:
comments:
Add javadocs for adding additional license types to the license headers
check

time:
2016-07-26T00:17:12Z
class:
comments:
Construct hashmap directly instead of using crazy groovy syntax

time:
2016-07-26T00:05:40Z
class:
comments:
Build: Allow license header check to be customized

This change allows setting which license families are approved, as well
as adding matchers for additional license types.

time:
2016-07-25T21:02:40Z
class:
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/common/xcontent/StatusToXContent.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestStatusToXContentListener.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/test/java/org/elasticsearch/action/DocWriteResponseTests.java
distribution/deb/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/CreatedLocationHeaderIT.java
distribution/integ-test-zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/rpm/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/tar/src/test/java/org/elasticsearch/test/rest/RestIT.java
distribution/zip/src/test/java/org/elasticsearch/test/rest/RestIT.java
docs/src/test/java/org/elasticsearch/smoketest/SmokeTestDocsIT.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/MatrixAggregationRestIT.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/IngestCommonRestIT.java
modules/lang-expression/src/test/java/org/elasticsearch/script/expression/ExpressionRestIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/script/groovy/GroovyRestIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheRestIT.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/PainlessRestIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorRestIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexRestIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3RestIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4RestIT.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/AnalysisICURestIT.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/AnalysisKuromojiRestIT.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/AnalysisPhoneticRestIT.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/AnalysisSmartChineseRestIT.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/AnalysisPolishRestIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryRestIT.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/DiscoveryEc2RestIT.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/DiscoveryGCERestIT.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/IngestAttachmentRestIT.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/IngestGeoIpRestIT.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentRestIT.java
plugins/jvm-example/src/test/java/org/elasticsearch/plugin/example/JvmExampleRestIT.java
plugins/lang-javascript/src/test/java/org/elasticsearch/script/javascript/LangJavaScriptRestIT.java
plugins/lang-python/src/test/java/org/elasticsearch/script/python/LangPythonScriptRestIT.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/MapperAttachmentsRestIT.java
plugins/mapper-murmur3/src/test/java/org/elasticsearch/index/mapper/murmur3/MapperMurmur3RestIT.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/MapperSizeRestIT.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureRepositoryRestIT.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageRepositoryRestIT.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsRepositoryRestIT.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RepositoryS3RestIT.java
plugins/store-smb/src/test/java/org/elasticsearch/index/store/SMBStoreRestIT.java
qa/backwards-5.0/src/test/java/org/elasticsearch/backwards/MultiNodeBackwardsIT.java
qa/smoke-test-ingest-disabled/src/test/java/org/elasticsearch/smoketest/IngestDisabledIT.java
qa/smoke-test-ingest-with-all-dependencies/src/test/java/org/elasticsearch/smoketest/IngestWithDependenciesIT.java
qa/smoke-test-multinode/src/test/java/org/elasticsearch/smoketest/SmokeTestMultiIT.java
qa/smoke-test-plugins/src/test/java/org/elasticsearch/smoketest/SmokeTestPluginsIT.java
qa/smoke-test-reindex-with-painless/src/test/java/org/elasticsearch/smoketest/SmokeTestReindexWithPainlessIT.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESClientYamlSuiteTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
comments:
Add Location header and improve REST testing

This adds a header that looks like `Location: /test/test/1` to the
response for the index/create/update API. The requirement for the header
comes from https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html

https://tools.ietf.org/html/rfc7231#section-7.1.2 claims that relative
URIs are OK. So we use an absolute path which should resolve to the
appropriate location.

Closes #19079

This makes large changes to our rest test infrastructure, allowing us
to write junit tests that test a running cluster via the rest client.
It does this by splitting ESRestTestCase into two classes:
* ESRestTestCase is the superclass of all tests that use the rest client
to interact with a running cluster.
* ESClientYamlSuiteTestCase is the superclass of all tests that use the
rest client to run the yaml tests. These tests are shared across all
official clients, thus the `ClientYamlSuite` part of the name.

time:
2016-07-25T20:01:09Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
increase log level to debug in testConcurrentSendRespondAndDisconnect

time:
2016-07-25T19:37:26Z
class:
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/indices/breaker/HierarchyCircuitBreakerService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorBase.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java
comments:
Merge remote-tracking branch 'dakrone/bucket-circuit-breaker'

time:
2016-07-25T19:22:08Z
class:
test/framework/src/main/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
comments:
BytesArray tests fix: offsets don't matter on a zero bytes array

Closes #19582

time:
2016-07-25T17:33:37Z
class:
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/indices/breaker/HierarchyCircuitBreakerService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregatorBase.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java
comments:
Circuit break on aggregation bucket numbers with request breaker

This adds new circuit breaking with the "request" breaker, which adds
circuit breaks based on the number of buckets created during
aggregations. It consists of incrementing during AggregatorBase creation

This also bumps the REQUEST breaker to 60% of the JVM heap now.

The output when circuit breaking an aggregation looks like:

```json
{
  "shard" : 0,
  "index" : "i",
  "node" : "a5AvjUn_TKeTNYl0FyBW2g",
  "reason" : {
    "type" : "exception",
    "reason" : "java.util.concurrent.ExecutionException: QueryPhaseExecutionException[Query Failed [Failed to execute main query]]; nested: CircuitBreakingException[[request] Data too large, data for [<agg [otherthings]>] would be larger than limit of [104857600/100mb]];",
    "caused_by" : {
      "type" : "execution_exception",
      "reason" : "QueryPhaseExecutionException[Query Failed [Failed to execute main query]]; nested: CircuitBreakingException[[request] Data too large, data for [<agg [myagg]>] would be larger than limit of [104857600/100mb]];",
      "caused_by" : {
        "type" : "circuit_breaking_exception",
        "reason" : "[request] Data too large, data for [<agg [otherthings]>] would be larger than limit of [104857600/100mb]",
        "bytes_wanted" : 104860781,
        "bytes_limit" : 104857600
      }
    }
  }
}
```

Relates to #14046

time:
2016-07-25T16:50:12Z
class:
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MultiSearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MultiSearchTemplateRequestTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/SearchTemplateRequestTests.java
comments:
Moved all mustache classes into one package.
No need for multiple packages inside a small module.

time:
2016-07-25T15:57:39Z
class:
core/src/test/java/org/elasticsearch/search/suggest/SuggestSearchIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/action/search/template/SearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/RenderSearchTemplateTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/SuggestSearchTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/package-info.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
comments:
Cleaned up the tests in lang-mustache.

Messy tests with mustache were either moved to core, moved to a rest test or remained untouched if they actually tested mustache.
Also removed tests that were redundant.

time:
2016-07-25T15:20:27Z
class:
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsFetchSubPhase.java
comments:
Merge pull request #19579 from jimferenczi/docvalue_fields_fetch

Rename FieldDataFieldsContext and FieldDataFieldsFetchSubPhase in DocValueFieldsContext and DocValueFieldsFetchSubPhase

time:
2016-07-25T15:02:49Z
class:
core/src/test/java/org/elasticsearch/action/bulk/BulkWithUpdatesIT.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationTestScriptsPlugin.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/LongTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/MinDocCountIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/StringTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MaxIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/MinIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/StatsIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
test/framework/src/main/java/org/elasticsearch/script/MockScriptEngine.java
comments:
Clean up more messy tests

After #13834 many tests that used Groovy scripts (for good or bad reason) in their tests have been moved in the lang-groovy module and the issue #13837 has been created to track these messy tests in order to clean them up.

This commit moves more tests back in core, removes the dependency on Groovy, changes the scripts in order to use the mocked script engine, and change the tests  to integration tests.

time:
2016-07-25T14:20:59Z
class:
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsContext.java
core/src/main/java/org/elasticsearch/search/fetch/docvalues/DocValueFieldsFetchSubPhase.java
comments:
Rename FieldDataFieldsContext and FieldDataFieldsFetchSubPhase in DocValueFieldsContext and DocValueFieldsFetchSubPhase

This change renames the package org.elasticsearch.search.fetch.fielddata in org.elasticsearch.search.fetch.docvalues and renames the
FieldData* classes in DocValue*. This is a follow up of the renaming that happened in #18943

time:
2016-07-25T14:19:15Z
class:
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
comments:
Remove TODO about Timeout in Azure

In #15950 #15080 #16084 we added the support of TimeOut for Requests with a default client`setTimeoutIntervalInMs`.
So we can remove this useless todo which was added for only one method.

Closes #18617.

time:
2016-07-25T09:54:26Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumer.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/ResponseListener.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/FailureTrackingResponseListenerTests.java
client/rest/src/test/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumerTests.java
client/rest/src/test/java/org/elasticsearch/client/HostsTrackingFailureListener.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/SyncResponseListenerTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
core/src/main/java/org/apache/lucene/store/StoreRateLimiting.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/NodeExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/BulkResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ActionFilter.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardsObserver.java
core/src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/DelegatingActionListener.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/PlainListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsFields.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/MultiCommand.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/cli/Terminal.java
core/src/main/java/org/elasticsearch/cli/UserException.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskConfig.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/DiffableUtils.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/NotMasterException.java
core/src/main/java/org/elasticsearch/cluster/ack/CreateIndexClusterStateUpdateResponse.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateEmptyPrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/BasePrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/MacAddressProvider.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/main/java/org/elasticsearch/common/Randomness.java
core/src/main/java/org/elasticsearch/common/Strings.java
core/src/main/java/org/elasticsearch/common/UUIDGenerator.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReferenceStreamInput.java
core/src/main/java/org/elasticsearch/common/bytes/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/collect/CopyOnWriteHashMap.java
core/src/main/java/org/elasticsearch/common/collect/HppcMaps.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
core/src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/ShapesAvailability.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/hash/MurmurHash3.java
comments:
Merge branch 'master' into docs/add_console_to_search

time:
2016-07-24T07:02:30Z
class:
comments:
allow for a `-` in a node name

time:
2016-07-24T03:24:56Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobStore.java
comments:
Removes unnecessary blobExists() check before reading a blob in the
Azure and Google cloud blob containers, as the APIs for both return
a 404 in the case of a missing object, which we already handle through
a NoSuchFileFoundException.

time:
2016-07-24T03:24:56Z
class:
core/src/main/java/org/elasticsearch/common/util/set/Sets.java
core/src/main/java/org/elasticsearch/repositories/IndexId.java
core/src/main/java/org/elasticsearch/repositories/RepositoryData.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotId.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotInfo.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/bwcompat/RepositoryUpgradabilityIT.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/repositories/RepositoryDataTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
comments:
Remove IndexMeta and addresses code review comments

time:
2016-07-23T20:46:48Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/common/component/AbstractComponent.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/util/concurrent/EsExecutors.java
core/src/main/java/org/elasticsearch/env/Environment.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/index/shard/ShardPathTests.java
core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java
test/framework/src/main/java/org/elasticsearch/node/NodeTests.java
test/framework/src/main/java/org/elasticsearch/test/IndexSettingsModule.java
comments:
Persistent Node Names (#19456)

With #19140 we started persisting the node ID across node restarts. Now that we have a "stable" anchor, we can use it to generate a stable default node name and make it easier to track nodes over a restarts. Sadly, this means we will not have those random fun Marvel characters but we feel this is the right tradeoff.

On the implementation side, this requires a bit of juggling because we now need to read the node id from disk before we can log as the node node is part of each log message. The PR move the initialization of NodeEnvironment as high up in the starting sequence as possible, with only one logging message before it to indicate we are initializing. Things look now like this:

```
[2016-07-15 19:38:39,742][INFO ][node                     ] [_unset_] initializing ...
[2016-07-15 19:38:39,826][INFO ][node                     ] [aAmiW40] node name set to [aAmiW40] by default. set the [node.name] settings to change it
[2016-07-15 19:38:39,829][INFO ][env                      ] [aAmiW40] using [1] data paths, mounts [[ /(/dev/disk1)]], net usable_space [5.5gb], net total_space [232.6gb], spins? [unknown], types [hfs]
[2016-07-15 19:38:39,830][INFO ][env                      ] [aAmiW40] heap size [1.9gb], compressed ordinary object pointers [true]
[2016-07-15 19:38:39,837][INFO ][node                     ] [aAmiW40] version[5.0.0-alpha5-SNAPSHOT], pid[46048], build[473d3c0/2016-07-15T17:38:06.771Z], OS[Mac OS X/10.11.5/x86_64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_51/25.51-b03]
[2016-07-15 19:38:40,980][INFO ][plugins                  ] [aAmiW40] modules [percolator, lang-mustache, lang-painless, reindex, aggs-matrix-stats, lang-expression, ingest-common, lang-groovy, transport-netty], plugins []
[2016-07-15 19:38:43,218][INFO ][node                     ] [aAmiW40] initialized
```

Needless to say, settings `node.name` explicitly still works as before.

The commit also contains some clean ups to the relationship between Environment, Settings and Plugins. The previous code suggested the path related settings could be changed after the initial Environment was changed. This did not have any effect as the security manager already locked things down.

time:
2016-07-23T11:55:09Z
class:
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
comments:
Update test

time:
2016-07-23T10:17:52Z
class:
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
comments:
Add tests

time:
2016-07-23T02:26:35Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/io/ReleasableBytesStream.java
core/src/main/java/org/elasticsearch/common/io/stream/BytesStreamOutput.java
core/src/main/java/org/elasticsearch/common/io/stream/ReleasableBytesStreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasable.java
core/src/main/java/org/elasticsearch/http/HttpServerAdapter.java
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/rest/AbstractRestChannel.java
core/src/main/java/org/elasticsearch/rest/RestChannel.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestRequest.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/TransportServiceAdapter.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequest.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequestHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3MessageChannelHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty3/src/test/java/org/elasticsearch/ESNetty3IntegTestCase.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortIntegrationIT.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpChannel.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequestHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpServerTransport.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/cors/Netty4CorsConfig.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/cors/Netty4CorsConfigBuilder.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/cors/Netty4CorsHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/pipelining/HttpPipelinedRequest.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/pipelining/HttpPipelinedResponse.java
modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/pipelining/HttpPipeliningHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/Netty4Plugin.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/ByteBufBytesReference.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/ByteBufStreamInput.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4InternalESLogger.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4MessageChannelHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4OpenChannelsHandler.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoder.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Transport.java
modules/transport-netty4/src/main/java/org/elasticsearch/transport/netty4/Netty4Utils.java
modules/transport-netty4/src/test/java/org/elasticsearch/ESNetty4IntegTestCase.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpChannelTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpClient.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpPublishPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpRequestSizeLimitIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerPipeliningTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpServerTransportTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4PipeliningDisabledIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4PipeliningEnabledIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4RestIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/pipelining/Netty4HttpPipeliningHandlerTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/ByteBufBytesReferenceTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4ScheduledPingTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4SizeHeaderFrameDecoderTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4TransportIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4TransportMultiPortIntegrationIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4TransportPublishAddressIT.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/Netty4UtilsTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/NettyTransportMultiPortTests.java
modules/transport-netty4/src/test/java/org/elasticsearch/transport/netty4/SimpleNetty4TransportTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESBackcompatTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalNode.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/FakeRestRequest.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
test/framework/src/main/java/org/elasticsearch/transport/MockTransportClient.java
comments:
Introduce Netty 4

This commit adds transport-netty4, a transport and HTTP implementation
based on Netty 4.

Relates #19526

time:
2016-07-22T23:28:39Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
comments:
Use `DefaultAWSCredentialsProviderChain` AWS SDK class for credentials

Follow up discussion at https://github.com/elastic/elasticsearch/pull/18690#issuecomment-234505083

Reading the best practices [recommended by AWS](http://docs.aws.amazon.com/java-sdk/latest/developer-guide/credentials.html), we should use `DefaultAWSCredentialsProviderChain` instead of providing the detail of the chain ourselves.

For now, we read credentials (if not provided in `elasticsearch.yml`) using:

```java
credentials = new AWSCredentialsProviderChain(
   new SystemPropertiesCredentialsProvider(),
   new EnvironmentVariableCredentialsProvider(),
   new InstanceProfileCredentialsProvider()
);
```

Which means that we read from:

* Environment Variables - `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` (RECOMMENDED since they are recognized by all the AWS SDKs and CLI except for .NET), or `AWS_ACCESS_KEY` and `AWS_SECRET_KEY` (only recognized by Java SDK)
* Java System Properties - `aws.accessKeyId` and `aws.secretKey`
* Instance profile credentials delivered through the Amazon EC2 metadata service

Using instead:

```java
credentials = new DefaultAWSCredentialsProviderChain();
```

Will give us two new more methods out of the box:

> * Credential profiles file at the default location (`~/.aws/credentials`) shared by all AWS SDKs and the AWS CLI
> * Credentials delivered through the Amazon EC2 container service if `AWS_CONTAINER_CREDENTIALS_RELATIVE_URI` environment variable is set and security manager has permission to access the variable

Cherry on the cake: as soon as AWS SDK will propose a new implementation, we will benefit from it without any modification (just updating the SDK).

We also simplify

```
new AWSCredentialsProviderChain(new StaticCredentialsProvider(new BasicAWSCredentials(key, secret)));
```

As there is no need to wrap StaticCredentialsProvider in AWSCredentialsProviderChain.

Closes #19556.

time:
2016-07-22T22:38:55Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
comments:
Merge branch 'test/check-s3-settings'

time:
2016-07-22T22:37:29Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java
comments:
Fix s3 settings

Follow up for #18662 and #18690.

* For consistency, we rename method parameters and use `key` and `secret` instead of `account` and `key`.
* We add some tests to check that settings are correctly applied.
* Tests revealed that some checks are bad like for #18662.

Add test and fix issue for getting the right S3 endpoint
Test when Repository, Repositories or global settings are defined
But ignore testAWSCredentialsWithSystemProviders test
Add tests for AWS Client Configuration
Fix NPE when no region is set

We used to transform region="" to region=null but it's not needed anymore and would actually cause NPE from now.

time:
2016-07-22T22:09:18Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java
comments:
Fix ec2 settings

Follow up for #18662

We add some tests to check that settings are correctly applied.
Tests revealed that some checks were missing.

But we ignore `testAWSCredentialsWithSystemProviders` test for now.

time:
2016-07-22T22:09:18Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
comments:
Fix EC2 discovery setting

Closes #18652

time:
2016-07-22T20:36:06Z
class:
client/rest/src/main/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumer.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/ResponseListener.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/FailureTrackingResponseListenerTests.java
client/rest/src/test/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumerTests.java
client/rest/src/test/java/org/elasticsearch/client/HostsTrackingFailureListener.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/SyncResponseListenerTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsNotSetIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsRegexIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsDisabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsEnabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ResponseHeaderPluginIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/DoSection.java
comments:
Merge pull request #19400 from javanna/feature/async_rest_client

Introduce async performRequest method

time:
2016-07-22T20:22:03Z
class:
core/src/main/java/org/elasticsearch/common/Strings.java
core/src/main/java/org/elasticsearch/http/HttpTransportSettings.java
core/src/test/java/org/elasticsearch/common/StringsTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfigBuilder.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3RestIT.java
comments:
Merge branch 'master' into feature/async_rest_client

time:
2016-07-22T20:19:59Z
class:
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
comments:
[TEST] move assertions outside of listener in testAsyncRequests for clearer test failures

time:
2016-07-22T19:42:42Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
update nextHost method javadocs

time:
2016-07-22T19:35:43Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
fix concurrency bug when getting the host for a given request

It can happen that the list of healthy hosts is empty, then we get one from the blacklist. but some other operation might have sneaked in and emptied the blacklist in the meantime, so we have to retry till we manage to get some host, either from the healthy list or from the blacklist.

time:
2016-07-22T19:02:31Z
class:
core/src/main/java/org/elasticsearch/index/shard/ShardPath.java
core/src/test/java/org/elasticsearch/index/shard/NewPathForShardTests.java
comments:
Guard against negative result from FileStore.getUsableSpace when picking data path for a new shard

time:
2016-07-22T17:59:13Z
class:
core/src/main/java/org/elasticsearch/cluster/SnapshotsInProgress.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/repositories/IndexId.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryData.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotId.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/repositories/IndexIdTests.java
core/src/test/java/org/elasticsearch/repositories/RepositoryDataTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
comments:
Index folder names now use a UUID (not the index UUID but one specific
to snapshot/restore) and the index to UUID mapping is stored in the
repository index file.

time:
2016-07-22T17:52:13Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
All snapshot metadata files use UUID for the blob ID

time:
2016-07-22T17:49:25Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobStore.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
comments:
Change the BlobContainer interface to throw a NoSuchFileFoundException
for reads and deletes if the blob does not exist.

time:
2016-07-22T17:49:25Z
class:
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
comments:
More robust handling of snapshot deletions

Makes deleting snapshots more robust by first deleting the
snapshot from the index generational file, then handling
individual deletion file errors with log messages instead of
failing the entire operation.

time:
2016-07-22T17:48:45Z
class:
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
comments:
Caught exceptions during compromised snapshot deletion

time:
2016-07-22T17:48:45Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
comments:
Changed Files.deleteIfExists to Files.delete in FsBlobContainer

time:
2016-07-22T17:48:45Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
comments:
Added HdfsBlobStoreContainer tests

Added BlobContainer tests for HDFS storage
and caught a bug at the same time in which
deleteBlob was not raising an IOException
when the blobName did not exist.

time:
2016-07-22T17:48:45Z
class:
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
comments:
Added AzureBlobStoreContainer tests

Added BlobContainer tests for Azure storage
and caught a bug at the same time in which
deleteBlob was not raising an IOException
when the blobName did not exist.

time:
2016-07-22T17:48:45Z
class:
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/MockAmazonS3.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStoreContainerTests.java
comments:
Added S3BlobStoreContainer tests

time:
2016-07-22T17:48:45Z
class:
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStoreContainerTests.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
Added deleteBlob IOException test

time:
2016-07-22T17:48:45Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
comments:
Properly raise IOException for Azure, Fs, Hdfs, and S3

time:
2016-07-22T17:48:45Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
comments:
Raised IOException on deleteBlob

Closes gh-18530.

time:
2016-07-22T17:30:05Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkUtils.java
core/src/test/java/org/elasticsearch/common/network/NetworkUtilsTests.java
comments:
Revert "Allow to listen on virtual interfaces"

This reverts commit 4cb8b620c37decb69f31c92d08de765db1ec828e.

time:
2016-07-22T17:01:56Z
class:
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
comments:
add async request unit test

time:
2016-07-22T16:33:21Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkUtils.java
core/src/test/java/org/elasticsearch/common/network/NetworkUtilsTests.java
comments:
Allow to listen on virtual interfaces

Previously when trying to listen on virtual interfaces during
bootstrap the application would stop working - the interface
couldn't be found by the NetworkUtils class.

The NetworkUtils utilize the underlying JDK NetworkInterface
class which, when asked to lookup by name only takes physical
interfaces into account, failing at virtual (or subinterfaces)
ones (returning null).

Note that when interating over all interfaces, both physical and
virtual ones are taken into account.

This changeset asks for all known interfaces, iterates over them
and matches on the given name as part of the loop, allowing it
to catch both physical and virtual interfaces.

As a result, elasticsearch can now also serve on virtual
interfaces.

A test case has been added which at least makes sure that all
iterable interfaces can be found by their respective name. (It's
not easily possible in a unit test to "fake" virtual interfaces).

Relates #19537

time:
2016-07-22T16:25:28Z
class:
core/src/main/java/org/elasticsearch/common/Strings.java
core/src/main/java/org/elasticsearch/http/HttpTransportSettings.java
core/src/test/java/org/elasticsearch/common/StringsTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfigBuilder.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
comments:
Fixes CORS handling so that it uses the defaults

Fixes CORS handling so that it uses the defaults for http.cors.allow-methods
and http.cors.allow-headers if none are specified in the config.

Closes #19520

time:
2016-07-22T15:44:50Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
add some javadocs to clarify internal listeners behaviour

time:
2016-07-22T15:31:11Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/FailureTrackingResponseListenerTests.java
comments:
[TEST] add unit tests for internal TrackingFailureListener

Any provided listener will always be wrapped into FailureTrackingListener to handle retries

time:
2016-07-22T14:46:17Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
comments:
Reindex from remote: add fallback in case content-type header is not set

 We better read the header, but who knows what can happen, maybe headers are filtered out for some reasons and we don't want to run into an NPE, then we fallback to auto-detection.

time:
2016-07-22T14:36:14Z
class:
client/rest/src/main/java/org/elasticsearch/client/Response.java
comments:
make Response class final

time:
2016-07-22T14:29:14Z
class:
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3RestIT.java
comments:
[TEST] Add Netty3RestIT to actually run REST tests on netty3

time:
2016-07-22T13:51:03Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/common/util/concurrent/BaseFuture.java
core/src/main/java/org/elasticsearch/common/xcontent/ParseFieldRegistry.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TextFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/object/DynamicTemplate.java
core/src/main/java/org/elasticsearch/index/mapper/object/RootObjectMapper.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchAllQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchNoneQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ParentIdQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TypeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WrapperQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/MultiBucketsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/GlobalOrdinalsStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/SiblingPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/InternalBucketMetricValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/InternalPercentilesBucket.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoTests.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplateTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/plugin/DummyQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/plugin/DummyQueryParserPlugin.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
core/src/test/java/org/elasticsearch/indices/IndexingMemoryControllerTests.java
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
core/src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmGcMonitorServiceSettingsTests.java
core/src/test/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/SearchServiceTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/PercentilesBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/PercentilesBucketTests.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/threadpool/ScheduleWithFixedDelayTests.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/InternalMatrixStats.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/TestAwsS3Service.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecatedQueryBuilder.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecationPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/TestTemplateService.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
Merge branch 'master' into feature/async_rest_client

time:
2016-07-22T13:49:39Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
rename mayRetry to isRetryStatus

time:
2016-07-22T13:48:15Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/SyncResponseListenerTests.java
comments:
Make SyncResponseListener safer

Throw explicit IllegalStateException in unexpected situations, like where both response and exception are set, or when both are unset. Add unit test for SyncResponseListener.

time:
2016-07-22T12:35:47Z
class:
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
Verify lower level transport exceptions don't bubble up on disconnects (#19518)

 #19096 introduced a generic TCPTransport base class so we can have multiple TCP based transport implementation. These implementations can vary in how they respond internally to situations where we concurrently send, receive and handle disconnects and can have different exceptions. However, disconnects are important events for the rest of the code base and should be distinguished from other errors (for example, it signals TransportMasterAction that it needs to retry and wait for the a (new) master to come back).  Therefore, we should make sure that all the implementations do the proper translation from their internal exceptions into ConnectTransportException which is used externally. 

Similarly we should make sure that the transport implementation properly recognize errors that were caused by a disconnect as such and deal with them correctly. This was, for example, the source of a build failure at https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-intake/1080 , where a concurrency issue cause SocketException to bubble out of MockTcpTransport.

This PR adds a tests which concurrently simulates connects, disconnects, sending and receiving and makes sure the above holds. It also fixes anything (not much!) that was found it.

time:
2016-07-21T21:27:04Z
class:
core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java
core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java
comments:
fix: no other processors should be executed after on_failure is called in a compound processor (#19545)

time:
2016-07-21T15:47:21Z
class:
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
comments:
Fixes the ActiveShardsObserverIT tests that have a very short index (#19540)

creation timeout so they process the index creation cluster state update
before the test finishes and attempts to cleanup. Otherwise, the index
creation cluster state update could be processed after the test finishes
and cleans up, thereby leaking an index in the cluster state that could
cause issues for other tests that wouldn't expect the index to exist.

Closes #19530

time:
2016-07-21T14:02:51Z
class:
comments:
Vagrant tests should use plugin zips

Fixes failing packaging tests:
https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/1049/console

time:
2016-07-21T13:14:41Z
class:
comments:
Fixes REST test that is designed to timeout on index creation by
making the test wait until all urgent requests are completed before
finishing, so that tear down can properly delete the created index
and cleanup. Without this wait, it was possible that the test would
finish and cleanup the deleted indices would happen before the
index creation even processed, causing the test to leave a created
index behind.

time:
2016-07-21T13:03:56Z
class:
comments:
ping_timeout is documented in discovery-ec2 but does not exist in code

Also mentioned in discovery-gce

Actually ping timeout can be set using `discovery.zen.ping_timeout`.

Closes #16600.

time:
2016-07-21T12:32:37Z
class:
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
comments:
Use executor's describeTasks method to log task information in cluster service (#19531)

This fixes the log output in some places of ClusterService where the executor's describeTasks wasn't used to log task information.

time:
2016-07-21T12:26:56Z
class:
comments:
minor documentation improvements (#19500)

* minor documentation improvements

* remove unnecessary commas

time:
2016-07-21T12:17:17Z
class:
comments:
Test: Fixed incorrect YAML indentation in the `indices.put_template/10_basic.yaml` test

The Ruby YAML parser ignores the `do` actions when they are not indented,
making the test suite fail.

Related: #19506

Closes #19529

time:
2016-07-21T12:10:43Z
class:
comments:
Clarify cloud.service.name entry

Closes #18577.

time:
2016-07-21T11:59:28Z
class:
client/rest/src/main/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumer.java
client/rest/src/test/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumerTests.java
comments:
validate bufferLimit is positive in HeapBufferedAsyncResponseConsumer

time:
2016-07-21T10:21:12Z
class:
comments:
corrected the use of two synonymous words (#19498)

Two synonyms were jointly used in the sentence(i.e "problems" and "issues"), so I deleted one of them.

time:
2016-07-21T09:35:29Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/network/NetworkService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/DiscoveryPlugin.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2NetworkTests.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceNetworkTests.java
comments:
Add DiscoveryPlugin interface

So we have a Pull interface easier to use which reduce the need of Guice.

See https://github.com/elastic/elasticsearch/commit/2a9d7f68a1dea65b27f662508770e9cf7a68414b#commitcomment-18335161

time:
2016-07-21T08:27:38Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/network/NetworkService.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2NetworkTests.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataServiceImpl.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceModule.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceMetadataServiceMock.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceNetworkTests.java
comments:
Move custom name resolver registration to the NetworkModule

As explained in https://github.com/elastic/elasticsearch/pull/15765#discussion_r65804713
I don't think we should do it this way. We have been working tirelessly to remove guice. Please create a pull based interface for this, so that all the custom name resolvers can be retrieved before we create NetworkService, so it can take them as a ctor arg.

Makes sense. I'll revisit the PR soonish with that.


time:
2016-07-21T07:45:12Z
class:
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataServiceImpl.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
comments:
Fix path_style_access after merge with master

time:
2016-07-21T07:32:47Z
class:
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
comments:
Fix analyzer alias processing (#19506)

In the lack of tests the analyzer.alias feature was pretty much not working
at all on current master. Issues like #19163 showed some serious problems for users
using this feature upgrading to an alpha version.
This change fixes the processing order and allows aliases to be set for
existing analyzers like `default`. This change also ensures that if `default`
is aliased the correct analyzer is used for `default_search` etc.

Closes #19163

time:
2016-07-21T07:29:59Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
core/src/main/java/org/apache/lucene/store/StoreRateLimiting.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/NodeExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/BulkResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ActionFilter.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardsObserver.java
core/src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/DelegatingActionListener.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/PlainListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsFields.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/MultiCommand.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/cli/UserException.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskConfig.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/DiffableUtils.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/NotMasterException.java
core/src/main/java/org/elasticsearch/cluster/ack/CreateIndexClusterStateUpdateResponse.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateEmptyPrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/BasePrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/MacAddressProvider.java
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/main/java/org/elasticsearch/common/Randomness.java
core/src/main/java/org/elasticsearch/common/UUIDGenerator.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReferenceStreamInput.java
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/collect/CopyOnWriteHashMap.java
core/src/main/java/org/elasticsearch/common/collect/HppcMaps.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
core/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
core/src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/ShapesAvailability.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/hash/MurmurHash3.java
core/src/main/java/org/elasticsearch/common/inject/Injector.java
core/src/main/java/org/elasticsearch/common/inject/InjectorBuilder.java
core/src/main/java/org/elasticsearch/common/inject/InjectorImpl.java
core/src/main/java/org/elasticsearch/common/inject/InjectorShell.java
core/src/main/java/org/elasticsearch/common/inject/Injectors.java
core/src/main/java/org/elasticsearch/common/inject/ModulesBuilder.java
core/src/main/java/org/elasticsearch/common/inject/PrivateModule.java
core/src/main/java/org/elasticsearch/common/inject/Scope.java
core/src/main/java/org/elasticsearch/common/inject/State.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/FactoryProvider.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/FactoryProvider2.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/Parameter.java
core/src/main/java/org/elasticsearch/common/inject/internal/Errors.java
core/src/main/java/org/elasticsearch/common/inject/internal/InternalFactory.java
core/src/main/java/org/elasticsearch/common/inject/spi/ConvertedConstantBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/Element.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/inject/spi/LinkedKeyBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/ProviderBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/ProviderKeyBinding.java
core/src/main/java/org/elasticsearch/common/io/FastStringReader.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasables.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/common/logging/LoggerMessageFormat.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java
comments:
Merge branch 'master' into pr/15724-gce-network-host-master

time:
2016-07-21T02:06:36Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionIT.java
core/src/test/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeActionTests.java
comments:
Analyze: Specify anonymous char_filters/tokenizer/token_filters in the analyze API

Add parser for anonymous char_filters/tokenizer/token_filters
Using Settings in AnalyzeRequest for anonymous definition
Add breaking changes document

Closed #8878

time:
2016-07-20T17:37:56Z
class:
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/TestTemplateService.java
comments:
rethrow script compilation exceptions into ingest configuration exceptions (#19318)

* rethrow script compilation exceptions into ingest configuration exceptions
* update readProcessor to rethrow any exception as an ElasticsearchException

time:
2016-07-20T16:33:51Z
class:
core/src/main/java/org/elasticsearch/common/xcontent/ParseFieldRegistry.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ConstantScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/DisMaxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ExistsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FieldMaskingSpanQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoDistanceRangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoPolygonQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/GeohashCellQuery.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IdsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchAllQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchNoneQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhrasePrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MatchPhraseQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ParentIdQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/PrefixQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/RegexpQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SimpleQueryStringBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanContainingQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanFirstQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanMultiTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNearQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanNotQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanOrQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanTermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/SpanWithinQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TypeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WildcardQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WrapperQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/index/query/plugin/DummyQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/plugin/DummyQueryParserPlugin.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/SearchServiceTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecatedQueryBuilder.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecationPlugin.java
comments:
Migrate query registration from push to pull

Remove `ParseField` constants used for names where there are no deprecated
names and just use the `String` version of the registration method instead.

This is step 2 in cleaning up the plugin interface for extending
search time actions. Aggregations are next.

This is breaking for plugins because those that register a new query should
now implement `SearchPlugin` rather than `onModule(SearchModule)`.

time:
2016-07-20T16:28:28Z
class:
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
comments:
Fix race in testCreateIndexWaitsForAllActiveShards

When index creation is not acknowledged (due to a very low request timeout) it is possible that the index is still created.
If a subsequent index-exists request completes before the cluster state of the index creation has been fully applied, it
might miss the newly created index.

time:
2016-07-20T14:24:57Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
rename mustRetry method to mayRetry

time:
2016-07-20T14:24:29Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
RestClient javadocs adjustments

time:
2016-07-20T13:46:04Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/MultiBucketsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/GlobalOrdinalsStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/SiblingPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/InternalMatrixStats.java
comments:
Remove AggregationStreams and friends

* Remove outdated aggregation registration method
* Remove AggregationStreams
* Adds StreamInput#readNamedWriteableList and
StreamOutput#writeNamedWriteableList convenience methods. We strive to
make the reading and writing from the streams terse so they are easier
to scan visually.
* Remove PipelineAggregatorStreams
* Remove stream info from InternalAggreation.Type
* Remove InternalAggregation#type
* Remove Streamable from PipelineAggregator
* Remove Streamable from MultiBucketsAggregation.Bucket

time:
2016-07-20T13:24:14Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
notify the listener if the request gets cancelled

time:
2016-07-20T11:13:57Z
class:
core/src/main/java/org/elasticsearch/index/query/QueryStringQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/QueryStringQueryBuilderTests.java
comments:
Restore parameter name auto_generate_phrase_queries (#19514)

During query refactoring the query string query parameter
'auto_generate_phrase_queries' was accidentally renamed
to 'auto_generated_phrase_queries'.

With this commit we restore the old name.

Closes #19512

time:
2016-07-20T09:26:03Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
comments:
Don't register repository settings in S3 plugin

Follow up for https://github.com/elastic/elasticsearch/pull/17784#discussion_r64575845

Today we are registering repository settings when `S3RepositoryPlugin` starts:

```java
        settingsModule.registerSetting(S3Repository.Repository.KEY_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.SECRET_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.BUCKET_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.ENDPOINT_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.PROTOCOL_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.REGION_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.SERVER_SIDE_ENCRYPTION_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.BUFFER_SIZE_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.MAX_RETRIES_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.CHUNK_SIZE_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.COMPRESS_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.STORAGE_CLASS_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.CANNED_ACL_SETTING);
        settingsModule.registerSetting(S3Repository.Repository.BASE_PATH_SETTING);
```

We don't need to register those settings as they are repository level settings and not node level settings.

Closes #18945.

time:
2016-07-20T08:37:12Z
class:
comments:
Docs: Add more points to the chart that gives accuracy for the cardinality aggregation.

This also adds instructions how to regenerate the chart.

time:
2016-07-20T07:16:27Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoTests.java
comments:
Fix ClusterInfo serialization

time:
2016-07-20T06:27:02Z
class:
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TextFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
comments:
Merge pull request #19510 from rjernst/mapper_keyword_positions

Mappings: Fix not_analyzed string fields to error when position_increment_gap is set

time:
2016-07-20T02:07:56Z
class:
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/TextFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/core/TextFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
comments:
Add tests for disabling positions and copy the check to text fields

time:
2016-07-20T00:54:13Z
class:
core/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/string/SimpleStringMappingTests.java
comments:
Mappings: Fix not_analyzed string fields to error when position_increment_gap is set

Currently if a string field is not_analyzed, but a
position_increment_gap is set, it will lookup the default analyzer and
set it, along with the position_increment_gap, before the code which
handles setting the keyword analyzer for not_analyzed fields has a
chance to run. This change adds a parsing check and test for that case.

time:
2016-07-19T22:35:30Z
class:
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
comments:
Fix Javadocs for ThreadPool#schedule

This commit fixes an issue with an @throws tag on ThreadPool#schedule
not containing a description.

time:
2016-07-19T20:45:12Z
class:
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
comments:
Catch the right rejected execution exception

ThreadPool#schedule can throw a rejected execution exception. Yet, the
rejected execution exception that it throws comes from the EsAbortPolicy
which throws an EsRejectedExecutionException. This exception does not
inherit from RejectedExecutionException so instead we must catch the
former instead of the latter.

time:
2016-07-19T19:35:51Z
class:
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/test/java/org/elasticsearch/threadpool/ScheduleWithFixedDelayTests.java
comments:
Handle rejected execution exception on reschedule

A self-rescheduling runnable can hit a rejected execution exception but
this exception goes uncaught. Instead, this exception should be caught
and passed to the onRejected handler. Not catching handling this
rejected execution exception can lead to test failures. Namely, a race
condition can arise between the shutting down of the thread pool and
cancelling of the rescheduling of the task. If another reschedule fires
right as the thread pool is being terminated, the rescheduled task will
be rejected leading to an uncaught exception which will cause a test
failure. This commit addresses these issues.

Relates #19505

time:
2016-07-19T18:43:29Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/SiblingPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/InternalBucketMetricValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/InternalPercentilesBucket.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/PercentilesBucketIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/PercentilesBucketTests.java
comments:
Migrate remaining aggregations to NamedWriteable

After this we'll be able to remove AggregationStreams and
PipelineAggregatorStreams.

time:
2016-07-19T16:47:47Z
class:
core/src/main/java/org/elasticsearch/common/util/concurrent/BaseFuture.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
core/src/test/java/org/elasticsearch/indices/IndexingMemoryControllerTests.java
core/src/test/java/org/elasticsearch/monitor/jvm/JvmGcMonitorServiceSettingsTests.java
core/src/test/java/org/elasticsearch/threadpool/ScheduleWithFixedDelayTests.java
comments:
Require executor name when calling scheduleWithFixedDelay

The ThreadPool#scheduleWithFixedDelay method does not make it clear that all scheduled runnable instances
will be run on the scheduler thread. This becomes problematic if the actions being performed include
blocking operations since there is a single thread and tasks may not get executed due to a blocking task.

This change includes a few different aspects around trying to prevent this situation. The first is that
the scheduleWithFixedDelay method now requires the name of the executor that should be used to execute
the runnable. All existing calls were updated to use Names.SAME to preserve the existing behavior.

The second aspect is the removal of using ScheduledThreadPoolExecutor#scheduleWithFixedDelay in favor of
a custom runnable, ReschedulingRunnable. This runnable encapsulates the logic to deal with rescheduling a
runnable with a fixed delay and mimics the behavior of executing using a ScheduledThreadPoolExecutor and
provides a ScheduledFuture implementation that also mimics that of the typed returned by a
ScheduledThreadPoolExecutor.

Finally, an assertion was added to BaseFuture to detect blocking calls that are being made on the scheduler
thread.

time:
2016-07-19T13:38:00Z
class:
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/object/DynamicTemplate.java
core/src/main/java/org/elasticsearch/index/mapper/object/RootObjectMapper.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicTemplateTests.java
comments:
Elasticsearch should reject dynamic templates with unknown `match_mapping_type`. #17285

When looking at the logstash template, I noticed that it has definitions for
dynamic temilates with `match_mapping_type` equal to `byte` for instance.
However elasticsearch never tries to find templates that match the byte type
(only long or double as far as numbers are concerned). This commit changes
template parsing in order to ignore bad values of `match_mapping_type` (given
how the logstash template is popular, this would break many upgrades
otherwise). Then I hope to fail the parsing on bad values in 6.0.

time:
2016-07-19T13:32:41Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryWaitForClusterStateRequest.java
core/src/main/java/org/elasticsearch/indices/recovery/RemoteRecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/replication/RecoveryDuringReplicationTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoverySourceHandlerTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryStatusTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveriesCollectionTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBoundsTests.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Merge branch 'master' into pr/s3-path-style-access

time:
2016-07-19T13:18:05Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsNotSetIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsRegexIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsDisabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsEnabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ResponseHeaderPluginIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/ExecutableSection.java
comments:
restore throws IOException clause on all performRequest sync methods

We throw IOException, which is the exception that is going to be thrown in 99% of the cases. A more generic exception can happen, and if it is a runtime one we just let it bubble up as is, otherwise we wrap it into runtime one so that we don't require to catch Exception everywhere, which seems odd.

Also adjusted javadocs for all performRequest methods

time:
2016-07-19T13:17:12Z
class:
client/rest/src/main/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumer.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/HeapBufferedAsyncResponseConsumerTests.java
comments:
add HeapBufferedAsyncResponseConsumer with configurable max buffer size

We keep the default async client behaviour like in BasicAsyncResponseConsumer, but we lower the maximum size of the buffer from Integer.MAX_VALUE (2GB) to 10 MB. This way users will realize they are buffering big responses in heap hence they'll know they have to do something about it, either write their own response consumer or increase the buffer size limit by providing their manually creeted instance of HeapBufferedAsyncResponseConsumer (constructor accept a bufferLimit int argument).

time:
2016-07-19T13:17:12Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
Remove RestClient#JSON_CONTENT_TYPE constant, already available in ContentType class

time:
2016-07-19T13:16:45Z
class:
comments:
Build: use license mapping for http* and commons-*

This way we reduce the number of LICENSE and NOTICE files with same content for client.rest and client.sniffer projects.

time:
2016-07-19T13:16:45Z
class:
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
comments:
[TEST] remove one too many SuppressWarnings

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
move RestClient#builder method on top for more visibility

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
comments:
replace till with until in RestClient javadocs

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/Response.java
comments:
update Response javadocs

time:
2016-07-19T13:16:45Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponseException.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/DoSection.java
comments:
[TEST] Make sure the last response body is always available in our REST tests

With the introduction of the async client, ResponseException doesn't eagerly read the response body anymore into a string. That is better, but raised a problem in our REST tests infra: we were reading the response body twice, while it can only be consumed once. Introduced a RestTestResponseException that wraps a ResponseException and exposes the body which now gets read only once.

time:
2016-07-19T13:16:45Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
comments:
reindex from remote to read content-type header rather than guessing content type based on content

time:
2016-07-19T13:16:45Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
comments:
Reindex from remote: remove async client in favour of using RestClient performRequest async method

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
comments:
add check for null hosts in RestClientBuilder, so it fails early

Also delayed call to HttpAsyncClient#start so that if something goes wrong while creating the RestClient, the http client threads don't linger. In fact, if the constructor fails it is not possible to call close against the RestClient.

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
comments:
Rest Client: have RestClientBuilder callback also return the same type as their argument

HttpClientConfigCallback#customizeHttpClient now also returns the HttpClientBuilder so it can be completely replaced
RequestConfigCallback#customizeRequestConfig now also returns the HttpClientBuilder so it can be completely replaced

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/HostsTrackingFailureListener.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
comments:
Rest Client: improve listener naming

time:
2016-07-19T13:16:45Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/RestClientBuilder.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
RestClient: take builder out to its own class

The RestClient class is getting bigger and bigger, its builder can definitely be taken out to its own top level class: RestClientBuilder

time:
2016-07-19T13:15:58Z
class:
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
comments:
[TEST] add async entities to the randomization for RequestLoggerTests

time:
2016-07-19T13:15:58Z
class:
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/ResponseListener.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/TrackingFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsNotSetIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsRegexIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsDisabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsEnabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ResponseHeaderPluginIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/DoSection.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/ExecutableSection.java
comments:
Rest client: introduce async performRequest method and use async client under the hood for sync requests too

The new method accepts the usual parameters (method, endpoint, params, entity and headers) plus a response listener and an async response consumer. Shortcut methods are also added that don't require params, entity and the async response consumer optional.

There are a few relevant api changes as a consequence of the move to async client that affect sync methods:
- Response doesn't implement Closeable anymore, responses don't need to be closed
- performRequest throws Exception rather than just IOException, as that is the the exception that we get from the FutureCallback#failed method in the async http client
- ssl configuration is a bit simpler, one only needs to call setSSLStrategy from a custom HttpClientConfigCallback, that doesn't end up overridng any other default around connection pooling (it used to happen with the sync client and make ssl configuration more complex)

Relates to #19055

time:
2016-07-19T13:11:40Z
class:
comments:
Build: upgrade httpcore version to 4.4.5

Closes #19127

time:
2016-07-19T13:11:40Z
class:
comments:
Build: add apache async http client dependencies

time:
2016-07-19T12:48:14Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/histogram/ExtendedBoundsTests.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Make ExtendedBounds immutable

We used to mutate it as part of building the aggregation. That
caused assertVersionSerializable to fail because it assumes that
requests aren't mutated after they are sent.

Closes #19481

time:
2016-07-19T12:07:58Z
class:
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryWaitForClusterStateRequest.java
core/src/main/java/org/elasticsearch/indices/recovery/RemoteRecoveryTargetHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/replication/RecoveryDuringReplicationTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoverySourceHandlerTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryStatusTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveriesCollectionTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
comments:
Fix replica-primary inconsistencies when indexing during primary relocation with ongoing replica recoveries (#19287)

Primary relocation violates two invariants that ensure proper interaction between document replication and peer recoveries, ultimately leading to documents not being properly replicated.

Invariant 1: Document writes must be replicated based on the routing table of a cluster state that includes all shards which have ongoing or finished recoveries. This is ensured by the fact that do not start a recovery that is not reflected by the cluster state available on the primary node and we always sample a fresh cluster state before starting to replicate write operations.

Invariant 2: Every operation that is not part of the snapshot taken for phase 2, must be succesfully indexed on the target replica (pending shard level errors which will cause the target shard to be failed). To ensure this, we start replicating to the target shard as soon as the recovery start and open it's engine before we take the snapshot. All operations that are indexed after the snapshot was taken are guaranteed to arrive to the shard when it's ready to index them. Note that this also means that the replication doesn't fail a shard if it's not yet ready to recieve operations - it's a normal part of a recovering shard.

With primary relocations, the two invariants can be possibly violated. Let's consider a primary relocating while there is another replica shard recovering from the primary shard.

Invariant 1 can be violated if the target of the primary relocation is so lagging on cluster state processing that it doesn't even know about the new initializing replica. This is very rare in practice as replica recoveries take time to copy all the index files but it is a theoretical gap that surfaces in testing scenarios.

Invariant 2 can be violated even if the target primary knows about the initializing replica. This can happen if the target primary replicates an operation to the intializing shard and that operation arrives to the initializing shard before it opens it's engine but arrives to the primary source after it has taken the snapshot of the translog. Those operations will be currently missed on the new initializing replica.

The fix to reestablish invariant 1 is to ensure that the primary relocation target has a cluster state with all replica recoveries that were successfully started on primary relocation source. The fix to reestablish invariant 2 is to check after opening engine on the replica if the primary has been relocated in the meanwhile and fail the recovery.

Closes #19248

time:
2016-07-19T10:55:25Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardsObserver.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/cluster/NotMasterException.java
core/src/main/java/org/elasticsearch/cluster/ack/CreateIndexClusterStateUpdateResponse.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateEmptyPrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoader.java
core/src/main/java/org/elasticsearch/common/settings/loader/SettingsLoaderFactory.java
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/discovery/DiscoveryModule.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ExponentialDecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FieldValueFactorFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/LinearDecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/RandomScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/TypeMissingException.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/plugins/IngestPlugin.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/allocation/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/main/java/org/elasticsearch/script/AbstractScriptParser.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptMetaData.java
core/src/main/java/org/elasticsearch/script/ScriptParameterParser.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/Highlighters.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalReverseNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/BinaryRangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ip/IpRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/BucketSignificancePriorityQueue.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/GlobalOrdinalsSignificantTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalMappedSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/UnmappedSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ChiSquare.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/MutualInformation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/GlobalOrdinalsStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/IncludeExclude.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/GeoBoundsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/InternalGeoBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/InternalTopHits.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/InternalDerivative.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/highlight/Highlighter.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/profile/AbstractInternalProfileTree.java
core/src/main/java/org/elasticsearch/search/profile/AbstractProfileBreakdown.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/Suggesters.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TasksIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/template/put/MetaDataIndexTemplateServiceTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorIT.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateProcessorResultTests.java
core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java
core/src/test/java/org/elasticsearch/action/search/SearchRequestBuilderTests.java
core/src/test/java/org/elasticsearch/action/search/TransportSearchIT.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTestCase.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsIT.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
core/src/test/java/org/elasticsearch/broadcast/BroadcastActionsIT.java
core/src/test/java/org/elasticsearch/bwcompat/BasicAnalysisBackwardCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/ClusterStateBackwardsCompatIT.java
core/src/test/java/org/elasticsearch/bwcompat/NodesStatsBasicBackwardsCompatIT.java
core/src/test/java/org/elasticsearch/bwcompat/RepositoryUpgradabilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/TransportClientBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientHeadersTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthIT.java
core/src/test/java/org/elasticsearch/cluster/SimpleDataNodesIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableGenerator.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/common/PriorityTests.java
core/src/test/java/org/elasticsearch/common/geo/GeoHashTests.java
core/src/test/java/org/elasticsearch/common/logging/LoggingConfigurationTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoaderTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
core/src/test/java/org/elasticsearch/consistencylevel/WriteConsistencyLevelIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryModuleTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeRemovalClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/index/IndexRequestBuilderIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/SettingsListenerIT.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingIT.java
core/src/test/java/org/elasticsearch/index/mapper/core/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/ScaledFloatFieldTypeTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryDSLDocumentationTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/plugin/CustomQueryParserIT.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
comments:
Merge branch 'master' into pr/s3-path-style-access

time:
2016-07-19T10:53:03Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
comments:
Register the new settings

time:
2016-07-19T10:27:11Z
class:
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
comments:
Create RecoveryTarget once we reset the source

RecoveryTarget increments a reference on the store once it's
created. If we fail to return the instance from the reset method
we leak a reference causing shard locks to not be released. This
change creates the reference in the return statement to ensure no
references are leaked

time:
2016-07-19T09:54:43Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequest.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestTests.java
comments:
allocation explain: Also serialize `includeDiskInfo` field.

time:
2016-07-19T09:30:57Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
comments:
Fix NPE when initializing replica shard has no unassignedInfo (#19491)

An initializing replica shard might not have an UnassignedInfo object, for example when it is a relocation target. The method allocatedPostIndexCreate does not account for this situation.

time:
2016-07-19T08:25:48Z
class:
comments:
Clarify `function_score` docs.

Closes #18315

time:
2016-07-19T08:23:02Z
class:
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryStatusTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveriesCollectionTests.java
comments:
Move `reset recovery` into RecoveriesCollection (#19466)

Today when we reset a recovery because of the source not being
ready or the shard is getting removed on the source (for whatever reason)
we wipe all temp files and reset the recovery without respecting any
reference counting or locking etc. all streams are closed and files are
wiped. Yet, this is problematic since we assert that some files are on disk
etc. when we finish writing a file. These assertions don't hold anymore if we
concurrently wipe the tmp files.

This change moves the logic out of RecoveryTarget into RecoveriesCollection which
basically clones the RecoveryTarget on reset instead which allows in-flight operations
to finish gracefully. This means we now have a single path for cleanups in RecoveryTarget
and can safely use assertions in the class since files won't be removed unless the recovery
is either canceled, failed or finished.

Closes  #19473

time:
2016-07-19T07:02:31Z
class:
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/indices/TypeMissingException.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingIT.java
comments:
Automatically created indices should honor `index.mapper.dynamic`. #19478

Today they don't because the create index request that is implicitly created
adds an empty mapping for the type of the document. So to Elasticsearch it
looks like this type was explicitly created and `index.mapper.dynamic` is not
checked.

Closes #17592

time:
2016-07-18T21:07:15Z
class:
comments:
Merge pull request #19461 from rjernst/plugin_default_config

Simplify plugin configuration for rest tests

time:
2016-07-18T17:33:28Z
class:
comments:
Fixed incorrect YAML indentation in the "Rollover" tests again

As part of changes in d78f40fb1e88c78ce4466fe145d365c205441e43, a fix to the YAML
indentation has been reverted, see location: https://github.com/elastic/elasticsearch/commit/d78f40fb1e88c78ce4466fe145d365c205441e43#diff-eaf129528b571da2cafdfd5490c12453

This patch fixes the YAML notation back.

/cc @abeyad

Closes #19482

time:
2016-07-18T17:05:06Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkByScrollTask.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/BulkByScrollTaskTests.java
comments:
Support requests_per_second=-1 to mean no throttling in reindex

This is entirely on the REST level, Float.POSITIVE_INFINITY is still
how you get no throttling over the transport api.

Closes #19089

time:
2016-07-18T17:00:06Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
comments:
Migrate serial_diff aggregation to NamedWriteable

This is the last migration before AggregationStreams and
PipelineAggregatorStreams can be removed to remove redundant
code.

time:
2016-07-18T15:45:17Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java
comments:
Try to prevent classloading deadlock.

Closes #19316

time:
2016-07-18T15:28:07Z
class:
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/test/java/org/elasticsearch/indices/IndicesRequestCacheIT.java
comments:
#19472 Enable option to use request cache for size > 0

Enable option to use request cache for size > 0

time:
2016-07-18T15:23:31Z
class:
comments:
Merge pull request #19467 from rjernst/pom_url

Build: Ensure poms for plugin zips have url

time:
2016-07-18T14:45:07Z
class:
core/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingIT.java
comments:
Do not throw AssertionError for expected exceptions in SearchWhileRelocatingIT (#19476)

The test would previously catch Throwable and then decide if it was a critical exception or not. As the catch block was changed from Throwable to Exception this made the test fail for non-critical exceptions. This commit changes the test so that exceptions are only thrown when they're unexpected.

time:
2016-07-18T14:38:13Z
class:
core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java
core/src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
comments:
parent/child: Make sure that no `_parent#null` gets introduces as default _parent mapping.

Instead it should just be `_parent` field.

Also added more tests regarding the join doc values field being added.

Closes #19389

time:
2016-07-18T14:14:09Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
comments:
Migrate moving_avg pipeline aggregation to NamedWriteable

This is the first pipeline aggregation that doesn't have its own
bucket type that needs serializing. It uses InternalHistogram instead.
So that required reworking the new-style `registerAggregation` method
to not require bucket readers. So I built `PipelineAggregationSpec` to
mirror `AggregationSpec`. It allows registering any number of bucket
readers or result readers.

time:
2016-07-18T13:42:24Z
class:
client/transport/src/main/java/org/elasticsearch/transport/client/PreBuiltTransportClient.java
client/transport/src/test/java/org/elasticsearch/transport/client/PreBuiltTransportClientTests.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorIT.java
core/src/test/java/org/elasticsearch/action/search/SearchRequestBuilderTests.java
core/src/test/java/org/elasticsearch/bwcompat/ClusterStateBackwardsCompatIT.java
core/src/test/java/org/elasticsearch/bwcompat/NodesStatsBasicBackwardsCompatIT.java
core/src/test/java/org/elasticsearch/bwcompat/TransportClientBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientHeadersTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortIntegrationIT.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalNode.java
test/framework/src/main/java/org/elasticsearch/test/ExternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/transport/MockTransportClient.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Add a dedicated client/transport project for transport-client (#19435)

The `client/transport` project adds a new jar build project that
pulls in all dependencies and configures all required modules.

Preinstalled modules are:
 * transport-netty
 * lang-mustache
 * reindex
 * percolator

The `TransportClient` classes are still in core
while `TransportClient.Builder` has only a protected construcutor
such that users are redirected to use the new `TransportClientBuilder`
from the new jar.

Closes #19412

time:
2016-07-18T12:33:59Z
class:
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/test/java/org/elasticsearch/indices/IndicesRequestCacheIT.java
comments:
Enable option to use request cache for size > 0

Previously if the size of the search request was greater than zero we would not cache the request in the request cache.

This change retains the default behaviour of not caching requests with size > 0 but also allows the `request_cache=true` query parameter
to enable the cache for requests with size > 0

time:
2016-07-18T10:36:23Z
class:
core/src/main/java/org/elasticsearch/index/mapper/core/NumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/ScaledFloatFieldMapper.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/test/java/org/elasticsearch/index/mapper/core/ScaledFloatFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/ScaledFloatFieldTypeTests.java
comments:
Add `scaled_float`. #19264

This is a tentative to revive #15939 motivated by elastic/beats#1941.
Half-floats are a pretty bad option for storing percentages. They would likely
require 2 bytes all the time while they don't need more than one byte.

So this PR exposes a new `scaled_float` type that requires a `scaling_factor`
and internally indexes `value*scaling_factor` in a long field. Compared to the
original PR it exposes a lower-level API so that the trade-offs are clearer and
avoids any reference to fixed precision that might imply that this type is more
accurate (actually it is *less* accurate).

In addition to being more space-efficient for some use-cases that beats is
interested in, this is also faster that `half_float` unless we can improve the
efficiency of decoding half-float bits (which is currently done using software)
or until Java gets first-class support for half-floats.

time:
2016-07-18T10:23:01Z
class:
comments:
Fix create_bwc_index for 5.x (#19469)

`create_bwc_index.py` has some cruft in it that only works on 2.x or
even before. This commit make the tool functional, yet there might still
be some bwc relevant things missing here.

Closes #19253

time:
2016-07-18T09:30:41Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregatorFactory.java
comments:
Use a static default precision for the cardinality aggregation. #19215

Today the default precision for the cardinality aggregation depends on how many
parent bucket aggregations it had. The reasoning was that the more parent bucket
aggregations, the more buckets the cardinality had to be computed on. And this
number could be huge depending on what the parent aggregations actually are.

However now that we run terms aggregations in breadth-first mode by default when
there are sub aggregations, it is less likely that we have to run the cardinality
aggregation on kagilions of buckets. So we could use a static default, which will
be less confusing to users.

time:
2016-07-18T09:22:58Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
comments:
Make static Store access shard lock aware (#19416)

We currently have concurrency issue between the static methods on the Store class and store changes that are done via a valid open store. An example of this is the async shard fetch which can reach out to a node while a local shard copy is shutting down (the fetch does check if we have an open shard and tries to use that first, but if the shard is shutting down, it will not be available from IndexService).

Specifically, async shard fetching tries to read metadata from store, concurrently the shard that shuts down commits to lucene, changing the segments_N file. this causes a file not find exception on the shard fetching side. That one in turns makes the master think the shard is unusable. In tests this can cause the shard assignment to be delayed (up to 1m) which fails tests. See https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+java9-periodic/570 for details.

This is one of the things #18938 caused to bubble up.

time:
2016-07-18T09:05:12Z
class:
comments:
Build: Ensure poms for plugin zips have url

Maven central requires a project url. The recent change to make poms for
plugin client jars broke that because we no longer use nebula publishing
for plugin pom generation. This change adds back the url to the pom.

time:
2016-07-18T09:03:24Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/GlobalOrdinalsStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/IncludeExclude.java
core/src/test/java/org/elasticsearch/search/aggregations/support/IncludeExcludeTests.java
comments:
Fix potential AssertionError with include/exclude on terms aggregations. #19252

We call `LongBitSet.set(start, end)`, which fails when `start >= length`
(0 in that case).

Closes #18575

time:
2016-07-18T08:16:01Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/index/query/QueryBuilders.java
core/src/main/java/org/elasticsearch/script/AbstractScriptParser.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/QueryDSLDocumentationTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilderTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TemplateQueryBuilder.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/TemplateQueryBuilderTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryBuilderTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Template cleanup:

* Removed `Template` class and unified script & template parsing logic. Templates are scripts, so they should be defined as a script. Unless there will be separate template infrastructure, templates should share as much code as possible with scripts.
* Removed ScriptParseException in favour for ElasticsearchParseException
* Moved TemplateQueryBuilder to lang-mustache module because this query is hard coded to work with mustache only

time:
2016-07-18T08:07:18Z
class:
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
comments:
mute testAckedIndexing

pending the merge of https://github.com/elastic/elasticsearch/pull/19416

time:
2016-07-17T19:31:35Z
class:
comments:
Update node.asciidoc

Typo

time:
2016-07-17T19:10:33Z
class:
comments:
Update node.asciidoc

Master nodes must have access to a persistent data directory
Still _have_ access?

thanks will fix as `must have access`


time:
2016-07-16T11:18:11Z
class:
comments:
Fix health docs test

It failed inconsistently when there were pending tasks.

time:
2016-07-15T23:41:47Z
class:
comments:
Fix MatrixAggregationRestIT test

time:
2016-07-15T21:34:21Z
class:
comments:
Build: Simplify plugin configuration for rest tests

This change removes the multiple ways that plugins can be added to the
integ test cluster. It also removes the use of the default
configuration, and instead adds a zip configuration to all plugins. This
will enable using project substitutions with plugins, which must be done
with the default configuration.

time:
2016-07-15T21:18:34Z
class:
comments:
Removes waiting for yellow cluster health upon index (#19460)

creation in the REST tests, as we no longer need it due
to index creation now waiting for active shard copies
before returning (by default, it waits for the primary of
each shard, which is the same as ensuring yellow health).

Relates #19450

time:
2016-07-15T20:31:37Z
class:
comments:
Convert snippets in health docs to CONSOLE

This should make them easier to read and adds them to the test suite
I changed the example from a two node cluster to a single node cluster
because that is what we have running in the integration tests. It is also
what a user just starting out is likely to see so I think that is ok.

time:
2016-07-15T20:02:07Z
class:
comments:
Remove wait_for_status=yellow from the docs

It is no longer required after 687e2e12b31ed3c12ef4c411333bff9da58fc808.

time:
2016-07-15T19:37:35Z
class:
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIT.java
core/src/test/java/org/elasticsearch/action/search/TransportSearchIT.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTestCase.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsIT.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/broadcast/BroadcastActionsIT.java
core/src/test/java/org/elasticsearch/bwcompat/BasicAnalysisBackwardCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/bwcompat/TransportClientBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/consistencylevel/WriteConsistencyLevelIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/index/IndexRequestBuilderIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalValuesMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogIT.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/indexlifecycle/IndexLifecycleActionIT.java
core/src/test/java/org/elasticsearch/indices/IndicesOptionsIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/exists/indices/IndicesExistsIT.java
core/src/test/java/org/elasticsearch/indices/exists/types/TypesExistsIT.java
core/src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateIT.java
core/src/test/java/org/elasticsearch/indices/mapping/SimpleGetFieldMappingsIT.java
core/src/test/java/org/elasticsearch/indices/mapping/UpdateMappingIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/memory/breaker/RandomExceptionCircuitBreakerIT.java
core/src/test/java/org/elasticsearch/mget/SimpleMgetIT.java
core/src/test/java/org/elasticsearch/operateAllIndices/DestructiveOperationsIntegrationIT.java
core/src/test/java/org/elasticsearch/recovery/FullRollingRestartIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/recovery/SimpleRecoveryIT.java
core/src/test/java/org/elasticsearch/search/StressSearchServiceReaperIT.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationsIntegrationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/EquivalenceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/TermsShardMinDocCountIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/DerivativeIT.java
core/src/test/java/org/elasticsearch/search/basic/TransportSearchFailuresIT.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreBackwardCompatibilityIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScoreFieldValueIT.java
core/src/test/java/org/elasticsearch/search/functionscore/QueryRescorerIT.java
core/src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/query/ExistsIT.java
core/src/test/java/org/elasticsearch/search/sort/FieldSortIT.java
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/ContextCompletionSuggestSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/ContextSuggestSearch2xIT.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchIT.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SnapshotBackwardsCompatibilityIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
core/src/test/java/org/elasticsearch/update/UpdateByNativeScriptIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/BulkTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/FunctionScoreTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/IndexLookupTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/RandomScoreFunctionTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SearchFieldsTests.java
comments:
Removes ensureYellow() calls after index creation in the (#19452)

integration tests, as they are no longer needed with
index creation now waiting for shards to be started before
returning from the index creation call (by default, it waits
for the primary of each shard to be started before returning,
which is what ensureYellow() was ensuring anyway).

Closes #19452
Relates #19450

time:
2016-07-15T18:29:36Z
class:
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/test/java/org/elasticsearch/bootstrap/BootstrapCheckTests.java
comments:
Add log message about enforcing bootstrap checks

This commit adds a log message when bootstrap checks are enforced
informing the user that they are enforced because they are bound to an
external network interface. We also log if bootstrap checks are being
enforced but system checks are being ignored.

Relates #19451

time:
2016-07-15T16:32:03Z
class:
core/src/test/java/org/elasticsearch/indices/cluster/AbstractIndicesClusterStateServiceTestCase.java
comments:
Strengthen assertions when random failures are not injected by AbstractIndicesClusterStateServiceTestCase (#19358)

The unit tests for IndicesClusterStateService currently inject random failures upon shard creation/ routing upate / mapping update etc. This commit makes injecting failures optional so that stronger assertions can be made about the local indices / shard state in case of no failures.

time:
2016-07-15T15:48:21Z
class:
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardsObserver.java
core/src/main/java/org/elasticsearch/cluster/ack/CreateIndexClusterStateUpdateResponse.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateEmptyPrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/template/put/MetaDataIndexTemplateServiceTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthIT.java
core/src/test/java/org/elasticsearch/cluster/SimpleDataNodesIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableGenerator.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/indices/flush/FlushIT.java
core/src/test/java/org/elasticsearch/indices/state/SimpleIndexStateIT.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Merge pull request #19450 from elastic/feature/friendly-index-creation

Makes index creation more friendly

time:
2016-07-15T15:19:27Z
class:
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java
core/src/main/java/org/elasticsearch/action/support/ActiveShardsObserver.java
core/src/main/java/org/elasticsearch/cluster/ack/CreateIndexClusterStateUpdateResponse.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/template/put/MetaDataIndexTemplateServiceTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardCountTests.java
core/src/test/java/org/elasticsearch/action/support/ActiveShardsObserverIT.java
core/src/test/java/org/elasticsearch/cluster/SimpleDataNodesIT.java
core/src/test/java/org/elasticsearch/cluster/allocation/ClusterRerouteIT.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryAllocationIT.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/indices/flush/FlushIT.java
core/src/test/java/org/elasticsearch/indices/state/SimpleIndexStateIT.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Index creation waits for active shard copies before returning (#18985)

Before returning, index creation now waits for the configured number
of shard copies to be started. In the past, a client would create an
index and then potentially have to check the cluster health to wait
to execute write operations. With the cluster health semantics changing
so that index creation does not cause the cluster health to go RED,
this change enables waiting for the desired number of active shards
to be active before returning from index creation.

Relates #9126

time:
2016-07-15T13:55:25Z
class:
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/test/java/org/elasticsearch/common/PriorityTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
comments:
Merge pull request #19448 from jasontedor/priority-enum

Make Priority an enum

time:
2016-07-15T13:34:31Z
class:
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/test/java/org/elasticsearch/common/PriorityTests.java
comments:
Reset Priority values

For historical reasons, the value associated with Priority.IMMEDIATE is
-1. Yet, with a full-cluster restart required on major version upgrades,
we can reset these values so they are conceptually simpler. This commit
resets the values associated with Priority instances.

time:
2016-07-15T12:55:49Z
class:
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/test/java/org/elasticsearch/common/PriorityTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
comments:
Make Priority an enum

Today we have an abstraction Priority for representing
priorities. Ideally, these values are a fixed set of constants with a
well-defined ordering which sounds perfect for an enum. This commit
changes Priority so that it is an enum instead of a class.

time:
2016-07-15T12:36:59Z
class:
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
comments:
Priority values should be unmodifiable

In Priority there is a field named values that represents an ordered, by
priority, list of all priorities. Yet, this collection is modifiable and
this collection is exposed via the public API. This means that consumers
can modify this list potentially leading to complete chaos. This commit
modifies this field so that it is unmodifiable, documents that the
returned collection is unmodifiable, and returns total order to the
world. We also punish the bad consumer here by making them make a copy
of the returned collection with which they can do as they please. This
fixes a puzzling test failure which only arises if the two tests
(PrioritizedExecutorsTests#testPriorityQueue and
PriorityTests#testCompareTo run in the same JVM, and run in the right
order).

Relates #19447

time:
2016-07-15T11:19:32Z
class:
comments:
Copy client jars instead of moving them

Moving the dependent jars instead of copying breaks downstream builds
that rely on the jars existing for compilation. This commit modifies
these moves to be copies.

time:
2016-07-15T10:58:38Z
class:
comments:
Fixed asciidoc

time:
2016-07-15T06:16:15Z
class:
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/plugins/IngestPlugin.java
core/src/test/java/org/elasticsearch/ingest/IngestServiceTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/IngestAttachmentPlugin.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
plugins/ingest-user-agent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestTestPlugin.java
comments:
Provide access to ThreadContext in ingest plugins

Also introduced a `Processor.Parameters` class that is holder for several services processors rely on,
the  IngestPlugin#getProcessors(...) method has been changed to accept `Processor.Parameters` instead
of each service seperately.

time:
2016-07-15T03:33:44Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
core/src/test/java/org/elasticsearch/rest/RestFilterChainTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestIndicesActionTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestRecoveryActionTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
comments:
Merge pull request #19440 from rjernst/rest_headers

Plugins: Make rest headers registration pull based

time:
2016-07-15T02:46:35Z
class:
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
comments:
Log one plugin info per line

Today we log all loaded modules and installed plugins in a single
line. The number of modules has grown, and when plugins are installed a
single log line containing the loaded modules and plugins is
lengthy. With this commit, we log a single module or plugin per line,
log these in sorted order, and also log if no modules or no plugins were
loaded.

Relates #19441

time:
2016-07-15T02:03:53Z
class:
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/ESNetty3HttpResponseEncoder.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpChannel.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequest.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequestHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfig.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfigBuilder.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/pipelining/HttpPipeliningHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/pipelining/OrderedDownstreamChannelEvent.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/pipelining/OrderedUpstreamMessageEvent.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/Netty3Plugin.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/ChannelBufferBytesReference.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/ChannelBufferStreamInput.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3InternalESLogger.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3MessageChannelHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3OpenChannelsHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3SizeHeaderFrameDecoder.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Utils.java
modules/transport-netty3/src/test/java/org/elasticsearch/ESNetty3IntegTestCase.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpChannelTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpClient.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpPublishPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpRequestSizeLimitIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerPipeliningTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3PipeliningDisabledIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3PipeliningEnabledIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/pipelining/HttpPipeliningHandlerTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/ChannelBufferBytesReferenceTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortIntegrationIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportPublishAddressIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3UtilsTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESBackcompatTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalNode.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
comments:
Merge branch 'master' into rest_headers

time:
2016-07-15T02:03:14Z
class:
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/ESNetty3HttpResponseEncoder.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpChannel.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequest.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpRequestHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/Netty3HttpServerTransport.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfig.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsConfigBuilder.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/cors/Netty3CorsHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/pipelining/HttpPipeliningHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/pipelining/OrderedDownstreamChannelEvent.java
modules/transport-netty3/src/main/java/org/elasticsearch/http/netty3/pipelining/OrderedUpstreamMessageEvent.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/Netty3Plugin.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/ChannelBufferBytesReference.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/ChannelBufferStreamInput.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3InternalESLogger.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3MessageChannelHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3OpenChannelsHandler.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3SizeHeaderFrameDecoder.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Transport.java
modules/transport-netty3/src/main/java/org/elasticsearch/transport/netty3/Netty3Utils.java
modules/transport-netty3/src/test/java/org/elasticsearch/ESNetty3IntegTestCase.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpChannelTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpClient.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpPublishPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpRequestSizeLimitIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerPipeliningTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3HttpServerTransportTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3PipeliningDisabledIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/Netty3PipeliningEnabledIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/http/netty3/pipelining/HttpPipeliningHandlerTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/Netty3SizeHeaderFrameDecoderTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/ChannelBufferBytesReferenceTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3ScheduledPingTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortIntegrationIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportMultiPortTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3TransportPublishAddressIT.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/Netty3UtilsTests.java
modules/transport-netty3/src/test/java/org/elasticsearch/transport/netty3/SimpleNetty3TransportTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESBackcompatTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalNode.java
comments:
Rename transport-netty to transport-netty3

This commit renames the Netty 3 transport module from transport-netty to
transport-netty3. This is to make room for a Netty 4 transport module,
transport-netty4.

Relates #19439

time:
2016-07-15T01:45:53Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
core/src/test/java/org/elasticsearch/rest/RestFilterChainTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestIndicesActionTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestRecoveryActionTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
comments:
Plugins: Make rest headers registration pull based

Currently custom headers that should be passed through rest requests are
registered by depending on the RestController in guice and calling a
registration method. This change moves that registration to a getter for
plugins, and makes the RestController take the set of headers on
construction.

time:
2016-07-14T22:10:35Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
comments:
Fix line-length in o/e/t/r/s/Features.java

This commit fixes a line-length checkstyle violation in
o/e/t/r/s/Features.java.

time:
2016-07-14T20:12:59Z
class:
comments:
Updating HDFS repository plugin documentation (#19423)

time:
2016-07-14T17:58:12Z
class:
comments:
Updated fielddata docs to make it easier for users with old mappings

time:
2016-07-14T15:56:46Z
class:
comments:
Merge pull request #19431 from rjernst/client_plugin

Add flag for plugins/modules which can be used in the transpory client

time:
2016-07-14T15:31:28Z
class:
core/src/test/java/org/elasticsearch/bwcompat/RepositoryUpgradabilityIT.java
comments:
Adds debug logging to RepositoryUpgradabilityIT test to help figure out
failures in recovery reset/retry.

time:
2016-07-14T15:30:32Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
comments:
[TEST] add 'yaml' feature for the test runner (#19436)

Also renamed 30_yaml.yaml to 30_json.yaml since it tests json, not yaml

time:
2016-07-14T13:46:24Z
class:
core/src/main/java/org/elasticsearch/search/profile/AbstractProfileBreakdown.java
core/src/test/java/org/elasticsearch/search/profile/query/QueryProfilerTests.java
comments:
Record method counts while profiling (#18302)

Invocation counts can be used to help judge the selectivity of individual query components in the context of the entire query.  E.g. a query may not look selective when run by itself (matches most of the index), but when run in context of a full search request, is evaluated only rarely due to execution order

Since this is modifying the base timing class, it'll enrich both query and agg profiles (as well as future profile results)

time:
2016-07-14T13:29:43Z
class:
core/src/main/java/org/elasticsearch/search/profile/AbstractInternalProfileTree.java
core/src/test/java/org/elasticsearch/search/profile/query/QueryProfilerTests.java
comments:
Don't recursively count children profile timings (#19397)

The breakdown is already inclusive of children timing, also counting the child times will
double-count and inflate the final time.

Closes #18693

time:
2016-07-14T11:21:10Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/discovery/DiscoveryModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TasksIT.java
core/src/test/java/org/elasticsearch/action/bulk/BulkProcessorIT.java
core/src/test/java/org/elasticsearch/action/search/SearchRequestBuilderTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientHeadersTests.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientRetryIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryModuleTests.java
core/src/test/java/org/elasticsearch/index/query/plugin/CustomQueryParserIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginIT.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/NettyPlugin.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AbstractAzureComputeServiceTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
qa/evil-tests/src/test/java/org/elasticsearch/tribe/TribeUnitTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESBackcompatTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalNode.java
test/framework/src/main/java/org/elasticsearch/test/ExternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Remove `node.mode` and `node.local` settings (#19428)

Today `node.mode` and `node.local` serve almost the same purpose, they
are a shortcut for `discovery.type` and `transport.type`. If `node.local: true`
or `node.mode: local` is set elasticsearch will start in _local_ mode which means
only nodes within the same JVM are discovered and a non-network based transport
is used. The _local_ mode it only really used in tests or if nodes are embedded.
For both, embedding and tests explicit configuration via `discovery.type` and `transport.type`
should be preferred.

This change removes all the usage of these settings and by-default doesn't
configure a default transport implemenation since netty is now a module. Yet, to make
the user expericence flawless, plugins or modules can set a `http.type.default` and
`transport.type.default`. Plugins set this via `PluginService#additionalSettings()`
which enforces _set-once_ which prevents node startup if set multiple times. This means
that our distributions will just startup with netty transport since it's packaged as a
module unless `transport.type` or `http.transport.type` is explicitly set.

This change also found a bunch of bugs since several NamedWriteables were not registered if a
transport client is used. Now that we don't rely on the `node.mode` leniency which is inherited
instead of using explicit settings, `TransportClient` uses `AssertingLocalTransport` which detects these problems since it serializes all messages.

Closes #16234

time:
2016-07-14T10:33:29Z
class:
core/src/main/java/org/elasticsearch/common/Priority.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/common/PriorityTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/PrioritizedExecutorsTests.java
comments:
Add support for `wait_for_events` to the `_cluster/health` REST endpoint (#19432)

The Java API supports this while mostly used for tests it can also be useful in
production environments. For instance if something is automated like a settings change
and we execute some health right after it the settings update might have some consequences
like a reroute which hasn't been fully applied since the preconditions are not fulfilled yet.
For instance if not all shards started the settings update is applied but the reroute won't move
currently initializing shards like in the shrink API test. Sure this could be done by waiting for
green before but if the cluster moves shards due to some side-effects waiting for all events is
still useful. I also took the chance to add unittests to Priority.java

Closes #19419

time:
2016-07-14T10:20:35Z
class:
comments:
update migration docs to include removal of `netty.epollBugWorkaround`

time:
2016-07-14T09:58:27Z
class:
comments:
Make module client jars go to org.elasticsearch.plugin groupId

time:
2016-07-14T09:41:58Z
class:
comments:
Add client flag for percolator module build

time:
2016-07-14T09:12:47Z
class:
comments:
docs: fix broken link

Closes #19430

time:
2016-07-14T09:07:52Z
class:
comments:
Build: Add flag for plugins/modules which can be used in the transport client

This changes adds a flag which can be set in the esplugin closure in
build.gradle for plugins and modules which contain pieces that must be
published to maven, for use in the transport client. The jar/pom and
source/javadoc jars are moved to a new name that has the suffix
"-client".

I enabled this for the two modules that I know definitely need this;
there may be more. One open question is which groupId to use for the
generated pom.

closes #19411

time:
2016-07-13T21:59:02Z
class:
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
comments:
Merge pull request #19424 from mfussenegger/error-msg

Complete load-settings error message

time:
2016-07-13T21:39:16Z
class:
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
comments:
Complete load-settings error message

time:
2016-07-13T20:32:10Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateProcessorResultTests.java
core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java
comments:
show ignored errors in verbose simulate result (#19404)

Closes #19319.

time:
2016-07-13T20:13:00Z
class:
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java
comments:
update foreach processor to only support one applied processor. (#19402)

Closes #19345.

time:
2016-07-13T18:36:23Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java
core/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/BlobContainerWrapper.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-gcs/src/main/java/org/elasticsearch/common/blobstore/gcs/GoogleCloudStorageBlobContainer.java
comments:
Removed duplicate deleteBlob methods (#18813)

Removed the following methods from the
BlobContainer interface to clean up the interface:

1) deleteBlobs
2) deleteBlobsByPrefix

Closes #18529

time:
2016-07-13T17:03:23Z
class:
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
comments:
Add RestController method for deprecating in one step

This adds an extra method, registerWithDeprecatedHandler, to register both a normal handler and a deprecated handler at the same time. This helps with renaming methods as opposed to _just_ deprecated methods.

time:
2016-07-13T15:34:06Z
class:
comments:
Fix syntax for template tests

time:
2016-07-13T15:33:55Z
class:
comments:
Fix names of tar tests

time:
2016-07-13T14:48:20Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/MatrixAggregationPlugin.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/InternalMatrixStats.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/MatrixStatsAggregationBuilder.java
comments:
Migrate matrix_stats to NamedWriteable

This is the last consumer of the old style register method so I removed
the method.

time:
2016-07-13T14:48:20Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
comments:
Switch remaining builtin aggs to new registration method

time:
2016-07-13T14:30:49Z
class:
comments:
More bad asciidoc

time:
2016-07-13T14:09:41Z
class:
comments:
Fixed bad ASCIIDOC

time:
2016-07-13T14:02:34Z
class:
comments:
Make Prefer Parameters admon block linkable

time:
2016-07-13T13:07:36Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/main/java/org/elasticsearch/script/AbstractScriptParser.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptMetaData.java
core/src/main/java/org/elasticsearch/script/ScriptParameterParser.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/TemplateQueryBuilderTests.java
core/src/test/java/org/elasticsearch/script/ScriptParameterParserTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/search/sort/ScriptSortBuilderTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/BulkTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryTests.java
comments:
Removed deprecated 1.x script and template syntax

Closes #13729

time:
2016-07-13T11:12:22Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/InternalDerivative.java
comments:
Migrate derivative pipeline aggregation to NamedWriteable

This is another step in the effort to remove AggregationStreams and
instead use NamedWriteableRegistry like the rest of the code base.

time:
2016-07-13T10:50:52Z
class:
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
[TEST] Remove wrong transportName from MockTcpTransport#ctor

time:
2016-07-13T08:52:17Z
class:
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
comments:
Don't assert that files exists if recovery has been cancled

Today we assert that the tmp files are present but if the recovery
was canceled this might not be the case while still a valid state.
This chance only throws the AssertionError if the recovery is still active.

time:
2016-07-13T08:31:05Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
[TEST] Use a semaphore to block unitl all in-flight requests are released

time:
2016-07-13T07:52:03Z
class:
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/HttpRequestHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/cors/CorsConfig.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/cors/CorsConfigBuilder.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/cors/CorsHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/pipelining/HttpPipeliningHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/pipelining/OrderedDownstreamChannelEvent.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/pipelining/OrderedUpstreamMessageEvent.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/NettyPlugin.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
modules/transport-netty/src/test/java/org/elasticsearch/ESNettyIntegTestCase.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpChannelTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpClient.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpPublishPortTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpRequestSizeLimitIT.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpServerPipeliningTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpServerTransportTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyPipeliningDisabledIT.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyPipeliningEnabledIT.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/pipelining/HttpPipeliningHandlerTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/NettySizeHeaderFrameDecoderTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortIntegrationIT.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportPublishAddressIT.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/SimpleNettyTransportTests.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryClusterFormationTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsNotSetIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsRegexIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsDisabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsEnabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ResponseHeaderPluginIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecatedQueryBuilder.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecationHeaderRestAction.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecationPlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestResponseHeaderPlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestResponseHeaderRestAction.java
test/framework/src/main/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/NodeConfigurationSource.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Merge pull request #19392 from elastic/modularize_netty

This moves all netty related code into modules/transport-netty the module is build as a zip file as well as a JAR to serve as a dependency for transport client. For the time being this is required otherwise we have no network based impl. for transport client users. This might be subject to change given that we move forward http client.

time:
2016-07-13T06:15:46Z
class:
core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java
core/src/test/java/org/elasticsearch/search/highlight/HighlighterSearchIT.java
comments:
fvh: Also extract terms from the nested query' inner query.

Closes #19265

time:
2016-07-13T03:02:32Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/BinaryRangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/ip/IpRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/InternalTopHits.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
comments:
Migrate top_hits, histogram, and ip_range aggregations to NamedWriteable

This is just another step towards removing AggregationStreams
in favor of NamedWriteable.

time:
2016-07-13T02:38:51Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalReverseNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregationBuilder.java
comments:
Migrate nested, reverse_nested, and children aggregations to NamedWriteable

Just another step in removing AggregationStreams in favor of NamedWriteable.

time:
2016-07-13T02:22:51Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/GeoBoundsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/InternalGeoBounds.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/GeoBoundsIT.java
comments:
Migrate geohash_grid and geo_bounds to NamedWriteable

Just another small step in removing Aggregation's custom streams
implementation in favor of NamedWriteable.

time:
2016-07-13T02:08:09Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/BucketSignificancePriorityQueue.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/GlobalOrdinalsSignificantTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalMappedSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/UnmappedSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
comments:
Clean up significant terms aggregation results

* Clean up the generics around significant terms aggregation results
* Reduce code duplicated between `SignificantLongTerms` and
`SignificantStringTerms` by creating `InternalMappedSignificantTerms`
and moving common things there where possible.
* Migrate to `NamedWriteable`
* Line length fixes while I was there

time:
2016-07-12T22:28:17Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
comments:
Merge pull request #19401 from rjernst/more_plugin_services

Plugins: Add resource watcher to services available for plugin components

time:
2016-07-12T22:26:46Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/allocation/RestClusterAllocationExplainAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
comments:
Merge remote-tracking branch 'dakrone/include-cluster-info-in-explain-api'

time:
2016-07-12T21:55:18Z
class:
core/src/main/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoader.java
core/src/main/java/org/elasticsearch/common/settings/loader/SettingsLoaderFactory.java
core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java
core/src/test/java/org/elasticsearch/common/logging/LoggingConfigurationTests.java
core/src/test/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoaderTests.java
core/src/test/java/org/elasticsearch/search/preference/SearchPreferenceIT.java
comments:
Remove support for properties

This commit removes support for properties syntax and config files:
 - removed support for elasticsearch.properties
 - removed support for logging.properties
 - removed support for properties content detection in REST APIs
 - removed support for properties content detection in Java API

Relates #19398

time:
2016-07-12T21:52:20Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfo.java
core/src/main/java/org/elasticsearch/cluster/DiskUsage.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/allocation/RestClusterAllocationExplainAction.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
comments:
Expose the ClusterInfo object in the allocation explain output

This adds an optional parameter to the cluster allocation explain API
that will return the cluster info object, `include_disk_info`, the
output looks like:

GET /_cluster/allocation/explain?include_disk_info -d'
{"index": "i", "shard": 0, "primary": false}'

{
  ... other info ...

  "cluster_info" : {
    "nodes" : {
      "7Uws-vL7R6WVm3ZwQA1n5A" : {
        "node_name" : "Kraven the Hunter",
        "least_available" : {
          "path" : "/path/to/data1",
          "total_bytes" : 165999570944,
          "used_bytes" : 118180614144,
          "free_bytes" : 47818956800,
          "free_disk_percent" : 28.80667493781158,
          "used_disk_percent" : 71.19332506218842
        },
        "most_available" : {
          "path" : "/path/to/data2",
          "total_bytes" : 165999570944,
          "used_bytes" : 118180614144,
          "free_bytes" : 47818956800,
          "free_disk_percent" : 28.80667493781158,
          "used_disk_percent" : 71.19332506218842
        }
      }
    },
    "shard_sizes" : {
      "[i][2][p]_bytes" : 0,
      "[i][4][p]_bytes" : 130,
      "[i][1][p]_bytes" : 0,
      "[i][3][p]_bytes" : 0,
      "[i][0][p]_bytes" : 130
    },
    "shard_paths" : {
      "[i][3], node[7Uws-vL7R6WVm3ZwQA1n5A], [P], s[STARTED], a[id=LegZLDniTVaw0Y1urv7s3g]" : "/path/to/data1/nodes/0",
      "[i][1], node[7Uws-vL7R6WVm3ZwQA1n5A], [P], s[STARTED], a[id=lAU_4vf_SKmoRdtg0ACnjQ]" : "/path/to/data1/nodes/0",
      "[i][2], node[7Uws-vL7R6WVm3ZwQA1n5A], [P], s[STARTED], a[id=Aurpeuj7SeGeyPDDpCtRgg]" : "/path/to/data1/nodes/0",
      "[i][0], node[7Uws-vL7R6WVm3ZwQA1n5A], [P], s[STARTED], a[id=Vgg8GlQTQ82C2j6HYBq8DQ]" : "/path/to/data1/nodes/0",
      "[i][4], node[7Uws-vL7R6WVm3ZwQA1n5A], [P], s[STARTED], a[id=t8hQlVSxQe-58fSeaXcAqg]" : "/path/to/data1/nodes/0"
    }
  }
}

Resolves #14405

time:
2016-07-12T21:51:50Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
comments:
Plugins: Add resource watcher to services available for plugin components

time:
2016-07-12T21:49:17Z
class:
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
comments:
[TEST] HttpCompressionIT is a real IT

time:
2016-07-12T20:58:03Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
[TEST] First decrement in-flight requests before releasing the latch

time:
2016-07-12T20:32:23Z
class:
comments:
Fix typo in cluster module docs

This commit fixes a simple typo in the cluster module docs.

Closes #19393

time:
2016-07-12T19:13:52Z
class:
comments:
Tweak and document gradle setup for adding transport modules to integ-test-zip

time:
2016-07-12T18:41:37Z
class:
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
[TEST] Make AbstractSimpleTransportTestCase#testTimeoutSendExceptionWithDelayedResponse more robust and wait for in-flight request

time:
2016-07-12T15:55:05Z
class:
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
comments:
minor cleanups and an additional BogusPlugin for HttpSmokeTestCase

time:
2016-07-12T15:42:29Z
class:
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
comments:
fix test plugin visibility

time:
2016-07-12T15:41:21Z
class:
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/NettyPlugin.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
comments:
consolidate security code in on place an allow test based on the jar dependency to opt out of netty internal property setting assertion

time:
2016-07-12T14:29:57Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/NettyPlugin.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryClusterFormationTests.java
qa/smoke-test-client/src/test/java/org/elasticsearch/smoketest/ESSmokeClientTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsNotSetIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsRegexIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsDisabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsEnabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpSmokeTestCase.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ResponseHeaderPluginIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecatedQueryBuilder.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecationHeaderRestAction.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestDeprecationPlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestResponseHeaderPlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/TestResponseHeaderRestAction.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ExternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/NodeConfigurationSource.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Fix remaining tests that either need access to the netty module or require explict configuration

Some tests still start http implicitly or miss configuring the transport clients correctly.
This commit fixes all remaining tests and adds a depdenceny to `transport-netty` from
`qa/smoke-test-http` and `modules/reindex` since they need an http server running on the nodes.

This also moves all required permissions for netty into it's module and out of core.

time:
2016-07-12T14:26:57Z
class:
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasParentQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/NestedQueryBuilderTests.java
comments:
inner_hits: Ensure that that InnerHitBuilder uses rewritten queries

If a nested, has_child or has_parent query's inner query gets rewritten then the InnerHitBuilder should use that rewritten form too, otherwise this can cause exceptions in a later phase.

Also fixes a bug that HasChildQueryBuilder's rewrite method overwrites max_children with min_children value.

Closes #19353

time:
2016-07-12T13:45:31Z
class:
core/src/test/java/org/elasticsearch/index/mapper/parent/ParentMappingTests.java
comments:
Add test for #19389 new type always creates _parent#null field

time:
2016-07-12T11:30:27Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
Merge pull request #19373 from javanna/enhancement/rest_client_builder_callback

Rest Client: add callback to customize http client settings

time:
2016-07-12T11:25:55Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/main/java/org/elasticsearch/client/SSLSocketFactoryHttpConfigCallback.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
RestClient: simplify ssl configuration and make http config callback functional friendly

time:
2016-07-12T10:44:40Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/cluster/NotMasterException.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
test/framework/src/main/java/org/elasticsearch/test/transport/CapturingTransport.java
comments:
Make NotMasterException a first class citizen (#19385)

That exception is currently serialized as its current base class IllegalStateException which confuses code supposed to deal with the stepping down of a master. This is an important exception and we should be able to serialize it correctly. This commit fixes it by moving the exception to inherit from ElasticsearchException and properly register it.

As a bonus I adapted CapturingTransport to properly simulate serialized exceptions.

time:
2016-07-12T10:31:28Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
Rest Client: add callback to customize http client settings

The callback replaces the ability to fully replace the http client instance. By doing that, one used to lose any default that the RestClient had set for the underlying http client. Given that you'd usually override one or two things only, like a couple of timeout values, the ssl factory or the default credentials providers, it is not uder friendly if by doing that users end up replacing the whole http client instance and lose any default set by us.

time:
2016-07-12T08:56:20Z
class:
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/Transport.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
Fix TcpTransport#sendRequest to raise NotConnectedExcepiton if we get disconnected while sending

This also fixes a race in AbstractSimpleTransportTestCase where we never wait long enough
for all response to finish causing expected failures.

time:
2016-07-12T06:58:38Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
comments:
Merge pull request #19380 from rjernst/plugin_components_inputs

Add some basic services to createComponents for plugins

time:
2016-07-12T06:49:00Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ExponentialDecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FieldValueFactorFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/LinearDecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/RandomScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/Highlighters.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ChiSquare.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/MutualInformation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/highlight/Highlighter.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/suggest/Suggesters.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/index/SettingsListenerIT.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginIT.java
core/src/test/java/org/elasticsearch/search/highlight/CustomHighlighterPlugin.java
core/src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/scroll/SearchScrollIT.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggester.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterPlugin.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/SmoothingModelTestCase.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhase.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhaseTests.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/JvmExamplePlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
test/framework/src/main/java/org/elasticsearch/index/MockEngineFactoryPlugin.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/MockIndexEventListener.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Merge branch 'master' into modularize_netty

time:
2016-07-12T06:33:49Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
comments:
Remove createComponents from transport client

time:
2016-07-12T06:22:20Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
comments:
Plugins: Add some basic services to createComponents

This adds the first few basic services needed for any plugin to create
its own components that interact with the rest of the system.

time:
2016-07-12T00:05:56Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Fix plugins service to not double bind plugin components

time:
2016-07-11T22:49:05Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ExponentialDecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/FieldValueFactorFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/LinearDecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/RandomScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/SearchPlugin.java
core/src/main/java/org/elasticsearch/search/Highlighters.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ChiSquare.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/GND.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/JLHScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/MutualInformation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/PercentageScore.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/SignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/EwmaModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltLinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/HoltWintersModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/LinearModel.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/SimpleModel.java
core/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java
core/src/main/java/org/elasticsearch/search/highlight/Highlighter.java
core/src/main/java/org/elasticsearch/search/suggest/Suggesters.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/SignificantTermsSignificanceScoreIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/functionscore/FunctionScorePluginIT.java
core/src/test/java/org/elasticsearch/search/highlight/CustomHighlighterPlugin.java
core/src/test/java/org/elasticsearch/search/highlight/CustomHighlighterSearchIT.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggester.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterPlugin.java
core/src/test/java/org/elasticsearch/search/suggest/CustomSuggesterSearchIT.java
core/src/test/java/org/elasticsearch/search/suggest/SuggestBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/SmoothingModelTestCase.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhase.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhaseTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Switch search extension from push to pull

Switches most search behavior extensions from push (`onModule(SearchModule)`)
to pull (`implements SearchPlugin`). This effort in general gives plugin
authors a much cleaner view of how to extend Elasticsearch and starts to
set up portions of Elasticsearch as "the plugin API". This commit in
particular does that for search-time behavior like customized suggesters,
highlighters, score functions, and significance heuristics.

It also switches most such customization to being done at search module
construction time which is much, much easier to reason about from a testing
perspective. It also helps significantly in the process of de-guice-ing
Elasticsearch's startup.

There are at least two major search time extensions that aren't covered in
this commit that will simply have to wait for the next commit on the topic
because this one has already grown large: custom aggregations and custom
queries. These will likely live in the same SearchPlugin interface as well.

time:
2016-07-11T21:50:12Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java
comments:
Fix after merge with master

time:
2016-07-11T21:23:45Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/index/SettingsListenerIT.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/JvmExamplePlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
test/framework/src/main/java/org/elasticsearch/index/MockEngineFactoryPlugin.java
test/framework/src/main/java/org/elasticsearch/test/MockIndexEventListener.java
comments:
Merge pull request #19371 from rjernst/plugin_components

Add components getter as bridge between guice and new plugin init world

time:
2016-07-11T21:20:47Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Remove unnecessary warning suppression

time:
2016-07-11T21:17:38Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/AllocationBenchmark.java
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
buildSrc/src/main/java/org/elasticsearch/test/NamingConventionsCheck.java
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/DeadHostState.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/CloseableBasicHttpResponse.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/TrackingFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestUtil.java
core/src/main/java/org/apache/log4j/Java9Hack.java
core/src/main/java/org/apache/lucene/document/XInetAddressPoint.java
core/src/main/java/org/apache/lucene/queries/BlendedTermQuery.java
core/src/main/java/org/apache/lucene/queries/MinDocQuery.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/apache/lucene/store/StoreRateLimiting.java
core/src/main/java/org/elasticsearch/Build.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/ResourceNotFoundException.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRequest.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/IndicesRequest.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/NodeExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/TransportLivenessAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TaskGroup.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TaskInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/VerifyRepositoryResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/SettingsUpdater.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java
core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotIndexShardStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotIndexStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotsStatusResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportNodesSnapshotsStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/Condition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/get/ShardUpgradeStatus.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ShardValidateQueryRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/BulkResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardResponse.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequest.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardResponse.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java
core/src/main/java/org/elasticsearch/action/get/GetResponse.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateExecutionService.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java
core/src/main/java/org/elasticsearch/action/main/MainResponse.java
core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/ParsedScrollId.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
comments:
Merge branch 'master' into pr/s3-path-style-access

# Conflicts:
#	docs/plugins/repository-s3.asciidoc
#	plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
#	plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
#	plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
#	plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/TestAwsS3Service.java

time:
2016-07-11T21:16:23Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
comments:
Rename local plugin componenents list for clarity

time:
2016-07-11T21:14:06Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/index/SettingsListenerIT.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/JvmExamplePlugin.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
test/framework/src/main/java/org/elasticsearch/index/MockEngineFactoryPlugin.java
test/framework/src/main/java/org/elasticsearch/test/MockIndexEventListener.java
comments:
Plugins: Add components creator as bridge between guice and new plugin init world

This change adds a createComponents() method to Plugin implementations
which they can use to return already constructed componenents/services.
Eventually this should be just services ("components" don't really do
anything), but for now it allows any object so that preconstructed
instances by plugins can still be bound to guice. Over time we should
add basic services as arguments to this method, but for now I have left
it empty so as to not presume what is a necessary service.

time:
2016-07-11T20:21:29Z
class:
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
core/src/test/java/org/elasticsearch/transport/TransportServiceHandshakeTests.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/HttpRequestHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/cors/CorsConfig.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/cors/CorsConfigBuilder.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/cors/CorsHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/pipelining/HttpPipeliningHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/pipelining/OrderedDownstreamChannelEvent.java
modules/transport-netty/src/main/java/org/elasticsearch/http/netty/pipelining/OrderedUpstreamMessageEvent.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/NettyPlugin.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
modules/transport-netty/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
modules/transport-netty/src/test/java/org/elasticsearch/ESNettyIntegTestCase.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpChannelTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpClient.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpPublishPortTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpRequestSizeLimitIT.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpServerPipeliningTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyHttpServerTransportTests.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyPipeliningDisabledIT.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/NettyPipeliningEnabledIT.java
modules/transport-netty/src/test/java/org/elasticsearch/http/netty/pipelining/HttpPipeliningHandlerTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/NettySizeHeaderFrameDecoderTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortIntegrationIT.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyTransportPublishAddressIT.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
modules/transport-netty/src/test/java/org/elasticsearch/transport/netty/SimpleNettyTransportTests.java
test/framework/src/main/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
comments:
Move netty transport and http into a module

This moves all netty code and it's dependency into a module.

time:
2016-07-11T20:04:17Z
class:
core/src/test/java/org/elasticsearch/search/scroll/SearchScrollIT.java
comments:
Fix scroll test

It was relying on unreasonably large windows crashing. Those large windows
abort the request immediately now.

time:
2016-07-11T19:32:13Z
class:
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
comments:
Fix line length formatting for ClusterStateHealthTests

time:
2016-07-11T19:32:13Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AllocateEmptyPrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/Decision.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthIT.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableGenerator.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/ClusterRebalanceRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/DecisionsImpactOnClusterHealthTests.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Blocked allocations on primary causes RED health

If the allocation decision for a primary shard was NO, this should
cause the cluster health for the shard to go RED, even if the shard
belongs to a newly created index or is part of cluster recovery.

Relates #9126

time:
2016-07-11T19:30:47Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterIndexHealth.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterShardHealth.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/test/java/org/elasticsearch/cluster/ClusterHealthIT.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableGenerator.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Index creation does not cause the cluster health to go RED

Previously, index creation would momentarily cause the cluster health to
go RED, because the primaries were still being assigned and activated.
This commit ensures that when an index is created or an index is being
recovered during cluster recovery and it does not have any active
allocation ids, then the cluster health status will not go RED, but
instead be YELLOW.

Relates #9126

time:
2016-07-11T19:29:45Z
class:
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
comments:
Limit batch size when scrolling

Limits the batch size from scrolling using the same setting as interactive
search: `index.max_result_window`.

Closes #19249

time:
2016-07-11T18:44:57Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/tribe/TribeServiceTests.java
qa/evil-tests/src/test/java/org/elasticsearch/tribe/TribeUnitTests.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/ContextAndHeaderTransportIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsNotSetIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/CorsRegexIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsDisabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/DetailedErrorsEnabledIT.java
qa/smoke-test-http/src/test/java/org/elasticsearch/http/HttpCompressionIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESSingleNodeTestCase.java
test/framework/src/main/java/org/elasticsearch/test/discovery/ClusterDiscoveryConfiguration.java
comments:
More cleanups aroung tests that require HTTP to be enalbed. (#19363)


this commit moves the most of the http related integ tests out into it's own 
`qa/smoke-test-http` project where most of the test can run against the external cluster.

time:
2016-07-11T17:00:36Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/DateRangeAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/GeoDistanceParser.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
comments:
Migrate range, date_range, and geo_distance aggregations to NamedWriteable

time:
2016-07-11T16:59:45Z
class:
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Fix modifier order

checkstyle

time:
2016-07-11T15:46:31Z
class:
core/src/test/java/org/elasticsearch/common/geo/GeoHashTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Add test for GeoHashUtils#bbox()

time:
2016-07-11T15:25:33Z
class:
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java
core/src/test/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilderTests.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/GeoHashGridIT.java
comments:
GeoBoundingBoxQueryBuilder should fail when topLeft and bottomRight are the same coordinate

time:
2016-07-11T14:36:26Z
class:
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
comments:
[TEST] Catch RejectedOperationException when disconnecting from node in MockTcpTransport

time:
2016-07-11T14:27:07Z
class:
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
comments:
[TEST] Use AbstractRunnable when forking off threads on an executor

time:
2016-07-11T13:49:39Z
class:
comments:
Fix typo on analyze.asciidoc (#19354)

time:
2016-07-11T12:30:09Z
class:
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeRemovalClusterStateTaskExecutorTests.java
comments:
Batch process node left and node failure

Today when a node is removed the cluster (it leaves or it fails), we
submit a cluster state update task. These cluster state update tasks are
processed serially on the master. When nodes are removed en masse (e.g.,
a rack is taken down or otherwise becomes unavailable), the master will
be slow to process these failures because of the resulting reroutes and
publishing of each subsequent cluster state. We improve this in this
commit by processing the node removals using the cluster state update
task batch processing framework.

Relates #19289

time:
2016-07-11T10:17:52Z
class:
core/src/main/java/org/elasticsearch/common/transport/NetworkExceptionHelper.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
core/src/test/java/org/elasticsearch/tribe/TribeIT.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/transport/AssertingLocalTransport.java
test/framework/src/main/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransport.java
test/framework/src/main/java/org/elasticsearch/transport/MockTcpTransportPlugin.java
test/framework/src/test/java/org/elasticsearch/transport/MockTcpTransportTests.java
comments:
Add blocking socket based MockTcpTransport (#19332)

Today we have a bunch of tests that use netty transport for several reasons
these tests use it because they need to run some tcp based transport. Yet, this
couples our tests tightly to the netty implementation which should be tested on it's own.
This change adds a plain socket based blocking TcpTransport implementation that is used by
default in tests if local transport is suppressed or if network is selected.
It also adds another tcp network implementation as a showcase how the interface works.

time:
2016-07-11T09:20:56Z
class:
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/store/Store.java
comments:
Catch assertion errors on commit and turn it into a real exception (#19357)

Lucene IndexWriter asserts on files existing on the filesystem but
some tests throw IOException explicitly on those operatiosn such that
some tests trip asserts. We had this before on InternalEngine#ctor
and added some logic there to catch only a specific assertions based
on some excepition stack analysis. This change applies the same logic
to the IndexWriter#commit part of the engine since it can hit the same
issue.
This also fixes a self-suppression issue in Store.java.

Closes #19356

time:
2016-07-11T08:37:01Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpCompressionIT.java
core/src/test/java/org/elasticsearch/options/detailederrors/DetailedErrorsDisabledIT.java
core/src/test/java/org/elasticsearch/options/detailederrors/DetailedErrorsEnabledIT.java
core/src/test/java/org/elasticsearch/plugins/ResponseHeaderPluginIT.java
core/src/test/java/org/elasticsearch/rest/CorsNotSetIT.java
core/src/test/java/org/elasticsearch/rest/CorsRegexIT.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
Merge pull request #19340 from javanna/enhancement/perform_request_variants

Rest Client: add short performRequest method variants without params and/or body

time:
2016-07-11T08:36:26Z
class:
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpCompressionIT.java
core/src/test/java/org/elasticsearch/options/detailederrors/DetailedErrorsDisabledIT.java
core/src/test/java/org/elasticsearch/options/detailederrors/DetailedErrorsEnabledIT.java
core/src/test/java/org/elasticsearch/plugins/ResponseHeaderPluginIT.java
core/src/test/java/org/elasticsearch/rest/CorsNotSetIT.java
core/src/test/java/org/elasticsearch/rest/CorsRegexIT.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportIT.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestClient.java
comments:
Rest Client: use short performRequest methods when possible

time:
2016-07-11T08:36:04Z
class:
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
comments:
Rest Client: add short performRequest method variants without params and/or body

Users wanting to send a request by providing only its method and endpoint, effectively the only two required arguments, shouldn't need to pass in an empty map and a null entity for the body. While at it we can also add a variant to send requests by specifying only method, endpoint and params, but not body. Headers remain a vararg as last argument, so they can always optionally be provided.

 Closes #19312

time:
2016-07-11T08:21:03Z
class:
core/src/test/java/org/elasticsearch/bwcompat/RecoveryWithUnsupportedIndicesIT.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayServiceTests.java
core/src/test/java/org/elasticsearch/index/WaitUntilRefreshIT.java
core/src/test/java/org/elasticsearch/rest/action/main/RestMainActionIT.java
comments:
Cleanup usage of http.enabled (#19351)

Several tests required http.enabled where it was unnecessary.
We also had RestMainActionIT which tests what two of our REST tests
test already so I removed it.
The explicit use of http.enabled: false is also obsolet since our
test do that by default.

time:
2016-07-11T06:48:29Z
class:
comments:
test: better file names

time:
2016-07-10T16:11:32Z
class:
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
comments:
Fix test edge case for random bytes reference iter.

Getting an offset to the last byte means we can only stream one byte and
then we are done, we can't get another offset after it.

time:
2016-07-10T00:08:06Z
class:
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceIT.java
comments:
Use GeoDistanceIT.testDuelOptimizations for bwc testing only

This test is only relevant for testing the GeoDistanceBuilder with old indices (pre GeoPointV2).

closes #19263

time:
2016-07-09T19:46:26Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeServiceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/node/Ec2CustomNodeAttributes.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AWSSignersTests.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPluginTests.java
comments:
Merge pull request #19348 from rjernst/deguice_attrs

Remove CustomNodeAttributes extension point

time:
2016-07-09T19:33:06Z
class:
core/src/main/java/org/elasticsearch/common/inject/Injector.java
core/src/main/java/org/elasticsearch/common/inject/InjectorBuilder.java
core/src/main/java/org/elasticsearch/common/inject/InjectorImpl.java
core/src/main/java/org/elasticsearch/common/inject/InjectorShell.java
core/src/main/java/org/elasticsearch/common/inject/Injectors.java
core/src/main/java/org/elasticsearch/common/inject/ModulesBuilder.java
core/src/main/java/org/elasticsearch/common/inject/PrivateModule.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/FactoryProvider.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/FactoryProvider2.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/Parameter.java
core/src/main/java/org/elasticsearch/common/inject/spi/ConvertedConstantBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/Element.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/inject/spi/LinkedKeyBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/ProviderBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/ProviderKeyBinding.java
comments:
Merge pull request #19346 from rjernst/deguice_guice

Remove child injectors from guice

time:
2016-07-09T16:40:08Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPluginTests.java
comments:
Add unit tests for ec2 AZ node attributes

time:
2016-07-09T04:39:11Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeServiceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/node/Ec2CustomNodeAttributes.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AWSSignersTests.java
comments:
Plugins: Remove CustomNodeAttributes extension point

The DiscoveryNodeService exists to register CustomNodeAttributes which
plugins can add. This is not necessary, since plugins can already add
additional attributes, and use the node attributes prefix.

This change removes the DiscoveryNodeService, and converts the only
consumer, the ec2 discovery plugin, to add the ec2 availability zone
in additionalSettings().

time:
2016-07-08T22:22:50Z
class:
core/src/main/java/org/elasticsearch/common/inject/Injector.java
core/src/main/java/org/elasticsearch/common/inject/InjectorBuilder.java
core/src/main/java/org/elasticsearch/common/inject/InjectorImpl.java
core/src/main/java/org/elasticsearch/common/inject/InjectorShell.java
core/src/main/java/org/elasticsearch/common/inject/Injectors.java
core/src/main/java/org/elasticsearch/common/inject/ModulesBuilder.java
core/src/main/java/org/elasticsearch/common/inject/PrivateModule.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/FactoryProvider.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/FactoryProvider2.java
core/src/main/java/org/elasticsearch/common/inject/assistedinject/Parameter.java
core/src/main/java/org/elasticsearch/common/inject/spi/ConvertedConstantBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/Element.java
core/src/main/java/org/elasticsearch/common/inject/spi/Elements.java
core/src/main/java/org/elasticsearch/common/inject/spi/LinkedKeyBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/ProviderBinding.java
core/src/main/java/org/elasticsearch/common/inject/spi/ProviderKeyBinding.java
comments:
Internal: Remove child injectors from guice

This change removes the ability for guice to have child injectors (and
the entire concept of parent injectors) from our fork of guice. The
methodology for removing was simple: I removed createChildInjector, and
continued to remove methods and members that were unused until my head
was spinning. The motivation for this change is to limit what our fork
of guice gives us access to, so we don't regress and start adding back
more complicated uses.

time:
2016-07-08T21:38:07Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/RepositoryPlugin.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryName.java
core/src/main/java/org/elasticsearch/repositories/RepositoryTypesRegistry.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/AzureRepositoryModule.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobStore.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettings.java
plugins/repository-azure/src/main/java/org/elasticsearch/plugin/repository/azure/AzureRepositoryPlugin.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureRepositoryServiceIntegTestCase.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettingsFilterTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureSnapshotRestoreTests.java
plugins/repository-gcs/src/main/java/org/elasticsearch/plugin/repository/gcs/GoogleCloudStorageModule.java
plugins/repository-gcs/src/main/java/org/elasticsearch/plugin/repository/gcs/GoogleCloudStoragePlugin.java
plugins/repository-gcs/src/main/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageRepository.java
plugins/repository-gcs/src/main/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageService.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageBlobStoreRepositoryTests.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsPlugin.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsRepository.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/S3Module.java
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTestCase.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/RepositoryS3SettingsTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/TestAwsS3Service.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java
comments:
Merge pull request #19324 from rjernst/repository_deguice2

Add RepositoryPlugin interface for registering snapshot repositories

time:
2016-07-08T21:27:08Z
class:
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java
comments:
Add back tests for setting reader helper in s3 and illegal buffer/chunk size

time:
2016-07-08T18:34:15Z
class:
comments:
Add indefinite articles to issue template

This commit adds an indefinite article when referring to operating
systems in the issue template comments regarding supported operating
systems.

time:
2016-07-08T17:13:22Z
class:
core/src/main/java/org/elasticsearch/index/query/GeoDistanceQueryBuilder.java
comments:
Remove radial restriction for GeoDistanceQuery

As of lucene 6.1 GeoDistanceQuery no longer requires restricting the radial distance in GeoPointDistanceQuery.

closes #17578

time:
2016-07-08T15:30:46Z
class:
comments:
Update resiliency docs (#19303)

Adds clarifications about Jepsen tests and new section on issues with versioning.

time:
2016-07-08T15:13:10Z
class:
comments:
Update network.asciidoc

`network.publish_host` defaults to `network.host`, not `network.bind_host`

Closes #19304

time:
2016-07-08T15:02:15Z
class:
core/src/test/java/org/elasticsearch/search/sort/GeoDistanceIT.java
comments:
Mute GeoDistanceIT while fixing

time:
2016-07-08T14:43:35Z
class:
comments:
Fix nesting of stopping docs

This commit fixes errant nesting of the stopping docs due to using a
section header instead of a chapter header at the top of the stopping
docs.

time:
2016-07-08T14:12:03Z
class:
comments:
Add note to issue template regarding supported OS

This commit adds a note to the GitHub issue template noting that bug
reports on OS that we do not support or feature requests for OS that we
do not support will be closed.

Relates #19322

time:
2016-07-08T12:20:56Z
class:
modules/percolator/src/main/java/org/elasticsearch/percolator/MultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQuery.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/percolator/src/main/java/org/elasticsearch/percolator/QueryAnalyzer.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/TransportPercolateAction.java
modules/percolator/src/test/java/org/elasticsearch/percolator/CandidateQueryTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhaseTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorQuerySearchIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/QueryAnalyzerTests.java
comments:
percolator: Forbid the usage or `range` queries with a range based on the current time

If there are percolator queries containing `range` queries with ranges based on the current time then this can lead to incorrect results if the `percolate` query gets cached.  These ranges are changing each time the `percolate` query gets executed and if this query gets cached then the results will be based on how the range was at the time when the `percolate` query got cached.

The ExtractQueryTermsService has been renamed `QueryAnalyzer` and now only deals with analyzing the query (extracting terms and deciding if the entire query is a verified match) . The `PercolatorFieldMapper` is responsible for adding the right fields based on the analysis the `QueryAnalyzer` has performed, because this is highly dependent on the field mappings. Also the `PercolatorFieldMapper` is responsible for creating the percolate query.

time:
2016-07-08T12:13:36Z
class:
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
comments:
Add a unit test that sends random requests among 3 nodes (#19329)

This adds a test that uses transport implementation and sends random requests
to 3 different nodes, the request handlers maybe forwarding the requests to yet another node
etc. until returning the response. This test basically tests that nodes are not deadlocking
in a distributed fashion.

time:
2016-07-08T11:58:52Z
class:
comments:
Disable service in pre-uninstall

Today in the packaging removal scripts, we disable the service in
post-uninstall. Yet, this happens after service files have been
erased. On some systems, this can cause the service disable to fail
leaving behind state causing the service to be enabled on subsequent
installs. This commit moves the service disabling to the pre-uninstall
script to prevent this issue.

Relates #19328

time:
2016-07-08T10:52:29Z
class:
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
comments:
Rest Client: check log level against tracer logger for trace logging

time:
2016-07-08T10:51:48Z
class:
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
comments:
Rest Client: wrap log statement in logger.isDebugEnabled

time:
2016-07-08T10:39:43Z
class:
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
comments:
Merge pull request #19325 from javanna/fix/request_logger_missing_slash

Rest Client: add slash to log line when missing between host and uri

time:
2016-07-08T10:25:20Z
class:
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
comments:
Rest Client: add slash to log line when missing between host and uri

Closes #19314

time:
2016-07-08T08:57:59Z
class:
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
comments:
Merge pull request #19306 from javanna/fix/default_sniffer_scheme

Rest Client: HostsSniffer to set http as default scheme

time:
2016-07-08T08:51:48Z
class:
core/src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java
modules/percolator/src/main/java/org/elasticsearch/percolator/ExtractQueryTermsService.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhase.java
modules/percolator/src/test/java/org/elasticsearch/percolator/ExtractQueryTermsServiceTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorHighlightSubFetchPhaseTests.java
comments:
percolator: Also support query term extract for queries wrapped inside a FunctionScoreQuery

Additionally for highlighting percolator hits, also extract percolator query from FunctionScoreQuery and DisjunctionMaxQuery

time:
2016-07-08T08:33:12Z
class:
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
comments:
[TEST] Test analyzer alias works

Relates to #19163

time:
2016-07-08T07:10:03Z
class:
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/RepositoryPlugin.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryName.java
core/src/main/java/org/elasticsearch/repositories/RepositoryTypesRegistry.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/AzureRepositoryModule.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobStore.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettings.java
plugins/repository-azure/src/main/java/org/elasticsearch/plugin/repository/azure/AzureRepositoryPlugin.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/AbstractAzureRepositoryServiceIntegTestCase.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettingsFilterTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureSnapshotRestoreTests.java
plugins/repository-gcs/src/main/java/org/elasticsearch/plugin/repository/gcs/GoogleCloudStorageModule.java
plugins/repository-gcs/src/main/java/org/elasticsearch/plugin/repository/gcs/GoogleCloudStoragePlugin.java
plugins/repository-gcs/src/main/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageRepository.java
plugins/repository-gcs/src/main/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageService.java
plugins/repository-gcs/src/test/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageBlobStoreRepositoryTests.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsPlugin.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsRepository.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/S3Module.java
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTestCase.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/RepositoryS3SettingsTests.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/TestAwsS3Service.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
comments:
Plugins: Add RepositoryPlugin interface for registering snapshot repositories

Repository plugins currently use a lot of custom classes like
RepositoryName and RepositorySettings in order to use guice to construct
repository implementations. But repositories now only really need their
settings to be constructed. Anything else they need (eg a cloud client)
can be constructed within the plugin, instead of via guice.

This change makes repository plugins use the new pull model. It removes
guice from the construction of Repository objects (no more child
injectors) and also from all repository plugins.

time:
2016-07-08T06:29:34Z
class:
comments:
Merge pull request #19320 from elastic/GlenRSmith-patch-1

slight clarification

time:
2016-07-08T00:46:18Z
class:
comments:
slight clarification

time:
2016-07-07T22:02:09Z
class:
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkIndexByScrollResponseContentListener.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
comments:
Expose task information from NodeClient

This exposes a method to start an action and return a task from
`NodeClient`. This allows reindex to use the injected `Client` rather
than require injecting `TransportAction`s

time:
2016-07-07T21:01:09Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/AbstractStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/GlobalOrdinalsStringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalMappedTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/UnmappedTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/BucketPriorityQueue.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/DoubleTermsTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/LongTermsTests.java
comments:
Clean up serialization of terms aggregation results

Move to NamedWriteable and remove a lot of duplication.

time:
2016-07-07T20:40:38Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/InternalMissing.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/InternalSampler.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/SamplerAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/UnmappedSampler.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/MissingIT.java
comments:
Migrate sampler and missing aggregations to NamedWriteable

This is another step down the path to removing aggregation's special
"streams" which reimplement NamedWriteable.

time:
2016-07-07T20:40:11Z
class:
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
comments:
Fix checkstyle in test

time:
2016-07-07T20:03:58Z
class:
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoryNameModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoryTypesRegistry.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLIndexShardRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/RepositoriesIT.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/plugin/repository/azure/AzureRepositoryPlugin.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-gcs/src/main/java/org/elasticsearch/plugin/repository/gcs/GoogleCloudStoragePlugin.java
plugins/repository-gcs/src/main/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageRepository.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsPlugin.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsRepository.java
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/RepositoryS3SettingsTests.java
comments:
Merge pull request #19292 from rjernst/repository_deguice

Simplified repository api for snapshot/restore

time:
2016-07-07T19:54:10Z
class:
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
comments:
Rename repository api methods for clarity and tweak documentation.

time:
2016-07-07T19:29:40Z
class:
plugins/ingest-user-agent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
comments:
ingest: Fixed left over rename to 'ingest-user-plugin'

Closes #19307

time:
2016-07-07T19:14:19Z
class:
comments:
Add skip to failing ingest-user-agent REST test

This commit adds a skip to a failing ingest-user-agent REST test.

time:
2016-07-07T18:44:03Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandler.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/test/java/org/elasticsearch/bootstrap/ElasticsearchUncaughtExceptionHandlerTests.java
test/framework/src/main/java/org/elasticsearch/bootstrap/BootstrapForTesting.java
comments:
Die with dignity

Today when a thread encounters a fatal unrecoverable error that
threatens the stability of the JVM, Elasticsearch marches on. This
includes out of memory errors, stack overflow errors and other errors
that leave the JVM in a questionable state. Instead, the Elasticsearch
JVM should die when these errors are encountered. This commit causes
this to be the case.

Relates #19272

time:
2016-07-07T18:40:05Z
class:
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
comments:
Tighten ensure atomic move cleanup

This commit tightens the cleanup after possible errors while ensuring
the filesystem supports atomic move.

Relates #19309

time:
2016-07-07T17:31:30Z
class:
comments:
Migrate Vagrant tests for Fedora to Fedora 24

This commit migrates the Vagrant box for Fedora for the packaging tests
from Fedora 22 to Fedora 24 as Fedora 22 reached end-of-line upon the
release of Fedora 24.

Relates #19308

time:
2016-07-07T17:11:37Z
class:
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
comments:
Rest Client: HostsSniffer to set http as default scheme

 The assumption is HostsSniffer is that all of the arguments have been properly provided and validated through HostsSniffer.Builder, except they weren't, as the scheme didn't have a default value and when not set would cause NPEs down the road. Improved tests to catch this also.

time:
2016-07-07T16:43:20Z
class:
comments:
Add version 2.3.4 to upgrade from versions

time:
2016-07-07T16:33:27Z
class:
comments:
Fix casing of "Elasticsearch" in how-to docs

time:
2016-07-07T15:50:23Z
class:
core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationTestScriptsPlugin.java
core/src/test/java/org/elasticsearch/search/aggregations/EquivalenceIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/HistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/CardinalityIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TDigestPercentileRanksIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TDigestPercentilesIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
comments:
Clean up more messy tests

After #13834 many tests that used Groovy scripts (for good or bad reason) in their tests have been moved in the lang-groovy module and the issue #13837 has been created to track these messy tests in order to clean them up.

This commit moves more tests back in core, removes the dependency on Groovy, changes the scripts in order to use the mocked script engine, and change the tests  to integration tests.

time:
2016-07-07T15:49:01Z
class:
comments:
Fix typo.

time:
2016-07-07T15:47:19Z
class:
comments:
Add notes about sparsity.

time:
2016-07-07T14:36:23Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Added 2.3.4 version and bwc indices

time:
2016-07-07T13:26:36Z
class:
core/src/test/java/org/elasticsearch/script/FileScriptTests.java
core/src/test/java/org/elasticsearch/script/StoredScriptsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregationTestScriptsPlugin.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentileRanksIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/HDRPercentilesIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/TopHitsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketScriptIT.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/BucketSelectorIT.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/package-info.java
test/framework/src/main/java/org/elasticsearch/script/MockScriptEngine.java
test/framework/src/main/java/org/elasticsearch/script/MockScriptPlugin.java
comments:
Move back some messy tests from Groovy plugin to core

This commit moves back some messy tests that have been placed in lang-groovy module in https://github.com/elastic/elasticsearch/pull/13834. It removes the dependency on Groovy plugin as well as change back the tests to integration tests (IT suffix).

It also changes the current MockScriptEngine and MockScriptPlugin to make it easier to use.

time:
2016-07-07T13:09:11Z
class:
comments:
Fix typo in name of remove ingest-user-agent test

This commit fixes a simple typo in the name of the test for testing the
removal of the ingest-user-agent plugin.

time:
2016-07-07T12:56:40Z
class:
comments:
Update field-stats.asciidoc

Change use of index constraints to correctly identify any indices containing relevant docs

Closes #19232

time:
2016-07-07T07:43:43Z
class:
plugins/ingest-user-agent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
plugins/ingest-user-agent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentCache.java
plugins/ingest-user-agent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentParser.java
plugins/ingest-user-agent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentProcessor.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorFactoryTests.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorTests.java
plugins/ingest-user-agent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentRestIT.java
comments:
ingest: Renamed from `ingest-useragent` to `ingest-user-agent` and processor from `useragent` to `user_agent`

and on some other places did similar renaming. This is consistent with ES naming. Also made sure that the docs are navigable from the reference guide.

time:
2016-07-07T06:50:10Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
core/src/test/java/org/elasticsearch/bootstrap/ElasticsearchCliTests.java
core/src/test/java/org/elasticsearch/cli/CommandTests.java
test/framework/src/main/java/org/elasticsearch/bootstrap/ESElasticsearchCliTestCase.java
comments:
Dependencies: Update to jopt-5.0 (#19278)

The new version of jopt allows us to remove a couple of TODOs in the code.

Closes #12368

time:
2016-07-07T00:11:38Z
class:
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
comments:
Fix modifier order in BytesStreamsTests

This commit fixes an issue with the ordering of modifiers on a static
nested class in BytesStreamsTests.

time:
2016-07-07T00:09:30Z
class:
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/snapshots/IndexShardRepository.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/RepositoryModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoryNameModule.java
core/src/main/java/org/elasticsearch/repositories/RepositoryTypesRegistry.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLIndexShardRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/snapshots/RepositoriesIT.java
core/src/test/java/org/elasticsearch/snapshots/mockstore/MockRepository.java
plugins/repository-azure/src/main/java/org/elasticsearch/plugin/repository/azure/AzureRepositoryPlugin.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-gcs/src/main/java/org/elasticsearch/plugin/repository/gcs/GoogleCloudStoragePlugin.java
plugins/repository-gcs/src/main/java/org/elasticsearch/repositories/gcs/GoogleCloudStorageRepository.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsPlugin.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsRepository.java
plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/RepositoryS3SettingsTests.java
comments:
Plugins: Simplified repository api for snapshot/restore

The api for snapshot/restore was split up between two interfaces,
Repository and IndexShardRepository. There was also complex
initialization and injection between the two. However, there is always a
one to one relationship between the two.

This change moves the IndexShardRepository api into Repository, as well
as updates the API so as not to require any services to be injected for
sublcasses.

time:
2016-07-06T23:52:00Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/logging/DeprecationLogger.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/http/netty/HttpRequestHandler.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/rest/DeprecationRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/common/logging/DeprecationLoggerTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/ThreadContextTests.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpChannelTests.java
core/src/test/java/org/elasticsearch/rest/DeprecationHttpIT.java
core/src/test/java/org/elasticsearch/rest/DeprecationRestHandlerTests.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
core/src/test/java/org/elasticsearch/rest/plugins/TestDeprecatedQueryBuilder.java
core/src/test/java/org/elasticsearch/rest/plugins/TestDeprecationHeaderRestAction.java
core/src/test/java/org/elasticsearch/rest/plugins/TestDeprecationPlugin.java
comments:
Add DeprecationRestHandler to automatically log deprecated REST calls

This adds a new proxy for RestHandlers and RestControllers so that requests made
to deprecated REST APIs can be automatically logged in the ES logs via the
DeprecationLogger as well as via a "Warning" header (RFC-7234) for all responses.

time:
2016-07-06T14:51:22Z
class:
core/src/test/java/org/elasticsearch/indices/IndicesServiceTests.java
comments:
Fix test issue where index is explicitly deleted during cluster state update

Calling indicesService.deleteIndex() can trip an assertion if there is an ongoing cluster state applied in
IndicesClusterStateService. This means that the index is possibly deleted after the failMissingShards
check and before we try creating new and updated shards, tripping an assertion that non-existing shards must
have shard state initializing (started in this case).

time:
2016-07-06T14:17:25Z
class:
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsIntegrationIT.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
comments:
Merge pull request #19241 from jimferenczi/field_stats_type

Add missing field type in the FieldStats response.

time:
2016-07-06T13:24:09Z
class:
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsIntegrationIT.java
core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java
comments:
Add missing field type in the FieldStats response.

This change adds the type of the field in the fieldstats response.
It can be one of the following:
  * "integer" for byte, short, integer and long
  * "float" for float, half-float and double
  * "date" for date
  * "ip" for ip
  * "text" for string, keyword and text.

Closes #17750

time:
2016-07-06T12:31:58Z
class:
comments:
Add otto-de/flummi client to plugins

Closes #19266

time:
2016-07-06T06:59:29Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
comments:
Fix reindex NPE when http is disabled

time:
2016-07-06T05:33:08Z
class:
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
comments:
Fix checkstyle for TestProcessor

time:
2016-07-06T05:16:22Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
comments:
Fix reindex action to depend on HttpServer instead of NodeService for
http info

time:
2016-07-06T04:04:44Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Pipeline.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/plugins/IngestPlugin.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestParsingTests.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/IngestServiceTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
core/src/test/java/org/elasticsearch/ingest/ProcessorsRegistryTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GsubProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JoinProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorFactoryTests.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/IngestAttachmentPlugin.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/AttachmentProcessorFactoryTests.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/GeoIpProcessorFactoryTests.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentProcessor.java
plugins/ingest-useragent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestTestPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
comments:
Merge pull request #19226 from rjernst/ingest_plugin_api

Add IngestPlugin api for plugins to add ingest processors

time:
2016-07-06T04:03:39Z
class:
core/src/test/java/org/elasticsearch/ingest/IngestServiceTests.java
comments:
Add basic tests for ingest plugins setup

time:
2016-07-06T03:53:03Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/DelegatingActionListener.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/PlainListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/MultiCommand.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/cli/UserException.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskConfig.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/MacAddressProvider.java
core/src/main/java/org/elasticsearch/common/Randomness.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReferenceStreamInput.java
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/ShapesAvailability.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/hash/MurmurHash3.java
core/src/main/java/org/elasticsearch/common/io/CharSequenceReader.java
core/src/main/java/org/elasticsearch/common/io/FastStringReader.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasables.java
core/src/main/java/org/elasticsearch/common/logging/LoggerMessageFormat.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/network/Cidrs.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoader.java
core/src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
core/src/main/java/org/elasticsearch/common/util/CollectionUtils.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/SuspendableRefContainer.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadBarrier.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/membership/MembershipAction.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/ESFileStore.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/env/NodeMetaData.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/DanglingIndicesState.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/analysis/CharMatcher.java
core/src/main/java/org/elasticsearch/index/analysis/MultiTermAwareComponent.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/FieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/Ordinals.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVOrdinalsIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/ip/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/InternalIndexingStats.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/store/DirectoryUtils.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesRequestCache.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/PipelineExecutionService.java
core/src/main/java/org/elasticsearch/monitor/Probes.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerificationFailure.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestActionListener.java
core/src/main/java/org/elasticsearch/script/ScriptContext.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/DocValueFormat.java
core/src/main/java/org/elasticsearch/search/MultiValueMode.java
core/src/main/java/org/elasticsearch/search/SearchHit.java
core/src/main/java/org/elasticsearch/search/SearchHits.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/action/SearchTransportService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreamContext.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/MultiBucketsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/Filters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/Range.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-07-06T03:46:56Z
class:
core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/common/io/CharSequenceReader.java
core/src/main/java/org/elasticsearch/common/io/FastStringReader.java
core/src/main/java/org/elasticsearch/common/util/CollectionUtils.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/transport/BaseTransportResponseHandler.java
core/src/main/java/org/elasticsearch/transport/FutureTransportResponseHandler.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientNodesServiceTests.java
core/src/test/java/org/elasticsearch/common/settings/bar/BarTestClass.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
comments:
Merge pull request #19230 from rjernst/unused

Remove unused methods and classes

time:
2016-07-06T03:46:36Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/DelegatingActionListener.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/PlainListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/MultiCommand.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/cli/UserException.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskConfig.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/MacAddressProvider.java
core/src/main/java/org/elasticsearch/common/Randomness.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReferenceStreamInput.java
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/ShapesAvailability.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/hash/MurmurHash3.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasables.java
core/src/main/java/org/elasticsearch/common/logging/LoggerMessageFormat.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/network/Cidrs.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoader.java
core/src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/SuspendableRefContainer.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadBarrier.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/membership/MembershipAction.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/ESFileStore.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/env/NodeMetaData.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/DanglingIndicesState.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/analysis/CharMatcher.java
core/src/main/java/org/elasticsearch/index/analysis/MultiTermAwareComponent.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/FieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/Ordinals.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVOrdinalsIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/ip/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/InternalIndexingStats.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/store/DirectoryUtils.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesRequestCache.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/PipelineExecutionService.java
core/src/main/java/org/elasticsearch/monitor/Probes.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerificationFailure.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestActionListener.java
core/src/main/java/org/elasticsearch/script/ScriptContext.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/DocValueFormat.java
core/src/main/java/org/elasticsearch/search/MultiValueMode.java
core/src/main/java/org/elasticsearch/search/SearchHit.java
core/src/main/java/org/elasticsearch/search/SearchHits.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/action/SearchTransportService.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreamContext.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/MultiBucketsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/Filters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/Range.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTerms.java
comments:
Merge branch 'master' into unused

time:
2016-07-06T03:34:20Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
comments:
Merge pull request #19276 from rjernst/transport_client_deguice

Remove guice from transport client helper classes

time:
2016-07-06T02:51:03Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/TransportActionNodeProxy.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientIT.java
comments:
Internal: Remove guice from transport client helper classes

This change removes injection for constructors of
TransportClientNodesService and TransportProxyClient.

time:
2016-07-06T02:24:38Z
class:
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java
comments:
Fix failing percolator field mapper tests

This commit fixes some failing percolator field mapper tests from
upstream change 599a5489981e3b8f58e77c0433c382096dcfd591.

time:
2016-07-06T02:01:07Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/apache/lucene/store/StoreRateLimiting.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/NodeExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/SettingsUpdater.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/BulkResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ActionFilter.java
core/src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/DelegatingActionListener.java
core/src/main/java/org/elasticsearch/action/support/DestructiveOperations.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/PlainListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsFields.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/MultiCommand.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/cli/Terminal.java
core/src/main/java/org/elasticsearch/cli/UserException.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskConfig.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/DiffableUtils.java
core/src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/BasePrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/MacAddressProvider.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/common/Randomness.java
core/src/main/java/org/elasticsearch/common/UUIDGenerator.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReferenceStreamInput.java
core/src/main/java/org/elasticsearch/common/bytes/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/collect/CopyOnWriteHashMap.java
core/src/main/java/org/elasticsearch/common/collect/HppcMaps.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
core/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
core/src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
core/src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedStreamInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/compress/CompressorFactory.java
core/src/main/java/org/elasticsearch/common/compress/DeflateCompressor.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/ShapesAvailability.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/hash/MurmurHash3.java
core/src/main/java/org/elasticsearch/common/inject/Scope.java
core/src/main/java/org/elasticsearch/common/inject/State.java
core/src/main/java/org/elasticsearch/common/inject/internal/Errors.java
core/src/main/java/org/elasticsearch/common/inject/internal/InternalFactory.java
core/src/main/java/org/elasticsearch/common/io/Channels.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInputReader.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/io/stream/Streamable.java
core/src/main/java/org/elasticsearch/common/io/stream/Writeable.java
core/src/main/java/org/elasticsearch/common/joda/Joda.java
core/src/main/java/org/elasticsearch/common/lease/Releasables.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/logging/LoggerMessageFormat.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java
core/src/main/java/org/elasticsearch/common/lucene/index/FilterableTermsEnum.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
core/src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
core/src/main/java/org/elasticsearch/common/network/Cidrs.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/SettingsFilter.java
core/src/main/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoader.java
core/src/main/java/org/elasticsearch/common/settings/loader/SettingsLoader.java
core/src/main/java/org/elasticsearch/common/text/Text.java
core/src/main/java/org/elasticsearch/common/text/UTF8SortedAsUnicodeComparator.java
core/src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/PortsRange.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/common/util/BigArray.java
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/common/util/ByteArray.java
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
core/src/main/java/org/elasticsearch/common/util/DoubleArray.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/common/util/FloatArray.java
core/src/main/java/org/elasticsearch/common/util/IntArray.java
core/src/main/java/org/elasticsearch/common/util/LongArray.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
core/src/main/java/org/elasticsearch/common/util/concurrent/SuspendableRefContainer.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadBarrier.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/main/java/org/elasticsearch/common/xcontent/ToXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/DiscoverySettings.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/membership/MembershipAction.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPingService.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
comments:
Merge branch 'master' into feature/seq_no

* master: (192 commits)
  [TEST] Fix rare OBOE in AbstractBytesReferenceTestCase
  Reindex from remote
  Rename writeThrowable to writeException
  Start transport client round-robin randomly
  Reword Refresh API reference (#19270)
  Update fielddata.asciidoc
  Fix stored_fields message
  Add missing footer notes in mapper size docs
  Remote BucketStreams
  Add doc values support to the _size field in the mapper-size plugin
  Bump version to 5.0.0-alpha5.
  Update refresh.asciidoc
  Update shrink-index.asciidoc
  Change Debian repository for Vagrant debian-8 box
  [TEST] fix test to account for internal empyt reference optimization
  Upgrade to netty 3.10.6.Final (#19235)
  [TEST] fix histogram test when extended bounds overlaps data
  Remove redundant modifier
  Simplify TcpTransport interface by reducing send code to a single send method (#19223)
  Fix style violation in InstallPluginCommand.java
  ...

time:
2016-07-05T20:40:03Z
class:
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
comments:
[TEST] Fix rare OBOE in AbstractBytesReferenceTestCase

time:
2016-07-05T20:13:17Z
class:
core/src/main/java/org/elasticsearch/action/bulk/BackoffPolicy.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/test/java/org/elasticsearch/action/bulk/BackoffPolicyTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkIndexByScrollRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkIndexByScrollResponse.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkIndexByScrollResponseContentListener.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ClientScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexRequestBuilder.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ScrollableHitSource.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteInfo.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteRequestBuilders.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteResponseParsers.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSource.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollActionScriptTestCase.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexbyScrollActionMetadataTestCase.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/BulkIndexByScrollResponseMatcher.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/CancelTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFailureTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexFromRemoteWhitelistTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexMetadataTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexRequestTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexSourceTargetValidationTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RestReindexActionTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RetryTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/RoundTripTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/UpdateByQueryMetadataTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/UpdateByQueryWithScriptTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteInfoTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteRequestBuildersTests.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/remote/RemoteScrollableHitSourceTests.java
test/framework/src/main/java/org/elasticsearch/test/rest/Stash.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/StashTests.java
comments:
Reindex from remote

This adds a remote option to reindex that looks like

```
curl -POST 'localhost:9200/_reindex?pretty' -d'{
  "source": {
    "remote": {
      "host": "http://otherhost:9200"
    },
    "index": "target",
    "query": {
      "match": {
        "foo": "bar"
      }
    }
  },
  "dest": {
    "index": "target"
  }
}'
```

This reindex has all of the features of local reindex:
* Using queries to filter what is copied
* Retry on rejection
* Throttle/rethottle
The big advantage of this version is that it goes over the HTTP API
which can be made backwards compatible.

Some things are different:

The query field is sent directly to the other node rather than parsed
on the coordinating node. This should allow it to support constructs
that are invalid on the coordinating node but are valid on the target
node. Mostly, that means old syntax.
this is not meant to stay I guess? It seems that we will use the rest async client when available?

I think this is ok, but can you explain why it was needed? I thought that the stash changes went in with their own PR.

if you want, for http methods you can use constants e.g. HttpPost.METHOD_NAME

why do we need retries here? Is it because we hit a single host and in some cases we may want to retry that same request against that same host?


time:
2016-07-05T18:37:01Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/common/io/stream/NotSerializableExceptionWrapper.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/repositories/VerificationFailure.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/test/java/org/elasticsearch/ESExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/MultiSearchTemplateResponse.java
modules/percolator/src/main/java/org/elasticsearch/percolator/MultiPercolateResponse.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Rename writeThrowable to writeException

This commit renames writeThrowable to writeException. The situation here
stems from the fact that the StreamOutput method for serializing
Exceptions needs to accept Throwables too as Throwables can be the cause
of serialized Exceptions. Yet, we do not serialize Throwables in the
Error sub-hierarchy in a way that they can be deserialized into their
initial type. This leads to an asymmetry in the StreamOutput method for
serializing Exceptions and the StreamInput method for writing
Excpetions. Namely, the former will accept Throwables but the latter
will only return Exceptions. A goal with the stream methods has always
been symmetry in the method names so that serialization/deserialization
routines appear symmetrical in code. It is this asymmetry on the
input/output types for Exceptions on StreamOutput/StreamInput that
clashes with the desired symmetry of naming. Despite this, we should
favor symmetry in the naming of the methods. This commit renames
StreamOutput#writeThrowable to StreamOutput#writeException which leaves
us with Exception StreamInput#readException and void
StreamOutput#writeException(Throwable).

time:
2016-07-05T17:17:17Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
comments:
Start transport client round-robin randomly

This commit modifies the initial value of the transport client
round-robin index to a random value so that initial requests are more
likely to not all hit the same node.

Relates #14143

time:
2016-07-05T16:37:28Z
class:
comments:
Reword Refresh API reference (#19270)

time:
2016-07-05T14:56:31Z
class:
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
comments:
Merge pull request #19271 from LeeDr/fixStoredFieldsMessage

Fix stored_fields message 'is not longer supported'

time:
2016-07-05T14:21:52Z
class:
comments:
Update fielddata.asciidoc

time:
2016-07-05T14:11:29Z
class:
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
comments:
Fix stored_fields message

time:
2016-07-05T13:12:18Z
class:
comments:
Add missing footer notes in mapper size docs

time:
2016-07-05T13:02:36Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreamContext.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
comments:
Remote BucketStreams

It isn't used.

time:
2016-07-05T12:53:13Z
class:
plugins/mapper-size/src/main/java/org/elasticsearch/index/mapper/size/SizeFieldMapper.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeFieldMapperUpgradeTests.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingIT.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
comments:
Merge pull request #19217 from jimferenczi/mapper_size_docvalues2

Add doc values support to the _size field in the mapper-size plugin

time:
2016-07-05T12:47:58Z
class:
plugins/mapper-size/src/main/java/org/elasticsearch/index/mapper/size/SizeFieldMapper.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeFieldMapperUpgradeTests.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingIT.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
comments:
Add doc values support to the _size field in the mapper-size plugin

This change activates the doc_values on the _size field for indices created after 5.0.0-alpha4.
It also adds a note in the breaking changes that explain the situation and how to get around it.

Closes #18334

time:
2016-07-05T12:34:23Z
class:
core/src/main/java/org/elasticsearch/Version.java
comments:
Bump version to 5.0.0-alpha5.

time:
2016-07-05T11:49:25Z
class:
comments:
Update refresh.asciidoc

Fix grammar and example

time:
2016-07-05T11:34:58Z
class:
comments:
Update shrink-index.asciidoc

Fix half-finished sentence

time:
2016-07-05T11:13:43Z
class:
comments:
Change Debian repository for Vagrant debian-8 box

This commit modifies the Debian repository to work around some upstream
reliability issues with the previous repository.
:+1: 


time:
2016-07-05T09:23:43Z
class:
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
comments:
[TEST] fix test to account for internal empyt reference optimization

time:
2016-07-05T09:11:55Z
class:
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
comments:
Upgrade to netty 3.10.6.Final (#19235)

time:
2016-07-05T08:01:08Z
class:
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/HistogramTests.java
comments:
[TEST] fix histogram test when extended bounds overlaps data

Closes #19221

time:
2016-07-05T06:39:08Z
class:
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
comments:
Remove redundant modifier

time:
2016-07-05T06:33:19Z
class:
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReferenceStreamInput.java
core/src/main/java/org/elasticsearch/common/bytes/CompositeBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/transport/TcpHeader.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
core/src/test/java/org/elasticsearch/common/bytes/CompositeBytesReferenceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPingIT.java
comments:
Simplify TcpTransport interface by reducing send code to a single send method (#19223)

Due to some optimization on the netty layer we had quite some code / cruft
added to the TcpTransport to allow for those optimizations. After cleaning
up BytesReference we can now move this optimization into TcpTransport and
have a simple send method on the implementation layer instead. This commit
adds a CompositeBytesReference that also allows message headers to be written
separately which simplify the header code as well since no skips are needed
anymore.

time:
2016-07-04T23:45:46Z
class:
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
comments:
Fix style violation in InstallPluginCommand.java

This commit fixes a checkstyle violation in InstallPluginCommand.java
added after renaming UserError to UserException in
f9d55be1ed013e93cd732d01161ff2a34d49db13.

time:
2016-07-04T23:22:29Z
class:
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/MultiCommand.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/cli/UserException.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/RemovePluginCommand.java
core/src/test/java/org/elasticsearch/cli/CommandTests.java
core/src/test/java/org/elasticsearch/cli/MultiCommandTests.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/InstallPluginCommandTests.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/RemovePluginCommandTests.java
comments:
Rename UserError

The top-level class Throwable represents all errors and exceptions in
Java. This hierarchy is divided into Error and Exception, the former
being serious problems that applications should not try to catch and the
latter representing exceptional conditions that an application might
want to catch and handle. This commit renames
org.elasticsearch.cli.UserError to org.elasticsearch.UserException to
make its name consistent with where it falls in this hierarchy.

Relates #19254

time:
2016-07-04T23:22:12Z
class:
core/src/main/java/org/elasticsearch/index/translog/Translog.java
comments:
Throw translog corrupted exception on malformed op

Today when reading a malformed operation from the translog, we throw an
assertion error that is immediately caught and wrapped into a translog
corrupted exception. This commit replaces this by electing to directly
throw a translog corrupted exception instead.

Additionally, this cleanup also addressed a double-wrapped translog
corrupted exception. Namely, verifying the checksum can throw a translog
corrupted exception which the existing code would catch and wrap again
in a translog corrupted exception.

Relates #19256

time:
2016-07-04T21:40:44Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
comments:
Fixes getting snapshot status checks for preventing duplicate entries
from both current snapshots (cluster state) and repository snapshots
(on storage).

time:
2016-07-04T20:54:43Z
class:
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
comments:
Improve logging for batched cluster state updates (#19255)

We've been slowly improving batch support in `ClusterService` so service won't need to implement this tricky logic themselves. These good changes are blessed but our logging infra didn't catch up and we now log things like:

```
[2016-07-04 21:51:22,318][DEBUG][cluster.service          ] [node_sm0] processing [put-mapping [type1],put-mapping [type1]]:
```

Depending on the `source` string this can get quite ugly (mostly in the ZenDiscovery area). 

This PR adds some infra to improve logging, keeping the non-batched task the same. As result the above line looks like:

```
[2016-07-04 21:44:45,047][DEBUG][cluster.service          ] [node_s0] processing [put-mapping[type0, type0, type0]]: execute
```

ZenDiscovery waiting on join moved from:

```
[2016-07-04 17:09:45,111][DEBUG][cluster.service          ] [node_t0] processing [elected_as_master, [1] nodes joined),elected_as_master, [1] nodes joined)]: execute
```

To

```
[2016-07-04 22:03:30,142][DEBUG][cluster.service          ] [node_t3] processing [elected_as_master ([3] nodes joined)[{node_t2}{R3hu3uoSQee0B6bkuw8pjw}{p9n28HDJQdiDMdh3tjxA5g}{127.0.0.1}{127.0.0.1:30107}, {node_t1}{ynYQfk7uR8qR5wKIysFlQg}{wa_OKuJHSl-Oyl9Gis-GXg}{127.0.0.1}{127.0.0.1:30106}, {node_t0}{pweq-2T4TlKPrEVAVW6bJw}{NPBSLXSTTguT1So0JsZY8g}{127.0.0.1}{127.0.0.1:30105}]]: execute
```

As a bonus, I removed all `zen-disco` prefixes to sources from that area.

time:
2016-07-04T19:09:25Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/common/hash/MurmurHash3.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/common/transport/DummyTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/LocalTransportAddress.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddressSerializers.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/env/NodeMetaData.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreResponseTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkActionTests.java
core/src/test/java/org/elasticsearch/action/ingest/IngestProxyActionFilterTests.java
core/src/test/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/nodes/TransportNodesActionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ClusterStateCreationUtils.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientNodesServiceTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterChangedEventTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateTests.java
core/src/test/java/org/elasticsearch/cluster/DiskUsageTests.java
core/src/test/java/org/elasticsearch/cluster/NodeConnectionsServiceTests.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardFailedClusterStateTaskExecutorTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexServiceTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeFiltersTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodeServiceTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodesTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/SameShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDeciderUnitTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterStateToStringTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/common/util/IndexFolderUpgraderTests.java
core/src/test/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandlerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ElectMasterServiceTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryUnitTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenPingTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueueTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/gateway/AsyncShardFetchTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/gateway/MetaDataStateFormatTests.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/ShardPathTests.java
core/src/test/java/org/elasticsearch/indices/IndexingMemoryControllerTests.java
core/src/test/java/org/elasticsearch/indices/IndicesLifecycleListenerSingleNodeTests.java
core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoverySourceHandlerTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryTargetTests.java
core/src/test/java/org/elasticsearch/indices/state/RareClusterStateIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoIT.java
core/src/test/java/org/elasticsearch/recovery/RecoveriesCollectionTests.java
core/src/test/java/org/elasticsearch/tribe/TribeServiceTests.java
qa/evil-tests/src/test/java/org/elasticsearch/tribe/TribeUnitTests.java
test/framework/src/main/java/org/elasticsearch/cluster/MockInternalClusterInfoService.java
test/framework/src/main/java/org/elasticsearch/test/ClusterServiceUtils.java
test/framework/src/main/java/org/elasticsearch/test/ESAllocationTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Persistent Node Ids (#19140)

Node IDs are currently randomly generated during node startup. That means they change every time the node is restarted. While this doesn't matter for ES proper, it makes it hard for external services to track nodes. Another, more minor, side effect is that indexing the output of, say, the node stats API results in creating new fields due to node ID being used as keys.

The first approach I considered was to use the node's published address as the base for the id. We already [treat nodes with the same address as the same](https://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java#L387) so this is a simple change (see [here](https://github.com/elastic/elasticsearch/compare/master...bleskes:node_persistent_id_based_on_address)). While this is simple and it works for probably most cases, it is not perfect. For example, if after a node restart, the node is not able to bind to the same port (because it's not yet freed by the OS), it will cause the node to still change identity. Also in environments where the host IP can change due to a host restart, identity will not be the same. 

Due to those limitation, I opted to go with a different approach where the node id will be persisted in the node's data folder. This has the upside of connecting the id to the nodes data. It also means that the host can be adapted in any way (replace network cards, attach storage to a new VM). I

It does however also have downsides - we now run the risk of two nodes having the same id, if someone copies clones a data folder from one node to another. To mitigate this I changed the semantics of the protection against multiple nodes with the same address to be stricter - it will now reject the incoming join if a node exists with the same id but a different address. Note that if the existing node doesn't respond to pings (i.e., it's not alive) it will be removed and the new node will be accepted when it tries another join.

Last, and most importantly, this change requires that *all* nodes persist data to disk. This is a change from current behavior where only data & master nodes store local files. This is the main reason for marking this PR as breaking.

Other less important notes:
- DummyTransportAddress is removed as we need a unique network address per node. Use `LocalTransportAddress.buildUnique()` instead.
- I renamed `node.add_lid_to_custom_path` to `node.add_lock_id_to_custom_path` to avoid confusion with the node ID which is now part of the `NodeEnvironment` logic.
- I removed the `version` paramater from `MetaDataStateFormat#write` , it wasn't really used and was just in the way :)
- TribeNodes are special in the sense that they do start multiple sub-nodes (previously known as client nodes). Those sub-nodes do not store local files but derive their ID from the parent node id, so they are generated consistently.

time:
2016-07-04T14:29:26Z
class:
core/src/main/java/org/elasticsearch/search/suggest/completion2x/CompletionTokenStream.java
comments:
Fix CompletionTokenStream modifier redundancy

time:
2016-07-04T13:58:27Z
class:
core/src/main/java/org/elasticsearch/search/suggest/completion2x/CompletionTokenStream.java
comments:
Fix CompletionSuggestSearchIT and CompletionSuggestSearch2xIT

time:
2016-07-04T13:22:12Z
class:
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenIntMap.java
core/src/main/java/org/elasticsearch/common/collect/ImmutableOpenMap.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/Setting.java
core/src/main/java/org/elasticsearch/common/settings/loader/PropertiesSettingsLoader.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/index/analysis/CharMatcher.java
core/src/main/java/org/elasticsearch/index/analysis/MultiTermAwareComponent.java
core/src/main/java/org/elasticsearch/index/fielddata/FieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/Ordinals.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java
core/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperLegacy.java
core/src/main/java/org/elasticsearch/index/mapper/ip/LegacyIpIndexFieldData.java
core/src/main/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilder.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/store/DirectoryUtils.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/indices/IndicesRequestCache.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/script/ScriptContext.java
core/src/main/java/org/elasticsearch/search/DocValueFormat.java
core/src/main/java/org/elasticsearch/search/SearchHit.java
core/src/main/java/org/elasticsearch/search/SearchHits.java
core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/Filters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/Range.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/NumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/Cardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/Percentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorStreams.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/models/MovAvgModelBuilder.java
core/src/main/java/org/elasticsearch/search/rescore/Rescorer.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/CompletionTokenStream.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/GeolocationContextMapping.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/Laplace.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/LinearInterpolation.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/MultiCandidateGeneratorWrapper.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/StupidBackoff.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/test/java/org/apache/lucene/util/SloppyMathTests.java
core/src/test/java/org/elasticsearch/action/support/TransportActionFilterChainTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/NodeVersionAllocationDeciderTests.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpClient.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/rest/RestFilterChainTests.java
core/src/test/java/org/elasticsearch/search/query/MultiMatchQueryIT.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/support/MultiValuesSourceParser.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/CompilerSettings.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/Definition.java
plugins/lang-python/src/main/java/org/elasticsearch/script/python/PythonScriptEngineService.java
test/framework/src/main/java/org/elasticsearch/test/engine/ThrowingLeafReaderWrapper.java
comments:
Enable Checkstyle RedundantModifier

time:
2016-07-04T12:53:02Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/MultiBucketsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FilterAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/FiltersAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/GlobalAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
comments:
Migrate global, filter, and filters aggs to NamedWriteable

Once all of these are migrated we'll be able to remove aggregation's
custom "streams" which function that same as NamedWriteable. It also
allows us to make most of the fields on aggregations final which is
rather nice.

Also starts to migrate MultiBucketAggregation.Bucket to Writeable,
allowing the buckets to have immutable parts.

time:
2016-07-04T12:46:00Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/GeoCentroidAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/InternalGeoCentroid.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregationBuilder.java
comments:
Migrate remaining calc aggs to NamedWriteable

Once all of these are migrated we'll be able to remove aggregation's
custom "streams" which function that same as NamedWriteable. It also
allows us to make most of the fields on aggregations final which is
rather nice.

time:
2016-07-04T12:41:06Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ElasticsearchSecurityException.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/action/ActionListener.java
core/src/main/java/org/elasticsearch/action/ActionRunnable.java
core/src/main/java/org/elasticsearch/action/LatchedActionListener.java
core/src/main/java/org/elasticsearch/action/TaskOperationFailure.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/delete/TransportDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/put/TransportPutRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/TransportIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/close/TransportCloseIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/TransportCreateIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/TransportPutMappingAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/open/TransportOpenIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/settings/put/TransportUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoresResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/delete/TransportDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/template/put/TransportPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/post/TransportUpgradeSettingsAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestHandler.java
core/src/main/java/org/elasticsearch/action/bulk/Retry.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/get/MultiGetResponse.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportShardMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java
core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/AdapterActionFuture.java
core/src/main/java/org/elasticsearch/action/support/DefaultShardOperationFailedException.java
core/src/main/java/org/elasticsearch/action/support/DelegatingActionListener.java
core/src/main/java/org/elasticsearch/action/support/HandledTransportAction.java
core/src/main/java/org/elasticsearch/action/support/PlainListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/TransportActions.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/MultiTermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java
core/src/main/java/org/elasticsearch/bootstrap/Seccomp.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/AckedClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskConfig.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/FailedRerouteAllocation.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/MacAddressProvider.java
core/src/main/java/org/elasticsearch/common/Randomness.java
core/src/main/java/org/elasticsearch/common/geo/ShapesAvailability.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/lease/Releasables.java
core/src/main/java/org/elasticsearch/common/logging/LoggerMessageFormat.java
core/src/main/java/org/elasticsearch/common/network/Cidrs.java
core/src/main/java/org/elasticsearch/common/util/CancellableThreads.java
core/src/main/java/org/elasticsearch/common/util/concurrent/AbstractRunnable.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadBarrier.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/discovery/AckClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandler.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/membership/MembershipAction.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/env/ESFileStore.java
core/src/main/java/org/elasticsearch/env/NodeEnvironment.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/DanglingIndicesState.java
core/src/main/java/org/elasticsearch/gateway/GatewayMetaState.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java
core/src/main/java/org/elasticsearch/gateway/MetaDataStateFormat.java
core/src/main/java/org/elasticsearch/gateway/MetaStateService.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/index/CompositeIndexEventListener.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/IndexWarmer.java
core/src/main/java/org/elasticsearch/index/cache/bitset/BitsetFilterCache.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/AbstractIndexOrdinalsFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java
core/src/main/java/org/elasticsearch/index/fielddata/plain/SortedSetDVOrdinalsIndexFieldData.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/Mapping.java
core/src/main/java/org/elasticsearch/index/query/QueryParseContext.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexingOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/InternalIndexingStats.java
core/src/main/java/org/elasticsearch/index/shard/RefreshListeners.java
core/src/main/java/org/elasticsearch/index/shard/SearchOperationListener.java
core/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java
core/src/main/java/org/elasticsearch/index/shard/TranslogRecoveryPerformer.java
core/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/main/java/org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/store/IndicesStore.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/PipelineExecutionService.java
core/src/main/java/org/elasticsearch/monitor/Probes.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/VerificationFailure.java
core/src/main/java/org/elasticsearch/repositories/VerifyNodeRepositoryAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/support/RestActionListener.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/MultiValueMode.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/action/SearchTransportService.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AggregationContext.java
core/src/main/java/org/elasticsearch/search/query/QueryPhase.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/tasks/PersistedTaskInfo.java
core/src/main/java/org/elasticsearch/tasks/Task.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/main/java/org/elasticsearch/tasks/TaskPersistenceService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/DelegatingTransportChannel.java
core/src/main/java/org/elasticsearch/transport/PlainTransportFuture.java
core/src/main/java/org/elasticsearch/transport/RequestHandlerRegistry.java
core/src/main/java/org/elasticsearch/transport/ResponseHandlerFailureTransportException.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/TransportChannel.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/TransportServiceAdapter.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/FileWatcher.java
core/src/test/java/org/elasticsearch/ESExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/ListenerActionIT.java
core/src/test/java/org/elasticsearch/action/RejectionActionIT.java
core/src/test/java/org/elasticsearch/action/admin/HotThreadsIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/CancellableTasksTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TasksIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java
core/src/test/java/org/elasticsearch/action/admin/indices/template/put/MetaDataIndexTemplateServiceTests.java
core/src/test/java/org/elasticsearch/action/bulk/RetryTests.java
core/src/test/java/org/elasticsearch/action/bulk/TransportBulkActionTookTests.java
core/src/test/java/org/elasticsearch/action/ingest/BulkRequestModifierTests.java
core/src/test/java/org/elasticsearch/action/main/MainActionTests.java
core/src/test/java/org/elasticsearch/action/support/ListenableActionFutureTests.java
core/src/test/java/org/elasticsearch/action/support/TransportActionFilterChainTests.java
core/src/test/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ReplicationOperationTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportWriteActionTests.java
core/src/test/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationActionTests.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsIT.java
core/src/test/java/org/elasticsearch/action/termvectors/MultiTermVectorsIT.java
core/src/test/java/org/elasticsearch/client/AbstractClientHeadersTestCase.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientNodesServiceTests.java
core/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesIT.java
core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTests.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceTests.java
core/src/test/java/org/elasticsearch/common/breaker/MemoryCircuitBreakerTests.java
core/src/test/java/org/elasticsearch/common/util/CancellableThreadsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractRunnableTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/RefCountedTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/ThreadContextTests.java
core/src/test/java/org/elasticsearch/common/xcontent/ConstructingObjectParserTests.java
core/src/test/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandlerTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueueTests.java
core/src/test/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateActionTests.java
core/src/test/java/org/elasticsearch/env/NodeEnvironmentTests.java
core/src/test/java/org/elasticsearch/gateway/AsyncShardFetchTests.java
core/src/test/java/org/elasticsearch/gateway/MetaDataWriteDataNodesIT.java
core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingDisabledTests.java
core/src/test/java/org/elasticsearch/index/mapper/DynamicMappingIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/MapperServiceTests.java
core/src/test/java/org/elasticsearch/index/mapper/merge/TestMergeMapperTests.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexingOperationListenerTests.java
core/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indexing/IndexActionIT.java
core/src/test/java/org/elasticsearch/indices/analyze/AnalyzeActionIT.java
core/src/test/java/org/elasticsearch/indices/flush/FlushIT.java
core/src/test/java/org/elasticsearch/indices/flush/SyncedFlushUtil.java
core/src/test/java/org/elasticsearch/indices/mapping/ConcurrentDynamicTemplateIT.java
core/src/test/java/org/elasticsearch/indices/mapping/UpdateMappingIntegrationIT.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryTargetTests.java
core/src/test/java/org/elasticsearch/indices/state/RareClusterStateIT.java
comments:
Do not catch throwable

Today throughout the codebase, catch throwable is used with reckless
abandon. This is dangerous because the throwable could be a fatal
virtual machine error resulting from an internal error in the JVM, or an
out of memory error or a stack overflow error that leaves the virtual
machine in an unstable and unpredictable state. This commit removes
catch throwable from the codebase and removes the temptation to use it
by modifying listener APIs to receive instances of Exception instead of
the top-level Throwable.

Relates #19231

time:
2016-07-04T11:06:56Z
class:
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/test/NoopDiscovery.java
comments:
re-introduce: Inline reroute with process of node join/master election (#18938)

time:
2016-07-04T10:33:44Z
class:
comments:
Fix typo in rest test

time:
2016-07-04T09:02:06Z
class:
comments:
Bad asciidoc link

time:
2016-07-04T08:39:49Z
class:
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractGeoTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/source/SourceFetchingIT.java
core/src/test/java/org/elasticsearch/update/TimestampTTLBWIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/GeoDistanceTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SearchFieldsTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeFieldMapperUpgradeTests.java
comments:
Restore reverted change now that alpha4 is out:

Rename `fields` to `stored_fields` and add `docvalue_fields`

`stored_fields` parameter will no longer try to retrieve fields from the _source but will only return stored fields.
`fields` will throw an exception if the user uses it.
Add `docvalue_fields` as an adjunct to `fielddata_fields` which is deprecated. `docvalue_fields` will try to load the value from the docvalue and fallback to fielddata cache if docvalues are not enabled on that field.

Closes #18943

time:
2016-07-04T08:24:15Z
class:
core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java
comments:
Improve error checking and reporting in CBSIT

time:
2016-07-04T08:24:15Z
class:
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
comments:
Propagate canTripCircuitBreaker for all broadcasted actions

With this commit we also propagate the `canTripCircuitBreaker`
setting for the main action in TransportBroadcastByNodeAction.

Previously, we set it only on the additional action added by
this handler.

time:
2016-07-04T08:07:45Z
class:
comments:
Rename Search Template REST tests

time:
2016-07-02T18:33:16Z
class:
core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastAction.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/support/single/shard/TransportSingleShardAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/common/io/CharSequenceReader.java
core/src/main/java/org/elasticsearch/common/io/FastStringReader.java
core/src/main/java/org/elasticsearch/common/util/CollectionUtils.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/transport/BaseTransportResponseHandler.java
core/src/main/java/org/elasticsearch/transport/FutureTransportResponseHandler.java
core/src/test/java/org/elasticsearch/client/transport/TransportClientNodesServiceTests.java
core/src/test/java/org/elasticsearch/common/settings/bar/BarTestClass.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
comments:
Internal: Remove unused methods and classes

This change removes a handful of classes and methods that were simply
unused. Some of the classes were intermediate abstract classes that
added nothing to the base class they extended.

time:
2016-07-02T09:54:52Z
class:
core/src/test/java/org/elasticsearch/index/shard/IndexShardOperationsLockTests.java
comments:
Make testAllOperationsInvoked properly clean up after itself

time:
2016-07-02T08:07:57Z
class:
core/src/test/java/org/elasticsearch/snapshots/RepositoriesIT.java
comments:
Match exception message more exactly in test assertion

time:
2016-07-02T07:35:54Z
class:
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ThreadedActionListener.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/common/util/concurrent/SuspendableRefContainer.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTargetService.java
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
core/src/test/java/org/elasticsearch/action/support/replication/TransportReplicationActionTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/SuspendableRefContainerTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardOperationsLockTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/indices/flush/SyncedFlushSingleNodeTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
comments:
Make primary relocation handoff non-blocking (#19013)

Primary relocation and indexing concurrently can currently lead to a deadlock situation as indexing operations are blocked on a (bounded) thread pool during the hand-off phase between old and new primary. This change replaces blocking of indexing operations by putting operations that cannot be executed during relocation hand-off in a queue to be executed once relocation completes.

Closes #18553.

time:
2016-07-02T07:27:07Z
class:
core/src/test/java/org/elasticsearch/snapshots/RepositoriesIT.java
comments:
Fix test assertion matching exception message

Newer versions of the URL class in JDK 9 use a different exception message when throwing a MalformedURLException due to an
unknown protocol.

time:
2016-07-01T23:27:52Z
class:
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
core/src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPingService.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/breaker/CircuitBreakerService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/monitor/MonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/client/transport/FailAndRetryMockTransport.java
core/src/test/java/org/elasticsearch/cluster/NodeConnectionsServiceTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpServerPipeliningTests.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/test/NoopDiscovery.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/AwsEc2ServiceMock.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobStore.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
test/framework/src/main/java/org/elasticsearch/test/transport/CapturingTransport.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-07-01T23:25:34Z
class:
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
core/src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPingService.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/breaker/CircuitBreakerService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/monitor/MonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/client/transport/FailAndRetryMockTransport.java
core/src/test/java/org/elasticsearch/cluster/NodeConnectionsServiceTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpServerPipeliningTests.java
core/src/test/java/org/elasticsearch/test/NoopDiscovery.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/AwsEc2ServiceMock.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobStore.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
test/framework/src/main/java/org/elasticsearch/test/transport/CapturingTransport.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
comments:
Merge pull request #19225 from rjernst/we_dont_need_generics

Internal: Remove generics from LifecycleComponent

time:
2016-07-01T23:17:42Z
class:
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java
core/src/main/java/org/elasticsearch/common/component/LifecycleComponent.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPing.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/ZenPingService.java
core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/http/HttpServerTransport.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/breaker/CircuitBreakerService.java
core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java
core/src/main/java/org/elasticsearch/indices/ttl/IndicesTTLService.java
core/src/main/java/org/elasticsearch/monitor/MonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/repositories/Repository.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java
core/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/tribe/TribeService.java
core/src/main/java/org/elasticsearch/watcher/ResourceWatcherService.java
core/src/test/java/org/elasticsearch/client/transport/FailAndRetryMockTransport.java
core/src/test/java/org/elasticsearch/cluster/NodeConnectionsServiceTests.java
core/src/test/java/org/elasticsearch/cluster/service/ClusterServiceIT.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpServerPipeliningTests.java
core/src/test/java/org/elasticsearch/test/NoopDiscovery.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/AwsEc2ServiceMock.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobStore.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
test/framework/src/main/java/org/elasticsearch/test/transport/CapturingTransport.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
comments:
Internal: Remove generics from LifecycleComponent

The only reason for LifecycleComponent taking a generic type was so that
it could return that type on its start and stop methods. However, this
chaining has no practical necessity. Instead, start and stop can be
void, and a whole bunch of confusing generics disappear.

time:
2016-07-01T21:52:57Z
class:
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/test/java/org/elasticsearch/repositories/blobstore/BlobStoreRepositoryTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobStore.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
comments:
Adding repository index generational files

Before, a repository would maintain an index file (named 'index') per
repository, that contained the current snapshots in the repository.
This file was not atomically written, so repositories had to depend on
listing the blobs in the repository to determine what the current
snapshots are, and only rely on the index file if the repository does
not support the listBlobs operation.  This could cause an incorrect view
of the current snapshots in the repository if any prior snapshot delete
operations failed to delete snapshot metadata files.

This commit introduces the atomic writing of the index file, and because
atomic writes are not guaranteed if the file already exists, we write to
a generational index file (index-N, where N is the current generation).
We also maintain an index-latest file that contains the current
generation, for those repositories that cannot list blobs.

Closes #19002
Relates #18156

time:
2016-07-01T21:21:41Z
class:
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
comments:
Simplify ingest useragent construction

time:
2016-07-01T21:16:09Z
class:
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentProcessor.java
plugins/ingest-useragent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorFactoryTests.java
comments:
Update ingest useragent plugin to use new ingest plugin

time:
2016-07-01T20:17:12Z
class:
core/src/main/java/org/elasticsearch/node/service/NodeService.java
comments:
Remove unused ClusterService member of NodeService

time:
2016-07-01T20:00:33Z
class:
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestParsingTests.java
comments:
Fix test oops

time:
2016-07-01T19:58:11Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-07-01T19:55:41Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
comments:
Fix node service to still work when http is disabled

time:
2016-07-01T19:45:43Z
class:
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
comments:
Fix unit tests for http server that no longer need node service

time:
2016-07-01T19:36:44Z
class:
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
comments:
Fix line lengths for ingest config utils

time:
2016-07-01T19:35:26Z
class:
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/apache/lucene/store/StoreRateLimiting.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/NodeExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/bulk/BulkResponse.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ActionFilter.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsFields.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/DiffableUtils.java
core/src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/BasePrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/UUIDGenerator.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/collect/CopyOnWriteHashMap.java
core/src/main/java/org/elasticsearch/common/collect/HppcMaps.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/inject/Scope.java
core/src/main/java/org/elasticsearch/common/inject/State.java
core/src/main/java/org/elasticsearch/common/inject/internal/Errors.java
core/src/main/java/org/elasticsearch/common/inject/internal/InternalFactory.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java
core/src/main/java/org/elasticsearch/common/lucene/index/FilterableTermsEnum.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/settings/SettingsFilter.java
core/src/main/java/org/elasticsearch/common/settings/loader/SettingsLoader.java
core/src/main/java/org/elasticsearch/common/text/Text.java
core/src/main/java/org/elasticsearch/common/text/UTF8SortedAsUnicodeComparator.java
core/src/main/java/org/elasticsearch/common/transport/PortsRange.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/util/BigArray.java
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/common/util/DoubleArray.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/common/util/FloatArray.java
core/src/main/java/org/elasticsearch/common/util/IntArray.java
core/src/main/java/org/elasticsearch/common/util/LongArray.java
core/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/common/xcontent/ToXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
core/src/main/java/org/elasticsearch/discovery/DiscoverySettings.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/membership/MembershipAction.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/index/Index.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinals.java
core/src/main/java/org/elasticsearch/index/get/GetResult.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LegacyNumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/WrapperQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/index/shard/CommitPoints.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/shard/SnapshotStatus.java
core/src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/index/translog/BaseTranslogReader.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltCharFilters.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenizers.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/ingest/IngestMetadata.java
core/src/main/java/org/elasticsearch/ingest/InternalTemplateService.java
core/src/main/java/org/elasticsearch/ingest/Pipeline.java
core/src/main/java/org/elasticsearch/ingest/PipelineConfiguration.java
core/src/main/java/org/elasticsearch/ingest/PipelineExecutionService.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/jvm/HotThreads.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessService.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/restore/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptMetaData.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/BucketCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestBucketsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestDocsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/DeferringBucketCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/InternalMissing.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalReverseNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/BinaryRangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/InternalSampler.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/IncludeExclude.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/NumericMetricsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/InternalGeoBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/InternalGeoCentroid.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/InternalMax.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/InternalMin.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractInternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/AbstractInternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/InternalSum.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/InternalValueCount.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/SiblingPipelineAggregator.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-07-01T19:32:52Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
comments:
Merge pull request #19218 from rjernst/http_server_without_node_service

Internal: Remove cyclic dependency between HttpServer and NodeService

time:
2016-07-01T18:48:08Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/AbstractInternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/AbstractInternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/InternalValueCount.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/valuecount/ValueCountAggregationBuilder.java
comments:
Migrate value_count, percentiles, and percentile_ranks aggregations to NamedWriteable

These are the first aggregations with multiple `InternalAggregation`s
backing the same `AggregationBuilder`. This required a change in the
register method's signature.

time:
2016-07-01T18:48:08Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/Stash.java
comments:
Fix comment

I forgot a word....

time:
2016-07-01T18:45:55Z
class:
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/test/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestIndicesActionTests.java
comments:
Includes the index UUID in the _cat/indices API and adds tests
for the _cat/indices functionality.

Closes #19204
Closes #19132

time:
2016-07-01T18:11:11Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/Stash.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/Assertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
comments:
Add embedded stash key support to rest tests

This allowes embedding stash keys in string like `t${key}est`. This
allows simple string concatenation like acitons.

The test for this is in `ObjectPathTests` because `Stash` doesn't seem
to have a test on its own and it is simple enough to test embedded
stashes this way. And this is a way I expect them to be used eventually.

time:
2016-07-01T17:16:56Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
comments:
Remove unnecessary transport level bwc

time:
2016-07-01T16:50:54Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
comments:
Internal: Remove cyclic dependency between HttpServer and NodeService

NodeService has an "service attributes" map, which is only
set by HttpServer on start/stop. But the only thing it puts in this map
is already available as part of the HttpServer info which is added to
node info requests. This change removes the attributes map and removes
the dependency in HttpServer on NodeService.

time:
2016-07-01T16:31:41Z
class:
core/src/main/java/org/elasticsearch/node/service/NodeService.java
comments:
Remove unnecessary optional injection of ScriptService into NodeService

time:
2016-07-01T16:26:17Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
core/src/main/java/org/elasticsearch/common/io/Channels.java
core/src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/ingest/AbstractProcessorFactory.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestFilter.java
core/src/main/java/org/elasticsearch/rest/RestFilterChain.java
core/src/main/java/org/elasticsearch/rest/RestHandler.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/allocation/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/hotthreads/RestNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestGetTaskAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/delete/RestDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/get/RestGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/verify/RestVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/reroute/RestClusterRerouteAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/shards/RestClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/delete/RestDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/get/RestGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/restore/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/status/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/state/RestClusterStateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/stats/RestClusterStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestDeleteStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestGetStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/exists/indices/RestIndicesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestSyncedFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/forcemerge/RestForceMergeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/get/RestGetIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/recovery/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/segments/RestIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/shards/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/head/RestHeadIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/upgrade/RestUpgradeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/fieldstats/RestFieldStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestDeletePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestSimulatePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/InternalAvg.java
core/src/main/java/org/elasticsearch/transport/TcpHeader.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/Transports.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInputFactory.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyHeader.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLoggerFactory.java
core/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
core/src/test/java/org/elasticsearch/common/BooleansTests.java
core/src/test/java/org/elasticsearch/common/ChannelsTests.java
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
core/src/test/java/org/elasticsearch/common/lucene/LuceneTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/KeyedLockTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
core/src/test/java/org/elasticsearch/plugins/responseheader/TestResponseHeaderRestAction.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
core/src/test/java/org/elasticsearch/rest/RestFilterChainTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestRecoveryActionTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/PublishPortTests.java
core/src/test/java/org/elasticsearch/transport/TCPTransportTests.java
core/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GsubProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JoinProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorFactoryTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestSearchTemplateAction.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexScriptTests.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-07-01T16:15:05Z
class:
core/src/main/java/org/elasticsearch/ingest/PipelineExecutionService.java
core/src/test/java/org/elasticsearch/ingest/PipelineExecutionServiceTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
comments:
Skip the execution of an empty pipeline (#19200)

main optimization: `sourceToMap` is not called, therefore avoiding creation of Map of Maps
Closes #19192.

time:
2016-07-01T15:29:48Z
class:
comments:
Add ingest-useragent to vagrant tests

time:
2016-07-01T15:24:43Z
class:
core/src/test/java/org/elasticsearch/indices/cluster/AbstractIndicesClusterStateServiceTestCase.java
comments:
Fix checkstyle violations

time:
2016-07-01T15:01:39Z
class:
core/src/main/java/org/apache/lucene/store/StoreRateLimiting.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/cluster/ClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateFilter.java
core/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/common/UUIDGenerator.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java
core/src/main/java/org/elasticsearch/common/inject/Scope.java
core/src/main/java/org/elasticsearch/common/inject/State.java
core/src/main/java/org/elasticsearch/common/inject/internal/InternalFactory.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTokenStream.java
core/src/main/java/org/elasticsearch/common/settings/SettingsFilter.java
core/src/main/java/org/elasticsearch/common/settings/loader/SettingsLoader.java
core/src/main/java/org/elasticsearch/common/transport/PortsRange.java
core/src/main/java/org/elasticsearch/common/transport/TransportAddress.java
core/src/main/java/org/elasticsearch/common/util/BigArray.java
core/src/main/java/org/elasticsearch/common/util/DoubleArray.java
core/src/main/java/org/elasticsearch/common/util/FloatArray.java
core/src/main/java/org/elasticsearch/common/util/IntArray.java
core/src/main/java/org/elasticsearch/common/util/LongArray.java
core/src/main/java/org/elasticsearch/common/util/concurrent/ThreadContext.java
core/src/main/java/org/elasticsearch/common/xcontent/ToXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/membership/MembershipAction.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/gateway/GatewayService.java
core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java
core/src/main/java/org/elasticsearch/index/fielddata/ordinals/MultiOrdinals.java
core/src/main/java/org/elasticsearch/index/get/ShardGetService.java
core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java
core/src/main/java/org/elasticsearch/index/mapper/MapperService.java
core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java
core/src/main/java/org/elasticsearch/index/shard/SnapshotStatus.java
core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/indices/IndexingMemoryController.java
core/src/main/java/org/elasticsearch/monitor/jvm/HotThreads.java
core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestBucketsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/BestDocsDeferringCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/DeferringBucketCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceConfig.java
core/src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java
core/src/main/java/org/elasticsearch/search/highlight/vectorhighlight/SourceScoreOrderFragmentsBuilder.java
core/src/main/java/org/elasticsearch/search/highlight/vectorhighlight/SourceSimpleFragmentsBuilder.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchTransportRequest.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/main/java/org/joda/time/format/StrictISODateTimeFormat.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainIT.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplainTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkShardRequestTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ClusterStateCreationUtils.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsIT.java
core/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java
core/src/test/java/org/elasticsearch/blocks/SimpleBlocksIT.java
core/src/test/java/org/elasticsearch/bwcompat/NodesStatsBasicBackwardsCompatIT.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayServiceTests.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/IndexServiceTests.java
core/src/test/java/org/elasticsearch/index/SettingsListenerIT.java
core/src/test/java/org/elasticsearch/indices/IndexingMemoryControllerTests.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/ExampleCatAction.java
comments:
Remove some unused code

time:
2016-07-01T14:57:14Z
class:
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/NodeExplanation.java
core/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/bulk/BulkResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStats.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/support/AbstractListenableActionFuture.java
core/src/main/java/org/elasticsearch/action/support/ActionFilter.java
core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/TransportInstanceSingleOperationAction.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/JNAKernel32Library.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateUpdateTask.java
core/src/main/java/org/elasticsearch/cluster/DiffableUtils.java
core/src/main/java/org/elasticsearch/cluster/EmptyClusterInfoService.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexGraveyard.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNode.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/AbstractAllocateAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/command/BasePrimaryAllocationCommand.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/collect/CopyOnWriteHashMap.java
core/src/main/java/org/elasticsearch/common/collect/HppcMaps.java
core/src/main/java/org/elasticsearch/common/geo/GeoDistance.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/inject/internal/Errors.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/logging/Loggers.java
core/src/main/java/org/elasticsearch/common/lucene/Lucene.java
core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java
core/src/main/java/org/elasticsearch/common/lucene/index/FilterableTermsEnum.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
core/src/main/java/org/elasticsearch/common/rounding/Rounding.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/util/BigArrays.java
core/src/main/java/org/elasticsearch/common/util/ExtensionPoint.java
core/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
core/src/main/java/org/elasticsearch/discovery/DiscoverySettings.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/index/Index.java
core/src/main/java/org/elasticsearch/index/IndexService.java
core/src/main/java/org/elasticsearch/index/codec/CodecService.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java
core/src/main/java/org/elasticsearch/index/fielddata/ScriptDocValues.java
core/src/main/java/org/elasticsearch/index/mapper/Mapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/BooleanFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/core/LegacyNumberFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/AbstractQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java
core/src/main/java/org/elasticsearch/index/search/stats/ShardSearchStats.java
core/src/main/java/org/elasticsearch/index/similarity/SimilarityService.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/index/translog/BaseTranslogReader.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltAnalyzers.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltCharFilters.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java
core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenizers.java
core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveriesCollection.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryState.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/ingest/IngestDocument.java
core/src/main/java/org/elasticsearch/ingest/IngestMetadata.java
core/src/main/java/org/elasticsearch/ingest/Pipeline.java
core/src/main/java/org/elasticsearch/ingest/PipelineConfiguration.java
core/src/main/java/org/elasticsearch/monitor/fs/FsService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmGcMonitorService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmService.java
core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java
core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java
core/src/main/java/org/elasticsearch/monitor/os/OsService.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java
core/src/main/java/org/elasticsearch/monitor/process/ProcessService.java
core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java
core/src/main/java/org/elasticsearch/repositories/fs/FsRepository.java
core/src/main/java/org/elasticsearch/repositories/uri/URLRepository.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/script/Script.java
core/src/main/java/org/elasticsearch/script/ScriptMetaData.java
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/main/java/org/elasticsearch/search/aggregations/BucketCollector.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalMultiBucketAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/InternalFilter.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/global/InternalGlobal.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/Histogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalDateHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/InternalMissing.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalReverseNested.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/ReverseNestedAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/BinaryRangeAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalBinaryRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/date/InternalDateRange.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/geodistance/InternalGeoDistance.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/InternalSampler.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalSignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantStringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/NXYSignificanceHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTerms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/support/IncludeExclude.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/NumericMetricsAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/InternalCardinality.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geobounds/InternalGeoBounds.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/geocentroid/InternalGeoCentroid.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesParser.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/hdr/InternalHDRPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentileRanks.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/tdigest/InternalTDigestPercentiles.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/InternalBucketMetricValue.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/avg/AvgBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/max/MaxBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/min/MinBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/InternalPercentilesBucket.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/percentile/PercentilesBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/sum/SumBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/cumulativesum/CumulativeSumPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/DerivativePipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/derivative/InternalDerivative.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/movavg/MovAvgPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/serialdiff/SerialDiffPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/AggregationPath.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/FetchSubPhaseParseElement.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsContext.java
core/src/main/java/org/elasticsearch/search/highlight/HighlightBuilder.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
core/src/main/java/org/elasticsearch/search/rescore/QueryRescorer.java
core/src/main/java/org/elasticsearch/search/slice/SliceBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggester.java
core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionSuggestion.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/Completion090PostingsFormat.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/context/ContextMapping.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/main/java/org/elasticsearch/tasks/LoggingTaskListener.java
core/src/main/java/org/elasticsearch/tasks/TaskId.java
core/src/main/java/org/elasticsearch/threadpool/ExecutorBuilder.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/TransportService.java
core/src/main/java/org/elasticsearch/transport/TransportSettings.java
core/src/main/java/org/elasticsearch/transport/Transports.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TransportTasksActionTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/shards/IndicesShardStoreRequestIT.java
core/src/test/java/org/elasticsearch/action/bulk/TransportBulkActionTookTests.java
core/src/test/java/org/elasticsearch/action/support/replication/ClusterStateCreationUtils.java
core/src/test/java/org/elasticsearch/action/termvectors/AbstractTermVectorsTestCase.java
core/src/test/java/org/elasticsearch/bwcompat/BasicAnalysisBackwardCompatibilityIT.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/routing/RoutingTableTests.java
core/src/test/java/org/elasticsearch/common/geo/GeoJSONShapeParserTests.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/common/io/stream/StreamTests.java
core/src/test/java/org/elasticsearch/common/xcontent/ObjectParserTests.java
core/src/test/java/org/elasticsearch/discovery/BlockingClusterStatePublishResponseHandlerTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/gateway/RecoverAfterNodesIT.java
core/src/test/java/org/elasticsearch/index/mapper/FieldTypeTestCase.java
core/src/test/java/org/elasticsearch/index/replication/ESIndexLevelReplicationTestCase.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryTargetTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreTests.java
core/src/test/java/org/elasticsearch/recovery/RecoveriesCollectionTests.java
core/src/test/java/org/elasticsearch/script/StoredScriptsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/ChildrenIT.java
core/src/test/java/org/elasticsearch/search/fetch/FetchSubPhasePluginIT.java
core/src/test/java/org/elasticsearch/search/functionscore/QueryRescorerIT.java
core/src/test/java/org/elasticsearch/test/MockLogAppender.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/InternalMatrixStats.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/matrix/stats/MatrixStatsResults.java
modules/aggs-matrix-stats/src/main/java/org/elasticsearch/search/aggregations/support/MultiValuesSourceAggregationBuilder.java
modules/aggs-matrix-stats/src/test/java/org/elasticsearch/search/aggregations/matrix/stats/BaseMatrixStatsTestCase.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/LowercaseProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/CustomMustacheFactory.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/CustomReflectionObjectHandler.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/WriterConstants.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQuery.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateResponse.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
modules/percolator/src/test/java/org/elasticsearch/percolator/ExtractQueryTermsServiceTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/MultiPercolatorIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolateQueryTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorAggregationsIT.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorBackwardsCompatibilityTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorIT.java
plugins/analysis-phonetic/src/main/java/org/elasticsearch/index/analysis/phonetic/HaasePhonetik.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/RetryHttpInitializerWrapperTests.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/repository-azure/src/main/java/org/elasticsearch/repositories/azure/AzureRepository.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceTests.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettingsFilterTests.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java
plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AbstractS3SnapshotRestoreTest.java
plugins/store-smb/src/test/java/org/elasticsearch/index/store/AbstractAzureFsTestCase.java
test/framework/src/main/java/org/elasticsearch/common/util/MockBigArrays.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/discovery/ClusterDiscoveryConfiguration.java
test/framework/src/main/java/org/elasticsearch/test/disruption/IntermittentLongGCDisruption.java
test/framework/src/main/java/org/elasticsearch/test/disruption/LongGCDisruption.java
test/framework/src/main/java/org/elasticsearch/test/engine/MockEngineSupport.java
test/framework/src/main/java/org/elasticsearch/test/transport/CapturingTransport.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Fix order of modifiers

time:
2016-07-01T14:57:14Z
class:
comments:
Enable checkstyle ModifierOrder module

time:
2016-07-01T14:53:17Z
class:
plugins/ingest-useragent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorFactoryTests.java
comments:
Fix Factory test

time:
2016-07-01T14:13:51Z
class:
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentProcessor.java
comments:
Fix Processor: Now implements Processor.Factory

time:
2016-07-01T14:09:31Z
class:
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsFields.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java
core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/text/Text.java
core/src/main/java/org/elasticsearch/common/text/UTF8SortedAsUnicodeComparator.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java
core/src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java
core/src/main/java/org/elasticsearch/common/xcontent/cbor/CborXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/json/JsonXContentGenerator.java
core/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContent.java
core/src/main/java/org/elasticsearch/common/xcontent/yaml/YamlXContent.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/index/get/GetResult.java
core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java
core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/WrapperQueryBuilder.java
core/src/main/java/org/elasticsearch/index/shard/CommitPoints.java
core/src/main/java/org/elasticsearch/index/shard/IndexShard.java
core/src/main/java/org/elasticsearch/index/store/Store.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java
core/src/main/java/org/elasticsearch/ingest/InternalTemplateService.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/restore/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/Template.java
core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchLocalRequest.java
core/src/main/java/org/elasticsearch/search/suggest/completion2x/CompletionSuggestion.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransport.java
core/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
core/src/test/java/org/elasticsearch/ESExceptionTests.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/OriginalIndicesTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanationTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponsesTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/cluster/storedscripts/GetStoredScriptRequestTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/flush/SyncedFlushUnitTests.java
core/src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java
core/src/test/java/org/elasticsearch/action/get/MultiGetShardRequestTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateDocumentSimpleResultTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineResponseTests.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateProcessorResultTests.java
core/src/test/java/org/elasticsearch/action/ingest/WritePipelineResponseTests.java
core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java
core/src/test/java/org/elasticsearch/action/main/MainActionTests.java
core/src/test/java/org/elasticsearch/action/support/IndicesOptionsTests.java
core/src/test/java/org/elasticsearch/action/termvectors/GetTermVectorsCheckDocFreqIT.java
core/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java
core/src/test/java/org/elasticsearch/cluster/block/ClusterBlockTests.java
core/src/test/java/org/elasticsearch/cluster/health/ClusterStateHealthTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/IndexGraveyardTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/IndexMetaDataTests.java
core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java
core/src/test/java/org/elasticsearch/cluster/routing/ShardRoutingTests.java
core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java
core/src/test/java/org/elasticsearch/cluster/routing/allocation/AllocationCommandsTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/ClusterSerializationTests.java
core/src/test/java/org/elasticsearch/cluster/serialization/DiffableTests.java
core/src/test/java/org/elasticsearch/common/ChannelsTests.java
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
core/src/test/java/org/elasticsearch/common/bytes/BytesArrayTests.java
core/src/test/java/org/elasticsearch/common/bytes/BytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/bytes/PagedBytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/compress/DeflateCompressedXContentTests.java
core/src/test/java/org/elasticsearch/common/geo/GeoDistanceTests.java
core/src/test/java/org/elasticsearch/common/geo/ShapeRelationTests.java
core/src/test/java/org/elasticsearch/common/geo/SpatialStrategyTests.java
core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java
core/src/test/java/org/elasticsearch/common/io/StreamsTests.java
core/src/test/java/org/elasticsearch/common/io/stream/AbstractWriteableEnumTestCase.java
core/src/test/java/org/elasticsearch/common/io/stream/BytesStreamsTests.java
core/src/test/java/org/elasticsearch/common/io/stream/StreamTests.java
core/src/test/java/org/elasticsearch/common/transport/BoundTransportAddressTests.java
core/src/test/java/org/elasticsearch/common/unit/DistanceUnitTests.java
core/src/test/java/org/elasticsearch/common/unit/FuzzinessTests.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/ThreadContextTests.java
core/src/test/java/org/elasticsearch/common/xcontent/XContentFactoryTests.java
core/src/test/java/org/elasticsearch/common/xcontent/builder/XContentBuilderTests.java
core/src/test/java/org/elasticsearch/common/xcontent/cbor/JsonVsCborTests.java
core/src/test/java/org/elasticsearch/common/xcontent/smile/JsonVsSmileTests.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/AbstractFilteringJsonGeneratorTestCase.java
core/src/test/java/org/elasticsearch/common/xcontent/support/filtering/FilterPathGeneratorFilteringTests.java
core/src/test/java/org/elasticsearch/deps/jackson/JacksonLocationTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/index/IndexRequestBuilderIT.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/engine/ShadowEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/binary/BinaryMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/query/CombineFunctionTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/MoreLikeThisQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/OperatorTests.java
core/src/test/java/org/elasticsearch/index/query/ScoreModeTests.java
core/src/test/java/org/elasticsearch/index/query/WrapperQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/functionscore/FieldValueFactorFunctionModifierTests.java
core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java
core/src/test/java/org/elasticsearch/index/snapshots/blobstore/FileInfoTests.java
core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/IndicesRequestCacheTests.java
core/src/test/java/org/elasticsearch/indices/TermsLookupTests.java
core/src/test/java/org/elasticsearch/indices/recovery/RecoveryTargetTests.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsIT.java
core/src/test/java/org/elasticsearch/ingest/IngestStatsTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/rest/BytesRestResponseTests.java
core/src/test/java/org/elasticsearch/rest/action/main/RestMainActionTests.java
core/src/test/java/org/elasticsearch/rest/action/support/RestTableTests.java
core/src/test/java/org/elasticsearch/search/DocValueFormatTests.java
core/src/test/java/org/elasticsearch/search/MultiValueModeTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/SubAggCollectionModeTests.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesMethodTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/internal/InternalSearchHitTests.java
core/src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesIT.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/searchafter/SearchAfterBuilderTests.java
core/src/test/java/org/elasticsearch/search/slice/SliceBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortOrderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/completion/WritableTestCase.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGeneratorTests.java
core/src/test/java/org/elasticsearch/search/suggest/phrase/SmoothingModelTestCase.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
core/src/test/java/org/elasticsearch/snapshots/SnapshotRequestsTests.java
core/src/test/java/org/elasticsearch/snapshots/SnapshotTests.java
core/src/test/java/org/elasticsearch/tasks/PersistedTaskInfoTests.java
core/src/test/java/org/elasticsearch/tasks/TaskIdTests.java
core/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java
core/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
core/src/test/java/org/elasticsearch/update/UpdateNoopIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SearchFieldsTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestSearchTemplateAction.java
modules/lang-mustache/src/test/java/org/elasticsearch/action/search/template/MultiSearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQuery.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/SimpleAttachmentMapperTests.java
test/framework/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java
test/framework/src/main/java/org/elasticsearch/test/StreamsUtils.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
test/framework/src/main/java/org/elasticsearch/test/store/MockFSDirectoryService.java
test/framework/src/main/java/org/elasticsearch/test/transport/MockTransportService.java
comments:
Clean up BytesReference (#19196)

BytesReference should be a really simple interface, yet it has a gazillion
ways to achieve the same this. Methods like `#hasArray`, `#toBytesArray`, `#copyBytesArray`
`#toBytesRef` `#bytes` are all really duplicates. This change simplifies the interface
dramatically and makes implementations of it much simpler. All array access has been removed
and is streamlined through a single `#toBytesRef` method. Utility methods to materialize a
compact byte array has been added too for convenience.

time:
2016-07-01T13:49:43Z
class:
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/IngestUserAgentPlugin.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentCache.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentParser.java
plugins/ingest-useragent/src/main/java/org/elasticsearch/ingest/useragent/UserAgentProcessor.java
plugins/ingest-useragent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorFactoryTests.java
plugins/ingest-useragent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentProcessorTests.java
plugins/ingest-useragent/src/test/java/org/elasticsearch/ingest/useragent/UserAgentRestIT.java
comments:
Add ingest-useragent plugin (#19074)

time:
2016-07-01T13:23:26Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/InternalMax.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/max/MaxAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/InternalMin.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/min/MinAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/InternalSum.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/sum/SumAggregationBuilder.java
comments:
Migrate sum, min, and max aggs to NamedWriteable

time:
2016-07-01T13:13:15Z
class:
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/InternalStats.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/StatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/ExtendedStatsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/SiblingPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/InternalStatsBucket.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/StatsBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/StatsBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/extended/ExtendedStatsBucketPipelineAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/extended/ExtendedStatsBucketPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/extended/InternalExtendedStatsBucket.java
core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java
core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/ExtendedStatsBucketTests.java
comments:
Migration stats and extended stats to NamedWriteable

Migrates the `stats` and `extended_stats` aggregations and pipeline
aggregations from the special purpose aggregations streams to
`NamedWriteable`. These are the first pipeline aggregations so this
adds the infrastructure to support both streams and `NamedWriteable`s
for pipeline aggregations.

time:
2016-07-01T12:59:03Z
class:
comments:
non-binary gender option in term aggr. example (#19188)

* non-binary gender option in term aggr. example

* replace gender with music genre for term aggregation docs

time:
2016-07-01T12:28:53Z
class:
comments:
Merge pull request #19206 from javanna/fix/client_group_id

Build: set group for client and sniffer, disable publishing for client-test

time:
2016-07-01T10:09:34Z
class:
comments:
Build: set group for client and sniffer, disable publishing for client-test

Closes #19205

time:
2016-07-01T10:08:52Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/Stash.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/GreaterThanEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/GreaterThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/LessThanOrEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/LessThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/Assertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/GreaterThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/GreaterThanEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/LengthAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/LessThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/LessThanOrEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/MatchAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/ResponseBodyAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/FileUtils.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/FileUtilsTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/JsonPathTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/RestTestParserTests.java
comments:
Merge pull request #19091 from javanna/test/nuke_response_body_assertion

Consolidate docs snippets testing in our REST test infra

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/GreaterThanEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/GreaterThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/LessThanOrEqualToParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/LessThanParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/GreaterThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/GreaterThanEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/LengthAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/LessThanAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/LessThanOrEqualToAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/MatchAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/support/FileUtils.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/FileUtilsTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/RestTestParserTests.java
comments:
fix line length problems in all classes under o.e.test.rest package

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/Stash.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
comments:
[TEST] remove special treatment for stashed $body in REST tests, instead always evaluate the stash through ObjectPath

When we introduced docs testing we added a special case for $body in Stash, so that the last stashed body could be evaluated, and expressions like "$body.took" could be extracted out of it. We can instead do that for any object in the stash, by simply wrapping the internal map in an ObjectPath instance. We can then drop the special stashResponse method and go back to using the ordinary stashValue too.

The downside of this change is that it adds a feature that may not be supported by other REST test runners, namely the evaluation of compouned paths from the stash. If we have "object" stashed as an object, it is now possible to extract directly each subobject of it as well e.g. "object.subobject.field1". None of the current REST tests rely on this, but our docs snippets tests do.

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/support/Features.java
comments:
[TEST] remove feature yaml from REST tests

The only runner that supported it was the java runner, we can use json format instead given that the default one with cat apis is text

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
comments:
[TEST] parse yaml responses too through ObjectPath rather than only json responses

No need to match against yaml responses via regexes in REST tests, yaml responses can be properly parsed via ObjectPath instead. Few REST tests need to be updated accordingly.

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
comments:
[TEST] eagerly parse response body at ObjectPath initialization and read content type from response headers

We are going to parse the body anyways whenever it's in json format as it is going to be stashed. It is not useful to lazily parse it anymore. Also this allows us to not rely on automatic detection of the xcontent type based on the content of the response, but rather read the content type from the response headers.

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
comments:
[TEST] ObjectPath to support parsing yaml or json that have an array as root object

ObjectPath used a Map up until now for the internal representation of its navigable object. That works in most of the cases, but there could also be an array as root object, in which case a List needs to be used instead of a Map. This commit changes the internal representation of the object to Object which can either be a List or a Map. The change is minimal as ObjectPath already had the checks in place to verify the type of the object in the current position and navigate through it.

  Note: The new test added to ObjectPathTest uses yaml format explicitly as auto-detection of json format works only for a json object that starts with '{', not if the root object is actually an array and starts with '['.

time:
2016-07-01T09:13:10Z
class:
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
comments:
[TEST] extend ObjectPathTests to support also yaml format

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ObjectPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/client/RestTestResponse.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/ObjectPathTests.java
comments:
[TEST] make JsonPath independent of data format, rename to ObjectPath

The internal representation of the object that JsonPath gives access to is a map. That is independent of the initial input format, which is json but could also be yaml etc.
This commit renames JsonPath to ObjectPath and adds a static method to create an ObjectPath from an XContent

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestExecutionContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/Stash.java
test/framework/src/main/java/org/elasticsearch/test/rest/json/JsonPath.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/Assertion.java
comments:
[TEST] rename REST tests Stash methods to distinguish between retrieving a value and replacing values within a map

Stash#unstashMap -> replaceStashedValues
Stash#unstashValue -> getValue

time:
2016-07-01T09:13:10Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/MatchAssertion.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/ResponseBodyAssertion.java
comments:
[TEST] replace ResponseBodyAssertion with existing MatchAssertion

We introduced a special response_body assertion to test our docs snippets. The match assertion does the same job though and can be reused and adapted where needed. ResponseBodyAssertion contains provides much better and accurate errors though, which can be now utilized in MatchAssertion so that many more REST tests can benefit from readable error messages.

 Each response body gets always stashed and can be retrieved for later evaluations already. Instead of providing the response body as strings that get parsed to json objects separately, then converted to maps as ResponseBodyAssertion did, we parse everything once, the json is part of the yaml test, which is supported. The only downside is that json comments cannot be used, rather yaml comments should be used (// C style vs # ). There were only two docs tests that were using comments in ingest-node.asciidoc where I went ahead and remove the comments which didn't seem that useful anyways.

time:
2016-07-01T09:00:32Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/MockAmazonS3.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStoreContainerTests.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
Revert "Raised IOException on deleteBlob (#18815)"

This reverts commit d24cc65cad2f3152237df8b6c457a2d0a603f13a as it seems to be causing test failures.

time:
2016-07-01T08:32:32Z
class:
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
comments:
Add missing permission to repository-s3

Repository-S3 needs a special permission because of problems in AmazonS3Client: when no region is set on a AmazonS3Client instance, the AWS SDK loads all known partitions from a JSON file and uses a Jackson's ObjectMapper for that: this one, in version 2.5.3 with the default binding options, tries to suppress access checks of ctor/field/method and thus requires this special permission. AWS must be fixed to uses Jackson correctly and have the correct modifiers on binded classes.

This must be fixed in aws sdk (see https://github.com/aws/aws-sdk-java/issues/766) but in the meanwhile we have no choice.

closes #18539

time:
2016-07-01T03:00:10Z
class:
core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java
plugins/repository-azure/src/test/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceMock.java
plugins/repository-azure/src/test/java/org/elasticsearch/repositories/azure/AzureBlobStoreContainerTests.java
plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java
plugins/repository-hdfs/src/test/java/org/elasticsearch/repositories/hdfs/HdfsBlobStoreContainerTests.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/blobstore/S3BlobContainer.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/MockAmazonS3.java
plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/blobstore/S3BlobStoreContainerTests.java
test/framework/src/main/java/org/elasticsearch/repositories/ESBlobStoreContainerTestCase.java
comments:
Raised IOException on deleteBlob (#18815)

Raise IOException on deleteBlob if the blob doesn't exist

This commit raises an IOException on BlobContainer#deleteBlob
if the blob does not exist, in conformance with the BlobContainer
interface contract.  Each implementation of BlobContainer now
conforms to this contract (file system, S3, Azure, HDFS).  This 
commit also contains blob container tests for each of the 
repository implementations.

Closes #18530

time:
2016-06-30T18:47:38Z
class:
comments:
Fix discovery-azure-classic plugin packaging test

This commit fixes the discovery-azure-classing packaging test by fixing
the expected name of the installed plugin.

time:
2016-06-30T18:00:09Z
class:
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestFilter.java
core/src/main/java/org/elasticsearch/rest/RestFilterChain.java
core/src/main/java/org/elasticsearch/rest/RestHandler.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/allocation/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/hotthreads/RestNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestGetTaskAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/delete/RestDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/get/RestGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/verify/RestVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/reroute/RestClusterRerouteAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/shards/RestClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/delete/RestDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/get/RestGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/restore/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/status/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/state/RestClusterStateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/stats/RestClusterStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestDeleteStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestGetStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/exists/indices/RestIndicesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestSyncedFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/forcemerge/RestForceMergeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/get/RestGetIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/recovery/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/segments/RestIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/shards/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/head/RestHeadIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/upgrade/RestUpgradeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/fieldstats/RestFieldStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestDeletePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestSimulatePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/plugins/responseheader/TestResponseHeaderRestAction.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
core/src/test/java/org/elasticsearch/rest/RestFilterChainTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestRecoveryActionTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/ExampleCatAction.java
comments:
Merge pull request #19170 from rjernst/rest_handler_client

Changed rest handler interface to take NodeClient

time:
2016-06-30T16:57:34Z
class:
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/search/SearchModule.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/AvgAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/avg/InternalAvg.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/search/SearchModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificanceHeuristicTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java
core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/search/sort/SortBuilderTests.java
core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java
comments:
Start migration away from aggregation streams

We'll migrate to NamedWriteable so we can share code with the rest
of the system. So we can work on this in multiple pull requests without
breaking Elasticsearch in between the commits this change supports
*both* old style `InternalAggregations.stream` serialization and
`NamedWriteable` style serialization. As such it creates about a
half dozen `// NORELEASE` comments that will have to be removed
once the migration is complete.

This also introduces a boolean `transportClient` flag to `SearchModule`
which is used to skip inappropriate registrations for for the
transport client while still registering the things it needs. In
this case that means that the `InternalAggregation` subclasses are
registered with the `NamedWriteableRegistry` but the `AggregationBuilder`
subclasses are not.

Finally, this moves aggregation registration from guice configuration
time to `SearchModule` construction time. This will make it simpler to
work with in the future as we further clean up Elasticsearch's
extension points.

time:
2016-06-30T16:32:15Z
class:
comments:
Add link to alpha4 release notes

time:
2016-06-30T16:11:57Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/io/Channels.java
core/src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
core/src/main/java/org/elasticsearch/common/netty/ReleaseChannelFutureListener.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/transport/TcpHeader.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/Transports.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInputFactory.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyHeader.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLoggerFactory.java
core/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/common/ChannelsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/KeyedLockTests.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/PublishPortTests.java
core/src/test/java/org/elasticsearch/transport/TCPTransportTests.java
core/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureDiscoveryModule.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceDisableException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceRemoteException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeService.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/discovery/azure/classic/AzureUnicastHostsProvider.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AbstractAzureComputeServiceTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceSimpleMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceTwoNodesMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryClusterFormationTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryRestIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureMinimumMasterNodesTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureTwoStartedNodesTests.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge branch 'master' into pr/15724-gce-network-host-master

time:
2016-06-30T15:58:12Z
class:
core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java
core/src/test/java/org/elasticsearch/common/BooleansTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexScriptTests.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
test/framework/src/main/java/org/elasticsearch/test/disruption/BridgePartition.java
comments:
Add a BridgePartition to be used by testAckedIndexing (#19172)

We have long worked to capture different partitioning scenarios in our testing infra. This PR adds a new variant, inspired by the Jepsen blogs, which was forgotten far - namely a partition where one node can still see and be seen by all other nodes. It also updates the resiliency page to better reflect all the work that was done in this area.

time:
2016-06-30T15:51:11Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestCandidate.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/TeardownSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/RestTestSuite.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/TeardownSection.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/RestTestParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/TeardownSectionParserTests.java
comments:
Merge pull request #19190 from jaymode/rest_teardown

Add support for `teardown` section in REST tests

time:
2016-06-30T15:47:55Z
class:
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
comments:
Add comment explaining bytes reference edge case

time:
2016-06-30T15:45:54Z
class:
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
comments:
Fix test edge case for bytes reference

time:
2016-06-30T15:33:29Z
class:
test/framework/src/main/java/org/elasticsearch/test/rest/ESRestTestCase.java
test/framework/src/main/java/org/elasticsearch/test/rest/RestTestCandidate.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParseContext.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/RestTestSuiteParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/parser/TeardownSectionParser.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/RestTestSuite.java
test/framework/src/main/java/org/elasticsearch/test/rest/section/TeardownSection.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/RestTestParserTests.java
test/framework/src/test/java/org/elasticsearch/test/rest/test/TeardownSectionParserTests.java
comments:
Add support for `teardown` section in REST tests

This commits adds support for a `teardown` section that can be defined in REST tests to
clean up any items that may have been created by the test and are not cleaned up by
deletion of indices and templates.

time:
2016-06-30T15:16:25Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/io/Channels.java
core/src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
core/src/main/java/org/elasticsearch/common/netty/ReleaseChannelFutureListener.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/ingest/AbstractProcessorFactory.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/InternalTemplateService.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/main/java/org/elasticsearch/transport/TcpHeader.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/Transports.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInputFactory.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyHeader.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLoggerFactory.java
core/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/common/ChannelsTests.java
core/src/test/java/org/elasticsearch/common/lucene/LuceneTests.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/KeyedLockTests.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
core/src/test/java/org/elasticsearch/script/FileScriptTests.java
core/src/test/java/org/elasticsearch/script/NativeScriptTests.java
core/src/test/java/org/elasticsearch/script/ScriptContextTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/PublishPortTests.java
core/src/test/java/org/elasticsearch/transport/TCPTransportTests.java
core/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/LowercaseProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/TrimProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/UppercaseProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GsubProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JoinProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorFactoryTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/TransportSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureDiscoveryModule.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceDisableException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceRemoteException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeService.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/discovery/azure/classic/AzureUnicastHostsProvider.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AbstractAzureComputeServiceTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceSimpleMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceTwoNodesMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryClusterFormationTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryRestIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureMinimumMasterNodesTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureTwoStartedNodesTests.java
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/AttachmentProcessorFactoryTests.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/GeoIpProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestTestPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge branch 'master' into rest_handler_client

time:
2016-06-30T15:08:26Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/ingest/AbstractProcessorFactory.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/LowercaseProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/TrimProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/UppercaseProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GsubProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JoinProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorFactoryTests.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/AttachmentProcessorFactoryTests.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/GeoIpProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestTestPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
comments:
Merge pull request #19177 from rjernst/ingest_factory_generic

Remove generics from ingest Processor.Factory

time:
2016-06-30T15:05:54Z
class:
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/test/java/org/elasticsearch/common/rounding/TimeZoneRoundingTests.java
comments:
Make sure TimeIntervalRounding is monotonic for increasing dates (#19020)

Currently there are cases when using TimeIntervalRounding#round() and date1 <
date2 that round(date2) < round(date1). These errors can happen when using a
non-fixed time zone and the values to be rounded are slightly after a time zone
offset change (e.g. DST transition).

Here is an example for the "CET" time zone with a 45 minute rounding interval.
The dates to be rounded are on the left (with utc time stamp), the rounded
values on the right. The error case is marked:

2011-10-30T01:40:00.000+02:00 1319931600000 |2011-10-30T01:30:00.000+02:00 1319931000000
2011-10-30T02:02:30.000+02:00 1319932950000 |2011-10-30T01:30:00.000+02:00 1319931000000
2011-10-30T02:25:00.000+02:00 1319934300000 |2011-10-30T02:15:00.000+02:00 1319933700000
2011-10-30T02:47:30.000+02:00 1319935650000 |2011-10-30T02:15:00.000+02:00 1319933700000
2011-10-30T02:10:00.000+01:00 1319937000000 |2011-10-30T01:30:00.000+02:00 1319931000000 *
2011-10-30T02:32:30.000+01:00 1319938350000 |2011-10-30T02:15:00.000+01:00 1319937300000
2011-10-30T02:55:00.000+01:00 1319939700000 |2011-10-30T02:15:00.000+01:00 1319937300000
2011-10-30T03:17:30.000+01:00 1319941050000 |2011-10-30T03:00:00.000+01:00 1319940000000

We should correct this by detecting that we are crossing a transition when
rounding, and in that case pick the largest valid rounded value before the
transition.

This change adds this correction logic to the rounding function and adds this
invariant to the randomized TimeIntervalRounding tests. Also adding the example
test case from above (with corrected behaviour) for illustrative purposes.

time:
2016-06-30T14:42:01Z
class:
comments:
Fixing typo for path.conf location (#19098)

Changing -Ees.path.conf to -Epath.conf

time:
2016-06-30T13:51:46Z
class:
comments:
Merge pull request #19180 from tlrx/doc-version-number-zero-with-dbq-and-ubq

[Doc] Document Update/Delete-By-Query with version number zero

time:
2016-06-30T13:45:14Z
class:
comments:
Document Update/Delete-By-Query with version number zero

Update-By-Query and Delete-By-Query use internal versioning to update/delete documents. But documents can have a version number equal to zero using the external versioning... making the UBQ/DBQ request fail because zero is not a valid version number and they only support internal versioning for now. Sequence numbers might help to solve this issue in the future.

time:
2016-06-30T13:44:28Z
class:
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureDiscoveryModule.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceDisableException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceRemoteException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeService.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/discovery/azure/classic/AzureUnicastHostsProvider.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AbstractAzureComputeServiceTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceSimpleMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceTwoNodesMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryClusterFormationTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryRestIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureMinimumMasterNodesTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureTwoStartedNodesTests.java
comments:
Merge branch 'pr/19144-discovery-azure-classic'

time:
2016-06-30T13:36:31Z
class:
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
comments:
Remote TransportRethrottleAction from RestRethrottleAction

Just use the client to call it.

time:
2016-06-30T13:36:31Z
class:
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
comments:
Don't inject TransportPercolateAction into RestPercolateAction

Instead use the client. This will help us build the actions more
easily in the future.

time:
2016-06-30T13:32:52Z
class:
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
comments:
Fix method name typo

time:
2016-06-30T13:30:49Z
class:
comments:
Fix classname

Package was removed by mistake

time:
2016-06-30T13:29:29Z
class:
comments:
Add deprecation notice

time:
2016-06-30T13:26:54Z
class:
comments:
Fix documentation filenames

time:
2016-06-30T13:21:30Z
class:
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureMinimumMasterNodesTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureTwoStartedNodesTests.java
comments:
Fix checkstyle issues

time:
2016-06-30T13:20:59Z
class:
comments:
Bumped version to 5.0.0-alpha4

time:
2016-06-30T13:16:51Z
class:
comments:
Update plugin description

time:
2016-06-30T12:46:21Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/io/Channels.java
core/src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
core/src/main/java/org/elasticsearch/common/netty/ReleaseChannelFutureListener.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/transport/TcpHeader.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/Transports.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInputFactory.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyHeader.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLoggerFactory.java
core/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/common/ChannelsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/KeyedLockTests.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/PublishPortTests.java
core/src/test/java/org/elasticsearch/transport/TCPTransportTests.java
core/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Merge branch 'master' into pr/19144-discovery-azure-classic

# Conflicts:
#	plugins/discovery-azure-classic/LICENSE.txt

time:
2016-06-30T12:43:28Z
class:
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
comments:
percolator: removed unused code

time:
2016-06-30T12:42:40Z
class:
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureDiscoveryModule.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceDisableException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/AzureServiceRemoteException.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeService.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/discovery/azure/classic/AzureUnicastHostsProvider.java
plugins/discovery-azure-classic/src/main/java/org/elasticsearch/plugin/discovery/azure/classic/AzureDiscoveryPlugin.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AbstractAzureComputeServiceTestCase.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceSimpleMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/AzureComputeServiceTwoNodesMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceAbstractMock.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryClusterFormationTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureDiscoveryRestIT.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureMinimumMasterNodesTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureSimpleTests.java
plugins/discovery-azure-classic/src/test/java/org/elasticsearch/discovery/azure/classic/AzureTwoStartedNodesTests.java
comments:
Deprecate discovery-azure and rename it to discovery-azure-classic

As discussed at https://github.com/elastic/elasticsearch-cloud-azure/issues/91#issuecomment-229113595, we know that the current `discovery-azure` plugin only works with Azure Classic VMs / Services (which is somehow Legacy now).

The proposal here is to rename `discovery-azure` to `discovery-azure-classic` in case some users are using it.
And deprecate it for 5.0.

Closes #19144.

time:
2016-06-30T12:07:01Z
class:
comments:
LICENSE.txt is not needed in plugin root dir

We have licenses in licenses dir and the global license for the whole project is in the root dir so this file is not needed here.

time:
2016-06-30T12:06:31Z
class:
comments:
LICENSE.txt is not needed in plugin root dir

We have licenses in licenses dir and the global license for the whole project is in the root dir so this file is not needed here.

time:
2016-06-30T12:05:29Z
class:
comments:
LICENSE.txt is not needed in plugin root dir

We have licenses in licenses dir and the global license for the whole project is in the root dir so this file is not needed here.

time:
2016-06-30T11:57:43Z
class:
comments:
Update documentation for cat/plugins API

Cat API for plugins doesn't display anymore url or jvm/site flag

time:
2016-06-30T11:41:53Z
class:
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/common/io/Channels.java
core/src/main/java/org/elasticsearch/common/netty/KeepFrameDecoder.java
core/src/main/java/org/elasticsearch/common/netty/ReleaseChannelFutureListener.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
core/src/main/java/org/elasticsearch/http/netty/ESHttpResponseEncoder.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java
core/src/main/java/org/elasticsearch/transport/TcpHeader.java
core/src/main/java/org/elasticsearch/transport/TcpTransport.java
core/src/main/java/org/elasticsearch/transport/TcpTransportChannel.java
core/src/main/java/org/elasticsearch/transport/Transport.java
core/src/main/java/org/elasticsearch/transport/Transports.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInputFactory.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyHeader.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLogger.java
core/src/main/java/org/elasticsearch/transport/netty/NettyInternalESLoggerFactory.java
core/src/main/java/org/elasticsearch/transport/netty/NettyMessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/main/java/org/elasticsearch/transport/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/transport/netty/OpenChannelsHandler.java
core/src/main/java/org/elasticsearch/transport/netty/SizeHeaderFrameDecoder.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/common/ChannelsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/KeyedLockTests.java
core/src/test/java/org/elasticsearch/transport/AbstractSimpleTransportTestCase.java
core/src/test/java/org/elasticsearch/transport/PublishPortTests.java
core/src/test/java/org/elasticsearch/transport/TCPTransportTests.java
core/src/test/java/org/elasticsearch/transport/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyScheduledPingTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportIT.java
core/src/test/java/org/elasticsearch/transport/netty/NettyTransportMultiPortTests.java
core/src/test/java/org/elasticsearch/transport/netty/NettyUtilsTests.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Factor out abstract TCPTransport* classes to reduce the netty footprint (#19096)

Today we have a ton of logic inside the NettyTransport* codebase. The footprint
of the code that has a direct netty dependency is large and alternative implementations
are pretty hard today since they need to know all about our proticol etc.
This change moves most of the code into TCPTransport* baseclasses and moves all
the protocol send code together. The base classes now contain the majority of the logic
while NettyTransport* classes remain to implement the glue code, configuration and optimization.

time:
2016-06-30T11:28:46Z
class:
comments:
[DOCS] put profiling performance and limitations section on same page

time:
2016-06-30T10:04:19Z
class:
plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
comments:
Fix after merge with master

time:
2016-06-30T09:53:09Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/AllocationBenchmark.java
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
buildSrc/src/main/java/org/elasticsearch/test/NamingConventionsCheck.java
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/DeadHostState.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/CloseableBasicHttpResponse.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/TrackingFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestUtil.java
core/src/main/java/org/apache/lucene/document/XInetAddressPoint.java
core/src/main/java/org/apache/lucene/queries/BlendedTermQuery.java
core/src/main/java/org/apache/lucene/queries/MinDocQuery.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/elasticsearch/Build.java
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/ResourceNotFoundException.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRequest.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/TransportLivenessAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TaskGroup.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/VerifyRepositoryResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/SettingsUpdater.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotIndexShardStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotIndexStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportNodesSnapshotsStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/Condition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequest.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardResponse.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateExecutionService.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java
core/src/main/java/org/elasticsearch/action/main/MainResponse.java
core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/DestructiveOperations.java
core/src/main/java/org/elasticsearch/action/support/WriteRequest.java
core/src/main/java/org/elasticsearch/action/support/WriteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardResponse.java
core/src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
core/src/main/java/org/elasticsearch/action/support/master/MasterNodeRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesResponse.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicatedWriteRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationTask.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/InstanceShardOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/tasks/BaseTasksRequest.java
core/src/main/java/org/elasticsearch/action/support/tasks/TasksRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/cli/Terminal.java
core/src/main/java/org/elasticsearch/client/ClusterAdminClient.java
core/src/main/java/org/elasticsearch/client/FilterClient.java
core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java
core/src/main/java/org/elasticsearch/client/Requests.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
core/src/main/java/org/elasticsearch/client/node/NodeClientModule.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterName.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/RestoreInProgress.java
core/src/main/java/org/elasticsearch/cluster/SnapshotsInProgress.java
core/src/main/java/org/elasticsearch/cluster/action/index/NodeMappingRefreshAction.java
core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java
core/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java
core/src/main/java/org/elasticsearch/cluster/health/ClusterStateHealth.java
core/src/main/java/org/elasticsearch/cluster/metadata/AliasValidator.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/metadata/SnapshotId.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/cluster/routing/OperationRouting.java
core/src/main/java/org/elasticsearch/cluster/routing/Preference.java
core/src/main/java/org/elasticsearch/cluster/routing/RestoreSource.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DiskThresholdDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/FilterAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/ThrottlingAllocationDecider.java
core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedStreamInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/compress/CompressorFactory.java
core/src/main/java/org/elasticsearch/common/compress/DeflateCompressor.java
core/src/main/java/org/elasticsearch/common/geo/GeoHashUtils.java
core/src/main/java/org/elasticsearch/common/geo/GeoPoint.java
core/src/main/java/org/elasticsearch/common/geo/GeoUtils.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/io/stream/Streamable.java
core/src/main/java/org/elasticsearch/common/io/stream/Writeable.java
core/src/main/java/org/elasticsearch/common/joda/Joda.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java
core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java
core/src/main/java/org/elasticsearch/common/lucene/search/MatchNoDocsQuery.java
core/src/main/java/org/elasticsearch/common/lucene/search/MoreLikeThisQuery.java
core/src/main/java/org/elasticsearch/common/lucene/search/MultiPhrasePrefixQuery.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java
core/src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java
core/src/main/java/org/elasticsearch/common/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/common/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java
comments:
Merge branch 'master' into pr/15724-gce-network-host-master

# Conflicts:
#	plugins/discovery-gce/src/main/java/org/elasticsearch/plugin/discovery/gce/GceDiscoveryPlugin.java
#	plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoverTests.java
#	plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java

time:
2016-06-30T09:52:53Z
class:
comments:
[doc] explain avg in function_score better (#19154)

* [doc] explain avg in function_score better

time:
2016-06-30T09:43:07Z
class:
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
comments:
Fix line width

time:
2016-06-30T09:39:25Z
class:
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
comments:
Merge branch 'pr/16967-npe-gce-empty-region-master'

time:
2016-06-30T09:33:54Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/ingest/AbstractProcessorFactory.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/LowercaseProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/TrimProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/UppercaseProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GsubProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JoinProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorFactoryTests.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/AttachmentProcessorFactoryTests.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/GeoIpProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestTestPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
comments:
Ingest: Remove generics from Processor.Factory

The factory for ingest processor is generic, but that is only for the
return type of the create mehtod. However, the actual consumer of the
factories only cares about Processor, so generics are not needed.

This change removes the generic type from the factory. It also removes
AbstractProcessorFactory which only existed in order pull the optional
tag from config. This functionality is moved to the caller of the
factories in ConfigurationUtil, and the create method now takes the tag.
This allows the covariant return of the implementation to work with
tests not needing casts.

time:
2016-06-30T09:32:39Z
class:
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
comments:
Add more javadoc and rename test

time:
2016-06-30T09:12:20Z
class:
plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java
plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java
comments:
Fix NPE when GCE region is empty

When GCE region is empty we get back from the API something like:

```
{
  "id": "dummy"
}
```

instead of:

```
{
  "id": "dummy",
  "items":[ ]
}
```

This generates a NPE when we aggregate all the lists into a single one.

Closes #16967.

time:
2016-06-30T09:10:38Z
class:
core/src/test/java/org/elasticsearch/common/lucene/LuceneTests.java
comments:
test: use the reader from the searcher (newSearcher(...) method may change the reader) instead of the reader we create in the test

Closes #19151

time:
2016-06-30T08:49:22Z
class:
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/ingest/AbstractProcessorFactory.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/Pipeline.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/NodeModule.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/test/java/org/elasticsearch/action/ingest/SimulatePipelineRequestParsingTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/ingest/ConfigurationUtilsTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineStoreTests.java
core/src/test/java/org/elasticsearch/ingest/ProcessorsRegistryTests.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/LowercaseProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/TrimProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/UppercaseProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorTests.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/IngestAttachmentPlugin.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/GeoIpProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/IngestTestPlugin.java
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
comments:
Tests pass, started removing generics from processor factory

time:
2016-06-30T07:08:41Z
class:
comments:
Tests: Fix vagrant tests to ignore progress bar in assertions

time:
2016-06-30T05:38:23Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/ingest/InternalTemplateService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/plugins/IngestPlugin.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/client/node/NodeClientHeadersTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/ingest/IngestCloseIT.java
core/src/test/java/org/elasticsearch/plugins/ProgressInputStreamTests.java
core/src/test/java/org/elasticsearch/plugins/responseheader/TestResponseHeaderPlugin.java
core/src/test/java/org/elasticsearch/script/FileScriptTests.java
core/src/test/java/org/elasticsearch/script/NativeScriptTests.java
core/src/test/java/org/elasticsearch/script/ScriptContextTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/TransportSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-06-30T05:34:40Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/ingest/InternalTemplateService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/test/java/org/elasticsearch/script/FileScriptTests.java
core/src/test/java/org/elasticsearch/script/NativeScriptTests.java
core/src/test/java/org/elasticsearch/script/ScriptContextTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/TransportSearchTemplateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
comments:
Merge pull request #19136 from rjernst/script_service_deps

Scripts: Remove ClusterState from compile api

time:
2016-06-30T01:02:18Z
class:
core/src/main/java/org/elasticsearch/http/HttpServer.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/rest/BaseRestHandler.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/main/java/org/elasticsearch/rest/RestFilter.java
core/src/main/java/org/elasticsearch/rest/RestFilterChain.java
core/src/main/java/org/elasticsearch/rest/RestHandler.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/allocation/RestClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/health/RestClusterHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/hotthreads/RestNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/stats/RestNodesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestCancelTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestGetTaskAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/tasks/RestListTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/delete/RestDeleteRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/get/RestGetRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/put/RestPutRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/repositories/verify/RestVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/reroute/RestClusterRerouteAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/settings/RestClusterUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/shards/RestClusterSearchShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/create/RestCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/delete/RestDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/get/RestGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/restore/RestRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/snapshots/status/RestSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/state/RestClusterStateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/stats/RestClusterStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestDeleteStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestGetStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/tasks/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestRolloverIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/RestShrinkIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/get/RestGetAliasesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/head/RestAliasesExistAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/cache/clear/RestClearIndicesCacheAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/exists/indices/RestIndicesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/exists/types/RestTypesExistsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/flush/RestSyncedFlushAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/forcemerge/RestForceMergeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/get/RestGetIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetFieldMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/get/RestGetMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/recovery/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/refresh/RestRefreshAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/segments/RestIndicesSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestUpdateSettingsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/shards/RestIndicesShardStoresAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/stats/RestIndicesStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/get/RestGetIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/head/RestHeadIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/upgrade/RestUpgradeAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java
core/src/main/java/org/elasticsearch/rest/action/bulk/RestBulkAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/AbstractCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCatAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestFielddataAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestHealthAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestMasterAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodeAttrsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPendingClusterTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRecoveryAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestRepositoriesAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSegmentsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestSnapshotAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestTasksAction.java
core/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java
core/src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java
core/src/main/java/org/elasticsearch/rest/action/delete/RestDeleteAction.java
core/src/main/java/org/elasticsearch/rest/action/explain/RestExplainAction.java
core/src/main/java/org/elasticsearch/rest/action/fieldstats/RestFieldStatsAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestMultiGetAction.java
core/src/main/java/org/elasticsearch/rest/action/index/RestIndexAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestDeletePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestGetPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/ingest/RestSimulatePipelineAction.java
core/src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestClearScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchScrollAction.java
core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestMultiTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/termvectors/RestTermVectorsAction.java
core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/http/HttpServerTests.java
core/src/test/java/org/elasticsearch/plugins/responseheader/TestResponseHeaderRestAction.java
core/src/test/java/org/elasticsearch/rest/RestControllerTests.java
core/src/test/java/org/elasticsearch/rest/RestFilterChainTests.java
core/src/test/java/org/elasticsearch/rest/action/cat/RestRecoveryActionTests.java
core/src/test/java/org/elasticsearch/snapshots/DedicatedClusterSnapshotRestoreIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestSearchTemplateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestMultiPercolateAction.java
modules/percolator/src/main/java/org/elasticsearch/percolator/RestPercolateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBaseReindexRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByQueryRestHandler.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestDeleteByQueryAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestRethrottleAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java
plugins/jvm-example/src/main/java/org/elasticsearch/plugin/example/ExampleCatAction.java
comments:
Internal: Changed rest handler interface to take NodeClient

Previously all rest handlers would take Client in their injected ctor.
However, it was only to hold the client around for runtime. Instead,
this can be done just once in the HttpService which handles rest
requests, and passed along through the handleRequest method. It also
should always be a NodeClient, and other types of Clients (eg a
TransportClient) would not work anyways (and some handlers can be
simplified in follow ups like reindex by taking NodeClient).

time:
2016-06-29T23:23:16Z
class:
core/src/test/java/org/elasticsearch/ingest/IngestCloseIT.java
comments:
Remove test for closing ingest processors, this is now handled at the
plugin level

time:
2016-06-29T22:56:36Z
class:
core/src/test/java/org/elasticsearch/plugins/ProgressInputStreamTests.java
comments:
Fix test bug in plugin cli progress tests

time:
2016-06-29T22:31:44Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/client/node/NodeClient.java
core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/rest/RestController.java
core/src/test/java/org/elasticsearch/action/ActionModuleTests.java
core/src/test/java/org/elasticsearch/client/node/NodeClientHeadersTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/plugins/responseheader/TestResponseHeaderPlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
comments:
Move RestHandler registration to ActionModule and ActionPlugin

`RestHandler`s are highly tied to actions so registering them in the
same place makes sense.

Removes the need to for plugins to check if they are in transport client
mode before registering a RestHandler - `getRestHandlers` isn't called
at all in transport client mode.

This caused guice to throw a massive fit about the circular dependency
between NodeClient and the allocation deciders. I broke the circular
dependency by registering the actions map with the node client after
instantiation.

time:
2016-06-29T21:16:16Z
class:
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/DestructiveOperations.java
core/src/main/java/org/elasticsearch/cli/Terminal.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedStreamInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/compress/CompressorFactory.java
core/src/main/java/org/elasticsearch/common/compress/DeflateCompressor.java
core/src/main/java/org/elasticsearch/common/io/stream/Streamable.java
core/src/main/java/org/elasticsearch/common/io/stream/Writeable.java
core/src/main/java/org/elasticsearch/common/joda/Joda.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/common/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/common/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/common/util/ByteArray.java
core/src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/AnalysisModule.java
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
core/src/main/java/org/elasticsearch/plugins/ProgressInputStream.java
core/src/main/java/org/elasticsearch/repositories/blobstore/ChecksumBlobStoreFormat.java
core/src/main/java/org/elasticsearch/search/DocValueFormat.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/main/java/org/elasticsearch/search/query/QueryPhase.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TestTaskPlugin.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoServiceIT.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsIT.java
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
core/src/test/java/org/elasticsearch/common/bytes/BytesArrayTests.java
core/src/test/java/org/elasticsearch/common/bytes/PagedBytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/compress/DeflateCompressTests.java
core/src/test/java/org/elasticsearch/common/compress/DeflateCompressedXContentTests.java
core/src/test/java/org/elasticsearch/common/compress/deflate/DeflateCompressedStreamTests.java
core/src/test/java/org/elasticsearch/common/compress/deflate/DeflateXContentTests.java
core/src/test/java/org/elasticsearch/common/lucene/LuceneTests.java
core/src/test/java/org/elasticsearch/common/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/netty/NettyUtilsTests.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/index/IndexingSlowLogTests.java
core/src/test/java/org/elasticsearch/index/SearchSlowLogTests.java
core/src/test/java/org/elasticsearch/index/mapper/binary/BinaryMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/ingest/PipelineExecutionServiceTests.java
core/src/test/java/org/elasticsearch/plugins/ProgressInputStreamTests.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreIT.java
core/src/test/java/org/elasticsearch/snapshots/BlobStoreFormatIT.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/HistogramTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/CustomMustacheFactory.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/NoneEscapingMustacheFactory.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/Augmentation.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/Locals.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/SimpleChecksAdapter.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/WriterConstants.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFunction.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSource.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/LambdaTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/RegexTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
plugins/discovery-azure/src/main/java/org/elasticsearch/cloud/azure/management/AzureComputeServiceImpl.java
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/InstallPluginCommandTests.java
test/framework/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
test/logger-usage/src/main/java/org/elasticsearch/test/loggerusage/ESLoggerUsageChecker.java
test/logger-usage/src/test/java/org/elasticsearch/test/loggerusage/ESLoggerUsageTests.java
comments:
Merge branch 'master' into ingest_plugin_api

time:
2016-06-29T21:02:15Z
class:
comments:
Clarify time units usage in docs

This commit clarifies the distinction between supported time units for
durations and supported time units for durations in the docs.

Relates #19159

time:
2016-06-29T20:54:20Z
class:
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
comments:
Merge pull request #19137 from rjernst/closeable_plugins

Make plugins closeable

time:
2016-06-29T18:25:56Z
class:
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
comments:
Merge pull request #19160 from rjernst/deprecate_exception_hurter

Internal: Deprecate ExceptionsHelper.detailedMessage

time:
2016-06-29T18:25:23Z
class:
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
comments:
Remove unnecessary variant of detailedMessage

time:
2016-06-29T18:18:25Z
class:
comments:
[TEST] fix vagrant tests for seed with format ABC:DEF (#19157)

* [TEST] fix vagrant tests for seed with format ABC:DEF

Otherwise one gets an error message when passing
-Dtests.seed=ABC:DEF
to any test run.

time:
2016-06-29T18:09:35Z
class:
core/src/main/java/org/elasticsearch/ExceptionsHelper.java
comments:
Internal: Deprecate ExceptionsHelper.detailedMessage

This is a trappy "helper" and only hurts.
See #19069

time:
2016-06-29T17:36:11Z
class:
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
comments:
Clearer error when handling fractional time values

In 2f638b5a23597967a98b1ced1deac91d64af5a44, support for fractional time
values was removed. While this change is documented, the error message
presented does not give an indication that fractional inputs are not
supported. This commit fixes this by detecting when the input is a time
value that would successfully parse as a double but will not parse as a
long and presenting a clear error message that fractional time values
are not supported.

Relates #19158

time:
2016-06-29T17:18:12Z
class:
core/src/main/java/org/elasticsearch/common/joda/Joda.java
core/src/main/java/org/elasticsearch/search/DocValueFormat.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
comments:
Fix key_as_string for date histogram and epoch_millis/epoch_second format

When doing a `date_histogram` aggregation with `"format":"epoch_millis"` or
`"format" : "epoch_second"` and using a time zone other than UTC, the
`key_as_string` ouput in the response does not reflect the UTC timestamp that is
used as the key. This happens because when applying the `time_zone` in
DocValueFormat.DateTime to an epoch-based formatter, this adds the time zone
offset to the value being formated. Instead we should adjust the added display
offset to get back the utc instance in EpochTimePrinter.

Closes #19038

time:
2016-06-29T15:10:02Z
class:
comments:
More changes to java update-by-query api docs

time:
2016-06-29T15:10:02Z
class:
comments:
Rework java update-by-query docs

time:
2016-06-29T15:10:02Z
class:
comments:
Partial draft for Java Update-by-Query

time:
2016-06-29T15:04:54Z
class:
comments:
Update Vagrant boxes before running packaging test

This commit adds an execution of a Vagrant box update task before
bringing a Vagrant box up for running packaging tests.

Relates #19155

time:
2016-06-29T14:57:57Z
class:
comments:
Fixed bad asciidoc in azure discovery

time:
2016-06-29T14:44:12Z
class:
core/src/main/java/org/elasticsearch/cli/Terminal.java
core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java
core/src/main/java/org/elasticsearch/plugins/PluginCli.java
core/src/main/java/org/elasticsearch/plugins/ProgressInputStream.java
core/src/test/java/org/elasticsearch/plugins/ProgressInputStreamTests.java
qa/evil-tests/src/test/java/org/elasticsearch/plugins/InstallPluginCommandTests.java
comments:
Plugins: Add status bar on download (#18695)

As some plugins are becoming big now, it is hard for the user to know, if the plugin
is being downloaded or just nothing happens.

This commit adds a progress bar during download, which can be disabled by using the `-q`
parameter.

In addition this updates to jimfs 1.1, which allows us to test the batch mode, as adding
security policies are now supported due to having jimfs:// protocol support in URL stream
handlers.

time:
2016-06-29T13:53:57Z
class:
core/src/test/java/org/elasticsearch/common/lucene/LuceneTests.java
comments:
[TEST] mute test because it fails about 1/100 runs

time:
2016-06-29T13:30:41Z
class:
comments:
Merge pull request #19150 from jimferenczi/id_field_docs

Fix docs example for the _id field, the field is not accessible in scripts

time:
2016-06-29T13:25:51Z
class:
comments:
Fix docs example for the _id field, the field is not accessible in scripts

time:
2016-06-29T12:45:54Z
class:
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/test/java/org/elasticsearch/common/bytes/AbstractBytesReferenceTestCase.java
core/src/test/java/org/elasticsearch/common/bytes/BytesArrayTests.java
core/src/test/java/org/elasticsearch/common/bytes/PagedBytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/netty/ChannelBufferBytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/netty/NettyUtilsTests.java
comments:
Extract AbstractBytesReferenceTestCase (#19141)

We have a ton of tests for PagedBytesReference but not really many for the other
implementation of BytesReference. This change factors out a basic AbstractBytesReferenceTestCase
that simplifies testing other implementations. It also caught a couple of bug here and there like
a missing mask when reading bytes as ints in PagedBytesReference.

time:
2016-06-29T11:30:54Z
class:
comments:
[TEST] add wait for yellow

time:
2016-06-29T09:32:27Z
class:
comments:
Fix request-body search test.

time:
2016-06-29T08:45:05Z
class:
core/src/main/java/org/elasticsearch/common/bytes/BytesArray.java
core/src/main/java/org/elasticsearch/common/bytes/BytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/PagedBytesReference.java
core/src/main/java/org/elasticsearch/common/bytes/ReleasablePagedBytesReference.java
core/src/main/java/org/elasticsearch/common/netty/ChannelBufferBytesReference.java
core/src/main/java/org/elasticsearch/common/netty/NettyUtils.java
core/src/main/java/org/elasticsearch/common/util/ByteArray.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpChannel.java
core/src/main/java/org/elasticsearch/http/netty/NettyHttpRequest.java
core/src/main/java/org/elasticsearch/transport/netty/ChannelBufferStreamInput.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/test/java/org/elasticsearch/common/bytes/PagedBytesReferenceTests.java
core/src/test/java/org/elasticsearch/common/netty/NettyUtilsTests.java
test/framework/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java
comments:
Factor out ChannelBuffer from BytesReference (#19129)

The ChannelBuffer interface today leaks into the BytesReference abstraction
which causes a hard dependency on Netty across the board. This chance moves
this dependency and all BytesReference -> ChannelBuffer conversion into
NettyUtlis and removes the abstraction leak on BytesReference.
This change also removes unused methods on the BytesReference interface
and simplifies access to internal pages.

time:
2016-06-29T08:24:43Z
class:
comments:
Update index.asciidoc

In-flight requests circuit breaker is done

time:
2016-06-29T08:20:25Z
class:
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/AllocationBenchmark.java
benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java
buildSrc/src/main/java/org/elasticsearch/test/NamingConventionsCheck.java
buildSrc/src/test/java/org/elasticsearch/test/NamingConventionsCheckBadClasses.java
client/rest/src/main/java/org/elasticsearch/client/DeadHostState.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/CloseableBasicHttpResponse.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/TrackingFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestUtil.java
core/src/main/java/org/apache/log4j/Java9Hack.java
core/src/main/java/org/apache/lucene/document/XInetAddressPoint.java
core/src/main/java/org/apache/lucene/queries/BlendedTermQuery.java
core/src/main/java/org/apache/lucene/queries/MinDocQuery.java
core/src/main/java/org/apache/lucene/search/suggest/analyzing/XAnalyzingSuggester.java
core/src/main/java/org/elasticsearch/Build.java
core/src/main/java/org/elasticsearch/ElasticsearchException.java
core/src/main/java/org/elasticsearch/ResourceNotFoundException.java
core/src/main/java/org/elasticsearch/Version.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/ActionRequest.java
core/src/main/java/org/elasticsearch/action/DocWriteResponse.java
core/src/main/java/org/elasticsearch/action/IndicesRequest.java
core/src/main/java/org/elasticsearch/action/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/ClusterAllocationExplanation.java
core/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportClusterAllocationExplainAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/NodesHotThreadsRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/hotthreads/TransportNodesHotThreadsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/TransportLivenessAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/CancelTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/cancel/TransportCancelTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/GetTaskResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/get/TransportGetTaskAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TaskGroup.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TaskInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TransportListTasksAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/TransportVerifyRepositoryAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/repositories/verify/VerifyRepositoryResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/reroute/TransportClusterRerouteAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/SettingsUpdater.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/CreateSnapshotResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/create/TransportCreateSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/TransportDeleteSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/GetSnapshotsResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/get/TransportGetSnapshotsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/RestoreSnapshotResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/restore/TransportRestoreSnapshotAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotIndexShardStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotIndexStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/SnapshotsStatusResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportNodesSnapshotsStatus.java
core/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/status/TransportSnapshotsStatusAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexClusterStateUpdateRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/DeleteIndexRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/delete/TransportDeleteIndexAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/Condition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxAgeCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/MaxDocsCondition.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/ShrinkResponse.java
core/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportShrinkAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/indices/validate/query/TransportValidateQueryAction.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkRequestBuilder.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java
core/src/main/java/org/elasticsearch/action/bulk/BulkShardResponse.java
core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java
core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequest.java
core/src/main/java/org/elasticsearch/action/delete/DeleteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java
core/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequestBuilder.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardRequest.java
core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsShardResponse.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsAction.java
core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java
core/src/main/java/org/elasticsearch/action/get/TransportGetAction.java
core/src/main/java/org/elasticsearch/action/get/TransportMultiGetAction.java
core/src/main/java/org/elasticsearch/action/index/IndexRequest.java
core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java
core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java
core/src/main/java/org/elasticsearch/action/ingest/IngestActionFilter.java
core/src/main/java/org/elasticsearch/action/ingest/PutPipelineTransportAction.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateDocumentBaseResult.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateExecutionService.java
core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java
core/src/main/java/org/elasticsearch/action/ingest/SimulateProcessorResult.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java
core/src/main/java/org/elasticsearch/action/main/MainResponse.java
core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequest.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/percolate/MultiPercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateResponse.java
core/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java
core/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java
core/src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/MultiSearchResponse.java
core/src/main/java/org/elasticsearch/action/search/ParsedScrollId.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchDfsQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/SearchResponse.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/DestructiveOperations.java
core/src/main/java/org/elasticsearch/action/support/TransportAction.java
core/src/main/java/org/elasticsearch/action/support/WriteRequest.java
core/src/main/java/org/elasticsearch/action/support/WriteRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/WriteResponse.java
core/src/main/java/org/elasticsearch/action/support/broadcast/BroadcastShardResponse.java
core/src/main/java/org/elasticsearch/action/support/master/AcknowledgedRequest.java
core/src/main/java/org/elasticsearch/action/support/master/MasterNodeRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesResponse.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicatedWriteRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationRequest.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationResponse.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationTask.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportBroadcastReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java
core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java
core/src/main/java/org/elasticsearch/action/support/single/instance/InstanceShardOperationRequest.java
core/src/main/java/org/elasticsearch/action/support/tasks/BaseTasksRequest.java
core/src/main/java/org/elasticsearch/action/support/tasks/TasksRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java
core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java
core/src/main/java/org/elasticsearch/action/update/UpdateRequestBuilder.java
core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapCheck.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapInfo.java
core/src/main/java/org/elasticsearch/bootstrap/BootstrapSettings.java
core/src/main/java/org/elasticsearch/bootstrap/ESPolicy.java
core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java
core/src/main/java/org/elasticsearch/bootstrap/JavaVersion.java
core/src/main/java/org/elasticsearch/bootstrap/Security.java
core/src/main/java/org/elasticsearch/cache/recycler/PageCacheRecycler.java
core/src/main/java/org/elasticsearch/cli/Command.java
core/src/main/java/org/elasticsearch/cli/SettingCommand.java
core/src/main/java/org/elasticsearch/client/Client.java
core/src/main/java/org/elasticsearch/client/ClusterAdminClient.java
core/src/main/java/org/elasticsearch/client/FilterClient.java
core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java
core/src/main/java/org/elasticsearch/client/Requests.java
core/src/main/java/org/elasticsearch/client/node/NodeClientModule.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java
core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterName.java
core/src/main/java/org/elasticsearch/cluster/ClusterNameModule.java
core/src/main/java/org/elasticsearch/cluster/ClusterState.java
core/src/main/java/org/elasticsearch/cluster/ClusterStateTaskExecutor.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/cluster/RestoreInProgress.java
core/src/main/java/org/elasticsearch/cluster/SnapshotsInProgress.java
core/src/main/java/org/elasticsearch/cluster/action/index/NodeIndexDeletedAction.java
comments:
Merge branch 'master' into docs/add_console_to_search

time:
2016-06-29T07:48:58Z
class:
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/CustomMustacheFactory.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/JsonEscapingMustacheFactory.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustacheScriptEngineService.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/NoneEscapingMustacheFactory.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheScriptEngineTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/script/mustache/MustacheTests.java
comments:
Mustache: Add util functions to render JSON and join array values

This pull request adds two util functions to the Mustache templating engine:
- {{#toJson}}my_map{{/toJson}} to render a Map parameter as a JSON string
- {{#join}}my_iterable{{/join}} to render any iterable (including arrays) as a comma separated list of values like `1, 2, 3`. It's also possible de change the default delimiter (comma) to something else.

closes #18970

time:
2016-06-29T06:50:01Z
class:
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
comments:
percolator: Use RamDirectory for percolating nested document instead of using multiple MemoryIndex instances with SlowCompositeReaderWrapper workaround

time:
2016-06-28T23:16:26Z
class:
core/src/main/java/org/elasticsearch/ingest/IngestService.java
core/src/main/java/org/elasticsearch/ingest/PipelineStore.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
comments:
Plugins: Make plugins closeable

This change allows Plugin implementions to implement Closeable when they
have resources that should be released. As a first example of how this
can be used, I switched over ingest plugins, which just had the geoip
processor. The ingest framework had chains of closeable to support this,
which is now removed.

time:
2016-06-28T20:39:11Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/Augmentation.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/RegexTests.java
comments:
Painless: add "".replaceAll and "".replaceFirst

These are useful methods in groovy that give you control over
the replacements used:
```
'the quick brown fox'.replaceAll(/[aeiou]/,
		m -> m.group().toUpperCase(Locale.ROOT))
```

time:
2016-06-28T20:20:00Z
class:
core/src/main/java/org/elasticsearch/action/update/UpdateHelper.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TemplateQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java
core/src/main/java/org/elasticsearch/ingest/InternalTemplateService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/heuristics/ScriptHeuristic.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/InternalScriptedMetric.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/scripted/ScriptedMetricAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketscript/BucketScriptPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketselector/BucketSelectorPipelineAggregator.java
core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/sort/ScriptSortBuilder.java
core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java
core/src/test/java/org/elasticsearch/script/FileScriptTests.java
core/src/test/java/org/elasticsearch/script/NativeScriptTests.java
core/src/test/java/org/elasticsearch/script/ScriptContextTests.java
core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java
core/src/test/java/org/elasticsearch/search/sort/AbstractSortTestCase.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ScriptProcessorTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/TransportSearchTemplateAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java
comments:
Scripts: Remove ClusterState from compile api

Stored scripts are pulled from the cluster state, and the current api
requires passing the ClusterState on each call to compile. However, this
means every user of the ScriptService needs to depend on the
ClusterService. Instead, this change makes the ScriptService a
ClusterStateListener. It also simplifies tests a lot, as they no longer
need to create fake cluster states (except when testing stored scripts).

time:
2016-06-28T18:33:55Z
class:
comments:
#19133 Added documentation for aggregation profiling

Added documentation for aggregation profiling

time:
2016-06-28T18:33:29Z
class:
comments:
Added documentation for aggregation profiling

time:
2016-06-28T17:52:07Z
class:
core/src/main/java/org/elasticsearch/ingest/AbstractProcessorFactory.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/Processor.java
core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java
core/src/main/java/org/elasticsearch/plugins/IngestPlugin.java
core/src/test/java/org/elasticsearch/ingest/IngestCloseIT.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AbstractStringProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/AppendProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ConvertProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateIndexNameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/FailProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ForEachProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GrokProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/GsubProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/IngestCommonPlugin.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JoinProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RemoveProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/RenameProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SetProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SortProcessor.java
modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/SplitProcessor.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ConvertProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateIndexNameFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/FailProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GrokProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/GsubProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/JoinProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/LowercaseProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RemoveProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/RenameProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SetProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/SplitProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/TrimProcessorFactoryTests.java
modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/UppercaseProcessorFactoryTests.java
plugins/ingest-attachment/src/main/java/org/elasticsearch/ingest/attachment/AttachmentProcessor.java
plugins/ingest-attachment/src/test/java/org/elasticsearch/ingest/attachment/AttachmentProcessorFactoryTests.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java
plugins/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java
plugins/ingest-geoip/src/test/java/org/elasticsearch/ingest/geoip/GeoIpProcessorFactoryTests.java
test/framework/src/main/java/org/elasticsearch/ingest/TestProcessor.java
comments:
Added IngestPlugin api, cutover common and geoip, changed ingest factory
api to take ProcessorsRegistry

time:
2016-06-28T17:40:25Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/Locals.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/SimpleChecksAdapter.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/WriterConstants.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFunction.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSource.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/LambdaTests.java
comments:
Merge pull request #19092 from rmuir/more_painless_docs

cutover some docs to painless

time:
2016-06-28T15:51:33Z
class:
core/src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedStreamInput.java
core/src/main/java/org/elasticsearch/common/compress/CompressedXContent.java
core/src/main/java/org/elasticsearch/common/compress/Compressor.java
core/src/main/java/org/elasticsearch/common/compress/CompressorFactory.java
core/src/main/java/org/elasticsearch/common/compress/DeflateCompressor.java
core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java
core/src/main/java/org/elasticsearch/repositories/blobstore/ChecksumBlobStoreFormat.java
core/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java
core/src/main/java/org/elasticsearch/transport/netty/NettyTransportChannel.java
core/src/test/java/org/elasticsearch/common/compress/DeflateCompressTests.java
core/src/test/java/org/elasticsearch/common/compress/DeflateCompressedXContentTests.java
core/src/test/java/org/elasticsearch/common/compress/deflate/DeflateCompressedStreamTests.java
core/src/test/java/org/elasticsearch/common/compress/deflate/DeflateXContentTests.java
core/src/test/java/org/elasticsearch/index/mapper/binary/BinaryMappingTests.java
core/src/test/java/org/elasticsearch/snapshots/BlobStoreFormatIT.java
comments:
Cleanup Compressor interface (#19125)

Today we have several deprecated methods, leaking netty interfaces, support for
multiple compressors on the compressor interface. The netty interface can simply
be replaced by BytesReference which we already have an implementation for, all the
others are not used and are removed in this commit.

time:
2016-06-28T15:38:56Z
class:
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
comments:
Fix number of arguments provided to logger calls

time:
2016-06-28T14:52:35Z
class:
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
test/logger-usage/src/main/java/org/elasticsearch/test/loggerusage/ESLoggerUsageChecker.java
test/logger-usage/src/test/java/org/elasticsearch/test/loggerusage/ESLoggerUsageTests.java
comments:
Merge pull request #19126 from ywelsch/fix/reenable-loggerusagechecker

Reenable logger usage checker

time:
2016-06-28T14:51:06Z
class:
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryAndFetchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchScrollQueryThenFetchAsyncAction.java
core/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java
core/src/main/java/org/elasticsearch/common/logging/ESLogger.java
core/src/main/java/org/elasticsearch/discovery/zen/elect/ElectMasterService.java
core/src/main/java/org/elasticsearch/threadpool/ThreadPool.java
core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java
core/src/test/java/org/elasticsearch/cluster/routing/PrimaryTermsTests.java
core/src/test/java/org/elasticsearch/common/util/concurrent/AbstractLifecycleRunnableTests.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
core/src/test/java/org/elasticsearch/indices/store/IndicesStoreIntegrationIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java
comments:
Fix logger usages

time:
2016-06-28T14:48:05Z
class:
test/logger-usage/src/main/java/org/elasticsearch/test/loggerusage/ESLoggerUsageChecker.java
test/logger-usage/src/test/java/org/elasticsearch/test/loggerusage/ESLoggerUsageTests.java
comments:
Re-enable logger usage checks

It was inadvertently disabled after applying code review comments. This commit reenables the logger usage checker and makes it less naggy when encountering logging usages of the form  logger.info(someStringBuilder). Previously it would fail with the error message "First argument must be a string constant so that we can statically ensure proper place holder usage". Now it will only fail in case any arguments are provided as well, for example logger.info(someStringBuilder, 42).

time:
2016-06-28T14:38:56Z
class:
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryIT.java
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/test/java/org/elasticsearch/test/test/InternalTestClusterTests.java
comments:
Testing infra - stablize data folder usage and clean up (#19111)

The plan for persistent node ids ( #17811 ) is to tie the node identity to a file stored in it's data folders. As such it becomes important that nodes in our testing infra have better affinity with their data folders and that their data folders are not cleaned underneath them. The first is important because we fix the random seed used for node id generation (for reproducibility) and allowing the same node to use two different data folders causes two separate nodes to have the same id, which prevents the cluster from forming. The second is important, for example, where a full cluster restart / single node restart need to maintain node identity and wiping the data folders at the wrong moment prevents this.

Concretely this commit does the following:
1) Remove previous attempts to have data folder per role using a prefix. This wasn't effective as it was using the data paths settings which are only used for part of the runs. An attempt to completely separate the paths via the home dir failed due to assumptions made by index custom path about node data folder ordinal uniqueness (see #19076)
2) Change full cluster restarts to start up nodes in the same order their were first created in, only randomly swapping nodes with the same roles.
3) Change test cluster reset methods to first shutdown the unneeded nodes and then re-start the shared nodes that were shut down, so they'll reclaim their data folders.
4) Improve data folder wiping logic and make sure it wipes only folders of "offline" nodes.
5) Add some very basic tests

time:
2016-06-28T14:14:57Z
class:
core/src/test/java/org/elasticsearch/gateway/GatewayIndexStateIT.java
comments:
Fixed tests that assumed that broken settings can be updated

time:
2016-06-28T13:36:09Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
comments:
Merge pull request #19122 from jimferenczi/validate_settings_bis

Validates new dynamic settings from the current state

time:
2016-06-28T13:35:04Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/gateway/Gateway.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
comments:
Validates new dynamic settings from the current state

Thanks to https://github.com/elastic/elasticsearch/pull/19088 the settings are now validated against dynamic updaters on the master.
Though only the new settings are applied to the IndexService created for the validation.
Because of this we cannot check the transition from one value to another in a dynamic updaters.
This change creates the IndexService from the current settings and validates that the new dynamic settings
can replace the current settings.
This change also removes the validation of dynamic settings when an index is opened.
The validation should have occurred when the settings have been updated.

time:
2016-06-28T12:36:24Z
class:
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java
core/src/main/java/org/elasticsearch/action/support/DestructiveOperations.java
core/src/main/java/org/elasticsearch/client/transport/TransportClient.java
core/src/main/java/org/elasticsearch/cluster/ClusterModule.java
core/src/main/java/org/elasticsearch/common/NamedRegistry.java
core/src/main/java/org/elasticsearch/indices/analysis/AnalysisModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/ActionPlugin.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TestTaskPlugin.java
core/src/test/java/org/elasticsearch/cluster/ClusterInfoServiceIT.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportIT.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java
comments:
Pull actions from plugins

Instead of implementing onModule(ActionModule) to register actions,
this has plugins implement ActionPlugin to declare actions. This is
yet another step in cleaning up the plugin infrastructure.

While I was in there I switched AutoCreateIndex and DestructiveOperations
to be eagerly constructed which makes them easier to use when
de-guice-ing the code base.

time:
2016-06-28T10:26:03Z
class:
comments:
Added release notes for 5.0.0-alpha4

time:
2016-06-28T08:37:34Z
class:
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/HistogramTests.java
comments:
[TEST] Fixed bounds calculation for extended bounds in histogram agg empty buckets test

time:
2016-06-28T08:13:19Z
class:
plugins/discovery-azure/src/main/java/org/elasticsearch/cloud/azure/management/AzureComputeServiceImpl.java
comments:
Merge remote-tracking branch 'origin/master'

time:
2016-06-28T08:13:08Z
class:
comments:
Update Java API doc for cluster health

In 995e4eda08be99f72ef56052b3f78ceef9100885 we changed the cluster health Java API.
We need to also change the documentation.

Backport of #19093 in master branch

time:
2016-06-28T08:05:44Z
class:
plugins/discovery-azure/src/main/java/org/elasticsearch/cloud/azure/management/AzureComputeServiceImpl.java
comments:
Make discovery-azure work again

The discovery-plugin has been broken since 2.x because the code was not compliant with the security manager and because plugins have been refactored.

closes #18637, #15630

time:
2016-06-28T08:01:14Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
comments:
Merge branch 'pr/19110-aws-mumbai'

time:
2016-06-28T07:13:19Z
class:
comments:
Tests: Rename task.get to tasks.get

The task.get action got renamed to tasks.get, some tests
did not change this.

Relates #19107

time:
2016-06-28T06:50:50Z
class:
plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java
plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java
comments:
Support new Asia Pacific (Mumbai) ap-south-1 AWS region

AWS [announced](http://www.allthingsdistributed.com/2016/06/introducing-aws-asia-pacific-mumbai-region.html) a new region: Asia Pacific (Mumbai)	`ap-south-1`.

We need to support it for:

* repository-s3: s3.ap-south-1.amazonaws.com or s3-ap-south-1.amazonaws.com
* discovery-ec2: ec2.ap-south-1.amazonaws.com

For reference: http://docs.aws.amazon.com/general/latest/gr/rande.html

Closes #19110.

time:
2016-06-28T00:07:46Z
class:
comments:
[API] separate tasks.list and tasks.get APIs in the json definition (#19107)

time:
2016-06-27T23:54:49Z
class:
comments:
[TEST] refactor search yaml tests (#19109)

time:
2016-06-27T22:41:18Z
class:
core/src/main/java/org/elasticsearch/common/io/stream/Streamable.java
core/src/main/java/org/elasticsearch/common/io/stream/Writeable.java
core/src/main/java/org/elasticsearch/common/unit/TimeValue.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/internal/DefaultSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/FilteredSearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SearchContext.java
core/src/main/java/org/elasticsearch/search/internal/SubSearchContext.java
core/src/main/java/org/elasticsearch/search/query/QueryPhase.java
core/src/test/java/org/elasticsearch/cluster/settings/ClusterSettingsIT.java
core/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java
core/src/test/java/org/elasticsearch/index/IndexingSlowLogTests.java
core/src/test/java/org/elasticsearch/index/SearchSlowLogTests.java
core/src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
core/src/test/java/org/elasticsearch/ingest/PipelineExecutionServiceTests.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/functionscore/DecayFunctionScoreIT.java
core/src/test/java/org/elasticsearch/versioning/SimpleVersioningIT.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java
test/framework/src/main/java/org/elasticsearch/test/TestSearchContext.java
comments:
Keep input time unit when parsing TimeValues


This commit modifies TimeValue parsing to keep the input time unit. This
enables round-trip parsing from instances of String to instances of
TimeValue and vice-versa. With this, this commit removes support for the
unit "w" representing weeks, and also removes support for fractional
values of units (e.g., 0.5s).

Relates #19102

time:
2016-06-27T19:52:29Z
class:
comments:
Merge pull request #19104 from dakrone/add-confdir-prop

Add the integ test node's configuration directory as a system property

time:
2016-06-27T19:49:10Z
class:
comments:
Add the integ test node's configuration directory as a system property

time:
2016-06-27T19:34:36Z
class:
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
comments:
Fix percolator tests

They need their plugin or they'll break!

time:
2016-06-27T18:39:33Z
class:
comments:
Move the build vagrant build listener

That way it doesn't register until we actually try and set up
the vagrant test root. We don't need it all the time.

time:
2016-06-27T18:33:22Z
class:
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
comments:
Fix line length in new indices module tests.

time:
2016-06-27T18:22:53Z
class:
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/MapperPlugin.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java
core/src/test/java/org/elasticsearch/index/mapper/externalvalues/ExternalMapperPlugin.java
core/src/test/java/org/elasticsearch/index/mapper/internal/FieldNamesFieldMapperTests.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorPlugin.java
plugins/mapper-attachments/src/main/java/org/elasticsearch/mapper/attachments/MapperAttachmentsPlugin.java
plugins/mapper-attachments/src/test/java/org/elasticsearch/mapper/attachments/AttachmentUnitTestCase.java
plugins/mapper-murmur3/src/main/java/org/elasticsearch/plugin/mapper/MapperMurmur3Plugin.java
plugins/mapper-size/src/main/java/org/elasticsearch/plugin/mapper/MapperSizePlugin.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeMappingTests.java
test/framework/src/main/java/org/elasticsearch/index/MapperTestUtils.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Merge pull request #19018 from rjernst/mapper_plugin_api

Remove guice from Mapper plugins

time:
2016-06-27T18:22:07Z
class:
comments:
Add migration docs for MapperPlugin

time:
2016-06-27T18:19:59Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/SettingsUpdater.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInputReader.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/index/IndexModule.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerProviderFactory.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/indices/analysis/AnalysisModule.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/AnalysisPlugin.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/ScriptPlugin.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramAggregatorFactory.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBuilder.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TestTaskPlugin.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/action/support/nodes/TransportNodesActionTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodesTests.java
core/src/test/java/org/elasticsearch/common/io/stream/StreamTests.java
core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/gateway/AsyncShardFetchTests.java
core/src/test/java/org/elasticsearch/gateway/RecoveryFromGatewayIT.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/IndexSettingsTests.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisServiceTests.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisTestsHelper.java
core/src/test/java/org/elasticsearch/index/analysis/CharFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/CompoundAnalysisTests.java
core/src/test/java/org/elasticsearch/index/analysis/PatternCaptureTokenFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/StopAnalyzerTests.java
core/src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTests.java
core/src/test/java/org/elasticsearch/index/codec/CodecTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
core/src/test/java/org/elasticsearch/indices/analysis/DummyAnalysisPlugin.java
core/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractGeoTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeQueryTests.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryIT.java
core/src/test/java/org/elasticsearch/search/source/SourceFetchingIT.java
core/src/test/java/org/elasticsearch/update/TimestampTTLBWIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/GeoDistanceTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/HistogramTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SearchFieldsTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/percolator/src/main/java/org/elasticsearch/percolator/ExtractQueryTermsService.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/test/java/org/elasticsearch/percolator/ExtractQueryTermsServiceTests.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorQuerySearchIT.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
plugins/analysis-icu/src/main/java/org/elasticsearch/plugin/analysis/icu/AnalysisICUPlugin.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/IcuTokenizerFactoryTests.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuAnalysisTests.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuNormalizerCharFilterTests.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/plugin/analysis/kuromoji/AnalysisKuromojiPlugin.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/KuromojiAnalysisTests.java
plugins/analysis-phonetic/src/main/java/org/elasticsearch/plugin/analysis/AnalysisPhoneticPlugin.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/SimplePhoneticAnalysisTests.java
plugins/analysis-smartcn/src/main/java/org/elasticsearch/plugin/analysis/smartcn/AnalysisSmartChinesePlugin.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/SimpleSmartChineseAnalysisTests.java
plugins/analysis-stempel/src/main/java/org/elasticsearch/plugin/analysis/stempel/AnalysisStempelPlugin.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/PolishAnalysisTests.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/SimplePolishTokenFilterTests.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeFieldMapperUpgradeTests.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettings.java
plugins/repository-azure/src/main/java/org/elasticsearch/plugin/repository/azure/AzureRepositoryPlugin.java
test/framework/src/main/java/org/elasticsearch/index/MapperTestUtils.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESAllocationTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Merge branch 'master' into mapper_plugin_api

time:
2016-06-27T18:17:58Z
class:
core/src/main/java/org/elasticsearch/indices/IndicesModule.java
core/src/test/java/org/elasticsearch/indices/IndicesModuleTests.java
comments:
Add duplicate mapper detection and tests

time:
2016-06-27T16:13:06Z
class:
comments:
Randomize packaging upgrade test

This commit adds randomization for the packaging upgrade test. In
particular, we extract a list of the released version of Elasticsearch
from Maven Central and randomize the selection of the version to upgrade
from. The randomization is repeatable, and supports the tests.seed
property. Specific versions can be tested by setting the property
tests.packaging.upgrade.from.versions.

Relates #19033

time:
2016-06-27T15:20:32Z
class:
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractGeoTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/source/SourceFetchingIT.java
core/src/test/java/org/elasticsearch/update/TimestampTTLBWIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/GeoDistanceTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SearchFieldsTests.java
modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractBulkByScrollRequest.java
plugins/mapper-size/src/test/java/org/elasticsearch/index/mapper/size/SizeFieldMapperUpgradeTests.java
comments:
Revert "Rename `fields` to `stored_fields` and add `docvalue_fields`"

This reverts commit 2f46f53dc8feb78412e6d648751ffe97b1e35119.

time:
2016-06-27T15:18:26Z
class:
core/src/main/java/org/elasticsearch/action/admin/cluster/settings/SettingsUpdater.java
core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java
core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java
core/src/main/java/org/elasticsearch/index/IndexModule.java
core/src/main/java/org/elasticsearch/index/IndexSettings.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/snapshots/RestoreService.java
core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java
core/src/test/java/org/elasticsearch/indices/cluster/ClusterStateChanges.java
core/src/test/java/org/elasticsearch/indices/settings/UpdateSettingsIT.java
comments:
Validate settings against dynamic updaters on the master (#19088)

Today all settings are only validated against their validators
that are available when settings are registered. Yet, some settings updaters
have validators that are dynamic ie. their validation depends on other variables
that are only available at runtime. We do not run those validators when settings
are updated causing index updates to fail on the data nodes instead of on the master.

Relates to #19046

time:
2016-06-27T13:55:16Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/Locals.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/SimpleChecksAdapter.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/WriterConstants.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFunction.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SSource.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/BasicStatementTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/LambdaTests.java
comments:
cutover some docs to painless

time:
2016-06-27T13:43:56Z
class:
comments:
Merge pull request #19090 from tlrx/fix-typos-in-how-to-docs

Fix documentation typo in How-To docs

time:
2016-06-27T13:07:37Z
class:
core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AbstractHistogramAggregatorFactory.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/HistogramTests.java
comments:
Pass resolved extended bounds to unmapped histogram aggregator

Previous to this change the unresolved extended bounds was passed into the histogram aggregator which meant extendedbounds.min and extendedbounds.max was passed through as null. This had two effects on the histogram aggregator:

1. If the histogram aggregator was unmapped across all shards, the reduce phase would not add buckets for the extended bounds and the response would contain zero buckets
2. If the histogram aggregator was not unmapped in some shards, the reduce phase might sometimes chose to reduce based on the unmapped shard response and therefore the extended bounds would be ignored.

This change resolves the extended bounds in the unmapped case and solves the above two issues.

Closes #19009

time:
2016-06-27T13:05:06Z
class:
core/src/main/java/org/elasticsearch/action/support/nodes/BaseNodesRequest.java
core/src/main/java/org/elasticsearch/action/support/nodes/TransportNodesAction.java
core/src/main/java/org/elasticsearch/action/support/tasks/TransportTasksAction.java
core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java
core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInputReader.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/gateway/AsyncShardFetch.java
core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java
core/src/main/java/org/elasticsearch/gateway/TransportNodesListGatewayStartedShards.java
core/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java
core/src/main/java/org/elasticsearch/search/aggregations/bucket/range/AbstractRangeBuilder.java
core/src/test/java/org/elasticsearch/action/admin/cluster/node/tasks/TestTaskPlugin.java
core/src/test/java/org/elasticsearch/action/support/nodes/TransportNodesActionTests.java
core/src/test/java/org/elasticsearch/cluster/node/DiscoveryNodesTests.java
core/src/test/java/org/elasticsearch/common/io/stream/StreamTests.java
core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java
core/src/test/java/org/elasticsearch/gateway/AsyncShardFetchTests.java
core/src/test/java/org/elasticsearch/gateway/RecoveryFromGatewayIT.java
core/src/test/java/org/elasticsearch/gateway/ReplicaShardAllocatorTests.java
core/src/test/java/org/elasticsearch/index/store/StoreTests.java
test/framework/src/main/java/org/elasticsearch/test/ESAllocationTestCase.java
comments:
Make shard store fetch less dependent on the current cluster state, both on master and non data nodes (#19044)

#18938 has changed the timing in which we send out to nodes to fetch their shard stores. Instead of doing this after the cluster state resulting of the node's join was published, #18938 made it be sent concurrently to the publishing processes. This revealed a couple of points where the shard store fetching is dependent of the current state of affairs of the cluster state, both on the master and the data nodes. The problem discovered were already present without #18938 but required a failure/extreme situations to make them happen.This PR tries to remove as much as possible of these dependencies making shard store fetching simpler and make the way to re-introduce #18938 which was reverted.

These are the notable changes:
1) Allow TransportNodesAction (of which shard store fetching is derived) callers to supply concrete disco nodes, so it won't need the cluster state to resolve them. This was a problem because the cluster state containing the needed nodes was not yet made available through ClusterService. Note that long term we can expect the rest layer to resolve node ids to concrete nodes, making this mode the only one needed.
2) The data node relied on the cluster state to have the relevant index meta data so it can find data when custom paths are used. We now fall back to read the meta data from disk if needed.
3) The data node was relying on it's own IndexService state to indicate whether the data it has corresponds to an existing allocation. This is of course something it can not know until it got (and processed) the new cluster state from the master. This flag in the response is now removed. This is not a problem because we used that flag to protect against double assigning of a shard to the same node, but we are already protected from it by the allocation deciders.
4) I removed the redundant filterNodeIds method in TransportNodesAction - if people want to filter they can override resolveRequest.

time:
2016-06-27T12:49:37Z
class:
comments:
Fix documentation typo in How-To docs

time:
2016-06-27T12:20:23Z
class:
comments:
fixed typo 'if' -> 'is' (#19051)

time:
2016-06-27T10:04:59Z
class:
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageService.java
plugins/repository-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageSettings.java
plugins/repository-azure/src/main/java/org/elasticsearch/plugin/repository/azure/AzureRepositoryPlugin.java
comments:
Register group setting for repository-azure accounts

Since the Settings infrastructure has been improved, a group setting must be registered by the repository-azure plugin to allow settings like "cloud.azure.storage.my_account.account" to be coherent with Azure plugin documentation.

time:
2016-06-27T07:37:28Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeQueryTests.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryIT.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorQuerySearchIT.java
comments:
Merges PR #18957

This commit fixes several NPEs caused by implicitly performing a get request for a document that exists with its _source disabled and then trying to access the source. Instead of causing an NPE the following queries will throw an exception with a "source disabled" message (similar behavior as if the document does not exist).:
- GeoShape query for pre-indexed shape (throws IllegalArgumentException)
- Percolate query for an existing document (throws IllegalArgumentException)

A Terms query with a lookup will ignore the document if the source does not exist (same as if the document does not exist).

GET and HEAD requests for the document _source will return a 404 if the source is disabled (even if the document exists).

time:
2016-06-27T07:00:13Z
class:
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
comments:
fix checkstyle issue

time:
2016-06-27T05:42:44Z
class:
modules/percolator/src/main/java/org/elasticsearch/percolator/ExtractQueryTermsService.java
modules/percolator/src/test/java/org/elasticsearch/percolator/ExtractQueryTermsServiceTests.java
comments:
percolator: Add support for the synonym query.

time:
2016-06-26T15:44:09Z
class:
comments:
Merge pull request #19080 from damienalexandre/patch-4

Rename plainless into painless in migration doc

time:
2016-06-26T15:41:34Z
class:
comments:
Rename plainless into painless in migration doc

The scripting language was wrongly named.

time:
2016-06-26T11:15:42Z
class:
core/src/main/java/org/elasticsearch/index/analysis/AnalysisRegistry.java
core/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java
core/src/main/java/org/elasticsearch/index/analysis/PreBuiltAnalyzerProviderFactory.java
core/src/main/java/org/elasticsearch/indices/analysis/AnalysisModule.java
core/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/plugins/AnalysisPlugin.java
core/src/main/java/org/elasticsearch/plugins/Plugin.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/plugins/ScriptPlugin.java
core/src/test/java/org/elasticsearch/action/admin/indices/TransportAnalyzeActionTests.java
core/src/test/java/org/elasticsearch/index/IndexModuleTests.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisServiceTests.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisTestsHelper.java
core/src/test/java/org/elasticsearch/index/analysis/CharFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/CompoundAnalysisTests.java
core/src/test/java/org/elasticsearch/index/analysis/PatternCaptureTokenFilterTests.java
core/src/test/java/org/elasticsearch/index/analysis/StopAnalyzerTests.java
core/src/test/java/org/elasticsearch/index/analysis/synonyms/SynonymsAnalysisTests.java
core/src/test/java/org/elasticsearch/index/codec/CodecTests.java
core/src/test/java/org/elasticsearch/indices/analysis/AnalysisModuleTests.java
core/src/test/java/org/elasticsearch/indices/analysis/DummyAnalysisPlugin.java
core/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
plugins/analysis-icu/src/main/java/org/elasticsearch/plugin/analysis/icu/AnalysisICUPlugin.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/IcuTokenizerFactoryTests.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuAnalysisTests.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java
plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuNormalizerCharFilterTests.java
plugins/analysis-kuromoji/src/main/java/org/elasticsearch/plugin/analysis/kuromoji/AnalysisKuromojiPlugin.java
plugins/analysis-kuromoji/src/test/java/org/elasticsearch/index/analysis/KuromojiAnalysisTests.java
plugins/analysis-phonetic/src/main/java/org/elasticsearch/plugin/analysis/AnalysisPhoneticPlugin.java
plugins/analysis-phonetic/src/test/java/org/elasticsearch/index/analysis/SimplePhoneticAnalysisTests.java
plugins/analysis-smartcn/src/main/java/org/elasticsearch/plugin/analysis/smartcn/AnalysisSmartChinesePlugin.java
plugins/analysis-smartcn/src/test/java/org/elasticsearch/index/analysis/SimpleSmartChineseAnalysisTests.java
plugins/analysis-stempel/src/main/java/org/elasticsearch/plugin/analysis/stempel/AnalysisStempelPlugin.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/PolishAnalysisTests.java
plugins/analysis-stempel/src/test/java/org/elasticsearch/index/analysis/SimplePolishTokenFilterTests.java
test/framework/src/main/java/org/elasticsearch/index/MapperTestUtils.java
test/framework/src/main/java/org/elasticsearch/test/AbstractQueryTestCase.java
test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java
comments:
Switch analysis from push to pull

Instead of plugins calling `registerTokenizer` to extend the analyzer
they now instead have to implement `AnalysisPlugin` and override
`getTokenizer`. This lines up extending plugins in with extending
scripts. This allows `AnalysisModule` to construct the `AnalysisRegistry`
immediately as part of its constructor which makes testing anslysis
much simpler.

This also moves the default analysis configuration into `AnalysisModule`
which is how search is setup.

Like `ScriptModule`, `AnalysisModule` no longer extends `AbstractModule`.
Instead it is only responsible for building `AnslysisRegistry`. We still
bind `AnalysisRegistry` but we only do so in `Node`. This is means it
is available at module construction time so we slowly remove the need to
bind it in guice.

time:
2016-06-25T20:18:25Z
class:
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
comments:
Require timeout units when parsing query body

Today when parsing the timeout field in a query body, if time units are
supplied the parser throws a NumberFormatException. Addtionally, the
parsing allows the timeout field to not specify units (it assumes
milliseconds). This commit fixes this behavior by not only allowing time
units to be specified but requires time units to be specified. This is
consistent with the documented behavior and the behavior in 2.x.

Relates #19077

time:
2016-06-25T19:23:41Z
class:
core/src/test/java/org/elasticsearch/index/IndexSettingsTests.java
comments:
[TEST] Add unittest for settings update validation

time:
2016-06-25T05:03:03Z
class:
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/index/query/GeoShapeQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/TermsQueryBuilder.java
core/src/main/java/org/elasticsearch/rest/action/get/RestGetSourceAction.java
core/src/main/java/org/elasticsearch/rest/action/get/RestHeadAction.java
core/src/test/java/org/elasticsearch/search/geo/GeoShapeQueryTests.java
core/src/test/java/org/elasticsearch/search/query/SearchQueryIT.java
modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java
modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorQuerySearchIT.java
comments:
Fix NPEs due to disabled source
This commit fixes several NPEs caused by implicitly performing a get request for a document that exists with its _source disabled and then trying to access the source. Instead of causing an NPE the following queries will throw an exception with a "source disabled" message (similar behavior as if the document does not exist).:
- GeoShape query for pre-indexed shape (throws IllegalArgumentException)
- Percolate query for an existing document (throws IllegalArgumentException)

A Terms query with a lookup will ignore the document if the source does not exist (same as if the document does not exist).

GET and HEAD requests for the document _source will return a 404 if the source is disabled (even if the document exists).

time:
2016-06-24T18:32:45Z
class:
comments:
Revert slow tests heartbeat

This commit reverts the slow tests heartbeat added in
b6fbd18e091de7b22ba8020241d01ce5dfd8accc. The heartbeat has not served
its stated purpose of drawing attention to slow tests, and the heartbeat
can kill builds with SELinux enforcing enabled. While the heartbeats can
be disabled via the environment variable PULSE_SERVER, and SELinux
policy files can be changed, since the heartbeats are not accomplishing
their intended purpose they should be removed.

Relates #19071

time:
2016-06-24T18:15:06Z
class:
buildSrc/src/main/java/org/elasticsearch/test/NamingConventionsCheck.java
client/rest/src/main/java/org/elasticsearch/client/DeadHostState.java
client/rest/src/main/java/org/elasticsearch/client/HttpDeleteWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/HttpGetWithEntity.java
client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java
client/rest/src/main/java/org/elasticsearch/client/Response.java
client/rest/src/main/java/org/elasticsearch/client/ResponseException.java
client/rest/src/main/java/org/elasticsearch/client/RestClient.java
client/rest/src/test/java/org/elasticsearch/client/CloseableBasicHttpResponse.java
client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientBuilderTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientIntegTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientMultipleHostsTests.java
client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostTests.java
client/rest/src/test/java/org/elasticsearch/client/TrackingFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/HostsSniffer.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/SniffOnFailureListener.java
client/sniffer/src/main/java/org/elasticsearch/client/sniff/Sniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferBuilderTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/HostsSnifferTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/MockHostsSniffer.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SniffOnFailureListenerTests.java
client/sniffer/src/test/java/org/elasticsearch/client/sniff/SnifferBuilderTests.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestCase.java
client/test/src/main/java/org/elasticsearch/client/RestClientTestUtil.java
core/src/main/java/org/elasticsearch/action/ActionModule.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoRequestBuilder.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java
core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/TransportNodesInfoAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/RenderSearchTemplateRequest.java
core/src/main/java/org/elasticsearch/action/admin/cluster/validate/template/TransportRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/action/ingest/TrackingResultProcessor.java
core/src/main/java/org/elasticsearch/action/search/AbstractSearchAsyncAction.java
core/src/main/java/org/elasticsearch/action/search/SearchRequest.java
core/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java
core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java
core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java
core/src/main/java/org/elasticsearch/client/ClusterAdminClient.java
core/src/main/java/org/elasticsearch/client/support/AbstractClient.java
core/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java
core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java
core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java
core/src/main/java/org/elasticsearch/common/network/NetworkModule.java
core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java
core/src/main/java/org/elasticsearch/discovery/Discovery.java
core/src/main/java/org/elasticsearch/discovery/local/LocalDiscovery.java
core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java
core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java
core/src/main/java/org/elasticsearch/index/analysis/ASCIIFoldingTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ArabicNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/CJKWidthFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/DecimalDigitFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/ElisionTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/GermanNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/HindiNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/IndicNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/LowerCaseTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/LowerCaseTokenizerFactory.java
core/src/main/java/org/elasticsearch/index/analysis/MappingCharFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/MultiTermAwareComponent.java
core/src/main/java/org/elasticsearch/index/analysis/PersianNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SerbianNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/SoraniNormalizationFilterFactory.java
core/src/main/java/org/elasticsearch/index/analysis/UpperCaseTokenFilterFactory.java
core/src/main/java/org/elasticsearch/index/engine/Engine.java
core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java
core/src/main/java/org/elasticsearch/index/engine/LiveVersionMap.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java
core/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java
core/src/main/java/org/elasticsearch/index/query/BoolQueryBuilder.java
core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java
core/src/main/java/org/elasticsearch/index/translog/ChannelFactory.java
core/src/main/java/org/elasticsearch/index/translog/Checkpoint.java
core/src/main/java/org/elasticsearch/index/translog/Translog.java
core/src/main/java/org/elasticsearch/index/translog/TranslogWriter.java
core/src/main/java/org/elasticsearch/indices/IndicesService.java
core/src/main/java/org/elasticsearch/ingest/ConfigurationUtils.java
core/src/main/java/org/elasticsearch/ingest/Pipeline.java
core/src/main/java/org/elasticsearch/node/Node.java
core/src/main/java/org/elasticsearch/node/service/NodeService.java
core/src/main/java/org/elasticsearch/plugins/PluginsService.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/node/info/RestNodesInfoAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/cluster/storedscripts/RestPutStoredScriptAction.java
core/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/template/RestRenderSearchTemplateAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestMultiSearchAction.java
core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java
core/src/main/java/org/elasticsearch/script/ScriptModule.java
core/src/main/java/org/elasticsearch/script/ScriptService.java
core/src/main/java/org/elasticsearch/script/ScriptSettings.java
core/src/main/java/org/elasticsearch/search/SearchService.java
core/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregationBuilder.java
core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java
core/src/main/java/org/elasticsearch/search/fetch/innerhits/InnerHitsFetchSubPhase.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchLocalRequest.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchRequest.java
core/src/main/java/org/elasticsearch/search/internal/ShardSearchTransportRequest.java
core/src/main/java/org/elasticsearch/tasks/PersistedTaskInfo.java
core/src/main/java/org/elasticsearch/tasks/TaskManager.java
core/src/test/java/org/elasticsearch/ExceptionSerializationTests.java
core/src/test/java/org/elasticsearch/action/admin/indices/exists/IndicesExistsIT.java
core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java
core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java
core/src/test/java/org/elasticsearch/action/search/MultiSearchRequestTests.java
core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java
core/src/test/java/org/elasticsearch/cluster/SpecificMasterNodesIT.java
core/src/test/java/org/elasticsearch/cluster/block/ClusterBlockTests.java
core/src/test/java/org/elasticsearch/common/lucene/LuceneTests.java
core/src/test/java/org/elasticsearch/common/network/NetworkModuleTests.java
core/src/test/java/org/elasticsearch/discovery/zen/NodeJoinControllerTests.java
core/src/test/java/org/elasticsearch/get/GetActionIT.java
core/src/test/java/org/elasticsearch/http/netty/NettyHttpCompressionIT.java
core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java
core/src/test/java/org/elasticsearch/index/SearchSlowLogTests.java
core/src/test/java/org/elasticsearch/index/analysis/AnalysisFactoryTests.java
core/src/test/java/org/elasticsearch/index/mapper/all/SimpleAllMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/core/TokenCountFieldMapperIntegrationIT.java
core/src/test/java/org/elasticsearch/index/mapper/geo/GeoPointFieldMapperTests.java
core/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/ttl/TTLMappingTests.java
core/src/test/java/org/elasticsearch/index/mapper/typelevels/ParseMappingTypeLevelTests.java
core/src/test/java/org/elasticsearch/index/mapper/update/UpdateMappingOnClusterIT.java
core/src/test/java/org/elasticsearch/index/mapper/update/UpdateMappingTests.java
core/src/test/java/org/elasticsearch/index/query/BoolQueryBuilderTests.java
core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java
core/src/test/java/org/elasticsearch/index/store/ExceptionRetryIT.java
core/src/test/java/org/elasticsearch/index/translog/TranslogTests.java
core/src/test/java/org/elasticsearch/indices/stats/IndexStatsIT.java
core/src/test/java/org/elasticsearch/indices/template/SimpleIndexTemplateIT.java
core/src/test/java/org/elasticsearch/ingest/PipelineFactoryTests.java
core/src/test/java/org/elasticsearch/nodesinfo/NodeInfoStreamingTests.java
core/src/test/java/org/elasticsearch/nodesinfo/SimpleNodesInfoIT.java
core/src/test/java/org/elasticsearch/options/detailederrors/DetailedErrorsDisabledIT.java
core/src/test/java/org/elasticsearch/options/detailederrors/DetailedErrorsEnabledIT.java
core/src/test/java/org/elasticsearch/plugins/ResponseHeaderPluginIT.java
core/src/test/java/org/elasticsearch/recovery/RelocationIT.java
core/src/test/java/org/elasticsearch/rest/CorsNotSetIT.java
core/src/test/java/org/elasticsearch/rest/CorsRegexIT.java
core/src/test/java/org/elasticsearch/rest/action/main/RestMainActionIT.java
core/src/test/java/org/elasticsearch/script/NativeScriptTests.java
core/src/test/java/org/elasticsearch/script/StoredScriptsIT.java
core/src/test/java/org/elasticsearch/search/aggregations/AggregatorParsingTests.java
core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/DateHistogramIT.java
core/src/test/java/org/elasticsearch/search/aggregations/bucket/IpRangeIT.java
core/src/test/java/org/elasticsearch/search/aggregations/metrics/AbstractGeoTestCase.java
core/src/test/java/org/elasticsearch/search/builder/SearchSourceBuilderTests.java
core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java
core/src/test/java/org/elasticsearch/search/geo/GeoFilterIT.java
core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java
core/src/test/java/org/elasticsearch/search/sort/FieldSortIT.java
core/src/test/java/org/elasticsearch/search/source/SourceFetchingIT.java
core/src/test/java/org/elasticsearch/test/NoopDiscovery.java
core/src/test/java/org/elasticsearch/timestamp/SimpleTimestampIT.java
core/src/test/java/org/elasticsearch/transport/ContextAndHeaderTransportIT.java
core/src/test/java/org/elasticsearch/ttl/SimpleTTLIT.java
core/src/test/java/org/elasticsearch/update/TimestampTTLBWIT.java
core/src/test/java/org/elasticsearch/update/UpdateIT.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/GeoDistanceTests.java
modules/lang-groovy/src/test/java/org/elasticsearch/messy/tests/SearchFieldsTests.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/MultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/MultiSearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/MultiSearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/MultiSearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/SearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/SearchTemplateRequest.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/SearchTemplateRequestBuilder.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/SearchTemplateResponse.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/TransportMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/action/search/template/TransportSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestDeleteSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestGetSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestMultiSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestPutSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestRenderSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/rest/action/search/template/RestSearchTemplateAction.java
modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/MustachePlugin.java
modules/lang-mustache/src/test/java/org/elasticsearch/action/search/template/MultiSearchTemplateIT.java
modules/lang-mustache/src/test/java/org/elasticsearch/action/search/template/MultiSearchTemplateRequestTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/action/search/template/SearchTemplateRequestTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/RenderSearchTemplateTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryParserTests.java
modules/lang-mustache/src/test/java/org/elasticsearch/messy/tests/TemplateQueryTests.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/Augmentation.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/MethodWriter.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EInstanceof.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EListInit.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EMapInit.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/LNewArray.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SDo.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/SFor.java
comments:
Merge branch 'master' into mapper_plugin_api

time:
2016-06-24T16:52:30Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/Augmentation.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EInstanceof.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/package-info.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/AugmentationTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ComparisonTests.java
comments:
Merge pull request #19065 from rmuir/help_painless_docs

Bring painless docs closer to reality

time:
2016-06-24T16:44:57Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EInstanceof.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ComparisonTests.java
comments:
fix the primitive case of instanceof

time:
2016-06-24T16:18:02Z
class:
comments:
docs: update example for finding percolator where query terms couldn't be extracted successfully

time:
2016-06-24T16:06:41Z
class:
modules/lang-painless/src/main/java/org/elasticsearch/painless/Augmentation.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessLexer.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParser.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserBaseVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/PainlessParserVisitor.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/antlr/Walker.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EInstanceof.java
modules/lang-painless/src/main/java/org/elasticsearch/painless/node/package-info.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/AugmentationTests.java
modules/lang-painless/src/test/java/org/elasticsearch/painless/ComparisonTests.java
comments:
Bring painless docs closer to reality

